<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-3TZHCPSK23"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-3TZHCPSK23');
    </script>
    <meta name="theme-color" content="#F97316">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="ListNest">
    <meta name="description" content="ListNest - הקן המשפחתי לרשימות קניות חכמות עם שיתוף בזמן אמת">
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="icons/icon-192x192.png">
    <title>ListNest - רשימת קניות משפחתית חכמה</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Heebo:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/tesseract.js@5.0.4/dist/tesseract.min.js"></script>
    <script src="https://unpkg.com/qrcode-generator@1.4.4/qrcode.js"></script>
    <script>tailwind.config = { darkMode: 'class' }</script>
    <style>
        * { font-family: 'Heebo', sans-serif; }
        .glass { background: rgba(255, 255, 255, 0.9); backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px); border: 1px solid rgba(255, 255, 255, 0.2); }
        .dark .glass { background: rgba(30, 41, 59, 0.9); border: 1px solid rgba(255, 255, 255, 0.1); }
        .gradient-bg { background: linear-gradient(135deg, #F97316 0%, #FB923C 50%, #FBBF24 100%); }
        .dark .gradient-bg { background: linear-gradient(135deg, #7C2D12 0%, #9A3412 50%, #B45309 100%); }
        .btn-gradient { background: linear-gradient(135deg, #F97316 0%, #FB923C 100%); }
        .btn-gradient:hover { background: linear-gradient(135deg, #EA580C 0%, #F97316 100%); transform: translateY(-2px); box-shadow: 0 10px 40px rgba(249, 115, 22, 0.4); }
        .card-hover { transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); }
        .card-hover:hover { transform: translateY(-4px) scale(1.02); }
        @keyframes float { 0%, 100% { transform: translateY(0px); } 50% { transform: translateY(-10px); } }
        .float { animation: float 3s ease-in-out infinite; }
        @keyframes shimmer { 0% { background-position: -200% 0; } 100% { background-position: 200% 0; } }
        .shimmer { background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent); background-size: 200% 100%; animation: shimmer 2s infinite; }
        .progress-animate { background: linear-gradient(90deg, #F97316, #FB923C, #FBBF24, #FB923C, #F97316); background-size: 200% 100%; animation: shimmer 2s linear infinite; }
        .text-gradient { background: linear-gradient(135deg, #F97316 0%, #FBBF24 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        input:focus { outline: none; box-shadow: 0 0 0 3px rgba(249, 115, 22, 0.3); }
        .scrollbar-thin::-webkit-scrollbar { width: 6px; }
        .scrollbar-thin::-webkit-scrollbar-track { background: transparent; }
        .scrollbar-thin::-webkit-scrollbar-thumb { background: rgba(99, 102, 241, 0.3); border-radius: 3px; }
        .scrollbar-thin::-webkit-scrollbar-thumb:hover { background: rgba(99, 102, 241, 0.5); }

        /* Item enter/exit animations */
        @keyframes itemEnter {
            from { opacity: 0; transform: translateX(20px); max-height: 0; }
            to { opacity: 1; transform: translateX(0); max-height: 200px; }
        }
        @keyframes itemExit {
            from { opacity: 1; transform: translateX(0); max-height: 200px; }
            to { opacity: 0; transform: translateX(-30px); max-height: 0; margin: 0; padding: 0; }
        }
        .item-enter { animation: itemEnter 0.3s ease-out forwards; }
        .item-exit { animation: itemExit 0.3s ease-out forwards; overflow: hidden; }

        /* Sync status indicator */
        .sync-indicator {
            position: fixed;
            top: 16px;
            left: 16px;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 6px;
            z-index: 1000;
            backdrop-filter: blur(10px);
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .sync-indicator.online { background: rgba(16, 185, 129, 0.9); color: white; }
        .sync-indicator.offline { background: rgba(239, 68, 68, 0.9); color: white; }
        .sync-indicator.syncing { background: rgba(245, 158, 11, 0.9); color: white; }
        @keyframes syncSpin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        .sync-spin { animation: syncSpin 1s linear infinite; }

        /* Sticky category header */
        .sticky-category-header {
            position: sticky;
            top: 0;
            z-index: 30;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 8px 16px;
            margin: -24px -24px 16px -24px;
            border-bottom: 1px solid rgba(0,0,0,0.1);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .dark .sticky-category-header {
            background: rgba(30, 41, 59, 0.95);
            border-bottom-color: rgba(255,255,255,0.1);
        }

        /* Swipe gesture styles - Enhanced */
        .swipe-container { position: relative; overflow: hidden; touch-action: pan-y pinch-zoom; border-radius: 16px; }
        .swipe-background { position: absolute; top: 0; bottom: 0; width: 100%; display: flex; align-items: center; padding: 0 24px; border-radius: 16px; }
        .swipe-bg-right { right: 0; justify-content: flex-start; background: linear-gradient(135deg, #10b981 0%, #059669 100%); }
        .swipe-bg-left { left: 0; justify-content: flex-end; background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); }
        .swipe-content { position: relative; z-index: 2; background: inherit; transition: transform 0.15s cubic-bezier(0.4, 0, 0.2, 1); }
        .swipe-content.swiping { transition: none; }
        .swipe-indicator { display: flex; flex-direction: column; align-items: center; gap: 4px; }
        .swipe-icon { color: white; font-size: 1.25rem; font-weight: 700; opacity: 0; transform: scale(0.5) translateY(10px); transition: all 0.15s cubic-bezier(0.4, 0, 0.2, 1); }
        .swipe-icon.visible { opacity: 1; transform: scale(1) translateY(0); }
        .swipe-icon-emoji { font-size: 1.75rem; }

        /* Modern Product Card - Clean & Professional */
        .product-card {
            background: white;
            border-radius: 12px;
            padding: 12px 16px;
            border: 1px solid #e5e7eb;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
            transition: all 0.15s ease;
            position: relative;
        }
        .dark .product-card {
            background: #1f2937;
            border-color: #374151;
        }
        .product-card:active { transform: scale(0.99); }
        .product-card.purchased {
            background: linear-gradient(135deg, #ecfdf5 0%, #d1fae5 100%);
            border-color: #a7f3d0;
        }
        .dark .product-card.purchased {
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.12) 0%, rgba(5, 150, 105, 0.18) 100%);
            border-color: rgba(16, 185, 129, 0.4);
        }

        /* Clean item row layout */
        .item-row {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        .item-checkbox {
            width: 24px;
            height: 24px;
            border-radius: 8px;
            border: 2px solid #d1d5db;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            cursor: pointer;
            transition: all 0.15s ease;
        }
        .item-checkbox:hover { border-color: #10b981; background: #ecfdf5; }
        .item-checkbox.checked {
            background: #10b981;
            border-color: #10b981;
        }
        .item-name {
            flex: 1;
            font-size: 1rem;
            font-weight: 500;
            color: #1f2937;
            line-height: 1.4;
        }
        .dark .item-name { color: #f3f4f6; }
        .item-name.purchased {
            color: #9ca3af;
            text-decoration: line-through;
        }
        .item-qty-badge {
            background: linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%);
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.875rem;
            font-weight: 600;
            color: #4b5563;
            cursor: pointer;
            transition: all 0.15s ease;
            min-width: 40px;
            text-align: center;
        }
        .dark .item-qty-badge {
            background: linear-gradient(135deg, #374151 0%, #4b5563 100%);
            color: #e5e7eb;
        }
        .item-qty-badge:hover { background: linear-gradient(135deg, #e5e7eb 0%, #d1d5db 100%); }
        .item-menu-btn {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #9ca3af;
            cursor: pointer;
            transition: all 0.15s ease;
        }
        .item-menu-btn:hover { background: #f3f4f6; color: #6b7280; }
        .dark .item-menu-btn:hover { background: #374151; color: #d1d5db; }

        /* Item actions menu */
        .item-menu-backdrop {
            position: fixed;
            inset: 0;
            z-index: 40;
        }
        .item-actions-menu {
            position: absolute;
            top: 100%;
            left: 8px;
            right: 8px;
            background: white;
            border: 1px solid #e5e7eb;
            border-radius: 12px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
            margin-top: 4px;
            z-index: 50;
            overflow: hidden;
            animation: slideDown 0.15s ease;
        }
        .dark .item-actions-menu {
            background: #1f2937;
            border-color: #374151;
        }
        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-8px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .item-action-btn {
            width: 100%;
            padding: 12px 16px;
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 0.9375rem;
            color: #4b5563;
            transition: background 0.1s ease;
            border: none;
            background: none;
            cursor: pointer;
            text-align: right;
        }
        .dark .item-action-btn { color: #d1d5db; }
        .item-action-btn:hover { background: #f9fafb; }
        .dark .item-action-btn:hover { background: #374151; }
        .item-action-btn.danger { color: #ef4444; }
        .item-action-btn.danger:hover { background: #fef2f2; }
        .dark .item-action-btn.danger:hover { background: rgba(239,68,68,0.1); }

        /* Item note badge */
        .item-note-badge {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            background: #fef3c7;
            color: #92400e;
            padding: 2px 8px;
            border-radius: 6px;
            font-size: 0.75rem;
            font-weight: 500;
            margin-top: 4px;
        }
        .dark .item-note-badge {
            background: rgba(251, 191, 36, 0.2);
            color: #fbbf24;
        }

        /* Item status badges */
        .item-status {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            padding: 2px 8px;
            border-radius: 6px;
            font-size: 0.75rem;
            font-weight: 500;
            margin-top: 4px;
        }
        .item-status.postponed {
            background: #ffedd5;
            color: #c2410c;
        }
        .dark .item-status.postponed {
            background: rgba(251, 146, 60, 0.2);
            color: #fb923c;
        }
        .item-status.purchased-by {
            background: #d1fae5;
            color: #047857;
        }
        .dark .item-status.purchased-by {
            background: rgba(16, 185, 129, 0.2);
            color: #34d399;
        }

        /* Micro animations - All under 200ms */
        @keyframes fadeSlideIn {
            from { opacity: 0; transform: translateY(8px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes fadeSlideOut {
            from { opacity: 1; transform: translateY(0); }
            to { opacity: 0; transform: translateY(-8px); }
        }
        @keyframes expandIn {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
        }
        @keyframes checkBounce {
            0% { transform: scale(0); }
            60% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }
        @keyframes checkPop {
            0% { transform: scale(1); }
            50% { transform: scale(1.15); }
            100% { transform: scale(1); }
        }
        @keyframes successGlow {
            0% { box-shadow: 0 0 0 0 rgba(16, 185, 129, 0.5); }
            100% { box-shadow: 0 0 0 12px rgba(16, 185, 129, 0); }
        }
        @keyframes slideOutRight {
            from { transform: translateX(0); opacity: 1; }
            to { transform: translateX(100%); opacity: 0; }
        }
        @keyframes slideOutLeft {
            from { transform: translateX(0); opacity: 1; }
            to { transform: translateX(-100%); opacity: 0; }
        }
        @keyframes ripple {
            to { transform: scale(2); opacity: 0; }
        }
        .fade-slide-in { animation: fadeSlideIn 0.15s cubic-bezier(0.4, 0, 0.2, 1) forwards; }
        .expand-in { animation: expandIn 0.15s cubic-bezier(0.4, 0, 0.2, 1) forwards; }
        .check-animate { animation: checkBounce 0.2s cubic-bezier(0.4, 0, 0.2, 1) forwards; }
        .check-pop { animation: checkPop 0.15s ease; }
        .success-glow { animation: successGlow 0.4s ease forwards; }
        .slide-out-right { animation: slideOutRight 0.2s ease forwards; }
        .slide-out-left { animation: slideOutLeft 0.2s ease forwards; }

        /* Sticky Add Bar */
        .sticky-add-bar {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-top: 1px solid rgba(0, 0, 0, 0.08);
            padding: 12px 16px;
            padding-bottom: calc(12px + env(safe-area-inset-bottom, 0px));
            z-index: 40;
            box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.08);
        }
        .dark .sticky-add-bar {
            background: rgba(17, 24, 39, 0.95);
            border-color: rgba(255, 255, 255, 0.08);
        }

        /* Inline edit input */
        .inline-edit-input {
            background: transparent;
            border: none;
            outline: none;
            font-size: inherit;
            font-weight: inherit;
            color: inherit;
            width: 100%;
            padding: 0;
        }
        .inline-edit-input:focus {
            background: rgba(99, 102, 241, 0.1);
            border-radius: 6px;
            padding: 2px 6px;
            margin: -2px -6px;
        }

        /* Quantity stepper - compact inline design */
        .qty-stepper {
            display: inline-flex;
            align-items: center;
            background: linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%);
            border-radius: 20px;
            overflow: hidden;
            box-shadow: inset 0 1px 2px rgba(0,0,0,0.06);
        }
        .dark .qty-stepper {
            background: linear-gradient(135deg, rgba(55, 65, 81, 0.8) 0%, rgba(75, 85, 99, 0.8) 100%);
        }
        .qty-btn {
            width: 28px;
            height: 28px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 1rem;
            transition: all 0.1s ease;
            color: #6b7280;
        }
        .qty-btn:hover { color: #4f46e5; }
        .qty-btn:active { transform: scale(0.9); }
        .qty-value {
            min-width: 24px;
            text-align: center;
            font-weight: 700;
            font-size: 0.875rem;
            padding: 0 2px;
        }

        /* Bottom spacing for sticky bar */
        .main-content-with-sticky { padding-bottom: 90px; }

        /* Confetti */
        @keyframes particleFly {
            0% { transform: translate(0, 0) scale(1); opacity: 1; }
            100% { transform: translate(var(--tx, 50px), var(--ty, -50px)) scale(0); opacity: 0; }
        }
        .confetti-particle { position: absolute; pointer-events: none; animation: particleFly 0.5s ease-out forwards; }

        /* Voice recognition styles */
        @keyframes voicePulse {
            0%, 100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(168, 85, 247, 0.7); }
            50% { transform: scale(1.05); box-shadow: 0 0 0 10px rgba(168, 85, 247, 0); }
        }
        .voice-listening { animation: voicePulse 1.5s ease-in-out infinite; }
        @keyframes soundWave {
            0% { transform: scaleY(0.3); }
            50% { transform: scaleY(1); }
            100% { transform: scaleY(0.3); }
        }
        .sound-wave { display: inline-block; width: 3px; height: 20px; background: currentColor; margin: 0 1px; border-radius: 3px; animation: soundWave 0.5s ease-in-out infinite; }
        .sound-wave:nth-child(2) { animation-delay: 0.1s; }
        .sound-wave:nth-child(3) { animation-delay: 0.2s; }
        .sound-wave:nth-child(4) { animation-delay: 0.3s; }
        .sound-wave:nth-child(5) { animation-delay: 0.4s; }

        /* Accessibility styles */
        .high-contrast { filter: contrast(1.4); }
        .high-contrast * { border-color: #000 !important; }
        .low-contrast { filter: contrast(0.8); }
        .highlight-links a, .highlight-links button { outline: 3px solid #0066cc !important; outline-offset: 2px; }
        .cursor-large-black, .cursor-large-black * { cursor: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32' viewBox='0 0 24 24'%3E%3Cpath fill='%23000' d='M4 0l16 12.279-6.78 1.138 4.256 8.676-3.902 1.907-4.256-8.676-5.318 4.676z'/%3E%3C/svg%3E"), auto !important; }
        .cursor-large-white, .cursor-large-white * { cursor: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32' viewBox='0 0 24 24'%3E%3Cpath fill='%23fff' stroke='%23000' stroke-width='1' d='M4 0l16 12.279-6.78 1.138 4.256 8.676-3.902 1.907-4.256-8.676-5.318 4.676z'/%3E%3C/svg%3E"), auto !important; }

        /* WCAG 2.4.7 Focus Visible - Enhanced focus indicators */
        *:focus { outline: 3px solid #6366f1 !important; outline-offset: 2px !important; }
        *:focus:not(:focus-visible) { outline: none !important; }
        *:focus-visible { outline: 3px solid #6366f1 !important; outline-offset: 2px !important; box-shadow: 0 0 0 6px rgba(99, 102, 241, 0.3) !important; }
        button:focus-visible, a:focus-visible, input:focus-visible, select:focus-visible, textarea:focus-visible { outline: 3px solid #6366f1 !important; outline-offset: 2px !important; }
        .dark *:focus-visible { outline-color: #818cf8 !important; box-shadow: 0 0 0 6px rgba(129, 140, 248, 0.3) !important; }

        /* Skip link for 2.4.1 Bypass Blocks */
        .skip-link { position: absolute; top: -100px; left: 50%; transform: translateX(-50%); background: #6366f1; color: white; padding: 12px 24px; border-radius: 0 0 8px 8px; z-index: 99999; font-weight: bold; text-decoration: none; transition: top 0.3s; }
        .skip-link:focus { top: 0; }

        /* Screen reader only content */
        .sr-only { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0, 0, 0, 0); white-space: nowrap; border: 0; }

        /* 2.5.5 Target Size - Minimum 44x44px touch targets */
        .touch-target { min-width: 44px; min-height: 44px; }

        /* Accessibility button */
        .accessibility-btn {
            position: fixed;
            bottom: 100px;
            left: 16px;
            width: 50px;
            height: 50px;
            background: #0066cc;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 12px rgba(0, 102, 204, 0.4);
            z-index: 9999;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .accessibility-btn:hover { transform: scale(1.05); box-shadow: 0 6px 20px rgba(0, 102, 204, 0.5); }
        .accessibility-btn svg { width: 30px; height: 30px; fill: white; }

        /* Onboarding styles */
        .onboarding-highlight {
            position: relative;
            z-index: 10001;
            box-shadow: 0 0 0 4px #6366f1, 0 0 20px rgba(99, 102, 241, 0.5);
            border-radius: 12px;
        }
    </style>

    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getFirestore, collection, addDoc, updateDoc, deleteDoc, doc, onSnapshot, query, orderBy, getDocs, where, serverTimestamp, arrayUnion, arrayRemove, getDoc, setDoc } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';
        import {
            getAuth,
            createUserWithEmailAndPassword,
            signInWithEmailAndPassword,
            signOut,
            onAuthStateChanged,
            updateProfile,
            sendPasswordResetEmail
        } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js';

        const firebaseConfig = {
            apiKey: "AIzaSyD3pwFMmo4mMjxgzUz5oPynt0D68Yy3Iz0",
            authDomain: "shooping-list-d846b.firebaseapp.com",
            projectId: "shooping-list-d846b",
            storageBucket: "shooping-list-d846b.firebasestorage.app",
            messagingSenderId: "1099114666122",
            appId: "1:1099114666122:web:5c704bf2da52aa3ca63573"
        };

        const app = initializeApp(firebaseConfig);
        window.db = getFirestore(app);
        window.auth = getAuth(app);
        window.firestore = { collection, addDoc, updateDoc, deleteDoc, doc, onSnapshot, query, orderBy, getDocs, where, serverTimestamp, arrayUnion, arrayRemove, getDoc, setDoc };
        window.firebaseAuth = {
            createUserWithEmailAndPassword,
            signInWithEmailAndPassword,
            signOut,
            onAuthStateChanged,
            updateProfile,
            sendPasswordResetEmail
        };
    </script>
</head>
<body>
    <!-- WCAG 2.4.1 Skip Link -->
    <a href="#main-content" class="skip-link">דלג לתוכן הראשי</a>

    <!-- WCAG 4.1.3 Status Messages - Live Region for announcements -->
    <div id="aria-live-region" aria-live="polite" aria-atomic="true" class="sr-only"></div>
    <div id="aria-live-assertive" aria-live="assertive" aria-atomic="true" class="sr-only"></div>

    <div id="root"></div>
    <script>
        // Global error handler for debugging
        window.onerror = function(msg, url, lineNo, columnNo, error) {
            document.getElementById('root').innerHTML = '<div style="padding:20px;direction:rtl;font-family:Heebo,sans-serif;"><h2 style="color:red;">שגיאה:</h2><pre style="background:#f5f5f5;padding:10px;overflow:auto;font-size:12px;">' + msg + '\nLine: ' + lineNo + '</pre><button onclick="location.reload()" style="padding:10px 20px;margin-top:10px;">נסה שוב</button></div>';
            return false;
        };
    </script>
    <script type="text/babel">
        const { useState, useEffect, createContext, useContext } = React;

        // Auth Context
        const AuthContext = createContext(null);

        function AuthProvider({ children }) {
            const [user, setUser] = useState(null);
            const [loading, setLoading] = useState(true);

            useEffect(() => {
                const unsubscribe = window.firebaseAuth.onAuthStateChanged(window.auth, (user) => {
                    setUser(user);
                    setLoading(false);
                });
                return () => unsubscribe();
            }, []);

            const value = { user, loading };
            return <AuthContext.Provider value={value}>{children}</AuthContext.Provider>;
        }

        function useAuth() {
            return useContext(AuthContext);
        }

        // Multi-language Support
        const TRANSLATIONS = {
            he: {
                // App name & general
                appName: 'ListNest',
                loading: 'טוען...',
                save: 'שמור',
                cancel: 'ביטול',
                delete: 'מחק',
                edit: 'ערוך',
                close: 'סגור',
                back: 'חזור',
                yes: 'כן',
                no: 'לא',
                search: 'חיפוש',
                add: 'הוסף',
                remove: 'הסר',
                // Auth
                welcome: 'ברוך הבא',
                login: 'התחברות',
                register: 'הרשמה',
                logout: 'התנתק',
                email: 'אימייל',
                password: 'סיסמה',
                confirmPassword: 'אימות סיסמה',
                fullName: 'שם מלא',
                forgotPassword: 'שכחתי סיסמה',
                resetPassword: 'איפוס סיסמה',
                sendResetLink: 'שלח קישור לאיפוס',
                noAccount: 'אין לך חשבון?',
                haveAccount: 'יש לך חשבון?',
                registerNow: 'הירשם עכשיו',
                loginNow: 'התחבר עכשיו',
                orContinueWith: 'או המשך עם',
                // Family
                family: 'משפחה',
                createFamily: 'צור משפחה חדשה',
                joinFamily: 'הצטרף למשפחה קיימת',
                familyName: 'שם המשפחה',
                familyCode: 'קוד משפחה',
                inviteCode: 'קוד הזמנה',
                shareCode: 'שתף את הקוד עם בני משפחה להצטרפות',
                familyMembers: 'חברי המשפחה',
                leaveFamily: 'עזוב משפחה',
                deleteFamily: 'מחק משפחה',
                removeMember: 'הסר חבר',
                shareWithFamily: 'שתף עם המשפחה',
                shareOptions: 'אפשרויות שיתוף',
                copyLink: 'העתק קישור',
                scanQR: 'סרקו את הקוד או שתפו בכל דרך שנוחה לכם',
                // Roles
                selectRole: 'התפקיד שלך במשפחה',
                father: 'אבא',
                mother: 'אמא',
                child: 'ילד/ה',
                admin: 'מנהל',
                limited: 'מוגבל',
                childPermissions: 'ילדים יכולים להוסיף ולסמן מוצרים, אך לא לערוך את המשפחה',
                // Shopping
                shoppingList: 'רשימת קניות',
                addProduct: 'הוסף מוצר',
                searchProduct: 'חיפוש מוצר',
                noItems: 'הרשימה ריקה',
                addItemsHint: 'הוסף מוצרים בשורת החיפוש למטה',
                markAsPurchased: 'סמן כנקנה',
                purchased: 'נקנה',
                notPurchased: 'לא נקנה',
                quantity: 'כמות',
                unit: 'יחידה',
                note: 'הערה',
                addNote: 'הוסף הערה',
                postpone: 'דחה לסוף',
                // Categories
                categories: 'קטגוריות',
                backToCategories: 'חזרה לקטגוריות',
                allProducts: 'כל המוצרים',
                // Lists
                lists: 'רשימות',
                newList: 'רשימה חדשה',
                savedLists: 'רשימות שמורות',
                saveList: 'שמור רשימה',
                loadList: 'טען לעגלה',
                noSavedLists: 'אין רשימות שמורות',
                // Shopping mode
                shoppingMode: 'מצב קניות',
                shoppingModeActive: 'מצב קניות פעיל - המסך לא יכבה',
                enableShoppingMode: 'הפעל מצב קניות',
                // Finish shopping
                finishShopping: 'סיום קנייה',
                totalAmount: 'סכום כולל',
                uploadReceipt: 'העלה קבלה',
                // History
                history: 'היסטוריה',
                shoppingHistory: 'היסטוריית קניות',
                // Chat
                familyChat: 'צ\'אט משפחתי',
                newMessages: 'הודעות חדשות',
                typeMessage: 'כתוב הודעה...',
                send: 'שלח',
                // Scanning
                scanRecipe: 'סריקת מתכון',
                scanProduct: 'סרוק מוצר',
                takePhoto: 'צלם',
                scanning: 'סורק...',
                identifiedIngredients: 'מרכיבים שזוהו',
                addToCart: 'הוסף לעגלה',
                // Voice
                voiceInput: 'הקלטה קולית',
                startRecording: 'התחל הקלטה קולית להוספת מוצרים',
                stopRecording: 'הפסק הקלטה',
                listening: 'מאזין...',
                // Settings
                settings: 'הגדרות',
                darkMode: 'מצב כהה',
                lightMode: 'מצב בהיר',
                language: 'שפה',
                // Help
                help: 'עזרה',
                helpTitle: 'עזרה ומשוב',
                howToUse: 'איך להשתמש באפליקציה',
                howToUseDesc1: 'בחר קטגוריה ולחץ על מוצר להוספה לרשימה',
                howToUseDesc2: 'החלק שמאלה על מוצר לסימון "נקנה"',
                howToUseDesc3: 'החלק ימינה לדחייה לסוף הרשימה',
                howToUseDesc4: 'השתמש בחיפוש למציאת מוצרים מהירה',
                familySharing: 'שיתוף עם המשפחה',
                familySharingDesc1: 'צור משפחה ושתף את הקוד עם בני המשפחה',
                familySharingDesc2: 'כל שינוי מתעדכן בזמן אמת לכל המשפחה',
                familySharingDesc3: 'השתמש בצ\'אט המשפחתי לתקשורת',
                smartScanning: 'סריקה חכמה',
                smartScanningDesc1: 'סרוק מתכון והוסף מרכיבים אוטומטית',
                smartScanningDesc2: 'סרוק מוצר להשוואת מחירים',
                sendFeedback: 'שלח משוב',
                showTutorial: 'הצג הדרכה מחדש',
                // Feedback
                feedback: 'משוב',
                feedbackType: 'סוג המשוב',
                bugReport: 'דיווח על בעיה',
                featureRequest: 'בקשת פיצ\'ר',
                generalFeedback: 'משוב כללי',
                feedbackMessage: 'ההודעה שלך',
                sending: 'שולח...',
                // Accessibility
                accessibility: 'נגישות',
                accessibilitySettings: 'הגדרות נגישות',
                fontSize: 'גודל טקסט',
                normal: 'רגיל',
                large: 'גדול',
                extraLarge: 'גדול מאוד',
                contrast: 'ניגודיות',
                highContrast: 'ניגודיות גבוהה',
                highlightLinks: 'הדגש קישורים',
                cursorSize: 'גודל סמן',
                skipToContent: 'דלג לתוכן הראשי',
                accessibilityStatement: 'הצהרת נגישות',
                // Onboarding
                welcomeTo: 'ברוכים הבאים ל',
                onboardingDesc: 'האפליקציה החכמה לניהול רשימת קניות משפחתית',
                getStarted: 'בואו נתחיל!',
                next: 'הבא',
                skip: 'דלג',
                done: 'סיום',
                addingProducts: 'הוספת מוצרים',
                addingProductsDesc: 'בחרו קטגוריה ולחצו על מוצר להוספה, או חפשו מוצר בשורת החיפוש',
                managingList: 'ניהול הרשימה',
                managingListDesc: 'החליקו שמאלה לסימון כנקנה, ימינה לדחייה. לחצו על כפתור הדחייה לחלופה מקלדת.',
                familySharingTitle: 'שיתוף משפחתי',
                familySharingOnboardDesc: 'שתפו את קוד המשפחה או השתמשו ב-QR/WhatsApp. בחרו תפקיד: הורה (מנהל) או ילד (מוגבל).',
                readyToShop: 'מוכנים לקניות!',
                readyToShopDesc: 'עכשיו אתם מוכנים להתחיל. השתמשו בכל הפיצ\'רים והפכו את הקניות לחוויה משפחתית!',
                // Notifications
                productAdded: 'מוצר נוסף לרשימה',
                addedBy: 'הוסיף/ה',
                // Errors
                error: 'שגיאה',
                tryAgain: 'נסה שוב',
                invalidEmail: 'אימייל לא תקין',
                passwordTooShort: 'הסיסמה חייבת להכיל לפחות 6 תווים',
                passwordsNoMatch: 'הסיסמאות לא תואמות',
                codeNotFound: 'קוד לא נמצא',
                alreadyMember: 'כבר חבר במשפחה זו',
                selectRoleError: 'נא לבחור תפקיד במשפחה',
                enterFamilyName: 'נא להזין שם למשפחה',
                enterCode: 'נא להזין קוד בן 6 תווים',
                // Additional UI strings
                sent: 'נשלח!',
                resetLinkSent: 'קישור לאיפוס סיסמה נשלח ל-',
                checkSpam: 'בדוק גם בתיקיית הספאם',
                backToLogin: 'חזור להתחברות',
                enterEmailForReset: 'הזן את כתובת האימייל שלך ונשלח לך קישור לאיפוס',
                displayName: 'שם תצוגה',
                displayNamePlaceholder: 'השם שיוצג באפליקציה',
                minChars: 'לפחות 6 תווים',
                reenterPassword: 'הזן שוב את הסיסמה',
                enterDisplayName: 'נא להזין שם תצוגה',
                smartShoppingList: 'רשימת הקניות החכמה שלך',
                // Main app UI
                recipes: 'מתכונים',
                whatsapp: 'WhatsApp',
                importList: 'ייבוא רשימה',
                exportList: 'ייצוא רשימה',
                deleteAll: 'מחק הכל',
                whatForgot: 'מה שכחתי?',
                calendar: 'לוח שנה',
                shoppingProgress: 'התקדמות קנייה',
                itemsPurchased: 'פריטים נקנו',
                markPurchased: 'סמן מוצרים שקנית',
                allPurchased: 'כל המוצרים נקנו!',
                purchases: 'קניות',
                deleteAllTitle: 'מחיקת כל הרשימה',
                deleteAllConfirm: 'האם אתה בטוח שברצונך למחוק את כל המוצרים?',
                deleteAllWarning: 'פעולה זו תמחק {count} מוצרים ולא ניתן לבטלה!',
                deleteProduct: 'מחיקת מוצר',
                deleteProductConfirm: 'האם אתה בטוח שברצונך למחוק מוצר זה?',
                addProductPlaceholder: 'הוסף מוצר...',
                // Categories
                fruitsVeg: 'פירות וירקות',
                dairyProducts: 'מוצרי חלב',
                dairyDesserts: 'מעדני חלב',
                meat: 'בשר',
                fish: 'דגים',
                deli: 'מעדניית נקניקים',
                breadBakery: 'לחם ומאפים',
                spreads: 'ממרחים',
                bakingProducts: 'מוצרי אפיה',
                cereals: 'דגנים וקורנפלקס',
                cannedDry: 'שימורים ומזון יבש',
                spices: 'תבלינים ובישול',
                coffeeTea: 'קפה ותה',
                drinks: 'משקאות קלים',
                wineAlcohol: 'יין ואלכוהול',
                snacks: 'חטיפים וממתקים',
                frozen: 'קפואים',
                dietProtein: 'דיאטה וחלבון',
                hygiene: 'היגיינה ורחצה',
                cleaning: 'ניקיון',
                candlesOil: 'נרות',
                babyKids: 'תינוקות וילדים',
                pets: 'חיות מחמד',
                readySalads: 'סלטים מוכנים',
                // More UI strings
                searchAddProduct: 'הוסף מוצר...',
                emptyList: 'הרשימה ריקה',
                addProductsBelow: 'הוסף מוצרים בשורת החיפוש למטה',
                familyNameExample: 'לדוגמה: משפחת כהן',
                listNameExample: 'לדוגמה: קניות לשבת',
                noteExample: 'לדוגמה: מותג אסם, מהמדף העליון...',
                importExample: 'חלב\nביצים x2\n3 לחם\nגבינה, חמאה',
                productSearchExample: 'לדוגמה: חלב תנובה, קוטג׳, במבה...',
                tagExample: 'לדוגמה: טרי, ללא גלוטן, אורגני...',
                typeMessage: 'הקלד הודעה...',
                recipeNameExample: 'שם המתכון (למשל: עוגת שוקולד)',
                ingredientsExample: 'רשימת מרכיבים (כל מרכיב בשורה חדשה)',
                feedbackPlaceholder: 'ספר לנו מה קרה או מה תרצה לראות...',
                priceComparison: 'השוואת מחירים',
                familySettings: 'הגדרות משפחה',
                createNewFamily: 'צור משפחה חדשה',
                joinExistingFamily: 'הצטרף למשפחה קיימת',
                familyChat: 'צ\'אט משפחתי',
                savedLists: 'רשימות שמורות',
                noSavedLists: 'אין רשימות שמורות',
                loadToCart: 'טען לעגלה',
                bought: 'נקנה',
                later: 'אח״כ',
                addToList: 'הוסף לרשימה',
                removeFromList: 'הסר מהרשימה',
                selectCategory: 'בחר קטגוריה',
                allCategories: 'כל הקטגוריות',
                scanRecipe: 'סריקת מתכון',
                scanProduct: 'סרוק מוצר',
                voiceInput: 'הקלטה קולית',
                importFromWhatsapp: 'ייבוא מווטסאפ',
                regularItems: 'מוצרים קבועים',
                forgottenItems: 'מוצרים שנשכחו',
                shoppingStreak: 'רצף קניות',
                darkMode: 'מצב כהה',
                lightMode: 'מצב בהיר',
                language: 'שפה',
                accessibilitySettings: 'הגדרות נגישות',
                helpAndFeedback: 'עזרה ומשוב',
                showTutorial: 'הצג הדרכה',
                logoutButton: 'התנתקות',
                total: 'סה"כ',
                items: 'פריטים',
                share: 'שתף',
                copy: 'העתק',
                copied: 'הועתק!',
                send: 'שלח',
                confirm: 'אישור',
                selectAll: 'בחר הכל',
                clearAll: 'נקה הכל',
                noProductsFound: 'לא נמצאו מוצרים התואמים',
                tryAnotherSearch: 'נסה חיפוש אחר או בחר קטגוריה',
                noRecipesSaved: 'אין מתכונים שמורים',
                addFirstRecipe: 'הוסף מתכון ראשון',
                noHistoryYet: 'אין היסטוריה עדיין',
                completeFirstShopping: 'סיימו קנייה ראשונה לראות סטטיסטיקה'
            },
            en: {
                // App name & general
                appName: 'Smart Family Shopping List',
                loading: 'Loading...',
                save: 'Save',
                cancel: 'Cancel',
                delete: 'Delete',
                edit: 'Edit',
                close: 'Close',
                back: 'Back',
                yes: 'Yes',
                no: 'No',
                search: 'Search',
                add: 'Add',
                remove: 'Remove',
                // Auth
                welcome: 'Welcome',
                login: 'Login',
                register: 'Register',
                logout: 'Logout',
                email: 'Email',
                password: 'Password',
                confirmPassword: 'Confirm Password',
                fullName: 'Full Name',
                forgotPassword: 'Forgot Password?',
                resetPassword: 'Reset Password',
                sendResetLink: 'Send Reset Link',
                noAccount: "Don't have an account?",
                haveAccount: 'Already have an account?',
                registerNow: 'Register Now',
                loginNow: 'Login Now',
                orContinueWith: 'Or continue with',
                // Family
                family: 'Family',
                createFamily: 'Create New Family',
                joinFamily: 'Join Existing Family',
                familyName: 'Family Name',
                familyCode: 'Family Code',
                inviteCode: 'Invite Code',
                shareCode: 'Share this code with family members to join',
                familyMembers: 'Family Members',
                leaveFamily: 'Leave Family',
                deleteFamily: 'Delete Family',
                removeMember: 'Remove Member',
                shareWithFamily: 'Share with Family',
                shareOptions: 'Share Options',
                copyLink: 'Copy Link',
                scanQR: 'Scan the code or share via any method you prefer',
                // Roles
                selectRole: 'Your role in the family',
                father: 'Father',
                mother: 'Mother',
                child: 'Child',
                admin: 'Admin',
                limited: 'Limited',
                childPermissions: 'Children can add and mark products, but cannot edit family settings',
                // Shopping
                shoppingList: 'Shopping List',
                addProduct: 'Add Product',
                searchProduct: 'Search Product',
                noItems: 'List is empty',
                addItemsHint: 'Add items using the search bar below',
                markAsPurchased: 'Mark as Purchased',
                purchased: 'Purchased',
                notPurchased: 'Not Purchased',
                quantity: 'Quantity',
                unit: 'Unit',
                note: 'Note',
                addNote: 'Add Note',
                postpone: 'Move to End',
                // Categories
                categories: 'Categories',
                backToCategories: 'Back to Categories',
                allProducts: 'All Products',
                // Lists
                lists: 'Lists',
                newList: 'New List',
                savedLists: 'Saved Lists',
                saveList: 'Save List',
                loadList: 'Load to Cart',
                noSavedLists: 'No saved lists',
                // Shopping mode
                shoppingMode: 'Shopping Mode',
                shoppingModeActive: 'Shopping mode active - screen stays on',
                enableShoppingMode: 'Enable Shopping Mode',
                // Finish shopping
                finishShopping: 'Finish Shopping',
                totalAmount: 'Total Amount',
                uploadReceipt: 'Upload Receipt',
                // History
                history: 'History',
                shoppingHistory: 'Shopping History',
                // Chat
                familyChat: 'Family Chat',
                newMessages: 'New Messages',
                typeMessage: 'Type a message...',
                send: 'Send',
                // Scanning
                scanRecipe: 'Scan Recipe',
                scanProduct: 'Scan Product',
                takePhoto: 'Take Photo',
                scanning: 'Scanning...',
                identifiedIngredients: 'Identified Ingredients',
                addToCart: 'Add to Cart',
                // Voice
                voiceInput: 'Voice Input',
                startRecording: 'Start voice recording to add products',
                stopRecording: 'Stop Recording',
                listening: 'Listening...',
                // Settings
                settings: 'Settings',
                darkMode: 'Dark Mode',
                lightMode: 'Light Mode',
                language: 'Language',
                // Help
                help: 'Help',
                helpTitle: 'Help & Feedback',
                howToUse: 'How to use the app',
                howToUseDesc1: 'Select a category and tap a product to add to list',
                howToUseDesc2: 'Swipe left on a product to mark as "purchased"',
                howToUseDesc3: 'Swipe right to move to end of list',
                howToUseDesc4: 'Use search to quickly find products',
                familySharing: 'Family Sharing',
                familySharingDesc1: 'Create a family and share the code with members',
                familySharingDesc2: 'All changes sync in real-time for all family',
                familySharingDesc3: 'Use family chat for communication',
                smartScanning: 'Smart Scanning',
                smartScanningDesc1: 'Scan a recipe to auto-add ingredients',
                smartScanningDesc2: 'Scan a product for price comparison',
                sendFeedback: 'Send Feedback',
                showTutorial: 'Show Tutorial Again',
                // Feedback
                feedback: 'Feedback',
                feedbackType: 'Feedback Type',
                bugReport: 'Bug Report',
                featureRequest: 'Feature Request',
                generalFeedback: 'General Feedback',
                feedbackMessage: 'Your Message',
                sending: 'Sending...',
                // Accessibility
                accessibility: 'Accessibility',
                accessibilitySettings: 'Accessibility Settings',
                fontSize: 'Font Size',
                normal: 'Normal',
                large: 'Large',
                extraLarge: 'Extra Large',
                contrast: 'Contrast',
                highContrast: 'High Contrast',
                highlightLinks: 'Highlight Links',
                cursorSize: 'Cursor Size',
                skipToContent: 'Skip to main content',
                accessibilityStatement: 'Accessibility Statement',
                // Onboarding
                welcomeTo: 'Welcome to',
                onboardingDesc: 'The smart app for managing family shopping lists',
                getStarted: "Let's get started!",
                next: 'Next',
                skip: 'Skip',
                done: 'Done',
                addingProducts: 'Adding Products',
                addingProductsDesc: 'Choose a category and tap a product to add, or search in the search bar',
                managingList: 'Managing the List',
                managingListDesc: 'Swipe left to mark purchased, right to postpone. Use the postpone button for keyboard alternative.',
                familySharingTitle: 'Family Sharing',
                familySharingOnboardDesc: 'Share family code or use QR/WhatsApp. Choose role: parent (admin) or child (limited).',
                readyToShop: 'Ready to Shop!',
                readyToShopDesc: "You're all set! Use all features and make shopping a family experience!",
                // Notifications
                productAdded: 'Product added to list',
                addedBy: 'Added by',
                // Errors
                error: 'Error',
                tryAgain: 'Try Again',
                invalidEmail: 'Invalid email',
                passwordTooShort: 'Password must be at least 6 characters',
                passwordsNoMatch: 'Passwords do not match',
                codeNotFound: 'Code not found',
                alreadyMember: 'Already a member of this family',
                selectRoleError: 'Please select a family role',
                enterFamilyName: 'Please enter a family name',
                enterCode: 'Please enter a 6-character code',
                // Additional UI strings
                sent: 'Sent!',
                resetLinkSent: 'Password reset link sent to',
                checkSpam: 'Check your spam folder too',
                backToLogin: 'Back to login',
                enterEmailForReset: 'Enter your email and we will send you a reset link',
                displayName: 'Display Name',
                displayNamePlaceholder: 'Name shown in app',
                minChars: 'At least 6 characters',
                reenterPassword: 'Re-enter password',
                enterDisplayName: 'Please enter a display name',
                smartShoppingList: 'Your smart shopping list',
                // Main app UI
                recipes: 'Recipes',
                whatsapp: 'WhatsApp',
                importList: 'Import List',
                exportList: 'Export List',
                deleteAll: 'Delete All',
                whatForgot: 'What did I forget?',
                calendar: 'Calendar',
                shoppingProgress: 'Shopping Progress',
                itemsPurchased: 'items purchased',
                markPurchased: 'Mark items as purchased',
                allPurchased: 'All items purchased!',
                purchases: 'purchases',
                deleteAllTitle: 'Delete All Items',
                deleteAllConfirm: 'Are you sure you want to delete all items?',
                deleteAllWarning: 'This will delete {count} items and cannot be undone!',
                deleteProduct: 'Delete Product',
                deleteProductConfirm: 'Are you sure you want to delete this product?',
                addProductPlaceholder: 'Add product...',
                // Categories
                fruitsVeg: 'Fruits & Vegetables',
                dairyProducts: 'Dairy',
                dairyDesserts: 'Dairy Desserts',
                meat: 'Meat',
                fish: 'Fish',
                deli: 'Deli Sausages',
                breadBakery: 'Bread & Bakery',
                spreads: 'Spreads',
                bakingProducts: 'Baking Products',
                cereals: 'Cereals',
                cannedDry: 'Canned & Dry Foods',
                spices: 'Spices & Cooking',
                coffeeTea: 'Coffee & Tea',
                drinks: 'Soft Drinks',
                wineAlcohol: 'Wine & Alcohol',
                snacks: 'Snacks & Candy',
                frozen: 'Frozen',
                dietProtein: 'Diet & Protein',
                hygiene: 'Hygiene & Bath',
                cleaning: 'Cleaning',
                candlesOil: 'Candles',
                babyKids: 'Baby & Kids',
                pets: 'Pets',
                readySalads: 'Ready Salads',
                // More UI strings
                searchAddProduct: 'Add product...',
                emptyList: 'List is empty',
                addProductsBelow: 'Add products using the search bar below',
                familyNameExample: 'e.g., The Smith Family',
                listNameExample: 'e.g., Weekend Shopping',
                noteExample: 'e.g., Specific brand, top shelf...',
                importExample: 'Milk\nEggs x2\n3 Bread\nCheese, Butter',
                productSearchExample: 'e.g., milk, cottage cheese, chips...',
                tagExample: 'e.g., Fresh, Gluten-free, Organic...',
                typeMessage: 'Type a message...',
                recipeNameExample: 'Recipe name (e.g., Chocolate Cake)',
                ingredientsExample: 'Ingredient list (each on a new line)',
                feedbackPlaceholder: 'Tell us what happened or what you\'d like to see...',
                priceComparison: 'Price Comparison',
                familySettings: 'Family Settings',
                createNewFamily: 'Create New Family',
                joinExistingFamily: 'Join Existing Family',
                familyChat: 'Family Chat',
                savedLists: 'Saved Lists',
                noSavedLists: 'No saved lists',
                loadToCart: 'Load to Cart',
                bought: 'Bought',
                later: 'Later',
                addToList: 'Add to List',
                removeFromList: 'Remove from List',
                selectCategory: 'Select Category',
                allCategories: 'All Categories',
                scanRecipe: 'Scan Recipe',
                scanProduct: 'Scan Product',
                voiceInput: 'Voice Input',
                importFromWhatsapp: 'Import from WhatsApp',
                regularItems: 'Regular Items',
                forgottenItems: 'Forgotten Items',
                shoppingStreak: 'Shopping Streak',
                darkMode: 'Dark Mode',
                lightMode: 'Light Mode',
                language: 'Language',
                accessibilitySettings: 'Accessibility Settings',
                helpAndFeedback: 'Help & Feedback',
                showTutorial: 'Show Tutorial',
                logoutButton: 'Logout',
                total: 'Total',
                items: 'items',
                share: 'Share',
                copy: 'Copy',
                copied: 'Copied!',
                send: 'Send',
                confirm: 'Confirm',
                selectAll: 'Select All',
                clearAll: 'Clear All',
                noProductsFound: 'No products found matching',
                tryAnotherSearch: 'Try another search or select a category',
                noRecipesSaved: 'No recipes saved',
                addFirstRecipe: 'Add first recipe',
                noHistoryYet: 'No history yet',
                completeFirstShopping: 'Complete your first shopping to see statistics'
            },
            ru: {
                // App name & general
                appName: 'Умный семейный список покупок',
                loading: 'Загрузка...',
                save: 'Сохранить',
                cancel: 'Отмена',
                delete: 'Удалить',
                edit: 'Изменить',
                close: 'Закрыть',
                back: 'Назад',
                yes: 'Да',
                no: 'Нет',
                search: 'Поиск',
                add: 'Добавить',
                remove: 'Удалить',
                // Auth
                welcome: 'Добро пожаловать',
                login: 'Вход',
                register: 'Регистрация',
                logout: 'Выйти',
                email: 'Электронная почта',
                password: 'Пароль',
                confirmPassword: 'Подтверждение пароля',
                fullName: 'Полное имя',
                forgotPassword: 'Забыли пароль?',
                resetPassword: 'Сброс пароля',
                sendResetLink: 'Отправить ссылку для сброса',
                noAccount: 'Нет аккаунта?',
                haveAccount: 'Уже есть аккаунт?',
                registerNow: 'Зарегистрироваться',
                loginNow: 'Войти',
                orContinueWith: 'Или продолжить с',
                // Family
                family: 'Семья',
                createFamily: 'Создать новую семью',
                joinFamily: 'Присоединиться к семье',
                familyName: 'Название семьи',
                familyCode: 'Код семьи',
                inviteCode: 'Код приглашения',
                shareCode: 'Поделитесь этим кодом с членами семьи',
                familyMembers: 'Члены семьи',
                leaveFamily: 'Покинуть семью',
                deleteFamily: 'Удалить семью',
                removeMember: 'Удалить участника',
                shareWithFamily: 'Поделиться с семьёй',
                shareOptions: 'Варианты отправки',
                copyLink: 'Копировать ссылку',
                scanQR: 'Отсканируйте код или поделитесь удобным способом',
                // Roles
                selectRole: 'Ваша роль в семье',
                father: 'Папа',
                mother: 'Мама',
                child: 'Ребёнок',
                admin: 'Администратор',
                limited: 'Ограничено',
                childPermissions: 'Дети могут добавлять и отмечать товары, но не могут редактировать настройки семьи',
                // Shopping
                shoppingList: 'Список покупок',
                addProduct: 'Добавить товар',
                searchProduct: 'Поиск товара',
                noItems: 'Список пуст',
                addItemsHint: 'Добавьте товары через строку поиска ниже',
                markAsPurchased: 'Отметить как купленное',
                purchased: 'Куплено',
                notPurchased: 'Не куплено',
                quantity: 'Количество',
                unit: 'Единица',
                note: 'Заметка',
                addNote: 'Добавить заметку',
                postpone: 'В конец списка',
                // Categories
                categories: 'Категории',
                backToCategories: 'К категориям',
                allProducts: 'Все товары',
                // Lists
                lists: 'Списки',
                newList: 'Новый список',
                savedLists: 'Сохранённые списки',
                saveList: 'Сохранить список',
                loadList: 'Загрузить в корзину',
                noSavedLists: 'Нет сохранённых списков',
                // Shopping mode
                shoppingMode: 'Режим покупок',
                shoppingModeActive: 'Режим покупок активен - экран не выключится',
                enableShoppingMode: 'Включить режим покупок',
                // Finish shopping
                finishShopping: 'Завершить покупки',
                totalAmount: 'Общая сумма',
                uploadReceipt: 'Загрузить чек',
                // History
                history: 'История',
                shoppingHistory: 'История покупок',
                // Chat
                familyChat: 'Семейный чат',
                newMessages: 'Новые сообщения',
                typeMessage: 'Введите сообщение...',
                send: 'Отправить',
                // Scanning
                scanRecipe: 'Сканировать рецепт',
                scanProduct: 'Сканировать товар',
                takePhoto: 'Сделать фото',
                scanning: 'Сканирование...',
                identifiedIngredients: 'Распознанные ингредиенты',
                addToCart: 'В корзину',
                // Voice
                voiceInput: 'Голосовой ввод',
                startRecording: 'Начать запись для добавления товаров',
                stopRecording: 'Остановить запись',
                listening: 'Слушаю...',
                // Settings
                settings: 'Настройки',
                darkMode: 'Тёмный режим',
                lightMode: 'Светлый режим',
                language: 'Язык',
                // Help
                help: 'Помощь',
                helpTitle: 'Помощь и отзывы',
                howToUse: 'Как пользоваться приложением',
                howToUseDesc1: 'Выберите категорию и нажмите на товар для добавления',
                howToUseDesc2: 'Проведите влево по товару для отметки "куплено"',
                howToUseDesc3: 'Проведите вправо для перемещения в конец списка',
                howToUseDesc4: 'Используйте поиск для быстрого поиска товаров',
                familySharing: 'Семейный доступ',
                familySharingDesc1: 'Создайте семью и поделитесь кодом с членами семьи',
                familySharingDesc2: 'Все изменения синхронизируются в реальном времени',
                familySharingDesc3: 'Используйте семейный чат для общения',
                smartScanning: 'Умное сканирование',
                smartScanningDesc1: 'Сканируйте рецепт для автоматического добавления ингредиентов',
                smartScanningDesc2: 'Сканируйте товар для сравнения цен',
                sendFeedback: 'Отправить отзыв',
                showTutorial: 'Показать обучение снова',
                // Feedback
                feedback: 'Отзыв',
                feedbackType: 'Тип отзыва',
                bugReport: 'Сообщить об ошибке',
                featureRequest: 'Предложить функцию',
                generalFeedback: 'Общий отзыв',
                feedbackMessage: 'Ваше сообщение',
                sending: 'Отправка...',
                // Accessibility
                accessibility: 'Доступность',
                accessibilitySettings: 'Настройки доступности',
                fontSize: 'Размер шрифта',
                normal: 'Обычный',
                large: 'Большой',
                extraLarge: 'Очень большой',
                contrast: 'Контраст',
                highContrast: 'Высокий контраст',
                highlightLinks: 'Выделять ссылки',
                cursorSize: 'Размер курсора',
                skipToContent: 'Перейти к содержимому',
                accessibilityStatement: 'Заявление о доступности',
                // Onboarding
                welcomeTo: 'Добро пожаловать в',
                onboardingDesc: 'Умное приложение для управления семейным списком покупок',
                getStarted: 'Начнём!',
                next: 'Далее',
                skip: 'Пропустить',
                done: 'Готово',
                addingProducts: 'Добавление товаров',
                addingProductsDesc: 'Выберите категорию и нажмите на товар, или найдите в поиске',
                managingList: 'Управление списком',
                managingListDesc: 'Проведите влево для отметки, вправо для перемещения. Используйте кнопку для клавиатурной альтернативы.',
                familySharingTitle: 'Семейный доступ',
                familySharingOnboardDesc: 'Поделитесь кодом семьи или используйте QR/WhatsApp. Выберите роль: родитель (админ) или ребёнок (ограничен).',
                readyToShop: 'Готовы к покупкам!',
                readyToShopDesc: 'Всё готово! Используйте все функции и сделайте покупки семейным делом!',
                // Notifications
                productAdded: 'Товар добавлен в список',
                addedBy: 'Добавил(а)',
                // Errors
                error: 'Ошибка',
                tryAgain: 'Попробовать снова',
                invalidEmail: 'Неверный email',
                passwordTooShort: 'Пароль должен содержать минимум 6 символов',
                passwordsNoMatch: 'Пароли не совпадают',
                codeNotFound: 'Код не найден',
                alreadyMember: 'Уже являетесь членом этой семьи',
                selectRoleError: 'Пожалуйста, выберите роль в семье',
                enterFamilyName: 'Пожалуйста, введите название семьи',
                enterCode: 'Пожалуйста, введите 6-значный код',
                // Additional UI strings
                sent: 'Отправлено!',
                resetLinkSent: 'Ссылка для сброса пароля отправлена на',
                checkSpam: 'Проверьте также папку спам',
                backToLogin: 'Вернуться к входу',
                enterEmailForReset: 'Введите email и мы отправим вам ссылку для сброса',
                displayName: 'Отображаемое имя',
                displayNamePlaceholder: 'Имя в приложении',
                minChars: 'Минимум 6 символов',
                reenterPassword: 'Повторите пароль',
                enterDisplayName: 'Пожалуйста, введите отображаемое имя',
                smartShoppingList: 'Ваш умный список покупок',
                // Main app UI
                recipes: 'Рецепты',
                whatsapp: 'WhatsApp',
                importList: 'Импорт списка',
                exportList: 'Экспорт списка',
                deleteAll: 'Удалить все',
                whatForgot: 'Что забыл?',
                calendar: 'Календарь',
                shoppingProgress: 'Прогресс покупок',
                itemsPurchased: 'куплено',
                markPurchased: 'Отметьте купленные товары',
                allPurchased: 'Все товары куплены!',
                purchases: 'покупки',
                deleteAllTitle: 'Удалить все товары',
                deleteAllConfirm: 'Вы уверены, что хотите удалить все товары?',
                deleteAllWarning: 'Это удалит {count} товаров без возможности восстановления!',
                deleteProduct: 'Удалить товар',
                deleteProductConfirm: 'Вы уверены, что хотите удалить этот товар?',
                addProductPlaceholder: 'Добавить товар...',
                // More UI strings
                searchAddProduct: 'Добавить товар...',
                emptyList: 'Список пуст',
                addProductsBelow: 'Добавьте товары через поиск ниже',
                familyNameExample: 'например: Семья Ивановых',
                listNameExample: 'например: Покупки на выходные',
                noteExample: 'например: Определенный бренд, верхняя полка...',
                priceComparison: 'Сравнение цен',
                familySettings: 'Настройки семьи',
                createNewFamily: 'Создать новую семью',
                joinExistingFamily: 'Присоединиться к семье',
                familyChat: 'Семейный чат',
                savedLists: 'Сохраненные списки',
                noSavedLists: 'Нет сохраненных списков',
                loadToCart: 'Загрузить в корзину',
                bought: 'Куплено',
                later: 'Позже',
                addToList: 'Добавить в список',
                removeFromList: 'Удалить из списка',
                selectCategory: 'Выберите категорию',
                allCategories: 'Все категории',
                scanRecipe: 'Сканировать рецепт',
                scanProduct: 'Сканировать товар',
                voiceInput: 'Голосовой ввод',
                importFromWhatsapp: 'Импорт из WhatsApp',
                regularItems: 'Постоянные товары',
                forgottenItems: 'Забытые товары',
                shoppingStreak: 'Серия покупок',
                darkMode: 'Темный режим',
                lightMode: 'Светлый режим',
                language: 'Язык',
                accessibilitySettings: 'Настройки доступности',
                helpAndFeedback: 'Помощь и отзывы',
                showTutorial: 'Показать обучение',
                logoutButton: 'Выйти',
                total: 'Всего',
                items: 'товаров',
                share: 'Поделиться',
                copy: 'Копировать',
                copied: 'Скопировано!',
                send: 'Отправить',
                confirm: 'Подтвердить',
                selectAll: 'Выбрать все',
                clearAll: 'Очистить все',
                readySalads: 'Готовые салаты',
                meat: 'Мясо',
                fish: 'Рыба',
                deli: 'Колбасный отдел',
                noProductsFound: 'Не найдено товаров по запросу',
                tryAnotherSearch: 'Попробуйте другой поиск или выберите категорию',
                noRecipesSaved: 'Нет сохраненных рецептов',
                addFirstRecipe: 'Добавить первый рецепт',
                noHistoryYet: 'Истории пока нет',
                completeFirstShopping: 'Завершите первую покупку, чтобы увидеть статистику'
            },
            ar: {
                // App name & general
                appName: 'قائمة التسوق العائلية الذكية',
                loading: 'جاري التحميل...',
                save: 'حفظ',
                cancel: 'إلغاء',
                delete: 'حذف',
                edit: 'تعديل',
                close: 'إغلاق',
                back: 'رجوع',
                yes: 'نعم',
                no: 'لا',
                search: 'بحث',
                add: 'إضافة',
                remove: 'إزالة',
                // Auth
                welcome: 'مرحباً',
                login: 'تسجيل الدخول',
                register: 'تسجيل',
                logout: 'تسجيل الخروج',
                email: 'البريد الإلكتروني',
                password: 'كلمة المرور',
                confirmPassword: 'تأكيد كلمة المرور',
                fullName: 'الاسم الكامل',
                forgotPassword: 'نسيت كلمة المرور؟',
                resetPassword: 'إعادة تعيين كلمة المرور',
                sendResetLink: 'إرسال رابط إعادة التعيين',
                noAccount: 'ليس لديك حساب؟',
                haveAccount: 'لديك حساب بالفعل؟',
                registerNow: 'سجل الآن',
                loginNow: 'سجل دخول الآن',
                orContinueWith: 'أو تابع مع',
                // Family
                family: 'العائلة',
                createFamily: 'إنشاء عائلة جديدة',
                joinFamily: 'الانضمام لعائلة موجودة',
                familyName: 'اسم العائلة',
                familyCode: 'رمز العائلة',
                inviteCode: 'رمز الدعوة',
                shareCode: 'شارك هذا الرمز مع أفراد العائلة للانضمام',
                familyMembers: 'أفراد العائلة',
                leaveFamily: 'مغادرة العائلة',
                deleteFamily: 'حذف العائلة',
                removeMember: 'إزالة عضو',
                shareWithFamily: 'مشاركة مع العائلة',
                shareOptions: 'خيارات المشاركة',
                copyLink: 'نسخ الرابط',
                scanQR: 'امسح الرمز أو شارك بأي طريقة تفضلها',
                // Roles
                selectRole: 'دورك في العائلة',
                father: 'أب',
                mother: 'أم',
                child: 'طفل',
                admin: 'مدير',
                limited: 'محدود',
                childPermissions: 'يمكن للأطفال إضافة المنتجات وتحديدها، لكن لا يمكنهم تعديل إعدادات العائلة',
                // Shopping
                shoppingList: 'قائمة التسوق',
                addProduct: 'إضافة منتج',
                searchProduct: 'بحث عن منتج',
                noItems: 'القائمة فارغة',
                addItemsHint: 'أضف منتجات من شريط البحث أدناه',
                markAsPurchased: 'تحديد كمشترى',
                purchased: 'تم الشراء',
                notPurchased: 'لم يتم الشراء',
                quantity: 'الكمية',
                unit: 'الوحدة',
                note: 'ملاحظة',
                addNote: 'إضافة ملاحظة',
                postpone: 'نقل للنهاية',
                // Categories
                categories: 'الفئات',
                backToCategories: 'العودة للفئات',
                allProducts: 'جميع المنتجات',
                // Lists
                lists: 'القوائم',
                newList: 'قائمة جديدة',
                savedLists: 'القوائم المحفوظة',
                saveList: 'حفظ القائمة',
                loadList: 'تحميل للسلة',
                noSavedLists: 'لا توجد قوائم محفوظة',
                // Shopping mode
                shoppingMode: 'وضع التسوق',
                shoppingModeActive: 'وضع التسوق نشط - الشاشة لن تنطفئ',
                enableShoppingMode: 'تفعيل وضع التسوق',
                // Finish shopping
                finishShopping: 'إنهاء التسوق',
                totalAmount: 'المبلغ الإجمالي',
                uploadReceipt: 'رفع الفاتورة',
                // History
                history: 'السجل',
                shoppingHistory: 'سجل التسوق',
                // Chat
                familyChat: 'دردشة العائلة',
                newMessages: 'رسائل جديدة',
                typeMessage: 'اكتب رسالة...',
                send: 'إرسال',
                // Scanning
                scanRecipe: 'مسح الوصفة',
                scanProduct: 'مسح المنتج',
                takePhoto: 'التقط صورة',
                scanning: 'جاري المسح...',
                identifiedIngredients: 'المكونات المحددة',
                addToCart: 'إضافة للسلة',
                // Voice
                voiceInput: 'الإدخال الصوتي',
                startRecording: 'ابدأ التسجيل الصوتي لإضافة منتجات',
                stopRecording: 'إيقاف التسجيل',
                listening: 'جاري الاستماع...',
                // Settings
                settings: 'الإعدادات',
                darkMode: 'الوضع الداكن',
                lightMode: 'الوضع الفاتح',
                language: 'اللغة',
                // Help
                help: 'مساعدة',
                helpTitle: 'المساعدة والملاحظات',
                howToUse: 'كيفية استخدام التطبيق',
                howToUseDesc1: 'اختر فئة واضغط على منتج لإضافته للقائمة',
                howToUseDesc2: 'اسحب لليسار على منتج لتحديده كـ "مشترى"',
                howToUseDesc3: 'اسحب لليمين لنقله لنهاية القائمة',
                howToUseDesc4: 'استخدم البحث للعثور على المنتجات بسرعة',
                familySharing: 'المشاركة العائلية',
                familySharingDesc1: 'أنشئ عائلة وشارك الرمز مع الأفراد',
                familySharingDesc2: 'جميع التغييرات تتزامن في الوقت الفعلي',
                familySharingDesc3: 'استخدم دردشة العائلة للتواصل',
                smartScanning: 'المسح الذكي',
                smartScanningDesc1: 'امسح وصفة لإضافة المكونات تلقائياً',
                smartScanningDesc2: 'امسح منتج لمقارنة الأسعار',
                sendFeedback: 'إرسال ملاحظات',
                showTutorial: 'عرض الشرح مجدداً',
                // Feedback
                feedback: 'ملاحظات',
                feedbackType: 'نوع الملاحظة',
                bugReport: 'الإبلاغ عن مشكلة',
                featureRequest: 'طلب ميزة',
                generalFeedback: 'ملاحظات عامة',
                feedbackMessage: 'رسالتك',
                sending: 'جاري الإرسال...',
                // Accessibility
                accessibility: 'إمكانية الوصول',
                accessibilitySettings: 'إعدادات إمكانية الوصول',
                fontSize: 'حجم الخط',
                normal: 'عادي',
                large: 'كبير',
                extraLarge: 'كبير جداً',
                contrast: 'التباين',
                highContrast: 'تباين عالي',
                highlightLinks: 'تمييز الروابط',
                cursorSize: 'حجم المؤشر',
                skipToContent: 'تخطي إلى المحتوى الرئيسي',
                accessibilityStatement: 'بيان إمكانية الوصول',
                // Onboarding
                welcomeTo: 'مرحباً بك في',
                onboardingDesc: 'التطبيق الذكي لإدارة قائمة تسوق العائلة',
                getStarted: 'هيا نبدأ!',
                next: 'التالي',
                skip: 'تخطي',
                done: 'تم',
                addingProducts: 'إضافة المنتجات',
                addingProductsDesc: 'اختر فئة واضغط على منتج، أو ابحث في شريط البحث',
                managingList: 'إدارة القائمة',
                managingListDesc: 'اسحب لليسار للتحديد، لليمين للتأجيل. استخدم زر التأجيل كبديل للوحة المفاتيح.',
                familySharingTitle: 'المشاركة العائلية',
                familySharingOnboardDesc: 'شارك رمز العائلة أو استخدم QR/WhatsApp. اختر دورك: والد (مدير) أو طفل (محدود).',
                readyToShop: 'جاهز للتسوق!',
                readyToShopDesc: 'أنت جاهز الآن! استخدم جميع الميزات واجعل التسوق تجربة عائلية!',
                // Notifications
                productAdded: 'تمت إضافة منتج للقائمة',
                addedBy: 'أضافه',
                // Errors
                error: 'خطأ',
                tryAgain: 'حاول مرة أخرى',
                invalidEmail: 'بريد إلكتروني غير صالح',
                passwordTooShort: 'كلمة المرور يجب أن تحتوي على 6 أحرف على الأقل',
                passwordsNoMatch: 'كلمات المرور غير متطابقة',
                codeNotFound: 'الرمز غير موجود',
                alreadyMember: 'أنت عضو بالفعل في هذه العائلة',
                selectRoleError: 'يرجى اختيار دور في العائلة',
                enterFamilyName: 'يرجى إدخال اسم العائلة',
                enterCode: 'يرجى إدخال رمز من 6 أحرف',
                // Additional UI strings
                sent: 'تم الإرسال!',
                resetLinkSent: 'تم إرسال رابط إعادة تعيين كلمة المرور إلى',
                checkSpam: 'تحقق من مجلد البريد العشوائي أيضًا',
                backToLogin: 'العودة لتسجيل الدخول',
                enterEmailForReset: 'أدخل بريدك الإلكتروني وسنرسل لك رابط إعادة التعيين',
                displayName: 'اسم العرض',
                displayNamePlaceholder: 'الاسم المعروض في التطبيق',
                minChars: '6 أحرف على الأقل',
                reenterPassword: 'أعد إدخال كلمة المرور',
                enterDisplayName: 'يرجى إدخال اسم العرض',
                smartShoppingList: 'قائمة التسوق الذكية الخاصة بك',
                // Main app UI
                recipes: 'وصفات',
                whatsapp: 'واتساب',
                importList: 'استيراد قائمة',
                exportList: 'تصدير قائمة',
                deleteAll: 'حذف الكل',
                whatForgot: 'ماذا نسيت؟',
                calendar: 'التقويم',
                shoppingProgress: 'تقدم التسوق',
                itemsPurchased: 'منتجات تم شراؤها',
                markPurchased: 'حدد المنتجات المشتراة',
                allPurchased: 'تم شراء جميع المنتجات!',
                purchases: 'مشتريات',
                deleteAllTitle: 'حذف جميع المنتجات',
                deleteAllConfirm: 'هل أنت متأكد أنك تريد حذف جميع المنتجات؟',
                deleteAllWarning: 'سيتم حذف {count} منتج ولا يمكن التراجع!',
                deleteProduct: 'حذف المنتج',
                deleteProductConfirm: 'هل أنت متأكد أنك تريد حذف هذا المنتج؟',
                addProductPlaceholder: 'أضف منتج...',
                // Categories
                fruitsVeg: 'فواكه وخضروات',
                dairyProducts: 'منتجات الألبان',
                dairyDesserts: 'حلويات الألبان',
                meat: 'لحوم',
                fish: 'أسماك',
                deli: 'قسم النقانق',
                breadBakery: 'خبز ومخبوزات',
                spreads: 'معجنات ومربى',
                bakingProducts: 'مواد الخبز',
                cereals: 'حبوب الإفطار',
                cannedDry: 'معلبات وأطعمة جافة',
                spices: 'بهارات وطبخ',
                coffeeTea: 'قهوة وشاي',
                drinks: 'مشروبات غازية',
                wineAlcohol: 'نبيذ وكحول',
                snacks: 'وجبات خفيفة وحلوى',
                frozen: 'مجمدات',
                dietProtein: 'دايت وبروتين',
                hygiene: 'نظافة شخصية',
                cleaning: 'تنظيف',
                candlesOil: 'شموع',
                babyKids: 'أطفال ورضع',
                pets: 'حيوانات أليفة',
                readySalads: 'سلطات جاهزة',
                // More UI strings
                searchAddProduct: 'أضف منتج...',
                emptyList: 'القائمة فارغة',
                addProductsBelow: 'أضف منتجات من شريط البحث أدناه',
                familyNameExample: 'مثال: عائلة محمد',
                listNameExample: 'مثال: تسوق نهاية الأسبوع',
                noteExample: 'مثال: علامة تجارية معينة، من الرف العلوي...',
                importExample: 'حليب\nبيض x2\n3 خبز\nجبنة، زبدة',
                productSearchExample: 'مثال: حليب، جبنة، رقائق...',
                tagExample: 'مثال: طازج، خالي من الغلوتين، عضوي...',
                typeMessage: 'اكتب رسالة...',
                recipeNameExample: 'اسم الوصفة (مثال: كعكة الشوكولاتة)',
                ingredientsExample: 'قائمة المكونات (كل مكون في سطر جديد)',
                feedbackPlaceholder: 'أخبرنا ما حدث أو ما تريد رؤيته...',
                priceComparison: 'مقارنة الأسعار',
                familySettings: 'إعدادات العائلة',
                createNewFamily: 'إنشاء عائلة جديدة',
                joinExistingFamily: 'الانضمام لعائلة موجودة',
                familyChat: 'دردشة العائلة',
                savedLists: 'قوائم محفوظة',
                noSavedLists: 'لا توجد قوائم محفوظة',
                loadToCart: 'تحميل للسلة',
                bought: 'تم الشراء',
                later: 'لاحقاً',
                addToList: 'أضف للقائمة',
                removeFromList: 'إزالة من القائمة',
                selectCategory: 'اختر فئة',
                allCategories: 'جميع الفئات',
                scanRecipe: 'مسح وصفة',
                scanProduct: 'مسح منتج',
                voiceInput: 'إدخال صوتي',
                importFromWhatsapp: 'استيراد من واتساب',
                regularItems: 'منتجات دائمة',
                forgottenItems: 'منتجات منسية',
                shoppingStreak: 'سلسلة التسوق',
                darkMode: 'الوضع الداكن',
                lightMode: 'الوضع الفاتح',
                language: 'اللغة',
                accessibilitySettings: 'إعدادات إمكانية الوصول',
                helpAndFeedback: 'المساعدة والملاحظات',
                showTutorial: 'عرض الإرشادات',
                logoutButton: 'تسجيل الخروج',
                total: 'المجموع',
                items: 'منتجات',
                share: 'مشاركة',
                copy: 'نسخ',
                copied: 'تم النسخ!',
                send: 'إرسال',
                confirm: 'تأكيد',
                selectAll: 'تحديد الكل',
                clearAll: 'مسح الكل',
                noProductsFound: 'لم يتم العثور على منتجات تطابق',
                tryAnotherSearch: 'جرب بحثاً آخر أو اختر فئة',
                noRecipesSaved: 'لا توجد وصفات محفوظة',
                addFirstRecipe: 'أضف أول وصفة',
                noHistoryYet: 'لا يوجد سجل بعد',
                completeFirstShopping: 'أكمل أول تسوق لرؤية الإحصائيات'
            }
        };

        // Language Context
        const LanguageContext = createContext(null);

        function LanguageProvider({ children }) {
            const [language, setLanguage] = useState(() => {
                return localStorage.getItem('appLanguage') || 'he';
            });

            const changeLanguage = (lang) => {
                setLanguage(lang);
                localStorage.setItem('appLanguage', lang);
                // Update document direction
                document.documentElement.dir = (lang === 'he' || lang === 'ar') ? 'rtl' : 'ltr';
                document.documentElement.lang = lang;
            };

            // Set direction whenever language changes
            useEffect(() => {
                document.documentElement.dir = (language === 'he' || language === 'ar') ? 'rtl' : 'ltr';
                document.documentElement.lang = language;
            }, [language]);

            const t = (key) => TRANSLATIONS[language]?.[key] || TRANSLATIONS['he'][key] || key;

            return (
                <LanguageContext.Provider value={{ language, changeLanguage, t }}>
                    {children}
                </LanguageContext.Provider>
            );
        }

        function useLanguage() {
            return useContext(LanguageContext);
        }

        // Family Context
        const FamilyContext = createContext(null);

        function FamilyProvider({ children }) {
            const { user } = useAuth();
            const [family, setFamily] = useState(null);
            const [lists, setLists] = useState([]);
            const [currentList, setCurrentList] = useState(null);
            const [loading, setLoading] = useState(true);
            const [activities, setActivities] = useState([]);

            // Generate random 6-character code
            const generateCode = () => {
                const chars = 'ABCDEFGHJKLMNPQRSTUVWXYZ23456789';
                let code = '';
                for (let i = 0; i < 6; i++) {
                    code += chars.charAt(Math.floor(Math.random() * chars.length));
                }
                return code;
            };

            // Find user's family
            useEffect(() => {
                if (!user) {
                    setFamily(null);
                    setLists([]);
                    setCurrentList(null);
                    setLoading(false);
                    return;
                }

                setLoading(true);

                // Query families where user is a member
                const q = window.firestore.query(
                    window.firestore.collection(window.db, 'families')
                );

                const unsubscribe = window.firestore.onSnapshot(q, async (snapshot) => {
                    let userFamily = null;
                    snapshot.forEach((doc) => {
                        const data = doc.data();
                        const isMember = data.members?.some(m => m.userId === user.uid);
                        if (isMember) {
                            userFamily = { id: doc.id, ...data };
                        }
                    });

                    setFamily(userFamily);
                    setLoading(false);
                });

                return () => unsubscribe();
            }, [user]);

            // Load lists when family changes
            useEffect(() => {
                if (!family) {
                    setLists([]);
                    setCurrentList(null);
                    return;
                }

                const q = window.firestore.query(
                    window.firestore.collection(window.db, 'lists'),
                    window.firestore.where('familyId', '==', family.id)
                );

                const unsubscribe = window.firestore.onSnapshot(q, (snapshot) => {
                    const listsData = [];
                    snapshot.forEach((doc) => {
                        listsData.push({ id: doc.id, ...doc.data() });
                    });
                    listsData.sort((a, b) => (b.isDefault ? 1 : 0) - (a.isDefault ? 1 : 0));
                    setLists(listsData);

                    // Set current list to default or first
                    if (!currentList || !listsData.find(l => l.id === currentList.id)) {
                        const defaultList = listsData.find(l => l.isDefault) || listsData[0];
                        setCurrentList(defaultList);
                    }
                });

                return () => unsubscribe();
            }, [family]);

            // Load activities
            useEffect(() => {
                if (!family) {
                    setActivities([]);
                    return;
                }

                const q = window.firestore.query(
                    window.firestore.collection(window.db, 'activity'),
                    window.firestore.where('familyId', '==', family.id)
                );

                const unsubscribe = window.firestore.onSnapshot(q, (snapshot) => {
                    const activitiesData = [];
                    snapshot.forEach((doc) => {
                        activitiesData.push({ id: doc.id, ...doc.data() });
                    });
                    activitiesData.sort((a, b) => {
                        const dateA = a.timestamp?.toDate?.() || new Date(0);
                        const dateB = b.timestamp?.toDate?.() || new Date(0);
                        return dateB - dateA;
                    });
                    setActivities(activitiesData.slice(0, 50));
                });

                return () => unsubscribe();
            }, [family]);

            // Create a new family
            const createFamily = async (familyName, userRole = 'parent_father') => {
                if (!user) return null;

                const code = generateCode();
                const roleLabel = userRole === 'parent_father' ? 'אבא' : userRole === 'parent_mother' ? 'אמא' : 'הורה';
                const newFamily = {
                    name: familyName,
                    code: code,
                    adminId: user.uid,
                    members: [{
                        userId: user.uid,
                        email: user.email,
                        displayName: user.displayName || user.email,
                        joinedAt: new Date(),
                        role: 'admin',
                        familyRole: userRole,
                        familyRoleLabel: roleLabel,
                        isParent: true
                    }],
                    createdAt: new Date()
                };

                const familyRef = await window.firestore.addDoc(
                    window.firestore.collection(window.db, 'families'),
                    newFamily
                );

                // Create default list
                await window.firestore.addDoc(
                    window.firestore.collection(window.db, 'lists'),
                    {
                        familyId: familyRef.id,
                        name: 'רשימת קניות',
                        icon: '🛒',
                        createdBy: user.uid,
                        createdAt: new Date(),
                        isDefault: true
                    }
                );

                // Log activity
                await logActivity('member_joined', { memberName: user.displayName || user.email }, familyRef.id);

                return { id: familyRef.id, ...newFamily };
            };

            // Join existing family
            const joinFamily = async (code, userRole = 'child') => {
                if (!user) return { success: false, error: 'לא מחובר' };

                const q = window.firestore.query(
                    window.firestore.collection(window.db, 'families'),
                    window.firestore.where('code', '==', code.toUpperCase())
                );

                const snapshot = await window.firestore.getDocs(q);

                if (snapshot.empty) {
                    return { success: false, error: 'קוד לא נמצא' };
                }

                const familyDoc = snapshot.docs[0];
                const familyData = familyDoc.data();

                // Check if already a member
                if (familyData.members?.some(m => m.userId === user.uid)) {
                    return { success: false, error: 'כבר חבר במשפחה זו' };
                }

                const isParent = userRole.startsWith('parent');
                const roleLabel = userRole === 'parent_father' ? 'אבא' : userRole === 'parent_mother' ? 'אמא' : 'ילד/ה';

                // Add user to family
                const newMember = {
                    userId: user.uid,
                    email: user.email,
                    displayName: user.displayName || user.email,
                    joinedAt: new Date(),
                    role: isParent ? 'admin' : 'member',
                    familyRole: userRole,
                    familyRoleLabel: roleLabel,
                    isParent: isParent
                };

                await window.firestore.updateDoc(
                    window.firestore.doc(window.db, 'families', familyDoc.id),
                    { members: window.firestore.arrayUnion(newMember) }
                );

                // Log activity
                await logActivity('member_joined', { memberName: user.displayName || user.email }, familyDoc.id);

                return { success: true };
            };

            // Leave family
            const leaveFamily = async () => {
                if (!family || !user) return;

                const memberToRemove = family.members.find(m => m.userId === user.uid);
                if (!memberToRemove) return;

                // If admin and only member, delete family
                if (family.adminId === user.uid && family.members.length === 1) {
                    // Delete all lists
                    const listsSnapshot = await window.firestore.getDocs(
                        window.firestore.query(
                            window.firestore.collection(window.db, 'lists'),
                            window.firestore.where('familyId', '==', family.id)
                        )
                    );
                    for (const doc of listsSnapshot.docs) {
                        await window.firestore.deleteDoc(doc.ref);
                    }
                    // Delete family
                    await window.firestore.deleteDoc(
                        window.firestore.doc(window.db, 'families', family.id)
                    );
                } else {
                    // Remove member
                    await window.firestore.updateDoc(
                        window.firestore.doc(window.db, 'families', family.id),
                        { members: window.firestore.arrayRemove(memberToRemove) }
                    );
                }
            };

            // Remove member (admin only)
            const removeMember = async (memberUserId) => {
                if (!family || family.adminId !== user.uid) return;
                if (memberUserId === user.uid) return; // Can't remove self

                const memberToRemove = family.members.find(m => m.userId === memberUserId);
                if (!memberToRemove) return;

                await window.firestore.updateDoc(
                    window.firestore.doc(window.db, 'families', family.id),
                    { members: window.firestore.arrayRemove(memberToRemove) }
                );
            };

            // Create new list
            const createList = async (name, icon = '📝') => {
                if (!family) return;

                await window.firestore.addDoc(
                    window.firestore.collection(window.db, 'lists'),
                    {
                        familyId: family.id,
                        name: name,
                        icon: icon,
                        createdBy: user.uid,
                        createdAt: new Date(),
                        isDefault: false
                    }
                );

                await logActivity('list_created', { listName: name });
            };

            // Delete list
            const deleteList = async (listId) => {
                if (!family) return;
                const list = lists.find(l => l.id === listId);
                if (!list || list.isDefault) return; // Can't delete default list

                await window.firestore.deleteDoc(
                    window.firestore.doc(window.db, 'lists', listId)
                );
            };

            // Log activity
            const logActivity = async (type, details = {}, overrideFamilyId = null) => {
                if (!user) return;
                const fid = overrideFamilyId || family?.id;
                if (!fid) return;

                await window.firestore.addDoc(
                    window.firestore.collection(window.db, 'activity'),
                    {
                        familyId: fid,
                        listId: currentList?.id || null,
                        type: type,
                        userId: user.uid,
                        userName: user.displayName || user.email,
                        timestamp: new Date(),
                        ...details
                    }
                );
            };

            const value = {
                family,
                lists,
                currentList,
                setCurrentList,
                activities,
                loading,
                createFamily,
                joinFamily,
                leaveFamily,
                removeMember,
                createList,
                deleteList,
                logActivity,
                isAdmin: family?.adminId === user?.uid
            };

            return <FamilyContext.Provider value={value}>{children}</FamilyContext.Provider>;
        }

        function useFamily() {
            return useContext(FamilyContext);
        }

        // No Family Screen
        function NoFamilyScreen() {
            const [mode, setMode] = useState('choose'); // choose, create, join
            const [familyName, setFamilyName] = useState('');
            const [joinCode, setJoinCode] = useState('');
            const [error, setError] = useState('');
            const [loading, setLoading] = useState(false);
            const [createdCode, setCreatedCode] = useState('');
            const [selectedRole, setSelectedRole] = useState(''); // parent_father, parent_mother, child
            const { createFamily, joinFamily } = useFamily();
            const { user } = useAuth();
            const { t, language } = useLanguage();
            const [darkMode, setDarkMode] = useState(false);

            useEffect(() => {
                const savedDark = localStorage.getItem('darkMode') === 'true';
                if (savedDark) {
                    setDarkMode(true);
                    document.documentElement.classList.add('dark');
                }
            }, []);

            const handleCreate = async (e) => {
                e.preventDefault();
                if (!familyName.trim()) {
                    setError('נא להזין שם למשפחה');
                    return;
                }
                if (!selectedRole) {
                    setError('נא לבחור תפקיד במשפחה');
                    return;
                }
                setLoading(true);
                setError('');
                try {
                    const newFamily = await createFamily(familyName.trim(), selectedRole);
                    setCreatedCode(newFamily.code);
                    setMode('created');
                } catch (err) {
                    setError('שגיאה ביצירת משפחה');
                } finally {
                    setLoading(false);
                }
            };

            const handleJoin = async (e) => {
                e.preventDefault();
                if (!joinCode.trim() || joinCode.trim().length !== 6) {
                    setError('נא להזין קוד בן 6 תווים');
                    return;
                }
                if (!selectedRole) {
                    setError('נא לבחור תפקיד במשפחה');
                    return;
                }
                setLoading(true);
                setError('');
                try {
                    const result = await joinFamily(joinCode.trim(), selectedRole);
                    if (!result.success) {
                        setError(result.error);
                    }
                } catch (err) {
                    setError('שגיאה בהצטרפות');
                } finally {
                    setLoading(false);
                }
            };

            const handleLogout = async () => {
                await window.firebaseAuth.signOut(window.auth);
            };

            const toggleDarkMode = () => {
                const newMode = !darkMode;
                setDarkMode(newMode);
                localStorage.setItem('darkMode', String(newMode));
                document.documentElement.classList.toggle('dark');
            };

            return (
                <div className="min-h-screen gradient-bg flex items-center justify-center p-4">
                    <div className="glass rounded-3xl shadow-2xl p-8 max-w-md w-full relative overflow-hidden">
                        <div className="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500"></div>

                        <button onClick={toggleDarkMode} className="absolute top-6 left-6 p-2.5 rounded-xl bg-white/50 dark:bg-gray-700/50 text-2xl hover:scale-110 transition-all">
                            {darkMode ? '☀️' : '🌙'}
                        </button>

                        <button onClick={handleLogout} className="absolute top-6 right-6 p-2.5 rounded-xl bg-red-100 dark:bg-red-900/50 text-sm text-red-600 dark:text-red-400 hover:scale-105 transition-all">
                            התנתק
                        </button>

                        <div className="text-center mb-8 pt-8">
                            <div className="text-7xl mb-4 float">👨‍👩‍👧‍👦</div>
                            <h1 className="text-2xl font-bold text-gradient mb-2">{t('welcome')}, {user?.displayName || 'משתמש'}!</h1>
                            <p className="text-gray-500 dark:text-gray-400 text-sm">{t('createNewFamily')} / {t('joinExistingFamily')}</p>
                        </div>

                        {mode === 'choose' && (
                            <div className="space-y-4">
                                <button onClick={() => setMode('create')} className="w-full btn-gradient text-white py-4 rounded-xl font-semibold hover:shadow-lg transition-all flex items-center justify-center gap-3">
                                    <span className="text-2xl">🏠</span>
                                    {t('createNewFamily')}
                                </button>
                                <button onClick={() => setMode('join')} className="w-full glass border-2 border-indigo-300 dark:border-indigo-600 py-4 rounded-xl font-semibold hover:bg-indigo-50 dark:hover:bg-indigo-900/30 transition-all flex items-center justify-center gap-3 text-gray-700 dark:text-gray-200">
                                    <span className="text-2xl">🔗</span>
                                    {t('joinExistingFamily')}
                                </button>
                            </div>
                        )}

                        {mode === 'create' && (
                            <form onSubmit={handleCreate} className="space-y-4">
                                <h2 className="text-xl font-bold text-center text-gray-800 dark:text-white mb-4">{t('createFamily')}</h2>

                                {error && (
                                    <div className="bg-red-100 dark:bg-red-900/30 border-2 border-red-300 dark:border-red-700 text-red-700 dark:text-red-300 px-4 py-3 rounded-lg text-sm">
                                        {error}
                                    </div>
                                )}

                                <div>
                                    <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">{t('familyName')}</label>
                                    <input
                                        type="text"
                                        value={familyName}
                                        onChange={e => setFamilyName(e.target.value)}
                                        placeholder={t('familyNameExample')}
                                        className="w-full px-4 py-3 border-2 border-gray-300 dark:border-gray-600 rounded-xl dark:bg-gray-700 dark:text-white focus:border-indigo-500"
                                        required
                                    />
                                </div>

                                <div>
                                    <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">{t('selectRole')}</label>
                                    <div className="grid grid-cols-2 gap-3">
                                        <button
                                            type="button"
                                            onClick={() => setSelectedRole('parent_father')}
                                            className={`p-4 rounded-xl border-2 transition-all flex flex-col items-center gap-2 ${
                                                selectedRole === 'parent_father'
                                                    ? 'border-indigo-500 bg-indigo-50 dark:bg-indigo-900/30'
                                                    : 'border-gray-200 dark:border-gray-600 hover:border-indigo-300'
                                            }`}
                                        >
                                            <span className="text-3xl">👨</span>
                                            <span className="font-medium text-gray-800 dark:text-white">{t('father')}</span>
                                            <span className="text-xs text-green-600">{t('admin')}</span>
                                        </button>
                                        <button
                                            type="button"
                                            onClick={() => setSelectedRole('parent_mother')}
                                            className={`p-4 rounded-xl border-2 transition-all flex flex-col items-center gap-2 ${
                                                selectedRole === 'parent_mother'
                                                    ? 'border-indigo-500 bg-indigo-50 dark:bg-indigo-900/30'
                                                    : 'border-gray-200 dark:border-gray-600 hover:border-indigo-300'
                                            }`}
                                        >
                                            <span className="text-3xl">👩</span>
                                            <span className="font-medium text-gray-800 dark:text-white">{t('mother')}</span>
                                            <span className="text-xs text-green-600">{t('admin')}</span>
                                        </button>
                                    </div>
                                </div>

                                <button type="submit" disabled={loading || !selectedRole} className="w-full btn-gradient text-white py-3 rounded-xl font-semibold disabled:opacity-50">
                                    {loading ? t('loading') : t('createFamily')}
                                </button>

                                <button type="button" onClick={() => { setMode('choose'); setError(''); setSelectedRole(''); }} className="w-full text-indigo-600 dark:text-indigo-400 text-sm hover:underline">
                                    חזור
                                </button>
                            </form>
                        )}

                        {mode === 'join' && (
                            <form onSubmit={handleJoin} className="space-y-4">
                                <h2 className="text-xl font-bold text-center text-gray-800 dark:text-white mb-4">{t('joinFamily')}</h2>

                                {error && (
                                    <div className="bg-red-100 dark:bg-red-900/30 border-2 border-red-300 dark:border-red-700 text-red-700 dark:text-red-300 px-4 py-3 rounded-lg text-sm">
                                        {error}
                                    </div>
                                )}

                                <div>
                                    <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">{t('familyCode')}</label>
                                    <input
                                        type="text"
                                        value={joinCode}
                                        onChange={e => setJoinCode(e.target.value.toUpperCase())}
                                        placeholder="ABC123"
                                        maxLength={6}
                                        className="w-full px-4 py-3 border-2 border-gray-300 dark:border-gray-600 rounded-xl dark:bg-gray-700 dark:text-white focus:border-indigo-500 text-center text-2xl tracking-widest font-mono"
                                        dir="ltr"
                                        required
                                    />
                                    <p className="text-xs text-gray-500 dark:text-gray-400 mt-1 text-center">{t('shareCode')}</p>
                                </div>

                                <div>
                                    <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">{t('selectRole')}</label>
                                    <div className="grid grid-cols-3 gap-2">
                                        <button
                                            type="button"
                                            onClick={() => setSelectedRole('parent_father')}
                                            className={`p-3 rounded-xl border-2 transition-all flex flex-col items-center gap-1 ${
                                                selectedRole === 'parent_father'
                                                    ? 'border-indigo-500 bg-indigo-50 dark:bg-indigo-900/30'
                                                    : 'border-gray-200 dark:border-gray-600 hover:border-indigo-300'
                                            }`}
                                        >
                                            <span className="text-2xl">👨</span>
                                            <span className="text-sm font-medium text-gray-800 dark:text-white">{t('father')}</span>
                                            <span className="text-xs text-green-600">{t('admin')}</span>
                                        </button>
                                        <button
                                            type="button"
                                            onClick={() => setSelectedRole('parent_mother')}
                                            className={`p-3 rounded-xl border-2 transition-all flex flex-col items-center gap-1 ${
                                                selectedRole === 'parent_mother'
                                                    ? 'border-indigo-500 bg-indigo-50 dark:bg-indigo-900/30'
                                                    : 'border-gray-200 dark:border-gray-600 hover:border-indigo-300'
                                            }`}
                                        >
                                            <span className="text-2xl">👩</span>
                                            <span className="text-sm font-medium text-gray-800 dark:text-white">{t('mother')}</span>
                                            <span className="text-xs text-green-600">{t('admin')}</span>
                                        </button>
                                        <button
                                            type="button"
                                            onClick={() => setSelectedRole('child')}
                                            className={`p-3 rounded-xl border-2 transition-all flex flex-col items-center gap-1 ${
                                                selectedRole === 'child'
                                                    ? 'border-indigo-500 bg-indigo-50 dark:bg-indigo-900/30'
                                                    : 'border-gray-200 dark:border-gray-600 hover:border-indigo-300'
                                            }`}
                                        >
                                            <span className="text-2xl">👦</span>
                                            <span className="text-sm font-medium text-gray-800 dark:text-white">{t('child')}</span>
                                            <span className="text-xs text-amber-600">{t('limited')}</span>
                                        </button>
                                    </div>
                                    <p className="text-xs text-gray-500 dark:text-gray-400 mt-2 text-center">{t('childPermissions')}</p>
                                </div>

                                <button type="submit" disabled={loading || !selectedRole} className="w-full btn-gradient text-white py-3 rounded-xl font-semibold disabled:opacity-50">
                                    {loading ? t('loading') : t('joinFamily')}
                                </button>

                                <button type="button" onClick={() => { setMode('choose'); setError(''); }} className="w-full text-indigo-600 dark:text-indigo-400 text-sm hover:underline">
                                    {t('back')}
                                </button>
                            </form>
                        )}

                        {mode === 'created' && (
                            <div className="text-center space-y-4">
                                <div className="text-6xl mb-4">🎉</div>
                                <h2 className="text-xl font-bold text-gradient">המשפחה נוצרה!</h2>
                                <p className="text-gray-600 dark:text-gray-400">שתף את הקוד הזה עם בני המשפחה:</p>
                                <div className="bg-indigo-100 dark:bg-indigo-900/50 px-6 py-4 rounded-xl">
                                    <div className="text-3xl font-mono font-bold text-indigo-600 dark:text-indigo-400 tracking-widest">{createdCode}</div>
                                </div>
                                <button
                                    onClick={() => navigator.clipboard.writeText(createdCode)}
                                    className="text-indigo-600 dark:text-indigo-400 text-sm hover:underline flex items-center justify-center gap-2 mx-auto"
                                >
                                    📋 העתק קוד
                                </button>
                                <p className="text-xs text-gray-500 dark:text-gray-400">הדף יתרענן אוטומטית...</p>
                            </div>
                        )}
                    </div>
                </div>
            );
        }

        // Family Settings Modal
        function FamilySettingsModal({ onClose }) {
            const { family, leaveFamily, removeMember, isAdmin } = useFamily();
            const { user } = useAuth();
            const [showLeaveConfirm, setShowLeaveConfirm] = useState(false);
            const [copied, setCopied] = useState(false);
            const [showShareOptions, setShowShareOptions] = useState(false);
            const [qrCodeUrl, setQrCodeUrl] = useState('');

            const inviteLink = `https://yossigidi.github.io/shooping-list/?join=${family?.code}`;

            const copyCode = () => {
                navigator.clipboard.writeText(family.code);
                setCopied(true);
                setTimeout(() => setCopied(false), 2000);
            };

            const copyLink = () => {
                navigator.clipboard.writeText(inviteLink);
                setCopied(true);
                setTimeout(() => setCopied(false), 2000);
            };

            const generateQRCode = () => {
                try {
                    const qr = qrcode(0, 'M');
                    qr.addData(inviteLink);
                    qr.make();
                    setQrCodeUrl(qr.createDataURL(6, 0));
                    setShowShareOptions(true);
                } catch (e) {
                    console.error('QR generation error:', e);
                }
            };

            const shareViaWhatsApp = () => {
                const text = encodeURIComponent(`הצטרף/י למשפחת "${family.name}" באפליקציית רשימת הקניות שלנו!\n\nקוד הצטרפות: ${family.code}\n\nאו לחץ על הקישור:\n${inviteLink}`);
                window.open(`https://wa.me/?text=${text}`, '_blank');
            };

            const shareViaEmail = () => {
                const subject = encodeURIComponent(`הזמנה להצטרף למשפחת ${family.name}`);
                const body = encodeURIComponent(`שלום!\n\nאני מזמין אותך להצטרף למשפחת "${family.name}" באפליקציית רשימת הקניות המשותפת שלנו.\n\nקוד הצטרפות: ${family.code}\n\nאו לחץ על הקישור הבא:\n${inviteLink}\n\nנתראה ברשימה!`);
                window.open(`mailto:?subject=${subject}&body=${body}`, '_blank');
            };

            const handleLeave = async () => {
                await leaveFamily();
                onClose();
            };

            return (
                <div className="fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4">
                    <div className="glass rounded-3xl p-8 max-w-md w-full shadow-2xl max-h-[90vh] overflow-y-auto">
                        <div className="flex justify-between items-center mb-6">
                            <h2 className="text-2xl font-bold flex items-center gap-3">
                                <span className="text-3xl">👨‍👩‍👧‍👦</span>
                                <span className="text-gradient">{family.name}</span>
                            </h2>
                            <button onClick={onClose} className="w-10 h-10 flex items-center justify-center glass rounded-full text-gray-500 hover:text-red-500 text-2xl hover:scale-110 hover:rotate-90 transition-all">×</button>
                        </div>

                        {/* Share Code */}
                        <div className="glass rounded-xl p-4 mb-4">
                            <h3 className="font-bold text-gray-700 dark:text-gray-300 mb-2">קוד הזמנה</h3>
                            <div className="flex items-center gap-3">
                                <div className="flex-1 bg-indigo-100 dark:bg-indigo-900/50 px-4 py-3 rounded-lg text-center">
                                    <span className="text-2xl font-mono font-bold text-indigo-600 dark:text-indigo-400 tracking-widest">{family.code}</span>
                                </div>
                                <button onClick={copyCode} className="btn-gradient text-white px-4 py-3 rounded-lg hover:scale-105 transition-all">
                                    {copied ? '✓' : '📋'}
                                </button>
                            </div>
                        </div>

                        {/* Share Options Button */}
                        <button
                            onClick={generateQRCode}
                            className="w-full mb-4 bg-gradient-to-r from-green-500 to-emerald-500 text-white py-3 rounded-xl font-semibold hover:from-green-600 hover:to-emerald-600 transition-all flex items-center justify-center gap-2"
                        >
                            <span>📤</span> שתף עם המשפחה
                        </button>

                        {/* Share Options Modal */}
                        {showShareOptions && (
                            <div className="glass rounded-xl p-4 mb-4 border-2 border-green-200 dark:border-green-800">
                                <div className="flex justify-between items-center mb-3">
                                    <h4 className="font-bold text-gray-700 dark:text-gray-300">אפשרויות שיתוף</h4>
                                    <button onClick={() => setShowShareOptions(false)} className="text-gray-400 hover:text-gray-600">✕</button>
                                </div>

                                {/* QR Code */}
                                {qrCodeUrl && (
                                    <div className="flex justify-center mb-4">
                                        <div className="bg-white p-3 rounded-xl">
                                            <img src={qrCodeUrl} alt="QR Code" className="w-40 h-40" />
                                        </div>
                                    </div>
                                )}

                                {/* Share Buttons */}
                                <div className="grid grid-cols-3 gap-2 mb-3">
                                    <button
                                        onClick={shareViaWhatsApp}
                                        className="flex flex-col items-center gap-1 p-3 bg-green-100 dark:bg-green-900/30 rounded-xl hover:bg-green-200 dark:hover:bg-green-900/50 transition-all"
                                    >
                                        <span className="text-2xl">💬</span>
                                        <span className="text-xs font-medium text-green-700 dark:text-green-400">WhatsApp</span>
                                    </button>
                                    <button
                                        onClick={shareViaEmail}
                                        className="flex flex-col items-center gap-1 p-3 bg-blue-100 dark:bg-blue-900/30 rounded-xl hover:bg-blue-200 dark:hover:bg-blue-900/50 transition-all"
                                    >
                                        <span className="text-2xl">📧</span>
                                        <span className="text-xs font-medium text-blue-700 dark:text-blue-400">אימייל</span>
                                    </button>
                                    <button
                                        onClick={copyLink}
                                        className="flex flex-col items-center gap-1 p-3 bg-purple-100 dark:bg-purple-900/30 rounded-xl hover:bg-purple-200 dark:hover:bg-purple-900/50 transition-all"
                                    >
                                        <span className="text-2xl">🔗</span>
                                        <span className="text-xs font-medium text-purple-700 dark:text-purple-400">העתק קישור</span>
                                    </button>
                                </div>

                                <p className="text-xs text-gray-500 dark:text-gray-400 text-center">סרקו את הקוד או שתפו בכל דרך שנוחה לכם</p>
                            </div>
                        )}

                        {/* Members List */}
                        <div className="mb-6">
                            <h3 className="font-bold text-gray-700 dark:text-gray-300 mb-3">חברי המשפחה ({family.members?.length})</h3>
                            <div className="space-y-2">
                                {family.members?.map((member, idx) => (
                                    <div key={idx} className="glass rounded-lg p-3 flex items-center justify-between">
                                        <div className="flex items-center gap-3">
                                            <div className="w-10 h-10 rounded-full bg-gradient-to-br from-indigo-500 to-purple-500 flex items-center justify-center text-white text-xl">
                                                {member.familyRole === 'parent_father' ? '👨' : member.familyRole === 'parent_mother' ? '👩' : member.familyRole === 'child' ? '👦' : member.displayName?.charAt(0)?.toUpperCase() || '?'}
                                            </div>
                                            <div>
                                                <div className="font-medium dark:text-white">{member.displayName}</div>
                                                <div className="text-xs text-gray-500 dark:text-gray-400">
                                                    {member.familyRoleLabel || (member.role === 'admin' ? '👑 מנהל' : 'חבר')}
                                                    {(member.isParent || member.role === 'admin') && <span className="mr-1 text-green-600">• מנהל</span>}
                                                </div>
                                            </div>
                                        </div>
                                        {isAdmin && member.userId !== user.uid && (
                                            <button
                                                onClick={() => removeMember(member.userId)}
                                                className="text-red-500 hover:bg-red-100 dark:hover:bg-red-900/30 p-2 rounded-lg transition-colors"
                                                title="הסר חבר"
                                            >
                                                🗑
                                            </button>
                                        )}
                                    </div>
                                ))}
                            </div>
                        </div>

                        {/* Leave Family */}
                        {!showLeaveConfirm ? (
                            <button
                                onClick={() => setShowLeaveConfirm(true)}
                                className="w-full bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 py-3 rounded-xl font-semibold hover:bg-red-200 dark:hover:bg-red-900/50 transition-colors"
                            >
                                {isAdmin && family.members?.length === 1 ? '🗑 מחק משפחה' : '🚪 עזוב משפחה'}
                            </button>
                        ) : (
                            <div className="glass rounded-xl p-4 border-2 border-red-300 dark:border-red-700">
                                <p className="text-center text-red-600 dark:text-red-400 mb-4 font-medium">
                                    {isAdmin && family.members?.length === 1
                                        ? 'המשפחה תימחק לצמיתות. להמשיך?'
                                        : 'בטוח שברצונך לעזוב?'}
                                </p>
                                <div className="flex gap-2">
                                    <button onClick={handleLeave} className="flex-1 bg-red-500 text-white py-2 rounded-lg font-semibold hover:bg-red-600">
                                        כן, {isAdmin && family.members?.length === 1 ? 'מחק' : 'עזוב'}
                                    </button>
                                    <button onClick={() => setShowLeaveConfirm(false)} className="flex-1 glass py-2 rounded-lg font-semibold">
                                        ביטול
                                    </button>
                                </div>
                            </div>
                        )}
                    </div>
                </div>
            );
        }

        // Create List Modal
        function CreateListModal({ onClose }) {
            const { createList } = useFamily();
            const [name, setName] = useState('');
            const [icon, setIcon] = useState('📝');
            const [loading, setLoading] = useState(false);

            const icons = ['📝', '🛒', '🎉', '🏠', '💊', '🐾', '👶', '🍽️', '🧹', '✈️'];

            const handleSubmit = async (e) => {
                e.preventDefault();
                if (!name.trim()) return;
                setLoading(true);
                await createList(name.trim(), icon);
                onClose();
            };

            return (
                <div className="fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4">
                    <div className="glass rounded-3xl p-8 max-w-sm w-full shadow-2xl">
                        <div className="text-5xl text-center mb-4">📋</div>
                        <h2 className="text-xl font-bold text-center text-gradient mb-6">רשימה חדשה</h2>

                        <form onSubmit={handleSubmit} className="space-y-4">
                            <div>
                                <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">שם הרשימה</label>
                                <input
                                    type="text"
                                    value={name}
                                    onChange={e => setName(e.target.value)}
                                    placeholder="לדוגמה: קניות לשבת"
                                    className="w-full px-4 py-3 border-2 border-gray-300 dark:border-gray-600 rounded-xl dark:bg-gray-700 dark:text-white focus:border-indigo-500"
                                    autoFocus
                                    required
                                />
                            </div>

                            <div>
                                <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">אייקון</label>
                                <div className="flex flex-wrap gap-2">
                                    {icons.map(i => (
                                        <button
                                            key={i}
                                            type="button"
                                            onClick={() => setIcon(i)}
                                            className={`text-2xl p-2 rounded-lg transition-all ${icon === i ? 'bg-indigo-100 dark:bg-indigo-900/50 scale-110' : 'hover:bg-gray-100 dark:hover:bg-gray-700'}`}
                                        >
                                            {i}
                                        </button>
                                    ))}
                                </div>
                            </div>

                            <div className="flex gap-3 pt-2">
                                <button type="submit" disabled={loading} className="flex-1 btn-gradient text-white py-3 rounded-xl font-semibold disabled:opacity-50">
                                    {loading ? 'יוצר...' : 'צור רשימה'}
                                </button>
                                <button type="button" onClick={onClose} className="px-6 py-3 glass border-2 border-gray-300 dark:border-gray-600 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-700">
                                    ביטול
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            );
        }

        // Item Note Modal
        function ItemNoteModal({ item, onClose, onSave }) {
            const { language } = useLanguage();
            const [note, setNote] = useState(item.note || '');
            const [loading, setLoading] = useState(false);

            const handleSave = async () => {
                setLoading(true);
                await onSave(note);
                onClose();
            };

            return (
                <div className="fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4">
                    <div className="glass rounded-3xl p-8 max-w-sm w-full shadow-2xl">
                        <div className="text-5xl text-center mb-4">📝</div>
                        <h2 className="text-xl font-bold text-center text-gradient mb-2">הערה למוצר</h2>
                        <p className="text-center text-gray-500 dark:text-gray-400 mb-4">{getProductTranslation(item.name, language)}</p>

                        <textarea
                            value={note}
                            onChange={e => setNote(e.target.value)}
                            placeholder="לדוגמה: מותג אסם, מהמדף העליון..."
                            className="w-full px-4 py-3 border-2 border-gray-300 dark:border-gray-600 rounded-xl dark:bg-gray-700 dark:text-white focus:border-indigo-500 resize-none h-24 mb-4"
                            autoFocus
                        />

                        <div className="flex gap-3">
                            <button onClick={handleSave} disabled={loading} className="flex-1 btn-gradient text-white py-3 rounded-xl font-semibold disabled:opacity-50">
                                {loading ? 'שומר...' : 'שמור'}
                            </button>
                            <button onClick={onClose} className="px-6 py-3 glass border-2 border-gray-300 dark:border-gray-600 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-700">
                                ביטול
                            </button>
                        </div>
                    </div>
                </div>
            );
        }

        // Error message helper
        function getErrorMessage(errorCode) {
            const messages = {
                'auth/email-already-in-use': 'כתובת האימייל כבר בשימוש',
                'auth/invalid-email': 'כתובת אימייל לא תקינה',
                'auth/operation-not-allowed': 'פעולה לא מורשית',
                'auth/weak-password': 'הסיסמה חלשה מדי (לפחות 6 תווים)',
                'auth/user-disabled': 'המשתמש הושבת',
                'auth/user-not-found': 'משתמש לא נמצא',
                'auth/wrong-password': 'סיסמה שגויה',
                'auth/too-many-requests': 'יותר מדי ניסיונות, נסה שוב מאוחר יותר',
                'auth/invalid-credential': 'פרטי התחברות שגויים',
                'auth/missing-password': 'נא להזין סיסמה'
            };
            return messages[errorCode] || 'אירעה שגיאה, נסה שוב';
        }

        // Sign Up Form
        function SignUpForm({ onSwitchToLogin }) {
            const { t, language } = useLanguage();
            const [email, setEmail] = useState('');
            const [password, setPassword] = useState('');
            const [confirmPassword, setConfirmPassword] = useState('');
            const [displayName, setDisplayName] = useState('');
            const [error, setError] = useState('');
            const [loading, setLoading] = useState(false);
            const isRTL = language === 'he' || language === 'ar';

            const handleSignUp = async (e) => {
                e.preventDefault();
                setError('');

                if (!displayName.trim()) {
                    return setError(t('enterDisplayName'));
                }
                if (password !== confirmPassword) {
                    return setError(t('passwordsNoMatch'));
                }
                if (password.length < 6) {
                    return setError(t('passwordTooShort'));
                }

                try {
                    setLoading(true);
                    const userCredential = await window.firebaseAuth.createUserWithEmailAndPassword(
                        window.auth, email, password
                    );
                    await window.firebaseAuth.updateProfile(userCredential.user, {
                        displayName: displayName.trim()
                    });
                } catch (err) {
                    setError(getErrorMessage(err.code));
                } finally {
                    setLoading(false);
                }
            };

            return (
                <form onSubmit={handleSignUp} className="space-y-4" dir={isRTL ? 'rtl' : 'ltr'}>
                    <h2 className="text-2xl font-bold text-gray-800 dark:text-white text-center mb-6">{t('register')}</h2>

                    {error && (
                        <div className="bg-red-100 dark:bg-red-900/30 border-2 border-red-300 dark:border-red-700 text-red-700 dark:text-red-300 px-4 py-3 rounded-lg text-sm">
                            {error}
                        </div>
                    )}

                    <div>
                        <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">{t('displayName')}</label>
                        <input
                            type="text"
                            value={displayName}
                            onChange={e => setDisplayName(e.target.value)}
                            placeholder={t('displayNamePlaceholder')}
                            className="w-full px-4 py-3 border-2 border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white focus:border-indigo-500 dark:focus:border-indigo-400 transition-colors"
                            required
                        />
                    </div>

                    <div>
                        <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">{t('email')}</label>
                        <input
                            type="email"
                            value={email}
                            onChange={e => setEmail(e.target.value)}
                            placeholder="example@email.com"
                            className="w-full px-4 py-3 border-2 border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white focus:border-indigo-500 dark:focus:border-indigo-400 transition-colors"
                            dir="ltr"
                            required
                        />
                    </div>

                    <div>
                        <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">{t('password')}</label>
                        <input
                            type="password"
                            value={password}
                            onChange={e => setPassword(e.target.value)}
                            placeholder={t('minChars')}
                            className="w-full px-4 py-3 border-2 border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white focus:border-indigo-500 dark:focus:border-indigo-400 transition-colors"
                            dir="ltr"
                            required
                        />
                    </div>

                    <div>
                        <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">{t('confirmPassword')}</label>
                        <input
                            type="password"
                            value={confirmPassword}
                            onChange={e => setConfirmPassword(e.target.value)}
                            placeholder={t('reenterPassword')}
                            className="w-full px-4 py-3 border-2 border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white focus:border-indigo-500 dark:focus:border-indigo-400 transition-colors"
                            dir="ltr"
                            required
                        />
                    </div>

                    <button
                        type="submit"
                        disabled={loading}
                        className="w-full bg-gradient-to-r from-indigo-600 to-purple-600 text-white py-3 rounded-lg font-semibold hover:from-indigo-700 hover:to-purple-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed"
                    >
                        {loading ? t('loading') : t('register')}
                    </button>

                    <p className="text-center text-gray-600 dark:text-gray-400 text-sm">
                        {t('haveAccount')}{' '}
                        <button type="button" onClick={onSwitchToLogin} className="text-indigo-600 dark:text-indigo-400 font-semibold hover:underline">
                            {t('login')}
                        </button>
                    </p>
                </form>
            );
        }

        // Login Form
        function LoginForm({ onSwitchToSignUp, onSwitchToReset }) {
            const { t, language } = useLanguage();
            const [email, setEmail] = useState('');
            const [password, setPassword] = useState('');
            const [error, setError] = useState('');
            const [loading, setLoading] = useState(false);
            const isRTL = language === 'he' || language === 'ar';

            const handleLogin = async (e) => {
                e.preventDefault();
                setError('');

                try {
                    setLoading(true);
                    await window.firebaseAuth.signInWithEmailAndPassword(window.auth, email, password);
                } catch (err) {
                    setError(getErrorMessage(err.code));
                } finally {
                    setLoading(false);
                }
            };

            return (
                <form onSubmit={handleLogin} className="space-y-4" dir={isRTL ? 'rtl' : 'ltr'}>
                    <h2 className="text-2xl font-bold text-gray-800 dark:text-white text-center mb-6">{t('login')}</h2>

                    {error && (
                        <div className="bg-red-100 dark:bg-red-900/30 border-2 border-red-300 dark:border-red-700 text-red-700 dark:text-red-300 px-4 py-3 rounded-lg text-sm">
                            {error}
                        </div>
                    )}

                    <div>
                        <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">{t('email')}</label>
                        <input
                            type="email"
                            value={email}
                            onChange={e => setEmail(e.target.value)}
                            placeholder="example@email.com"
                            className="w-full px-4 py-3 border-2 border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white focus:border-indigo-500 dark:focus:border-indigo-400 transition-colors"
                            dir="ltr"
                            required
                        />
                    </div>

                    <div>
                        <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">{t('password')}</label>
                        <input
                            type="password"
                            value={password}
                            onChange={e => setPassword(e.target.value)}
                            placeholder={t('password')}
                            className="w-full px-4 py-3 border-2 border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white focus:border-indigo-500 dark:focus:border-indigo-400 transition-colors"
                            dir="ltr"
                            required
                        />
                    </div>

                    <button
                        type="submit"
                        disabled={loading}
                        className="w-full bg-gradient-to-r from-indigo-600 to-purple-600 text-white py-3 rounded-lg font-semibold hover:from-indigo-700 hover:to-purple-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed"
                    >
                        {loading ? t('loading') : t('login')}
                    </button>

                    <button
                        type="button"
                        onClick={onSwitchToReset}
                        className="w-full text-indigo-600 dark:text-indigo-400 text-sm hover:underline"
                    >
                        {t('forgotPassword')}
                    </button>

                    <p className="text-center text-gray-600 dark:text-gray-400 text-sm">
                        {t('noAccount')}{' '}
                        <button type="button" onClick={onSwitchToSignUp} className="text-indigo-600 dark:text-indigo-400 font-semibold hover:underline">
                            {t('register')}
                        </button>
                    </p>
                </form>
            );
        }

        // Password Reset Form
        function PasswordResetForm({ onSwitchToLogin }) {
            const { t, language } = useLanguage();
            const [email, setEmail] = useState('');
            const [error, setError] = useState('');
            const [success, setSuccess] = useState(false);
            const [loading, setLoading] = useState(false);
            const isRTL = language === 'he' || language === 'ar';

            const handleReset = async (e) => {
                e.preventDefault();
                setError('');

                try {
                    setLoading(true);
                    await window.firebaseAuth.sendPasswordResetEmail(window.auth, email);
                    setSuccess(true);
                } catch (err) {
                    setError(getErrorMessage(err.code));
                } finally {
                    setLoading(false);
                }
            };

            if (success) {
                return (
                    <div className="text-center space-y-4" dir={isRTL ? 'rtl' : 'ltr'}>
                        <div className="text-6xl">📧</div>
                        <h2 className="text-2xl font-bold text-gray-800 dark:text-white">{t('sent')}</h2>
                        <p className="text-gray-600 dark:text-gray-400">
                            {t('resetLinkSent')}<br/>
                            <span className="font-semibold" dir="ltr">{email}</span>
                        </p>
                        <p className="text-sm text-gray-500 dark:text-gray-500">{t('checkSpam')}</p>
                        <button
                            onClick={onSwitchToLogin}
                            className="text-indigo-600 dark:text-indigo-400 font-semibold hover:underline"
                        >
                            {t('backToLogin')}
                        </button>
                    </div>
                );
            }

            return (
                <form onSubmit={handleReset} className="space-y-4" dir={isRTL ? 'rtl' : 'ltr'}>
                    <h2 className="text-2xl font-bold text-gray-800 dark:text-white text-center mb-2">{t('resetPassword')}</h2>
                    <p className="text-center text-gray-600 dark:text-gray-400 text-sm mb-6">
                        {t('enterEmailForReset')}
                    </p>

                    {error && (
                        <div className="bg-red-100 dark:bg-red-900/30 border-2 border-red-300 dark:border-red-700 text-red-700 dark:text-red-300 px-4 py-3 rounded-lg text-sm">
                            {error}
                        </div>
                    )}

                    <div>
                        <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">{t('email')}</label>
                        <input
                            type="email"
                            value={email}
                            onChange={e => setEmail(e.target.value)}
                            placeholder="example@email.com"
                            className="w-full px-4 py-3 border-2 border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white focus:border-indigo-500 dark:focus:border-indigo-400 transition-colors"
                            dir="ltr"
                            required
                        />
                    </div>

                    <button
                        type="submit"
                        disabled={loading}
                        className="w-full bg-gradient-to-r from-indigo-600 to-purple-600 text-white py-3 rounded-lg font-semibold hover:from-indigo-700 hover:to-purple-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed"
                    >
                        {loading ? t('sending') : t('sendResetLink')}
                    </button>

                    <button
                        type="button"
                        onClick={onSwitchToLogin}
                        className="w-full text-indigo-600 dark:text-indigo-400 text-sm hover:underline"
                    >
                        {t('backToLogin')}
                    </button>
                </form>
            );
        }

        // Auth Screen Container
        function AuthScreen() {
            const [mode, setMode] = useState('login');
            const [darkMode, setDarkMode] = useState(false);

            useEffect(() => {
                const savedDark = localStorage.getItem('darkMode') === 'true';
                if (savedDark) {
                    setDarkMode(true);
                    document.documentElement.classList.add('dark');
                }
            }, []);

            const toggleDarkMode = () => {
                const newMode = !darkMode;
                setDarkMode(newMode);
                localStorage.setItem('darkMode', String(newMode));
                document.documentElement.classList.toggle('dark');
            };

            return (
                <div className="min-h-screen gradient-bg flex items-center justify-center p-4">
                    <div className="glass rounded-3xl shadow-2xl p-8 max-w-md w-full relative overflow-hidden">
                        <div className="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500"></div>
                        <button
                            onClick={toggleDarkMode}
                            className="absolute top-6 left-6 p-2.5 rounded-xl bg-white/50 dark:bg-gray-700/50 text-2xl hover:scale-110 transition-all duration-300 shadow-lg"
                        >
                            {darkMode ? '☀️' : '🌙'}
                        </button>

                        <div className="text-center mb-8 pt-4">
                            <div className="text-7xl mb-4 float">🛒</div>
                            <h1 className="text-3xl font-bold text-gradient mb-2">ListNest</h1>
                            <p className="text-gray-500 dark:text-gray-400 text-sm">רשימת הקניות החכמה שלך</p>
                        </div>

                        {mode === 'login' && (
                            <LoginForm
                                onSwitchToSignUp={() => setMode('signup')}
                                onSwitchToReset={() => setMode('reset')}
                            />
                        )}
                        {mode === 'signup' && (
                            <SignUpForm onSwitchToLogin={() => setMode('login')} />
                        )}
                        {mode === 'reset' && (
                            <PasswordResetForm onSwitchToLogin={() => setMode('login')} />
                        )}
                    </div>
                </div>
            );
        }

        const CATEGORIES = {
            fruits: { name: 'פירות וירקות', icon: '🍎', unit: 'ק"ג', unitOptions: ['ק"ג', 'יח\'', 'גרם'] },
            dairy: { name: 'מוצרי חלב', icon: '🧀', unit: 'יח\'', unitOptions: ['יח\'', 'גרם', 'מ"ל', 'ליטר'] },
            desserts: { name: 'מעדני חלב', icon: '🍨', unit: 'יח\'', unitOptions: ['יח\'', 'גרם'] },
            meat: { name: 'בשר', icon: '🥩', unit: 'ק"ג', unitOptions: ['ק"ג', 'גרם', 'יח\''] },
            fish: { name: 'דגים', icon: '🐟', unit: 'ק"ג', unitOptions: ['ק"ג', 'גרם', 'יח\''] },
            deli: { name: 'מעדניית נקניקים', icon: '🥓', unit: 'גרם', unitOptions: ['גרם', 'ק"ג', 'יח\''] },
            salads: { name: 'סלטים מוכנים', icon: '🥗', unit: 'יח\'', unitOptions: ['יח\'', 'גרם'] },
            bakery: { name: 'לחם ומאפים', icon: '🥐', unit: 'יח\'', unitOptions: ['יח\''] },
            spreads: { name: 'ממרחים', icon: '🍯', unit: 'יח\'', unitOptions: ['יח\'', 'גרם'] },
            baking: { name: 'מוצרי אפיה', icon: '🧁', unit: 'יח\'', unitOptions: ['יח\'', 'גרם', 'ק"ג'] },
            cereals: { name: 'דגנים וקורנפלקס', icon: '🌾', unit: 'יח\'', unitOptions: ['יח\'', 'גרם'] },
            canned: { name: 'שימורים ומזון יבש', icon: '🥫', unit: 'יח\'', unitOptions: ['יח\'', 'גרם'] },
            spices: { name: 'תבלינים ובישול', icon: '🌿', unit: 'גרם', unitOptions: ['גרם', 'יח\''] },
            coffee: { name: 'קפה ותה', icon: '☕', unit: 'יח\'', unitOptions: ['יח\'', 'גרם'] },
            drinks: { name: 'משקאות קלים', icon: '🧃', unit: 'יח\'', unitOptions: ['יח\'', 'ליטר', 'מ"ל'] },
            wine: { name: 'יין ואלכוהול', icon: '🍷', unit: 'יח\'', unitOptions: ['יח\'', 'מ"ל'] },
            snacks: { name: 'חטיפים וממתקים', icon: '🍫', unit: 'יח\'', unitOptions: ['יח\'', 'גרם'] },
            frozen: { name: 'קפואים', icon: '❄️', unit: 'יח\'', unitOptions: ['יח\'', 'ק"ג', 'גרם'] },
            health: { name: 'דיאטה וחלבון', icon: '🥗', unit: 'יח\'', unitOptions: ['יח\'', 'גרם'] },
            hygiene: { name: 'היגיינה ורחצה', icon: '🛁', unit: 'יח\'', unitOptions: ['יח\''] },
            cleaning: { name: 'ניקיון', icon: '✨', unit: 'יח\'', unitOptions: ['יח\'', 'ליטר'] },
            candles: { name: 'נרות', icon: '🕯️', unit: 'יח\'', unitOptions: ['יח\''] },
            baby: { name: 'תינוקות וילדים', icon: '🍼', unit: 'יח\'', unitOptions: ['יח\''] },
            pets: { name: 'חיות מחמד', icon: '🐕', unit: 'יח\'', unitOptions: ['יח\'', 'ק"ג'] }
        };

        // Israeli holidays for calendar reminders (2025-2026 dates)
        const ISRAELI_HOLIDAYS = [
            { name: 'פורים', icon: '🎭', date: '14.03.2025', dateObj: new Date('2025-03-14'), reminder: 'זמן לקנות משלוחי מנות ואוזני המן', type: 'jewish' },
            { name: 'פסח', icon: '🍷', date: '13-19.04.2025', dateObj: new Date('2025-04-13'), reminder: 'זמן לקנות מצות, יין, חרוסת ומצרכים לחג', type: 'jewish' },
            { name: 'יום הזיכרון', icon: '🕯️', date: '30.04.2025', dateObj: new Date('2025-04-30'), reminder: 'יום זיכרון לחללי צה"ל', type: 'national' },
            { name: 'יום העצמאות', icon: '🇮🇱', date: '01.05.2025', dateObj: new Date('2025-05-01'), reminder: 'זמן לקנות בשר, נקניקיות וציוד למנגל!', type: 'national' },
            { name: 'ל"ג בעומר', icon: '🔥', date: '16.05.2025', dateObj: new Date('2025-05-16'), reminder: 'זמן לקנות בשר ונקניקיות למדורה', type: 'jewish' },
            { name: 'יום ירושלים', icon: '🏛️', date: '02.06.2025', dateObj: new Date('2025-06-02'), reminder: 'יום ירושלים', type: 'national' },
            { name: 'שבועות', icon: '🧀', date: '02-03.06.2025', dateObj: new Date('2025-06-02'), reminder: 'זמן לקנות מוצרי חלב ועוגות גבינה', type: 'jewish' },
            { name: 'ראש השנה', icon: '🍎', date: '23-24.09.2025', dateObj: new Date('2025-09-23'), reminder: 'זמן לקנות דבש, תפוחים, רימונים ודגים', type: 'jewish' },
            { name: 'יום כיפור', icon: '🕯️', date: '02.10.2025', dateObj: new Date('2025-10-02'), reminder: 'זמן להכין אוכל לפני ואחרי הצום', type: 'jewish' },
            { name: 'סוכות', icon: '🌿', date: '07-13.10.2025', dateObj: new Date('2025-10-07'), reminder: 'זמן לקנות ארבעת המינים ואוכל לחג', type: 'jewish' },
            { name: 'שמחת תורה', icon: '📜', date: '15.10.2025', dateObj: new Date('2025-10-15'), reminder: 'זמן להכין כיבוד וממתקים', type: 'jewish' },
            { name: 'חנוכה', icon: '🕎', date: '15-22.12.2025', dateObj: new Date('2025-12-15'), reminder: 'זמן לקנות שמן, נרות, סופגניות ולביבות', type: 'jewish' },
            { name: 'סילבסטר', icon: '🥂', date: '31.12.2025', dateObj: new Date('2025-12-31'), reminder: 'מסיבת סוף שנה - זמן לקנות חטיפים ושתייה', type: 'civil' },
            { name: 'ראש השנה האזרחית', icon: '🎉', date: '01.01.2026', dateObj: new Date('2026-01-01'), reminder: 'שנה אזרחית חדשה!', type: 'civil' },
            { name: 'ט"ו בשבט', icon: '🌳', date: '04.02.2026', dateObj: new Date('2026-02-04'), reminder: 'זמן לקנות פירות יבשים ופירות הארץ', type: 'jewish' },
            { name: 'פורים', icon: '🎭', date: '03.03.2026', dateObj: new Date('2026-03-03'), reminder: 'זמן לקנות משלוחי מנות ואוזני המן', type: 'jewish' },
            { name: 'פסח', icon: '🍷', date: '02-08.04.2026', dateObj: new Date('2026-04-02'), reminder: 'זמן לקנות מצות, יין, חרוסת ומצרכים לחג', type: 'jewish' }
        ];

        const PRODUCTS = {
            dairy: ['חלב 3%', 'חלב 1%', 'חלב דל שומן', 'חלב סויה', 'חלב שקדים', 'חלב קוקוס', 'חלב שיבולת שועל', 'לבן', 'לבן עז', 'גבינה צהובה עמק', 'גבינה צהובה גלבוע', 'גבינה צהובה 9%', 'גבינה צהובה 22%', 'קוטג׳ 5%', 'קוטג׳ 3%', 'גבינה בולגרית', 'צפתית', 'גבינת שמנת', 'פרמזן', 'מוצרלה', 'ביצים L', 'ביצים XL', 'ביצים אורגניות', 'ביצים חופשיות', 'חמאה', 'חמאה מלוחה', 'שמנת מתוקה', 'שמנת חמוצה', 'שמנת לקצפת', 'יוגורט', 'יוגורט יווני', 'יוגורט יווני 0%', 'יוגורט תנובה', 'יוגורט שטראוס', 'יוגורט אקטיביה', 'גבינה לבנה 5%', 'גבינה לבנה 9%', 'יוגורט אורגני', 'יוגורט לילדים', 'גבינת עזים', 'גבינת רוקפור', 'קשקבל', 'גאודה', 'אמנטל', 'ברי', 'קממבר', 'חלומי', 'פילדלפיה', 'לאבנה', 'ריקוטה', 'מסקרפונה', 'ממרח גבינה', 'גבינה מותכת', 'חמאה בצל', 'חמאה שום', 'מרגרינה', 'טופו', 'טופו מוקשה'],

            fruits: ['עגבניות', 'עגבניות שרי', 'עגבניות מגי', 'מלפפונים', 'מלפפון בייבי', 'בצל', 'בצל סגול', 'בצל ירוק', 'שום', 'שום קלוף', 'פלפל אדום', 'פלפל ירוק', 'פלפל צהוב', 'פלפל כתום', 'פלפל חריף', 'חסה', 'חסה אייסברג', 'חסה רומית', 'כרוב', 'כרוב סגול', 'כרוב סיני', 'גזר', 'גזר בייבי', 'סלק', 'סלק מבושל', 'תפו״א אדום', 'תפו״א לבן', 'בטטה', 'קישוא', 'קישוא ירוק', 'חציל', 'ברוקולי', 'כרובית', 'תרד', 'תרד בייבי', 'שמיר', 'טרגון', 'ראשאד', 'ריחן', 'נענע', 'רוקט', 'פטרוזיליה', 'כוסברה', 'סלרי', 'שומר', 'קולורבי', 'ארטישוק', 'אספרגוס', 'פטריות שמפיניון', 'פטריות פורטובלו', 'לימון', 'ליים', 'בננות', 'תפוחים ירוקים', 'תפוחים אדומים', 'תפוזים', 'אשכולית', 'אשכולית אדומה', 'פומלה', 'אבטיח', 'מלון', 'מלון גליה', 'ענבים ירוקים', 'ענבים שחורים', 'אגס', 'שזיפים', 'אפרסקים', 'נקטרינות', 'קלמנטינות', 'קיווי', 'רימונים', 'מנגו', 'אננס', 'אבוקדו', 'תותים', 'פטל', 'אוכמניות', 'דובדבנים', 'משמש', 'תאנים', 'פסיפלורה', 'פפאיה', 'קרמבולה', 'ליצ\'י', 'דרקון פרי', 'קוקוס'],

            bakery: ['לחם', 'לחם מלא', 'לחם שיפון', 'לחם כוסמין', 'לחם דגנים', 'לחם פרוס', 'לחם אחיד', 'לחם ללא גלוטן', 'חלה', 'חלה מלאה', 'חלה מתוקה', 'עוגיות', 'עוגיות שוקולד צ\'יפס', 'עוגיות חמאה', 'פיתות', 'פיתות מלאות', 'פיתות מיני', 'לחמניות', 'לחמניות המבורגר', 'לחמניות נקניקיה', 'בגט', 'צ\'בטה', 'פוקצ\'ה', 'רולדה', 'לחם שומשום', 'לחם פשוט', 'מצות', 'מצות מלאות', 'קרקרים', 'לחם קל', 'טורטייה', 'לאפה', 'נאן', 'קרואסון', 'קרואסון שוקולד', 'בריוש', 'סופגניות', 'דונאטס', 'מאפינס', 'עוגת שמרים', 'שטרודל', 'רוגלך', 'בורקס', 'בורקס גבינה', 'בורקס תפו״א', 'בורקס פטריות'],

            spreads: ['נוטלה', 'נוטלה 400 גרם', 'נוטלה 750 גרם', 'ממרח שוקולד', 'ממרח שוקולד השחר העולה', 'ממרח שוקולד עלית', 'ממרח אגוזים', 'ממרח לוטוס', 'חמאת בוטנים', 'חמאת בוטנים חלקה', 'חמאת בוטנים קראנצ\'י', 'חמאת בוטנים סקיפי', 'חמאת שקדים', 'חמאת קשיו', 'חמאת אגוזי לוז', 'טחינה', 'טחינה גולמית', 'טחינה אל ארז', 'טחינה הבאבא', 'חלווה', 'חלווה פרוסה', 'חלווה שוקולד', 'חלווה פיסטוק', 'ריבה', 'ריבה תות', 'ריבה משמש', 'ריבה דובדבן', 'ריבה תפוז', 'ריבה פטל', 'ריבה ללא סוכר', 'מרמלדה', 'דבש', 'דבש טהור', 'דבש פרחים', 'דבש אורגני', 'סילאן', 'סילאן טהור', 'ממרח שום', 'ממרח זיתים', 'ממרח עגבניות מיובשות', 'ממרח ארטישוק', 'פסטו', 'פסטו ירוק', 'פסטו אדום', 'ממרח טונה', 'ממרח חציל', 'חומוס ממרח'],

            baking: ['קמח', 'קמח לבן', 'קמח מלא', 'קמח תירס', 'קמח כוסמין', 'קמח שקדים', 'קמח קוקוס', 'קמח ללא גלוטן', 'קמח תופח', 'קמח לחלה', 'קמח ללחם', 'קמח לפיצה', 'קמח לפוקצ\'ה', 'קמח לבן מנופה', 'קורנפלור', 'עמילן', 'עמילן תירס', 'סוכר', 'סוכר לבן', 'סוכר חום', 'סוכר דמררה', 'סוכר וניל', 'סוכר אבקה', 'סוכרת', 'סטיביה', 'שמרים', 'שמרים יבשים', 'שמרים טריים', 'אבקת אפייה', 'סודה לשתייה', 'וניל', 'תמצית וניל', 'מקלות וניל', 'שוקולד צ\'יפס', 'שוקולד צ\'יפס מריר', 'שוקולד צ\'יפס לבן', 'שוקולד מריר לאפייה', 'שוקולד חלב לאפייה', 'שוקולד לבן לאפייה', 'קקאו', 'אבקת קקאו', 'קוקוס מגורד', 'קוקוס טחון', 'שקדים', 'שקדים טחונים', 'שקדים פרוסים', 'שקדים שלמים', 'אגוזי מלך', 'אגוזי מלך טחונים', 'פקאן', 'פקאן טחון', 'קשיו', 'פיסטוק', 'אגוזי לוז', 'צימוקים', 'חמוציות', 'תמרים', 'תמרים מג\'הול', 'פרג', 'שומשום', 'מרציפן', 'פונדנט', 'בצק סוכר', 'צבעי מאכל', 'סוכריות לקישוט', 'גליטר לאפייה', 'פירורי לחם', 'פירורי ביסקוויט', 'פודינג שוקולד', 'פודינג וניל'],

            meat: ['עוף שלם טרי', 'עוף שלם קפוא', 'חזה עוף טרי', 'חזה עוף קפוא', 'חזה עוף פרוס טרי', 'כרעיים עוף טריות', 'כרעיים עוף קפואות', 'שוקיים עוף טריים', 'שוקיים עוף קפואים', 'כנפיים עוף טריות', 'כנפיים עוף קפואות', 'עוף טחון טרי', 'עוף טחון קפוא', 'כבד עוף טרי', 'כבד עוף קפוא', 'לבבות עוף', 'פרגית טרייה', 'פרגית קפואה', 'חזה הודו טרי', 'חזה הודו קפוא', 'הודו טחון טרי', 'הודו טחון קפוא', 'בשר טחון טרי', 'בשר טחון קפוא', 'בשר טחון רזה טרי', 'אנטריקוט טרי', 'אנטריקוט קפוא', 'סינטה טרייה', 'סינטה קפואה', 'פילה בקר טרי', 'פילה בקר קפוא', 'צלעות בקר טריות', 'צלעות בקר קפואות', 'שפונדרה טרייה', 'שפונדרה קפואה', 'אסאדו טרי', 'אסאדו קפוא', 'גולש טרי', 'גולש קפוא', 'בשר לשווארמה טרי', 'בשר לשווארמה קפוא', 'טלה טרי', 'טלה קפוא', 'כבש טרי', 'כבש קפוא', 'שניצל עוף טרי', 'שניצל עוף קפוא', 'שניצל הודו טרי', 'שניצל הודו קפוא', 'קבב טרי', 'קבב קפוא', 'המבורגר טרי', 'המבורגר קפוא', 'המבורגר ביתי', 'נקניקיות עוף', 'נקניקיות בקר'],

            fish: ['סלמון טרי', 'סלמון קפוא', 'סלמון מעושן', 'פילה סלמון טרי', 'פילה סלמון קפוא', 'פילה אמנון טרי', 'פילה אמנון קפוא', 'פילה בורי טרי', 'פילה בורי קפוא', 'פילה דניס טרי', 'פילה דניס קפוא', 'טונה טרייה', 'דג שלם טרי', 'דג שלם קפוא', 'נסיכי ים', 'שרימפס קפוא', 'קלמארי קפוא', 'מולים', 'סרדינים', 'דג מעושן'],

            desserts: ['מילקי', 'מילקי אוראו', 'דנונה', 'דנונה שוקולד', 'יופלה', 'דניאלה', 'מעדן וניל', 'מעדן שוקולד', 'מעדן קרמל', 'מעדן ביסקוויטים', 'מעדן לוטוס', 'שוקו יטבתה', 'שוקו תנובה', 'מעדן יוגורט', 'מעדן תות', 'מעדן בננה', 'מוס שוקולד', 'מוס וניל', 'פרי גד', 'דן בראון', 'טירמיסו', 'קרם ברולה', 'פנקוטה', 'אורז חלב', 'סהרון', 'גו', 'מונטה', 'קינדר מילק'],

            deli: ['סלמי מעושן', 'נקניק כתף', 'סלמי תה', 'נקניק סלמי קוניאק', 'נקניק מרטלדה', 'רוסטביף', 'כתף בקר מפולפל', 'פסטרמה איטלקית', 'פסטרמה גחלים', 'פסטרמה גריל', 'פסטרמה הודו', 'פסטרמה דבש', 'פסטרמה ברביקיו', 'פסטרמה צלויה על לבנים', 'פסטרמה פרגיות', 'פסטרמה כפרית'],

            salads: ['חומוס', 'טחינה', 'סלט חצילים', 'סלט מטבוחה', 'סלט טורקי', 'סלט כרוב', 'סלט גזר', 'סלט קולסלו', 'סלט ביצים', 'סלט טונה', 'סלט בולגרי', 'סלט ירקות', 'סלט קינואה', 'סלט פסטה', 'סלט עדשים', 'גואקמולה', 'סלסה', 'באבא גנוש', 'סלט חומוס', 'סלט פטריות', 'סלט סלק', 'סלט תפו״א', 'סלט פלפלים קלויים', 'ממרח אבוקדו', 'סלט אבוקדו'],

            canned: ['אורז', 'אורז בסמטי', 'אורז יסמין', 'אורז מלא', 'אורז סושי', 'אורז פרסי', 'פסטה', 'פסטה פנה', 'פסטה ספגטי', 'פסטה פרפלה', 'פסטה פוזילי', 'פסטה לזניה', 'פסטה מלאה', 'קוסקוס', 'קוסקוס מלא', 'קוסקוס פתיתים', 'קטניות', 'רוטב עגבניות', 'רוטב פסטה', 'רסק עגבניות', 'טונה', 'טונה במים', 'טונה בשמן', 'טונה ברוטב', 'תירס', 'תירס מתוק', 'גרגירי תירס', 'שמן זית', 'שמן זית כתית', 'שמן קנולה', 'שמן חמניות', 'שמן תירס', 'שמן שומשום', 'שמן אגוזים', 'חומץ בלסמי', 'חומץ יין', 'חומץ תפוחים', 'חומץ לבן', 'מיץ לימון', 'חומוס', 'חומוס טחון', 'זיתים', 'זיתים שחורים', 'זיתים ירוקים', 'זיתים קלמטה', 'מלפפון חמוץ', 'פלפל חריף', 'פפריקה קלויה', 'בוטנים', 'חיטה', 'בורגול', 'קינואה', 'פריקה', 'נודלס', 'אטריות', 'פול', 'גרגירי חומוס', 'עדשים', 'עדשים כתומות', 'עדשים ירוקות', 'שעועית לבנה', 'שעועית אדומה', 'שעועית שחורה', 'אפונה', 'סויה', 'מאש'],

            cereals: ['קורנפלקס קלאסי', 'קורנפלקס דבש', 'קורנפלקס שוקולד', 'קורנפלקס כריות', 'קורנפלקס פירות', 'טריקס', 'פתיתי תירס', 'גרנולה', 'גרנולה שוקולד', 'גרנולה פירות', 'גרנולה אגוזים', 'מוזלי', 'שיבולת שועל', 'פצפוצי אורז', 'קוואקר', 'דגנים מלאים', 'מיני וויטס', 'צ\'ריוס', 'נסטלה פיטנס', 'סנאק בר', 'חטיף דגנים', 'חטיף גרנולה', 'אול בראן', 'פרוטי לופס', 'קוקו פופס', 'ליון', 'סמאקס', 'צ\'רינגס', 'קראנץ\'', 'סיני קראנץ\'', 'כדורי שוקולד'],

            spices: ['מלח', 'מלח ים', 'מלח שולחן', 'מלח גס', 'פלפל שחור', 'פלפל גרוס', 'פפריקה', 'פפריקה מתוקה', 'פפריקה חריפה', 'פפריקה מעושנת', 'כורכום', 'כמון', 'קינמון', 'קינמון טחון', 'מקלות קינמון', 'אבקת שום', 'אבקת בצל', 'אורגנו', 'בזיליקום', 'זעתר', 'סומק', 'חוואייג׳', 'תבלין לעוף', 'תבלין לדגים', 'תבלין לבשר', 'תבלין גריל', 'קארי', 'גרם מסאלה', 'ציילי', 'קיאן', 'זנגביל', 'אגוז מוסקט', 'ציפורן', 'כוסברה טחונה', 'קרדמון', 'עלי דפנה', 'רוזמרין', 'טימין', 'פפריקה מנטה', 'הל', 'כוכב אניס', 'שומר', 'עירית', 'מרווה'],

            coffee: ['קפה נמס', 'קפה ג\'קובס', 'קפה טורקי', 'קפה שחור', 'קפה נספרסו', 'קפה נטול קפאין', 'קפסולות נספרסו', 'קפסולות דולצ\'ה', 'קפסולות לוואצה', 'קפסולות טאסימו', 'קפסולות לנדוור', 'קפה קלוי טחון', 'תה שחור', 'תה ירוק', 'תה ירוק יסמין', 'תה צמחים', 'תה נענע', 'תה לואיזה', 'תה ליפטון', 'תה ויסוצקי', 'תה פוקימון', 'תה קמומיל', 'תה מרווה', 'תה ג\'ינג\'ר', 'תה לימון', 'תה ארל גריי', 'תה אנגלי', 'חלב מרוכז', 'אייס קפה', 'קקאו שוקו', 'אבקת קקאו'],

            drinks: ['מים בטעמים', 'מי עדן', 'נביעות', 'קולה 1.5 ליטר', 'קולה 1 ליטר', 'קולה פחית', 'שישיית קולה', 'שישיית קולה פחיות', 'קולה זירו 1.5 ליטר', 'קולה זירו 1 ליטר', 'קולה זירו פחית', 'שישיית קולה זירו', 'קולה דיאט', 'קולה דיאט 1.5 ליטר', 'פפסי', 'פפסי 1.5 ליטר', 'פפסי פחית', 'שישיית פפסי', 'פפסי מקס', 'פפסי מקס 1.5 ליטר', 'ספרייט', 'ספרייט 1.5 ליטר', 'ספרייט פחית', 'שישיית ספרייט', 'ספרייט זירו', 'פאנטה', 'פאנטה 1.5 ליטר', 'פאנטה פחית', 'שישיית פאנטה', 'סודה', 'סודה פחית', 'טוניק', 'טוניק פחית', 'מיץ תפוזים', 'מיץ תפוזים סחוט', 'מיץ תפוזים 1 ליטר', 'מיץ תפוחים', 'מיץ ענבים', 'מיץ גזר', 'מיץ רימונים', 'מיץ פריגת', 'מיץ ספרינג', 'נקטר', 'תפוזינה', 'לימונדה', 'לימונענע', 'XL אנרגיה', 'XL פחית', 'רד בול', 'רד בול פחית', 'מונסטר', 'מונסטר פחית', 'משקה ספורט', 'משקה אנרגיה', 'משקה איזוטוני', 'מי קוקוס'],

            wine: ['יין אדום', 'יין לבן', 'יין רוזה', 'יין מבעבע', 'יין יבש', 'יין חצי יבש', 'יין מתוק', 'יין קידוש', 'יין לפסח', 'יין ברקן', 'יין יקב גולן', 'יין כרמל', 'יין טפרברג', 'יין גלנס', 'יין פסגות', 'יין רמת נגב', 'יין ארזה', 'יין יתיר', 'שמפניה', 'פרוסקו', 'קאווה', 'אסתי', 'בירה', 'בירה גולדסטאר', 'בירה מכבי', 'בירה קרלסברג', 'בירה הייניקן', 'בירה קורונה', 'בירה סטלה', 'בירה טובורג', 'בירה אלכסנדר', 'בירה בזלת', 'בירה מלכה', 'בירה ללא אלכוהול', 'סיידר', 'סיידר תפוחים', 'ערק', 'ערק אלית', 'וודקה', 'וודקה אבסולוט', 'וודקה סמירנוף', 'וודקה גריי גוס', 'וויסקי', 'וויסקי ג\'וני ווקר', 'וויסקי ג\'ק דניאלס', 'וויסקי ג\'יימסון', 'רום', 'רום בקרדי', 'ג\'ין', 'ג\'ין גורדונס', 'טקילה', 'קוניאק', 'בראנדי', 'ליקר', 'ליקר קפה', 'ליקר שוקולד', 'ליקר פירות', 'אמרטו', 'בייליס', 'קמפרי', 'אפרול', 'סנגריה'],

            snacks: ['במבה', 'במבה אדומים', 'במבה נוגט', 'ביסלי', 'ביסלי גריל', 'ביסלי בצל', 'ביסלי פיצה', 'דוריטוס', 'דוריטוס צ\'ילי', 'טורטייה צ\'יפס', 'תפוצ\'יפס', 'פרינגלס', 'פרינגלס חמוץ', 'פופקורן', 'פופקורן מיקרו', 'פופקורן קרמל', 'שוקולד', 'שוקולד פרה', 'שוקולד מילקה', 'שוקולד חלב', 'שוקולד מריר', 'שוקולד לבן', 'שוקולד עם אגוזים', 'קינדר', 'סניקרס', 'מארס', 'טוויקס', 'קיטקט', 'ביסקוויטים', 'עוגיות אוראו', 'עוגיות לוטוס', 'וופלים', 'וופל בלגי', 'קצפת', 'מרשמלו', 'סוכריות', 'סוכריות גומי', 'דובונים', 'מסטיק', 'מנטוס', 'טיק טק', 'עוגת שוקולד', 'עוגת גבינה', 'רולדה', 'קרמבו', 'פסק זמן', 'קליק', 'טעמי'],

            frozen: ['גלידה', 'גלידה וניל', 'גלידה שוקולד', 'גלידה תות', 'גלידה פיסטוק', 'גלידה קרמל', 'גלידת פרווה', 'ארטיק', 'מגנום', 'קורנטו', 'שלגון', 'פירות קפואים', 'תותים קפואים', 'פטל קפוא', 'אוכמניות קפואות', 'מנגו קפוא', 'ירקות קפואים', 'ירקות מוקפצים', 'אפונה קפואה', 'תירס קפוא', 'שעועית ירוקה קפואה', 'ברוקולי קפוא', 'תרד קפוא', 'שניצל קפוא', 'נאגטס קפואים', 'קציצות קפואות', 'המבורגר קפוא', 'פיצה קפואה', 'פיצה משפחתית', 'לזניה קפואה', 'בצק עלים', 'בצק פילו', 'בצק פיצה', 'בצק מאפים', 'בצק ג\'חנון', 'בצק מלווח', 'בצק סמבוסק', 'בצק בורקס', 'בלינצ\'ס', 'קרפ', 'וופל קפוא', 'ג\'חנון אפוי מוכן'],

            health: ['יוגורט חלבון', 'קוטג\' 3%', 'משקה חלבון', 'שייק חלבון', 'אבקת חלבון', 'פרוטאין בר', 'חטיף חלבון', 'חטיף אנרגיה', 'לחם מלא', 'לחם ללא גלוטן', 'פיתה מלאה', 'קרקר דגנים', 'קרקר אורז', 'טונה במים', 'סלט טונה', 'חזה עוף מעושן', 'גרנולה בריאות', 'שיבולת שועל', 'זרעי צ\'יה', 'זרעי פשתן', 'קינואה', 'אגוזים טבעיים', 'שקדים טבעיים', 'פירות יבשים ללא סוכר', 'חמוציות', 'גוג\'י ברי', 'ספירולינה', 'ויטמינים', 'אומגה 3', 'פרוביוטיקה'],

            cleaning: ['נייר טואלט', 'נייר טואלט תלת שכבתי', 'מגבות נייר', 'מגבות נייר לידיים', 'ממחטות נייר', 'סבון כלים', 'סבון כלים פיירי', 'נוזל כלים', 'אבקת כביסה', 'אבקת כביסה אריאל', 'ג\'ל כביסה', 'ג\'ל כביסה מרוכז', 'קפסולות כביסה', 'מרכך כביסה', 'מבשם כביסה', 'אקונומיקה', 'אקונומיקה ג\'ל', 'מאיץ כביסה', 'מנקה רצפות', 'מנקה רצפות סנו', 'מנקה חלונות', 'מנקה אמבטיה', 'מנקה שירותים', 'מנקה כיריים', 'מנקה תנור', 'מנקה שומנים', 'אבקת ניקוי', 'סיף', 'מר מוסקל', 'ספוגים', 'ספוגי פלדה', 'מטליות רצפה', 'מטליות ניקוי', 'שקיות אשפה', 'שקיות אשפה גדולות', 'שקיות אשפה ריחניות', 'שקיות זיפלוק', 'שקיות כריכים', 'שקיות קפואים', 'נייר אפייה', 'נייר אלומיניום', 'ניילון נצמד', 'טבליות למדיח', 'מלח למדיח', 'נוזל מבריק למדיח', 'מנקה מדיח', 'מטהר אוויר', 'גרייני אשפה'],

            hygiene: ['סבון ידיים', 'סבון ידיים נוזלי', 'מגבונים לחים', 'ג\'ל אלכוהול', 'מברשת שיניים', 'מברשת שיניים חשמלית', 'ראשים למברשת', 'משחת שיניים', 'משחת שיניים סנסודיין', 'מי פה', 'חוט דנטלי', 'קיסמי שיניים', 'שמפו', 'שמפו הד אנד שולדרס', 'שמפו פנטן', 'שמפו לשיער יבש', 'שמפו לשיער שמן', 'שמפו נגד קשקשים', 'מרכך שיער', 'מסכה לשיער', 'סרום לשיער', 'ספריי לשיער', 'ג\'ל לשיער', 'קצף לשיער', 'שמפו לילדים', 'סבון גוף', 'ג\'ל רחצה', 'ג\'ל רחצה ניוואה', 'קרם גילוח', 'ג\'ל גילוח', 'סכיני גילוח', 'סכיני גילוח ג\'ילט', 'דאודורנט', 'דאודורנט רול און', 'דאודורנט ספריי', 'אנטיפרספירנט', 'קרם פנים', 'קרם לחות', 'קרם ידיים', 'קרם גוף', 'קרם רגליים', 'שמן גוף', 'לוסיון גוף', 'תחבושות', 'פלסטריה', 'צמר גפן', 'מקלוני אוזניים', 'טמפונים', 'מגני תחתון', 'תחבושות יום', 'תחבושות לילה', 'קרם הגנה', 'קרם שיזוף', 'אפטר סאן', 'מסיר איפור', 'מגבונים להסרת איפור'],

            candles: ['נרות שבת', 'נרות חנוכה', 'נרות חנוכה צבעוניים', 'נר נשמה 24 שעות', 'נר נשמה 48 שעות', 'נר נשמה 7 ימים', 'נר הבדלה', 'נרות יום הולדת', 'נרות ריחניים', 'נרות דקורטיביים', 'פתילות', 'גפרורים', 'מציתים'],

            baby: ['חיתולים מידה 1', 'חיתולים מידה 2', 'חיתולים מידה 3', 'חיתולים מידה 4', 'חיתולים מידה 5', 'חיתולים מידה 6', 'מכנסוני חיתול', 'חיתולי לילה', 'מגבונים לתינוקות', 'מגבונים רגישים', 'שמפו לתינוקות', 'סבון לתינוקות', 'אל סבון לתינוקות', 'קרם החתלה', 'קרם פוש', 'קרם דסיטין', 'משחת החתלה', 'שמן תינוקות', 'קרם פנים לתינוק', 'אבקת חלב סימילאק', 'אבקת חלב מטרנה', 'מחית פירות', 'מחית ירקות', 'דייסה לתינוקות', 'ביסלי לתינוקות', 'חטיף תינוקות', 'מיץ לתינוקות', 'מוצצים', 'בקבוק תינוק', 'פטמות', 'מברשת שיניים לתינוק', 'משחת שיניים לתינוק', 'שמפו ילדים', 'סבון ילדים'],

            pets: ['מזון לכלבים', 'מזון יבש לכלבים', 'מזון רטוב לכלבים', 'מזון לכלבים בוגרים', 'מזון לגורים', 'מזון לחתולים', 'מזון יבש לחתולים', 'מזון רטוב לחתולים', 'מזון לחתולים בוגרים', 'מזון לגורי חתולים', 'חול לחתולים', 'חול מתגבש', 'חול סיליקה', 'חטיפים לכלבים', 'חטיפים לחתולים', 'עצמות לכעיסה', 'דנטסטיקס', 'צעצועים לכלבים', 'צעצועים לחתולים', 'מיטה לכלב', 'מיטה לחתול', 'קערת אוכל', 'קערת מים', 'רצועה לכלב', 'קולר', 'מסרק לכלב', 'שמפו לכלבים', 'שקיות קקי', 'משטח אימון', 'מזון לדגים', 'מזון לציפורים', 'מזון לאוגרים']
        };

        // Product translations for multi-language support
        const PRODUCT_TRANSLATIONS = {
            // Dairy - מוצרי חלב
            'חלב 3%': { en: 'Milk 3%', ru: 'Молоко 3%', ar: 'حليب 3%' },
            'חלב 1%': { en: 'Milk 1%', ru: 'Молоко 1%', ar: 'حليب 1%' },
            'חלב דל שומן': { en: 'Low Fat Milk', ru: 'Обезжиренное молоко', ar: 'حليب قليل الدسم' },
            'חלב סויה': { en: 'Soy Milk', ru: 'Соевое молоко', ar: 'حليب الصويا' },
            'חלב שקדים': { en: 'Almond Milk', ru: 'Миндальное молоко', ar: 'حليب اللوز' },
            'חלב קוקוס': { en: 'Coconut Milk', ru: 'Кокосовое молоко', ar: 'حليب جوز الهند' },
            'חלב שיבולת שועל': { en: 'Oat Milk', ru: 'Овсяное молоко', ar: 'حليب الشوفان' },
            'לבן': { en: 'Laban', ru: 'Лабан', ar: 'لبن' },
            'לבן עז': { en: 'Goat Laban', ru: 'Козий лабан', ar: 'لبن ماعز' },
            'גבינה צהובה עמק': { en: 'Emek Yellow Cheese', ru: 'Жёлтый сыр Эмек', ar: 'جبنة صفراء عمق' },
            'גבינה צהובה גלבוע': { en: 'Gilboa Yellow Cheese', ru: 'Жёлтый сыр Гильбоа', ar: 'جبنة صفراء جلبوع' },
            'גבינה צהובה 9%': { en: 'Yellow Cheese 9%', ru: 'Жёлтый сыр 9%', ar: 'جبنة صفراء 9%' },
            'גבינה צהובה 22%': { en: 'Yellow Cheese 22%', ru: 'Жёлтый сыр 22%', ar: 'جبنة صفراء 22%' },
            'קוטג׳ 5%': { en: 'Cottage Cheese 5%', ru: 'Творог 5%', ar: 'جبنة قريش 5%' },
            'קוטג׳ 3%': { en: 'Cottage Cheese 3%', ru: 'Творог 3%', ar: 'جبنة قريش 3%' },
            'גבינה בולגרית': { en: 'Bulgarian Cheese', ru: 'Болгарский сыр', ar: 'جبنة بلغارية' },
            'צפתית': { en: 'Tzfatit Cheese', ru: 'Сыр Цфатит', ar: 'جبنة صفد' },
            'גבינת שמנת': { en: 'Cream Cheese', ru: 'Сливочный сыр', ar: 'جبنة كريمية' },
            'פרמזן': { en: 'Parmesan', ru: 'Пармезан', ar: 'بارميزان' },
            'מוצרלה': { en: 'Mozzarella', ru: 'Моцарелла', ar: 'موزاريلا' },
            'ביצים': { en: 'Eggs', ru: 'Яйца', ar: 'بيض' },
            'ביצים L': { en: 'Eggs L', ru: 'Яйца L', ar: 'بيض L' },
            'ביצים XL': { en: 'Eggs XL', ru: 'Яйца XL', ar: 'بيض XL' },
            'ביצים אורגניות': { en: 'Organic Eggs', ru: 'Органические яйца', ar: 'بيض عضوي' },
            'ביצים חופשיות': { en: 'Free Range Eggs', ru: 'Яйца свободного выгула', ar: 'بيض حر' },
            'חמאה': { en: 'Butter', ru: 'Масло', ar: 'زبدة' },
            'חמאה מלוחה': { en: 'Salted Butter', ru: 'Солёное масло', ar: 'زبدة مملحة' },
            'שמנת מתוקה': { en: 'Sweet Cream', ru: 'Сладкие сливки', ar: 'قشطة حلوة' },
            'שמנת חמוצה': { en: 'Sour Cream', ru: 'Сметана', ar: 'قشطة حامضة' },
            'שמנת לקצפת': { en: 'Whipping Cream', ru: 'Взбитые сливки', ar: 'كريمة للخفق' },
            'יוגורט': { en: 'Yogurt', ru: 'Йогурт', ar: 'زبادي' },
            'יוגורט יווני': { en: 'Greek Yogurt', ru: 'Греческий йогурт', ar: 'زبادي يوناني' },
            'יוגורט יווני 0%': { en: 'Greek Yogurt 0%', ru: 'Греческий йогурт 0%', ar: 'زبادي يوناني 0%' },
            'יוגורט תנובה': { en: 'Tnuva Yogurt', ru: 'Йогурт Тнува', ar: 'زبادي تنوفا' },
            'יוגורט שטראוס': { en: 'Strauss Yogurt', ru: 'Йогурт Штраус', ar: 'زبادي شتراوس' },
            'יוגורט אקטיביה': { en: 'Activia Yogurt', ru: 'Йогурт Активиа', ar: 'زبادي أكتيفيا' },
            'גבינה לבנה 5%': { en: 'White Cheese 5%', ru: 'Белый сыр 5%', ar: 'جبنة بيضاء 5%' },
            'גבינה לבנה 9%': { en: 'White Cheese 9%', ru: 'Белый сыр 9%', ar: 'جبنة بيضاء 9%' },
            'יוגורט אורגני': { en: 'Organic Yogurt', ru: 'Органический йогурт', ar: 'زبادي عضوي' },
            'יוגורט לילדים': { en: 'Kids Yogurt', ru: 'Детский йогурт', ar: 'زبادي للأطفال' },
            'גבינת עזים': { en: 'Goat Cheese', ru: 'Козий сыр', ar: 'جبنة ماعز' },
            'גבינת רוקפור': { en: 'Roquefort', ru: 'Рокфор', ar: 'روكفور' },
            'קשקבל': { en: 'Kashkaval', ru: 'Кашкавал', ar: 'قشقوان' },
            'גאודה': { en: 'Gouda', ru: 'Гауда', ar: 'جودا' },
            'אמנטל': { en: 'Emmental', ru: 'Эмменталь', ar: 'إيمنتال' },
            'ברי': { en: 'Brie', ru: 'Бри', ar: 'بري' },
            'קממבר': { en: 'Camembert', ru: 'Камамбер', ar: 'كاممبير' },
            'חלומי': { en: 'Halloumi', ru: 'Халлуми', ar: 'حلوم' },
            'פילדלפיה': { en: 'Philadelphia', ru: 'Филадельфия', ar: 'فيلادلفيا' },
            'לאבנה': { en: 'Labneh', ru: 'Лабне', ar: 'لبنة' },
            'ריקוטה': { en: 'Ricotta', ru: 'Рикотта', ar: 'ريكوتا' },
            'מסקרפונה': { en: 'Mascarpone', ru: 'Маскарпоне', ar: 'ماسكاربوني' },
            'ממרח גבינה': { en: 'Cheese Spread', ru: 'Сырная намазка', ar: 'جبنة قابلة للدهن' },
            'גבינה מותכת': { en: 'Processed Cheese', ru: 'Плавленый сыр', ar: 'جبنة مطبوخة' },
            'חמאה בצל': { en: 'Onion Butter', ru: 'Луковое масло', ar: 'زبدة بالبصل' },
            'חמאה שום': { en: 'Garlic Butter', ru: 'Чесночное масло', ar: 'زبدة بالثوم' },
            'מרגרינה': { en: 'Margarine', ru: 'Маргарин', ar: 'مارجرين' },
            'טופו': { en: 'Tofu', ru: 'Тофу', ar: 'توفو' },
            'טופו מוקשה': { en: 'Firm Tofu', ru: 'Твёрдый тофу', ar: 'توفو صلب' },
            // Fruits & Vegetables - פירות וירקות
            'עגבניות': { en: 'Tomatoes', ru: 'Помидоры', ar: 'طماطم' },
            'עגבניות שרי': { en: 'Cherry Tomatoes', ru: 'Черри помидоры', ar: 'طماطم كرزية' },
            'עגבניות מגי': { en: 'Maggi Tomatoes', ru: 'Помидоры Магги', ar: 'طماطم ماجي' },
            'מלפפונים': { en: 'Cucumbers', ru: 'Огурцы', ar: 'خيار' },
            'מלפפון בייבי': { en: 'Baby Cucumber', ru: 'Мини огурцы', ar: 'خيار صغير' },
            'בצל': { en: 'Onion', ru: 'Лук', ar: 'بصل' },
            'בצל סגול': { en: 'Red Onion', ru: 'Красный лук', ar: 'بصل أحمر' },
            'בצל ירוק': { en: 'Green Onion', ru: 'Зелёный лук', ar: 'بصل أخضر' },
            'שום': { en: 'Garlic', ru: 'Чеснок', ar: 'ثوم' },
            'שום קלוף': { en: 'Peeled Garlic', ru: 'Очищенный чеснок', ar: 'ثوم مقشر' },
            'פלפל אדום': { en: 'Red Pepper', ru: 'Красный перец', ar: 'فلفل أحمر' },
            'פלפל ירוק': { en: 'Green Pepper', ru: 'Зелёный перец', ar: 'فلفل أخضر' },
            'פלפל צהוב': { en: 'Yellow Pepper', ru: 'Жёлтый перец', ar: 'فلفل أصفر' },
            'פלפל כתום': { en: 'Orange Pepper', ru: 'Оранжевый перец', ar: 'فلفل برتقالي' },
            'פלפל חריף': { en: 'Hot Pepper', ru: 'Острый перец', ar: 'فلفل حار' },
            'חסה': { en: 'Lettuce', ru: 'Салат', ar: 'خس' },
            'חסה אייסברג': { en: 'Iceberg Lettuce', ru: 'Айсберг салат', ar: 'خس آيسبرج' },
            'חסה רומית': { en: 'Romaine Lettuce', ru: 'Ромэн салат', ar: 'خس روماني' },
            'כרוב': { en: 'Cabbage', ru: 'Капуста', ar: 'ملفوف' },
            'כרוב סגול': { en: 'Red Cabbage', ru: 'Красная капуста', ar: 'ملفوف أحمر' },
            'כרוב סיני': { en: 'Chinese Cabbage', ru: 'Китайская капуста', ar: 'ملفوف صيني' },
            'גזר': { en: 'Carrot', ru: 'Морковь', ar: 'جزر' },
            'גזר בייבי': { en: 'Baby Carrot', ru: 'Мини морковь', ar: 'جزر صغير' },
            'סלק': { en: 'Beet', ru: 'Свёкла', ar: 'شمندر' },
            'סלק מבושל': { en: 'Cooked Beet', ru: 'Варёная свёкла', ar: 'شمندر مطبوخ' },
            'תפו״א אדום': { en: 'Red Potato', ru: 'Красный картофель', ar: 'بطاطا حمراء' },
            'תפו״א לבן': { en: 'White Potato', ru: 'Белый картофель', ar: 'بطاطا بيضاء' },
            'בטטה': { en: 'Sweet Potato', ru: 'Батат', ar: 'بطاطا حلوة' },
            'קישוא': { en: 'Zucchini', ru: 'Кабачок', ar: 'كوسا' },
            'קישוא ירוק': { en: 'Green Zucchini', ru: 'Зелёный кабачок', ar: 'كوسا خضراء' },
            'חציל': { en: 'Eggplant', ru: 'Баклажан', ar: 'باذنجان' },
            'ברוקולי': { en: 'Broccoli', ru: 'Брокколи', ar: 'بروكلي' },
            'כרובית': { en: 'Cauliflower', ru: 'Цветная капуста', ar: 'قرنبيط' },
            'תרד': { en: 'Spinach', ru: 'Шпинат', ar: 'سبانخ' },
            'תרד בייבי': { en: 'Baby Spinach', ru: 'Мини шпинат', ar: 'سبانخ صغير' },
            'שמיר': { en: 'Dill', ru: 'Укроп', ar: 'شبت' },
            'טרגון': { en: 'Tarragon', ru: 'Эстрагон', ar: 'طرخون' },
            'ראשאד': { en: 'Arugula', ru: 'Руккола', ar: 'جرجير' },
            'ריחן': { en: 'Basil', ru: 'Базилик', ar: 'ريحان' },
            'נענע': { en: 'Mint', ru: 'Мята', ar: 'نعناع' },
            'רוקט': { en: 'Rocket', ru: 'Рукола', ar: 'روكا' },
            'פטרוזיליה': { en: 'Parsley', ru: 'Петрушка', ar: 'بقدونس' },
            'כוסברה': { en: 'Coriander', ru: 'Кориандр', ar: 'كزبرة' },
            'סלרי': { en: 'Celery', ru: 'Сельдерей', ar: 'كرفس' },
            'שומר': { en: 'Fennel', ru: 'Фенхель', ar: 'شمر' },
            'קולורבי': { en: 'Kohlrabi', ru: 'Кольраби', ar: 'كرنب ساقي' },
            'ארטישוק': { en: 'Artichoke', ru: 'Артишок', ar: 'خرشوف' },
            'אספרגוס': { en: 'Asparagus', ru: 'Спаржа', ar: 'هليون' },
            'פטריות שמפיניון': { en: 'Champignon Mushrooms', ru: 'Шампиньоны', ar: 'فطر شامبينيون' },
            'פטריות פורטובלו': { en: 'Portobello Mushrooms', ru: 'Портобелло грибы', ar: 'فطر بورتوبيلو' },
            'לימון': { en: 'Lemon', ru: 'Лимон', ar: 'ليمون' },
            'ליים': { en: 'Lime', ru: 'Лайм', ar: 'ليمون أخضر' },
            'בננות': { en: 'Bananas', ru: 'Бананы', ar: 'موز' },
            'תפוחים ירוקים': { en: 'Green Apples', ru: 'Зелёные яблоки', ar: 'تفاح أخضر' },
            'תפוחים אדומים': { en: 'Red Apples', ru: 'Красные яблоки', ar: 'تفاح أحمر' },
            'תפוזים': { en: 'Oranges', ru: 'Апельсины', ar: 'برتقال' },
            'אשכולית': { en: 'Grapefruit', ru: 'Грейпфрут', ar: 'جريب فروت' },
            'אשכולית אדומה': { en: 'Red Grapefruit', ru: 'Красный грейпфрут', ar: 'جريب فروت أحمر' },
            'פומלה': { en: 'Pomelo', ru: 'Помело', ar: 'بوملي' },
            'אבטיח': { en: 'Watermelon', ru: 'Арбуз', ar: 'بطيخ' },
            'מלון': { en: 'Melon', ru: 'Дыня', ar: 'شمام' },
            'מלון גליה': { en: 'Galia Melon', ru: 'Дыня Галия', ar: 'شمام جاليا' },
            'ענבים ירוקים': { en: 'Green Grapes', ru: 'Зелёный виноград', ar: 'عنب أخضر' },
            'ענבים שחורים': { en: 'Black Grapes', ru: 'Чёрный виноград', ar: 'عنب أسود' },
            'אגס': { en: 'Pear', ru: 'Груша', ar: 'كمثرى' },
            'שזיפים': { en: 'Plums', ru: 'Сливы', ar: 'برقوق' },
            'אפרסקים': { en: 'Peaches', ru: 'Персики', ar: 'خوخ' },
            'נקטרינות': { en: 'Nectarines', ru: 'Нектарины', ar: 'نكتارين' },
            'קלמנטינות': { en: 'Clementines', ru: 'Клементины', ar: 'كلمنتينا' },
            'קיווי': { en: 'Kiwi', ru: 'Киви', ar: 'كيوي' },
            'רימונים': { en: 'Pomegranates', ru: 'Гранаты', ar: 'رمان' },
            'מנגו': { en: 'Mango', ru: 'Манго', ar: 'مانجو' },
            'אננס': { en: 'Pineapple', ru: 'Ананас', ar: 'أناناس' },
            'אבוקדו': { en: 'Avocado', ru: 'Авокадо', ar: 'أفوكادو' },
            'תותים': { en: 'Strawberries', ru: 'Клубника', ar: 'فراولة' },
            'פטל': { en: 'Raspberries', ru: 'Малина', ar: 'توت العليق' },
            'אוכמניות': { en: 'Blueberries', ru: 'Черника', ar: 'توت أزرق' },
            'דובדבנים': { en: 'Cherries', ru: 'Черешня', ar: 'كرز' },
            'משמש': { en: 'Apricots', ru: 'Абрикосы', ar: 'مشمش' },
            'תאנים': { en: 'Figs', ru: 'Инжир', ar: 'تين' },
            'פסיפלורה': { en: 'Passion Fruit', ru: 'Маракуйя', ar: 'فاكهة العاطفة' },
            'פפאיה': { en: 'Papaya', ru: 'Папайя', ar: 'بابايا' },
            'קרמבולה': { en: 'Star Fruit', ru: 'Карамбола', ar: 'فاكهة النجمة' },
            'ליצ\'י': { en: 'Lychee', ru: 'Личи', ar: 'ليتشي' },
            'דרקון פרי': { en: 'Dragon Fruit', ru: 'Драконий фрукт', ar: 'فاكهة التنين' },
            'קוקוס': { en: 'Coconut', ru: 'Кокос', ar: 'جوز الهند' },
            // Bakery - לחם ומאפים
            'לחם': { en: 'Bread', ru: 'Хлеб', ar: 'خبز' },
            'לחם מלא': { en: 'Whole Wheat Bread', ru: 'Цельнозерновой хлеб', ar: 'خبز قمح كامل' },
            'לחם שיפון': { en: 'Rye Bread', ru: 'Ржаной хлеб', ar: 'خبز الجاودار' },
            'לחם כוסמין': { en: 'Spelt Bread', ru: 'Хлеб из спельты', ar: 'خبز الحنطة' },
            'לחם דגנים': { en: 'Multigrain Bread', ru: 'Мультизерновой хлеб', ar: 'خبز متعدد الحبوب' },
            'לחם פרוס': { en: 'Sliced Bread', ru: 'Нарезанный хлеб', ar: 'خبز مقطع' },
            'לחם אחיד': { en: 'White Bread', ru: 'Белый хлеб', ar: 'خبز أبيض' },
            'לחם ללא גלוטן': { en: 'Gluten Free Bread', ru: 'Безглютеновый хлеб', ar: 'خبز خالي من الغلوتين' },
            'חלה': { en: 'Challah', ru: 'Хала', ar: 'خبز الحلة' },
            'חלה מלאה': { en: 'Whole Wheat Challah', ru: 'Цельнозерновая хала', ar: 'حلة قمح كامل' },
            'חלה מתוקה': { en: 'Sweet Challah', ru: 'Сладкая хала', ar: 'حلة حلوة' },
            'עוגיות': { en: 'Cookies', ru: 'Печенье', ar: 'بسكويت' },
            'עוגיות שוקולד צ\'יפס': { en: 'Chocolate Chip Cookies', ru: 'Печенье с шоколадной крошкой', ar: 'بسكويت رقائق الشوكولاتة' },
            'עוגיות חמאה': { en: 'Butter Cookies', ru: 'Масляное печенье', ar: 'بسكويت الزبدة' },
            'פיתות': { en: 'Pita Bread', ru: 'Пита', ar: 'خبز بيتا' },
            'פיתות מלאות': { en: 'Whole Wheat Pita', ru: 'Цельнозерновая пита', ar: 'بيتا قمح كامل' },
            'פיתות מיני': { en: 'Mini Pita', ru: 'Мини пита', ar: 'بيتا صغيرة' },
            'לחמניות': { en: 'Rolls', ru: 'Булочки', ar: 'خبز صغير' },
            'לחמניות המבורגר': { en: 'Hamburger Buns', ru: 'Булочки для гамбургера', ar: 'خبز الهمبرغر' },
            'לחמניות נקניקיה': { en: 'Hot Dog Buns', ru: 'Булочки для хот-дога', ar: 'خبز النقانق' },
            'בגט': { en: 'Baguette', ru: 'Багет', ar: 'باجيت' },
            'צ\'בטה': { en: 'Ciabatta', ru: 'Чиабатта', ar: 'تشاباتا' },
            'פוקצ\'ה': { en: 'Focaccia', ru: 'Фокачча', ar: 'فوكاتشيا' },
            'רולדה': { en: 'Roll Cake', ru: 'Рулет', ar: 'رولاد' },
            'לחם שומשום': { en: 'Sesame Bread', ru: 'Кунжутный хлеб', ar: 'خبز السمسم' },
            'לחם פשוט': { en: 'Plain Bread', ru: 'Простой хлеб', ar: 'خبز عادي' },
            'מצות': { en: 'Matzah', ru: 'Маца', ar: 'ماتزا' },
            'מצות מלאות': { en: 'Whole Wheat Matzah', ru: 'Цельнозерновая маца', ar: 'ماتزا قمح كامل' },
            'קרקרים': { en: 'Crackers', ru: 'Крекеры', ar: 'مقرمشات' },
            'לחם קל': { en: 'Light Bread', ru: 'Лёгкий хлеб', ar: 'خبز خفيف' },
            'טורטייה': { en: 'Tortilla', ru: 'Тортилья', ar: 'تورتيلا' },
            'לאפה': { en: 'Laffa', ru: 'Лафа', ar: 'لفة' },
            'נאן': { en: 'Naan', ru: 'Наан', ar: 'نان' },
            'קרואסון': { en: 'Croissant', ru: 'Круассан', ar: 'كرواسون' },
            'קרואסון שוקולד': { en: 'Chocolate Croissant', ru: 'Круассан с шоколадом', ar: 'كرواسون شوكولاتة' },
            'בריוש': { en: 'Brioche', ru: 'Бриошь', ar: 'بريوش' },
            'סופגניות': { en: 'Donuts', ru: 'Пончики', ar: 'دونات' },
            'דונאטס': { en: 'Donuts', ru: 'Пончики', ar: 'دونات' },
            'מאפינס': { en: 'Muffins', ru: 'Маффины', ar: 'مافن' },
            'עוגת שמרים': { en: 'Yeast Cake', ru: 'Дрожжевой пирог', ar: 'كعكة خميرة' },
            'שטרודל': { en: 'Strudel', ru: 'Штрудель', ar: 'شترودل' },
            'רוגלך': { en: 'Rugelach', ru: 'Ругелах', ar: 'روجلاخ' },
            'בורקס': { en: 'Bourekas', ru: 'Борекас', ar: 'بوريك' },
            'בורקס גבינה': { en: 'Cheese Bourekas', ru: 'Борекас с сыром', ar: 'بوريك جبنة' },
            'בורקס תפו״א': { en: 'Potato Bourekas', ru: 'Борекас с картофелем', ar: 'بوريك بطاطا' },
            'בורקס פטריות': { en: 'Mushroom Bourekas', ru: 'Борекас с грибами', ar: 'بوريك فطر' },
            // Spreads - ממרחים
            'נוטלה': { en: 'Nutella', ru: 'Нутелла', ar: 'نوتيلا' },
            'נוטלה 400 גרם': { en: 'Nutella 400g', ru: 'Нутелла 400г', ar: 'نوتيلا 400 غرام' },
            'נוטלה 750 גרם': { en: 'Nutella 750g', ru: 'Нутелла 750г', ar: 'نوتيلا 750 غرام' },
            'ממרח שוקולד': { en: 'Chocolate Spread', ru: 'Шоколадная паста', ar: 'شوكولاتة قابلة للدهن' },
            'ממרח שוקולד השחר העולה': { en: 'Hashachar Haole Spread', ru: 'Паста Хашахар Хаоле', ar: 'شوكولاتة هشحر هعولي' },
            'ממרח שוקולד עלית': { en: 'Elite Chocolate Spread', ru: 'Шоколадная паста Элит', ar: 'شوكولاتة إيليت' },
            'ממרח אגוזים': { en: 'Nut Spread', ru: 'Ореховая паста', ar: 'معجون مكسرات' },
            'ממרח לוטוס': { en: 'Lotus Spread', ru: 'Паста Лотус', ar: 'معجون لوتس' },
            'חמאת בוטנים': { en: 'Peanut Butter', ru: 'Арахисовая паста', ar: 'زبدة الفول السوداني' },
            'חמאת בוטנים חלקה': { en: 'Smooth Peanut Butter', ru: 'Гладкая арахисовая паста', ar: 'زبدة فول سوداني ناعمة' },
            'חמאת בוטנים קראנצ\'י': { en: 'Crunchy Peanut Butter', ru: 'Хрустящая арахисовая паста', ar: 'زبدة فول سوداني مقرمشة' },
            'חמאת בוטנים סקיפי': { en: 'Skippy Peanut Butter', ru: 'Арахисовая паста Скиппи', ar: 'زبدة فول سوداني سكيبي' },
            'חמאת שקדים': { en: 'Almond Butter', ru: 'Миндальная паста', ar: 'زبدة اللوز' },
            'חמאת קשיו': { en: 'Cashew Butter', ru: 'Паста из кешью', ar: 'زبدة الكاجو' },
            'חמאת אגוזי לוז': { en: 'Hazelnut Butter', ru: 'Паста из фундука', ar: 'زبدة البندق' },
            'טחינה': { en: 'Tahini', ru: 'Тахини', ar: 'طحينة' },
            'טחינה גולמית': { en: 'Raw Tahini', ru: 'Сырая тахини', ar: 'طحينة خام' },
            'טחינה אל ארז': { en: 'Al Arz Tahini', ru: 'Тахини Аль Арз', ar: 'طحينة الأرز' },
            'טחינה הבאבא': { en: 'HaBaba Tahini', ru: 'Тахини ХаБаба', ar: 'طحينة الباب' },
            'חלווה': { en: 'Halva', ru: 'Халва', ar: 'حلاوة' },
            'חלווה פרוסה': { en: 'Sliced Halva', ru: 'Нарезанная халва', ar: 'حلاوة شرائح' },
            'חלווה שוקולד': { en: 'Chocolate Halva', ru: 'Шоколадная халва', ar: 'حلاوة شوكولاتة' },
            'חלווה פיסטוק': { en: 'Pistachio Halva', ru: 'Фисташковая халва', ar: 'حلاوة فستق' },
            'ריבה': { en: 'Jam', ru: 'Джем', ar: 'مربى' },
            'ריבה תות': { en: 'Strawberry Jam', ru: 'Клубничный джем', ar: 'مربى فراولة' },
            'ריבה משמש': { en: 'Apricot Jam', ru: 'Абрикосовый джем', ar: 'مربى مشمش' },
            'ריבה דובדבן': { en: 'Cherry Jam', ru: 'Вишнёвый джем', ar: 'مربى كرز' },
            'ריבה תפוז': { en: 'Orange Jam', ru: 'Апельсиновый джем', ar: 'مربى برتقال' },
            'ריבה פטל': { en: 'Raspberry Jam', ru: 'Малиновый джем', ar: 'مربى توت' },
            'ריבה ללא סוכר': { en: 'Sugar Free Jam', ru: 'Джем без сахара', ar: 'مربى بدون سكر' },
            'מרמלדה': { en: 'Marmalade', ru: 'Мармелад', ar: 'مربى البرتقال' },
            'דבש': { en: 'Honey', ru: 'Мёд', ar: 'عسل' },
            'דבש טהור': { en: 'Pure Honey', ru: 'Чистый мёд', ar: 'عسل نقي' },
            'דבש פרחים': { en: 'Flower Honey', ru: 'Цветочный мёд', ar: 'عسل زهور' },
            'דבש אורגני': { en: 'Organic Honey', ru: 'Органический мёд', ar: 'عسل عضوي' },
            'סילאן': { en: 'Date Syrup', ru: 'Финиковый сироп', ar: 'دبس التمر' },
            'סילאן טהור': { en: 'Pure Date Syrup', ru: 'Чистый финиковый сироп', ar: 'دبس تمر نقي' },
            'ממרח שום': { en: 'Garlic Spread', ru: 'Чесночная паста', ar: 'معجون ثوم' },
            'ממרח זיתים': { en: 'Olive Spread', ru: 'Оливковая паста', ar: 'معجون زيتون' },
            'ממרח עגבניות מיובשות': { en: 'Sun Dried Tomato Spread', ru: 'Паста из вяленых помидоров', ar: 'معجون طماطم مجففة' },
            'ממרח ארטישוק': { en: 'Artichoke Spread', ru: 'Артишоковая паста', ar: 'معجون خرشوف' },
            'פסטו': { en: 'Pesto', ru: 'Песто', ar: 'بيستو' },
            'פסטו ירוק': { en: 'Green Pesto', ru: 'Зелёный песто', ar: 'بيستو أخضر' },
            'פסטו אדום': { en: 'Red Pesto', ru: 'Красный песто', ar: 'بيستو أحمر' },
            'ממרח טונה': { en: 'Tuna Spread', ru: 'Тунцовая паста', ar: 'معجون تونة' },
            'ממרח חציל': { en: 'Eggplant Spread', ru: 'Баклажанная паста', ar: 'معجون باذنجان' },
            'חומוס ממרח': { en: 'Hummus Spread', ru: 'Хумус', ar: 'حمص' },
            // Deli - מעדניית נקניקים
            'סלמי מעושן': { en: 'Smoked Salami', ru: 'Копчёная салями', ar: 'سلامي مدخن' },
            'נקניק כתף': { en: 'Shoulder Sausage', ru: 'Колбаса из плеча', ar: 'نقانق كتف' },
            'סלמי תה': { en: 'Tea Salami', ru: 'Чайная салями', ar: 'سلامي شاي' },
            'נקניק סלמי קוניאק': { en: 'Cognac Salami', ru: 'Салями коньяк', ar: 'سلامي كونياك' },
            'נקניק מרטלדה': { en: 'Mortadella', ru: 'Мортаделла', ar: 'مورتاديلا' },
            'רוסטביף': { en: 'Roast Beef', ru: 'Ростбиф', ar: 'روست بيف' },
            'כתף בקר מפולפל': { en: 'Peppered Beef Shoulder', ru: 'Говяжья лопатка с перцем', ar: 'كتف بقر مفلفل' },
            'פסטרמה איטלקית': { en: 'Italian Pastrami', ru: 'Итальянская пастрами', ar: 'بسطرمة إيطالية' },
            'פסטרמה גחלים': { en: 'Charcoal Pastrami', ru: 'Пастрами на углях', ar: 'بسطرمة فحم' },
            'פסטרמה גריל': { en: 'Grilled Pastrami', ru: 'Пастрами гриль', ar: 'بسطرمة مشوية' },
            'פסטרמה הודו': { en: 'Turkey Pastrami', ru: 'Пастрами из индейки', ar: 'بسطرمة ديك رومي' },
            'פסטרמה דבש': { en: 'Honey Pastrami', ru: 'Пастрами с мёдом', ar: 'بسطرمة عسل' },
            'פסטרמה ברביקיו': { en: 'BBQ Pastrami', ru: 'Пастрами барбекю', ar: 'بسطرمة باربكيو' },
            'פסטרמה צלויה על לבנים': { en: 'Brick Roasted Pastrami', ru: 'Пастрами на кирпичах', ar: 'بسطرمة مشوية على الطوب' },
            'פסטרמה פרגיות': { en: 'Chicken Pastrami', ru: 'Куриная пастрами', ar: 'بسطرمة دجاج' },
            'פסטרמה כפרית': { en: 'Rustic Pastrami', ru: 'Деревенская пастрами', ar: 'بسطرمة ريفية' },
            // Salads - סלטים מוכנים
            'חומוס': { en: 'Hummus', ru: 'Хумус', ar: 'حمص' },
            'טחינה': { en: 'Tahini', ru: 'Тахини', ar: 'طحينة' },
            'סלט חצילים': { en: 'Eggplant Salad', ru: 'Салат из баклажанов', ar: 'سلطة باذنجان' },
            'סלט מטבוחה': { en: 'Matbucha', ru: 'Матбуха', ar: 'مطبوخة' },
            'סלט טורקי': { en: 'Turkish Salad', ru: 'Турецкий салат', ar: 'سلطة تركية' },
            'סלט כרוב': { en: 'Cabbage Salad', ru: 'Капустный салат', ar: 'سلطة ملفوف' },
            'סלט גזר': { en: 'Carrot Salad', ru: 'Морковный салат', ar: 'سلطة جزر' },
            'סלט קולסלו': { en: 'Coleslaw', ru: 'Коулслоу', ar: 'كول سلو' },
            'סלט ביצים': { en: 'Egg Salad', ru: 'Яичный салат', ar: 'سلطة بيض' },
            'סלט טונה': { en: 'Tuna Salad', ru: 'Салат с тунцом', ar: 'سلطة تونة' },
            'סלט בולגרי': { en: 'Bulgarian Salad', ru: 'Болгарский салат', ar: 'سلطة بلغارية' },
            'סלט ירקות': { en: 'Vegetable Salad', ru: 'Овощной салат', ar: 'سلطة خضار' },
            'סלט קינואה': { en: 'Quinoa Salad', ru: 'Салат с киноа', ar: 'سلطة كينوا' },
            'סלט פסטה': { en: 'Pasta Salad', ru: 'Салат с пастой', ar: 'سلطة باستا' },
            'סלט עדשים': { en: 'Lentil Salad', ru: 'Чечевичный салат', ar: 'سلطة عدس' },
            'גואקמולה': { en: 'Guacamole', ru: 'Гуакамоле', ar: 'جواكامولي' },
            'סלסה': { en: 'Salsa', ru: 'Сальса', ar: 'صلصة' },
            'באבא גנוש': { en: 'Baba Ganoush', ru: 'Баба Гануш', ar: 'بابا غنوج' },
            'סלט חומוס': { en: 'Chickpea Salad', ru: 'Салат из нута', ar: 'سلطة حمص' },
            'סלט פטריות': { en: 'Mushroom Salad', ru: 'Грибной салат', ar: 'سلطة فطر' },
            'סלט סלק': { en: 'Beet Salad', ru: 'Свекольный салат', ar: 'سلطة شمندر' },
            'סלט תפו״א': { en: 'Potato Salad', ru: 'Картофельный салат', ar: 'سلطة بطاطا' },
            'סלט פלפלים קלויים': { en: 'Roasted Pepper Salad', ru: 'Салат из печёного перца', ar: 'سلطة فلفل مشوي' },
            'ממרח אבוקדו': { en: 'Avocado Spread', ru: 'Паста из авокадо', ar: 'معجون أفوكادو' },
            'סלט אבוקדו': { en: 'Avocado Salad', ru: 'Салат из авокадо', ar: 'سلطة أفوكادو' },
            // Snacks - חטיפים
            'במבה': { en: 'Bamba', ru: 'Бамба', ar: 'بامبا' },
            'במבה אדומים': { en: 'Red Bamba', ru: 'Красная Бамба', ar: 'بامبا حمراء' },
            'במבה נוגט': { en: 'Nougat Bamba', ru: 'Бамба с нугой', ar: 'بامبا نوجا' },
            'ביסלי': { en: 'Bisli', ru: 'Бисли', ar: 'بيسلي' },
            'ביסלי גריל': { en: 'Grill Bisli', ru: 'Бисли гриль', ar: 'بيسلي شواء' },
            'ביסלי בצל': { en: 'Onion Bisli', ru: 'Бисли с луком', ar: 'بيسلي بصل' },
            'ביסלי פיצה': { en: 'Pizza Bisli', ru: 'Бисли пицца', ar: 'بيسلي بيتزا' },
            'דוריטוס': { en: 'Doritos', ru: 'Дорито', ar: 'دوريتوس' },
            'דוריטוס צ\'ילי': { en: 'Chili Doritos', ru: 'Дорито чили', ar: 'دوريتوس حار' },
            'טורטייה צ\'יפס': { en: 'Tortilla Chips', ru: 'Чипсы тортилья', ar: 'رقائق تورتيلا' },
            'תפוצ\'יפס': { en: 'Potato Chips', ru: 'Картофельные чипсы', ar: 'شيبس بطاطا' },
            'פרינגלס': { en: 'Pringles', ru: 'Принглс', ar: 'برينجلز' },
            'פרינגלס חמוץ': { en: 'Sour Pringles', ru: 'Кислый Принглс', ar: 'برينجلز حامض' },
            'פופקורן': { en: 'Popcorn', ru: 'Попкорн', ar: 'فشار' },
            'פופקורן מיקרו': { en: 'Microwave Popcorn', ru: 'Попкорн для микроволновки', ar: 'فشار ميكروويف' },
            'פופקורן קרמל': { en: 'Caramel Popcorn', ru: 'Карамельный попкорн', ar: 'فشار كراميل' },
            'שוקולד': { en: 'Chocolate', ru: 'Шоколад', ar: 'شوكولاتة' },
            'שוקולד פרה': { en: 'Para Chocolate', ru: 'Шоколад Пара', ar: 'شوكولاتة بارا' },
            'שוקולד מילקה': { en: 'Milka Chocolate', ru: 'Шоколад Милка', ar: 'شوكولاتة ميلكا' },
            'שוקולד חלב': { en: 'Milk Chocolate', ru: 'Молочный шоколад', ar: 'شوكولاتة حليب' },
            'שוקולד מריר': { en: 'Dark Chocolate', ru: 'Горький шоколад', ar: 'شوكولاتة داكنة' },
            'שוקולד לבן': { en: 'White Chocolate', ru: 'Белый шоколад', ar: 'شوكولاتة بيضاء' },
            'שוקולד עם אגוזים': { en: 'Chocolate with Nuts', ru: 'Шоколад с орехами', ar: 'شوكولاتة بالمكسرات' },
            'קינדר': { en: 'Kinder', ru: 'Киндер', ar: 'كيندر' },
            'סניקרס': { en: 'Snickers', ru: 'Сникерс', ar: 'سنيكرز' },
            'מארס': { en: 'Mars', ru: 'Марс', ar: 'مارس' },
            'טוויקס': { en: 'Twix', ru: 'Твикс', ar: 'تويكس' },
            'קיטקט': { en: 'KitKat', ru: 'КитКат', ar: 'كيت كات' },
            'ביסקוויטים': { en: 'Biscuits', ru: 'Бисквиты', ar: 'بسكويت' },
            'עוגיות אוראו': { en: 'Oreo Cookies', ru: 'Печенье Орео', ar: 'بسكويت أوريو' },
            'עוגיות לוטוס': { en: 'Lotus Cookies', ru: 'Печенье Лотус', ar: 'بسكويت لوتس' },
            'וופלים': { en: 'Waffles', ru: 'Вафли', ar: 'وافل' },
            'וופל בלגי': { en: 'Belgian Waffle', ru: 'Бельгийская вафля', ar: 'وافل بلجيكي' },
            'קצפת': { en: 'Whipped Cream', ru: 'Взбитые сливки', ar: 'كريمة مخفوقة' },
            'מרשמלו': { en: 'Marshmallow', ru: 'Маршмеллоу', ar: 'مارشميلو' },
            'סוכריות': { en: 'Candies', ru: 'Конфеты', ar: 'حلويات' },
            'סוכריות גומי': { en: 'Gummy Candies', ru: 'Жевательные конфеты', ar: 'حلوى جيلاتين' },
            'דובונים': { en: 'Gummy Bears', ru: 'Мармеладные мишки', ar: 'دببة جيلاتين' },
            'מסטיק': { en: 'Chewing Gum', ru: 'Жвачка', ar: 'علكة' },
            'מנטוס': { en: 'Mentos', ru: 'Ментос', ar: 'منتوس' },
            'טיק טק': { en: 'Tic Tac', ru: 'Тик Так', ar: 'تيك تاك' },
            'עוגת שוקולד': { en: 'Chocolate Cake', ru: 'Шоколадный торт', ar: 'كعكة شوكولاتة' },
            'עוגת גבינה': { en: 'Cheesecake', ru: 'Чизкейк', ar: 'كعكة الجبن' },
            'קרמבו': { en: 'Krembo', ru: 'Крембо', ar: 'كريمبو' },
            'פסק זמן': { en: 'Pesek Zman', ru: 'Песек Зман', ar: 'بيسك زمان' },
            'קליק': { en: 'Click', ru: 'Клик', ar: 'كليك' },
            'טעמי': { en: 'Taami', ru: 'Таами', ar: 'طعمي' },
            // Baking - אפייה
            'קמח': { en: 'Flour', ru: 'Мука', ar: 'طحين' },
            'קמח לבן': { en: 'White Flour', ru: 'Белая мука', ar: 'طحين أبيض' },
            'קמח מלא': { en: 'Whole Wheat Flour', ru: 'Цельнозерновая мука', ar: 'طحين قمح كامل' },
            'קמח תירס': { en: 'Corn Flour', ru: 'Кукурузная мука', ar: 'طحين ذرة' },
            'קמח כוסמין': { en: 'Spelt Flour', ru: 'Спельтовая мука', ar: 'طحين الحنطة' },
            'קמח שקדים': { en: 'Almond Flour', ru: 'Миндальная мука', ar: 'طحين اللوز' },
            'קמח קוקוס': { en: 'Coconut Flour', ru: 'Кокосовая мука', ar: 'طحين جوز الهند' },
            'קמח ללא גלוטן': { en: 'Gluten Free Flour', ru: 'Безглютеновая мука', ar: 'طحين خالي من الغلوتين' },
            'סוכר': { en: 'Sugar', ru: 'Сахар', ar: 'سكر' },
            'סוכר לבן': { en: 'White Sugar', ru: 'Белый сахар', ar: 'سكر أبيض' },
            'סוכר חום': { en: 'Brown Sugar', ru: 'Коричневый сахар', ar: 'سكر بني' },
            'סוכר אבקה': { en: 'Powdered Sugar', ru: 'Сахарная пудра', ar: 'سكر بودرة' },
            'שמרים': { en: 'Yeast', ru: 'Дрожжи', ar: 'خميرة' },
            'אבקת אפייה': { en: 'Baking Powder', ru: 'Разрыхлитель', ar: 'بيكنج باودر' },
            'וניל': { en: 'Vanilla', ru: 'Ваниль', ar: 'فانيلا' },
            'שוקולד צ\'יפס': { en: 'Chocolate Chips', ru: 'Шоколадная крошка', ar: 'رقائق شوكولاتة' },
            'קקאו': { en: 'Cocoa', ru: 'Какао', ar: 'كاكاو' },
            'קוקוס מגורד': { en: 'Shredded Coconut', ru: 'Кокосовая стружка', ar: 'جوز هند مبشور' },
            'שקדים': { en: 'Almonds', ru: 'Миндаль', ar: 'لوز' },
            'אגוזי מלך': { en: 'Walnuts', ru: 'Грецкие орехи', ar: 'جوز' },
            'פקאן': { en: 'Pecans', ru: 'Пекан', ar: 'بيكان' },
            'צימוקים': { en: 'Raisins', ru: 'Изюм', ar: 'زبيب' },
            'תמרים': { en: 'Dates', ru: 'Финики', ar: 'تمر' },
            // Meat - בשר
            'עוף שלם טרי': { en: 'Fresh Whole Chicken', ru: 'Свежая курица целиком', ar: 'دجاج كامل طازج' },
            'חזה עוף טרי': { en: 'Fresh Chicken Breast', ru: 'Свежая куриная грудка', ar: 'صدر دجاج طازج' },
            'כרעיים עוף טריות': { en: 'Fresh Chicken Legs', ru: 'Свежие куриные ножки', ar: 'أفخاذ دجاج طازجة' },
            'כנפיים עוף טריות': { en: 'Fresh Chicken Wings', ru: 'Свежие куриные крылья', ar: 'أجنحة دجاج طازجة' },
            'בשר טחון טרי': { en: 'Fresh Ground Beef', ru: 'Свежий говяжий фарш', ar: 'لحم مفروم طازج' },
            'אנטריקוט טרי': { en: 'Fresh Entrecote', ru: 'Свежий антрекот', ar: 'انتريكوت طازج' },
            'סלמון טרי': { en: 'Fresh Salmon', ru: 'Свежий лосось', ar: 'سلمون طازج' },
            'סלמון מעושן': { en: 'Smoked Salmon', ru: 'Копчёный лосось', ar: 'سلمون مدخن' },
            'שניצל עוף טרי': { en: 'Fresh Chicken Schnitzel', ru: 'Свежий куриный шницель', ar: 'شنيتسل دجاج طازج' },
            'המבורגר טרי': { en: 'Fresh Hamburger', ru: 'Свежий гамбургер', ar: 'همبرغر طازج' },
            // Desserts - קינוחים
            'מילקי': { en: 'Milky', ru: 'Милки', ar: 'ميلكي' },
            'דנונה': { en: 'Danone', ru: 'Данон', ar: 'دانون' },
            'שוקו יטבתה': { en: 'Yotvata Chocolate Milk', ru: 'Шоколадное молоко Йотвата', ar: 'شوكو يوتفاتا' },
            'מוס שוקולד': { en: 'Chocolate Mousse', ru: 'Шоколадный мусс', ar: 'موس شوكولاتة' },
            'טירמיסו': { en: 'Tiramisu', ru: 'Тирамису', ar: 'تيراميسو' },
            'אורז חלב': { en: 'Rice Pudding', ru: 'Рисовый пудинг', ar: 'أرز بالحليب' },
            // Canned & Grains - שימורים ואורז
            'אורז': { en: 'Rice', ru: 'Рис', ar: 'أرز' },
            'אורז בסמטי': { en: 'Basmati Rice', ru: 'Рис Басмати', ar: 'أرز بسمتي' },
            'פסטה': { en: 'Pasta', ru: 'Паста', ar: 'معكرونة' },
            'פסטה ספגטי': { en: 'Spaghetti', ru: 'Спагетти', ar: 'سباغيتي' },
            'קוסקוס': { en: 'Couscous', ru: 'Кускус', ar: 'كسكس' },
            'רוטב עגבניות': { en: 'Tomato Sauce', ru: 'Томатный соус', ar: 'صلصة طماطم' },
            'טונה': { en: 'Tuna', ru: 'Тунец', ar: 'تونة' },
            'תירס': { en: 'Corn', ru: 'Кукуруза', ar: 'ذرة' },
            'שמן זית': { en: 'Olive Oil', ru: 'Оливковое масло', ar: 'زيت زيتون' },
            'חומץ': { en: 'Vinegar', ru: 'Уксус', ar: 'خل' },
            'זיתים': { en: 'Olives', ru: 'Оливки', ar: 'زيتون' },
            'עדשים': { en: 'Lentils', ru: 'Чечевица', ar: 'عدس' },
            'שעועית': { en: 'Beans', ru: 'Фасоль', ar: 'فاصوليا' },
            // Cereals - דגנים
            'קורנפלקס': { en: 'Cornflakes', ru: 'Кукурузные хлопья', ar: 'كورن فليكس' },
            'גרנולה': { en: 'Granola', ru: 'Гранола', ar: 'جرانولا' },
            'שיבולת שועל': { en: 'Oatmeal', ru: 'Овсянка', ar: 'شوفان' },
            'מוזלי': { en: 'Muesli', ru: 'Мюсли', ar: 'موسلي' },
            // Spices - תבלינים
            'מלח': { en: 'Salt', ru: 'Соль', ar: 'ملح' },
            'פלפל שחור': { en: 'Black Pepper', ru: 'Чёрный перец', ar: 'فلفل أسود' },
            'פפריקה': { en: 'Paprika', ru: 'Паприка', ar: 'بابريكا' },
            'כורכום': { en: 'Turmeric', ru: 'Куркума', ar: 'كركم' },
            'כמון': { en: 'Cumin', ru: 'Кумин', ar: 'كمون' },
            'קינמון': { en: 'Cinnamon', ru: 'Корица', ar: 'قرفة' },
            'זעתר': { en: 'Za\'atar', ru: 'Заатар', ar: 'زعتر' },
            'קארי': { en: 'Curry', ru: 'Карри', ar: 'كاري' },
            // Coffee & Tea - קפה ותה
            'קפה נמס': { en: 'Instant Coffee', ru: 'Растворимый кофе', ar: 'قهوة سريعة' },
            'קפה טורקי': { en: 'Turkish Coffee', ru: 'Турецкий кофе', ar: 'قهوة تركية' },
            'תה שחור': { en: 'Black Tea', ru: 'Чёрный чай', ar: 'شاي أسود' },
            'תה ירוק': { en: 'Green Tea', ru: 'Зелёный чай', ar: 'شاي أخضر' },
            'תה נענע': { en: 'Mint Tea', ru: 'Мятный чай', ar: 'شاي نعناع' },
            // Drinks - משקאות
            'מים': { en: 'Water', ru: 'Вода', ar: 'ماء' },
            'קולה': { en: 'Cola', ru: 'Кола', ar: 'كولا' },
            'ספרייט': { en: 'Sprite', ru: 'Спрайт', ar: 'سبرايت' },
            'מיץ תפוזים': { en: 'Orange Juice', ru: 'Апельсиновый сок', ar: 'عصير برتقال' },
            'מיץ תפוחים': { en: 'Apple Juice', ru: 'Яблочный сок', ar: 'عصير تفاح' },
            // Cleaning - ניקיון
            'נייר טואלט': { en: 'Toilet Paper', ru: 'Туалетная бумага', ar: 'ورق تواليت' },
            'מגבות נייר': { en: 'Paper Towels', ru: 'Бумажные полотенца', ar: 'مناشف ورقية' },
            'סבון כלים': { en: 'Dish Soap', ru: 'Средство для посуды', ar: 'صابون أطباق' },
            'אבקת כביסה': { en: 'Laundry Detergent', ru: 'Стиральный порошок', ar: 'مسحوق غسيل' },
            'מרכך כביסה': { en: 'Fabric Softener', ru: 'Кондиционер для белья', ar: 'منعم أقمشة' },
            'אקונומיקה': { en: 'Bleach', ru: 'Отбеливатель', ar: 'مبيض' },
            'שקיות אשפה': { en: 'Garbage Bags', ru: 'Мусорные пакеты', ar: 'أكياس قمامة' },
            'נייר אלומיניום': { en: 'Aluminum Foil', ru: 'Фольга', ar: 'ورق ألمنيوم' },
            'ניילון נצמד': { en: 'Plastic Wrap', ru: 'Пищевая плёнка', ar: 'غلاف بلاستيك' },
            // Hygiene - היגיינה
            'סבון ידיים': { en: 'Hand Soap', ru: 'Мыло для рук', ar: 'صابون يدين' },
            'שמפו': { en: 'Shampoo', ru: 'Шампунь', ar: 'شامبو' },
            'מרכך שיער': { en: 'Conditioner', ru: 'Кондиционер', ar: 'بلسم شعر' },
            'משחת שיניים': { en: 'Toothpaste', ru: 'Зубная паста', ar: 'معجون أسنان' },
            'מברשת שיניים': { en: 'Toothbrush', ru: 'Зубная щётка', ar: 'فرشاة أسنان' },
            'דאודורנט': { en: 'Deodorant', ru: 'Дезодорант', ar: 'مزيل عرق' },
            'קרם לחות': { en: 'Moisturizer', ru: 'Увлажняющий крем', ar: 'كريم مرطب' },
            // Baby - תינוקות
            'חיתולים': { en: 'Diapers', ru: 'Подгузники', ar: 'حفاضات' },
            'מגבונים לתינוקות': { en: 'Baby Wipes', ru: 'Детские салфетки', ar: 'مناديل أطفال' },
            'שמפו לתינוקות': { en: 'Baby Shampoo', ru: 'Детский шампунь', ar: 'شامبو أطفال' },
            'אבקת חלב': { en: 'Baby Formula', ru: 'Детская смесь', ar: 'حليب أطفال' },
            // Pets - חיות מחמד
            'מזון לכלבים': { en: 'Dog Food', ru: 'Корм для собак', ar: 'طعام كلاب' },
            'מזון לחתולים': { en: 'Cat Food', ru: 'Корм для кошек', ar: 'طعام قطط' },
            'חול לחתולים': { en: 'Cat Litter', ru: 'Наполнитель для кошек', ar: 'رمل قطط' },
            // Frozen - קפואים
            'גלידה': { en: 'Ice Cream', ru: 'Мороженое', ar: 'آيس كريم' },
            'פיצה קפואה': { en: 'Frozen Pizza', ru: 'Замороженная пицца', ar: 'بيتزا مجمدة' },
            'ירקות קפואים': { en: 'Frozen Vegetables', ru: 'Замороженные овощи', ar: 'خضار مجمدة' },
            // Candles - נרות
            'נרות שבת': { en: 'Shabbat Candles', ru: 'Субботние свечи', ar: 'شموع السبت' },
            'נרות חנוכה': { en: 'Hanukkah Candles', ru: 'Ханукальные свечи', ar: 'شموع حانوكا' },
            'גפרורים': { en: 'Matches', ru: 'Спички', ar: 'كبريت' },
            // Cereals - דגנים וקורנפלקס
            'קורנפלקס קלאסי': { en: 'Classic Cornflakes', ru: 'Классические кукурузные хлопья', ar: 'كورن فليكس كلاسيك' },
            'קורנפלקס דבש': { en: 'Honey Cornflakes', ru: 'Кукурузные хлопья с мёдом', ar: 'كورن فليكس بالعسل' },
            'קורנפלקס שוקולד': { en: 'Chocolate Cornflakes', ru: 'Шоколадные кукурузные хлопья', ar: 'كورن فليكس بالشوكولاتة' },
            'קורנפלקס כריות': { en: 'Pillow Cereal', ru: 'Подушечки', ar: 'كورن فليكس وسائد' },
            'קורנפלקס פירות': { en: 'Fruit Cornflakes', ru: 'Кукурузные хлопья с фруктами', ar: 'كورن فليكس بالفواكه' },
            'טריקס': { en: 'Trix', ru: 'Трикс', ar: 'تريكس' },
            'פתיתי תירס': { en: 'Corn Flakes', ru: 'Кукурузные хлопья', ar: 'رقائق الذرة' },
            'גרנולה שוקולד': { en: 'Chocolate Granola', ru: 'Гранола с шоколадом', ar: 'جرانولا بالشوكولاتة' },
            'גרנולה פירות': { en: 'Fruit Granola', ru: 'Гранола с фруктами', ar: 'جرانولا بالفواكه' },
            'גרנולה אגוזים': { en: 'Nut Granola', ru: 'Гранола с орехами', ar: 'جرانولا بالمكسرات' },
            'פצפוצי אורז': { en: 'Rice Puffs', ru: 'Воздушный рис', ar: 'أرز منفوخ' },
            'קוואקר': { en: 'Quaker Oats', ru: 'Квакер', ar: 'كويكر' },
            'דגנים מלאים': { en: 'Whole Grains', ru: 'Цельнозерновые', ar: 'حبوب كاملة' },
            'מיני וויטס': { en: 'Mini Wheats', ru: 'Мини Витс', ar: 'ميني ويتس' },
            'צ\'ריוס': { en: 'Cheerios', ru: 'Чириос', ar: 'تشيريوز' },
            'נסטלה פיטנס': { en: 'Nestle Fitness', ru: 'Нестле Фитнес', ar: 'نستله فيتنس' },
            'סנאק בר': { en: 'Snack Bar', ru: 'Снэк-бар', ar: 'سناك بار' },
            'חטיף דגנים': { en: 'Cereal Bar', ru: 'Зерновой батончик', ar: 'لوح حبوب' },
            'חטיף גרנולה': { en: 'Granola Bar', ru: 'Батончик гранола', ar: 'لوح جرانولا' },
            'אול בראן': { en: 'All Bran', ru: 'Ол Бран', ar: 'أول بران' },
            'פרוטי לופס': { en: 'Froot Loops', ru: 'Фрут Лупс', ar: 'فروت لوبس' },
            'קוקו פופס': { en: 'Coco Pops', ru: 'Коко Попс', ar: 'كوكو بوبس' },
            'ליון': { en: 'Lion', ru: 'Лион', ar: 'ليون' },
            'סמאקס': { en: 'Smacks', ru: 'Смэкс', ar: 'سماكس' },
            'צ\'רינגס': { en: 'Cheerios', ru: 'Черингс', ar: 'تشيرينجز' },
            'קראנץ\'': { en: 'Crunch', ru: 'Кранч', ar: 'كرانش' },
            'סיני קראנץ\'': { en: 'Cini Crunch', ru: 'Сини Кранч', ar: 'سيني كرانش' },
            'כדורי שוקולד': { en: 'Chocolate Balls', ru: 'Шоколадные шарики', ar: 'كرات شوكولاتة' },
            // Meat - בשר
            'עוף שלם קפוא': { en: 'Frozen Whole Chicken', ru: 'Замороженная курица целиком', ar: 'دجاج كامل مجمد' },
            'חזה עוף קפוא': { en: 'Frozen Chicken Breast', ru: 'Замороженная куриная грудка', ar: 'صدر دجاج مجمد' },
            'חזה עוף פרוס טרי': { en: 'Fresh Sliced Chicken Breast', ru: 'Свежая нарезанная куриная грудка', ar: 'صدر دجاج مقطع طازج' },
            'כרעיים עוף קפואות': { en: 'Frozen Chicken Legs', ru: 'Замороженные куриные ножки', ar: 'أفخاذ دجاج مجمدة' },
            'שוקיים עוף טריים': { en: 'Fresh Chicken Drumsticks', ru: 'Свежие куриные голени', ar: 'سيقان دجاج طازجة' },
            'שוקיים עוף קפואים': { en: 'Frozen Chicken Drumsticks', ru: 'Замороженные куриные голени', ar: 'سيقان دجاج مجمدة' },
            'כנפיים עוף קפואות': { en: 'Frozen Chicken Wings', ru: 'Замороженные куриные крылья', ar: 'أجنحة دجاج مجمدة' },
            'עוף טחון טרי': { en: 'Fresh Ground Chicken', ru: 'Свежий куриный фарш', ar: 'دجاج مفروم طازج' },
            'עוף טחון קפוא': { en: 'Frozen Ground Chicken', ru: 'Замороженный куриный фарш', ar: 'دجاج مفروم مجمد' },
            'כבד עוף טרי': { en: 'Fresh Chicken Liver', ru: 'Свежая куриная печень', ar: 'كبد دجاج طازج' },
            'כבד עוף קפוא': { en: 'Frozen Chicken Liver', ru: 'Замороженная куриная печень', ar: 'كبد دجاج مجمد' },
            'לבבות עוף': { en: 'Chicken Hearts', ru: 'Куриные сердца', ar: 'قلوب دجاج' },
            'פרגית טרייה': { en: 'Fresh Cornish Hen', ru: 'Свежий цыплёнок', ar: 'فروج طازج' },
            'פרגית קפואה': { en: 'Frozen Cornish Hen', ru: 'Замороженный цыплёнок', ar: 'فروج مجمد' },
            'חזה הודו טרי': { en: 'Fresh Turkey Breast', ru: 'Свежая грудка индейки', ar: 'صدر ديك رومي طازج' },
            'חזה הודו קפוא': { en: 'Frozen Turkey Breast', ru: 'Замороженная грудка индейки', ar: 'صدر ديك رومي مجمد' },
            'הודו טחון טרי': { en: 'Fresh Ground Turkey', ru: 'Свежий фарш индейки', ar: 'ديك رومي مفروم طازج' },
            'הודו טחון קפוא': { en: 'Frozen Ground Turkey', ru: 'Замороженный фарш индейки', ar: 'ديك رومي مفروم مجمد' },
            'בשר טחון קפוא': { en: 'Frozen Ground Beef', ru: 'Замороженный говяжий фарш', ar: 'لحم مفروم مجمد' },
            'בשר טחון רזה טרי': { en: 'Fresh Lean Ground Beef', ru: 'Свежий постный говяжий фарш', ar: 'لحم مفروم قليل الدهن طازج' },
            'אנטריקוט קפוא': { en: 'Frozen Entrecote', ru: 'Замороженный антрекот', ar: 'انتريكوت مجمد' },
            'סינטה טרייה': { en: 'Fresh Sirloin', ru: 'Свежая вырезка', ar: 'سينتا طازجة' },
            'סינטה קפואה': { en: 'Frozen Sirloin', ru: 'Замороженная вырезка', ar: 'سينتا مجمدة' },
            'פילה בקר טרי': { en: 'Fresh Beef Fillet', ru: 'Свежее филе говядины', ar: 'فيليه بقر طازج' },
            'פילה בקר קפוא': { en: 'Frozen Beef Fillet', ru: 'Замороженное филе говядины', ar: 'فيليه بقر مجمد' },
            'צלעות בקר טריות': { en: 'Fresh Beef Ribs', ru: 'Свежие говяжьи рёбра', ar: 'ضلوع بقر طازجة' },
            'צלעות בקר קפואות': { en: 'Frozen Beef Ribs', ru: 'Замороженные говяжьи рёбра', ar: 'ضلوع بقر مجمدة' },
            'שפונדרה טרייה': { en: 'Fresh Chuck', ru: 'Свежая лопатка', ar: 'شبوندرا طازجة' },
            'שפונדרה קפואה': { en: 'Frozen Chuck', ru: 'Замороженная лопатка', ar: 'شبوندرا مجمدة' },
            'אסאדו טרי': { en: 'Fresh Asado', ru: 'Свежее асадо', ar: 'أسادو طازج' },
            'אסאדו קפוא': { en: 'Frozen Asado', ru: 'Замороженное асадо', ar: 'أسادو مجمد' },
            'גולש טרי': { en: 'Fresh Goulash Meat', ru: 'Свежее мясо для гуляша', ar: 'لحم جولاش طازج' },
            'גולש קפוא': { en: 'Frozen Goulash Meat', ru: 'Замороженное мясо для гуляша', ar: 'لحم جولاش مجمد' },
            'בשר לשווארמה טרי': { en: 'Fresh Shawarma Meat', ru: 'Свежее мясо для шаурмы', ar: 'لحم شاورما طازج' },
            'בשר לשווארמה קפוא': { en: 'Frozen Shawarma Meat', ru: 'Замороженное мясо для шаурмы', ar: 'لحم شاورما مجمد' },
            'טלה טרי': { en: 'Fresh Lamb', ru: 'Свежая баранина', ar: 'لحم خروف طازج' },
            'טלה קפוא': { en: 'Frozen Lamb', ru: 'Замороженная баранина', ar: 'لحم خروف مجمد' },
            'כבש טרי': { en: 'Fresh Mutton', ru: 'Свежая овечье мясо', ar: 'لحم ضأن طازج' },
            'כבש קפוא': { en: 'Frozen Mutton', ru: 'Замороженное овечье мясо', ar: 'لحم ضأن مجمد' },
            'שניצל עוף קפוא': { en: 'Frozen Chicken Schnitzel', ru: 'Замороженный куриный шницель', ar: 'شنيتسل دجاج مجمد' },
            'שניצל הודו טרי': { en: 'Fresh Turkey Schnitzel', ru: 'Свежий шницель индейки', ar: 'شنيتسل ديك رومي طازج' },
            'שניצל הודו קפוא': { en: 'Frozen Turkey Schnitzel', ru: 'Замороженный шницель индейки', ar: 'شنيتسل ديك رومي مجمد' },
            'קבב טרי': { en: 'Fresh Kebab', ru: 'Свежий кебаб', ar: 'كباب طازج' },
            'קבב קפוא': { en: 'Frozen Kebab', ru: 'Замороженный кебаб', ar: 'كباب مجمد' },
            'המבורגר קפוא': { en: 'Frozen Hamburger', ru: 'Замороженный гамбургер', ar: 'همبرغر مجمد' },
            'המבורגר ביתי': { en: 'Homemade Hamburger', ru: 'Домашний гамбургер', ar: 'همبرغر بيتي' },
            'נקניקיות עוף': { en: 'Chicken Sausages', ru: 'Куриные сосиски', ar: 'نقانق دجاج' },
            'נקניקיות בקר': { en: 'Beef Sausages', ru: 'Говяжьи сосиски', ar: 'نقانق بقر' },
            // Fish - דגים
            'סלמון קפוא': { en: 'Frozen Salmon', ru: 'Замороженный лосось', ar: 'سلمون مجمد' },
            'פילה סלמון טרי': { en: 'Fresh Salmon Fillet', ru: 'Свежее филе лосося', ar: 'فيليه سلمون طازج' },
            'פילה סלמון קפוא': { en: 'Frozen Salmon Fillet', ru: 'Замороженное филе лосося', ar: 'فيليه سلمون مجمد' },
            'פילה אמנון טרי': { en: 'Fresh Tilapia Fillet', ru: 'Свежее филе тилапии', ar: 'فيليه أمنون طازج' },
            'פילה אמנון קפוא': { en: 'Frozen Tilapia Fillet', ru: 'Замороженное филе тилапии', ar: 'فيليه أمنون مجمد' },
            'פילה בורי טרי': { en: 'Fresh Mullet Fillet', ru: 'Свежее филе кефали', ar: 'فيليه بوري طازج' },
            'פילה בורי קפוא': { en: 'Frozen Mullet Fillet', ru: 'Замороженное филе кефали', ar: 'فيليه بوري مجمد' },
            'פילה דניס טרי': { en: 'Fresh Sea Bream Fillet', ru: 'Свежее филе дорады', ar: 'فيليه دنيس طازج' },
            'פילה דניס קפוא': { en: 'Frozen Sea Bream Fillet', ru: 'Замороженное филе дорады', ar: 'فيليه دنيس مجمد' },
            'טונה טרייה': { en: 'Fresh Tuna', ru: 'Свежий тунец', ar: 'تونة طازجة' },
            'דג שלם טרי': { en: 'Fresh Whole Fish', ru: 'Свежая целая рыба', ar: 'سمك كامل طازج' },
            'דג שלם קפוא': { en: 'Frozen Whole Fish', ru: 'Замороженная целая рыба', ar: 'سمك كامل مجمد' },
            'נסיכי ים': { en: 'Fish Sticks', ru: 'Рыбные палочки', ar: 'أصابع سمك' },
            'שרימפס קפוא': { en: 'Frozen Shrimp', ru: 'Замороженные креветки', ar: 'جمبري مجمد' },
            'קלמארי קפוא': { en: 'Frozen Calamari', ru: 'Замороженные кальмары', ar: 'كاليماري مجمد' },
            'מולים': { en: 'Mussels', ru: 'Мидии', ar: 'بلح البحر' },
            'סרדינים': { en: 'Sardines', ru: 'Сардины', ar: 'سردين' },
            'דג מעושן': { en: 'Smoked Fish', ru: 'Копчёная рыба', ar: 'سمك مدخن' },
            // Frozen - קפואים
            'גלידה וניל': { en: 'Vanilla Ice Cream', ru: 'Ванильное мороженое', ar: 'آيس كريم فانيلا' },
            'גלידה שוקולד': { en: 'Chocolate Ice Cream', ru: 'Шоколадное мороженое', ar: 'آيس كريم شوكولاتة' },
            'גלידה תות': { en: 'Strawberry Ice Cream', ru: 'Клубничное мороженое', ar: 'آيس كريم فراولة' },
            'גלידה פיסטוק': { en: 'Pistachio Ice Cream', ru: 'Фисташковое мороженое', ar: 'آيس كريم فستق' },
            'גלידה קרמל': { en: 'Caramel Ice Cream', ru: 'Карамельное мороженое', ar: 'آيس كريم كراميل' },
            'גלידת פרווה': { en: 'Parve Ice Cream', ru: 'Парве мороженое', ar: 'آيس كريم بارفيه' },
            'ארטיק': { en: 'Popsicle', ru: 'Эскимо', ar: 'آيس كريم على عصا' },
            'מגנום': { en: 'Magnum', ru: 'Магнум', ar: 'ماغنوم' },
            'קורנטו': { en: 'Cornetto', ru: 'Корнетто', ar: 'كورنيتو' },
            'שלגון': { en: 'Ice Pop', ru: 'Фруктовый лёд', ar: 'شلجون' },
            'פירות קפואים': { en: 'Frozen Fruits', ru: 'Замороженные фрукты', ar: 'فواكه مجمدة' },
            'תותים קפואים': { en: 'Frozen Strawberries', ru: 'Замороженная клубника', ar: 'فراولة مجمدة' },
            'פטל קפוא': { en: 'Frozen Raspberries', ru: 'Замороженная малина', ar: 'توت مجمد' },
            'אוכמניות קפואות': { en: 'Frozen Blueberries', ru: 'Замороженная черника', ar: 'توت أزرق مجمد' },
            'מנגו קפוא': { en: 'Frozen Mango', ru: 'Замороженный манго', ar: 'مانجو مجمد' },
            'ירקות מוקפצים': { en: 'Stir Fry Vegetables', ru: 'Овощи для жарки', ar: 'خضار للقلي' },
            'אפונה קפואה': { en: 'Frozen Peas', ru: 'Замороженный горошек', ar: 'بازلاء مجمدة' },
            'תירס קפוא': { en: 'Frozen Corn', ru: 'Замороженная кукуруза', ar: 'ذرة مجمدة' },
            'שעועית ירוקה קפואה': { en: 'Frozen Green Beans', ru: 'Замороженная стручковая фасоль', ar: 'فاصوليا خضراء مجمدة' },
            'ברוקולי קפוא': { en: 'Frozen Broccoli', ru: 'Замороженная брокколи', ar: 'بروكلي مجمد' },
            'תרד קפוא': { en: 'Frozen Spinach', ru: 'Замороженный шпинат', ar: 'سبانخ مجمدة' },
            'שניצל קפוא': { en: 'Frozen Schnitzel', ru: 'Замороженный шницель', ar: 'شنيتسل مجمد' },
            'נאגטס קפואים': { en: 'Frozen Nuggets', ru: 'Замороженные наггетсы', ar: 'ناجتس مجمدة' },
            'קציצות קפואות': { en: 'Frozen Meatballs', ru: 'Замороженные котлеты', ar: 'كفتة مجمدة' },
            'פיצה משפחתית': { en: 'Family Size Pizza', ru: 'Семейная пицца', ar: 'بيتزا عائلية' },
            'לזניה קפואה': { en: 'Frozen Lasagna', ru: 'Замороженная лазанья', ar: 'لازانيا مجمدة' },
            'בצק עלים': { en: 'Puff Pastry', ru: 'Слоёное тесто', ar: 'عجينة ورق' },
            'בצק פילו': { en: 'Phyllo Dough', ru: 'Тесто фило', ar: 'عجينة فيلو' },
            'בצק פיצה': { en: 'Pizza Dough', ru: 'Тесто для пиццы', ar: 'عجينة بيتزا' },
            'בצק מאפים': { en: 'Pastry Dough', ru: 'Тесто для выпечки', ar: 'عجينة معجنات' },
            'בצק ג\'חנון': { en: 'Jachnun Dough', ru: 'Тесто для джахнуна', ar: 'عجينة جحنون' },
            'בצק מלווח': { en: 'Malawach Dough', ru: 'Тесто для малаваха', ar: 'عجينة ملوح' },
            'בצק סמבוסק': { en: 'Sambusak Dough', ru: 'Тесто для самбусака', ar: 'عجينة سمبوسك' },
            'בצק בורקס': { en: 'Bourekas Dough', ru: 'Тесто для борекаса', ar: 'عجينة بوريكاس' },
            'בלינצ\'ס': { en: 'Blintzes', ru: 'Блинчики', ar: 'بلينتزس' },
            'קרפ': { en: 'Crepes', ru: 'Блины', ar: 'كريب' },
            'וופל קפוא': { en: 'Frozen Waffle', ru: 'Замороженная вафля', ar: 'وافل مجمد' },
            'ג\'חנון אפוי מוכן': { en: 'Ready Baked Jachnun', ru: 'Готовый джахнун', ar: 'جحنون جاهز مخبوز' },
            // Health - דיאטה וחלבון
            'יוגורט חלבון': { en: 'Protein Yogurt', ru: 'Протеиновый йогурт', ar: 'زبادي بروتين' },
            'משקה חלבון': { en: 'Protein Drink', ru: 'Протеиновый напиток', ar: 'مشروب بروتين' },
            'שייק חלבון': { en: 'Protein Shake', ru: 'Протеиновый коктейль', ar: 'شيك بروتين' },
            'אבקת חלבון': { en: 'Protein Powder', ru: 'Протеиновый порошок', ar: 'بودرة بروتين' },
            'פרוטאין בר': { en: 'Protein Bar', ru: 'Протеиновый батончик', ar: 'لوح بروتين' },
            'חטיף חלבון': { en: 'Protein Snack', ru: 'Протеиновый снэк', ar: 'سناك بروتين' },
            'חטיף אנרגיה': { en: 'Energy Bar', ru: 'Энергетический батончик', ar: 'لوح طاقة' },
            'פיתה מלאה': { en: 'Whole Wheat Pita', ru: 'Цельнозерновая пита', ar: 'بيتا قمح كامل' },
            'קרקר דגנים': { en: 'Grain Crackers', ru: 'Зерновые крекеры', ar: 'مقرمشات حبوب' },
            'קרקר אורז': { en: 'Rice Crackers', ru: 'Рисовые крекеры', ar: 'مقرمشات أرز' },
            'טונה במים': { en: 'Tuna in Water', ru: 'Тунец в воде', ar: 'تونة بالماء' },
            'חזה עוף מעושן': { en: 'Smoked Chicken Breast', ru: 'Копчёная куриная грудка', ar: 'صدر دجاج مدخن' },
            'גרנולה בריאות': { en: 'Health Granola', ru: 'Здоровая гранола', ar: 'جرانولا صحية' },
            'זרעי צ\'יה': { en: 'Chia Seeds', ru: 'Семена чиа', ar: 'بذور الشيا' },
            'זרעי פשתן': { en: 'Flax Seeds', ru: 'Семена льна', ar: 'بذور الكتان' },
            'אגוזים טבעיים': { en: 'Natural Nuts', ru: 'Натуральные орехи', ar: 'مكسرات طبيعية' },
            'שקדים טבעיים': { en: 'Natural Almonds', ru: 'Натуральный миндаль', ar: 'لوز طبيعي' },
            'פירות יבשים ללא סוכר': { en: 'Sugar Free Dried Fruits', ru: 'Сухофрукты без сахара', ar: 'فواكه مجففة بدون سكر' },
            'גוג\'י ברי': { en: 'Goji Berries', ru: 'Ягоды годжи', ar: 'توت غوجي' },
            'ספירולינה': { en: 'Spirulina', ru: 'Спирулина', ar: 'سبيرولينا' },
            'ויטמינים': { en: 'Vitamins', ru: 'Витамины', ar: 'فيتامينات' },
            'אומגה 3': { en: 'Omega 3', ru: 'Омега 3', ar: 'أوميغا 3' },
            'פרוביוטיקה': { en: 'Probiotics', ru: 'Пробиотики', ar: 'بروبيوتيك' },
            // Desserts - מעדני חלב
            'מילקי אוראו': { en: 'Oreo Milky', ru: 'Милки Орео', ar: 'ميلكي أوريو' },
            'דנונה שוקולד': { en: 'Chocolate Danone', ru: 'Данон шоколадный', ar: 'دانون شوكولاتة' },
            'יופלה': { en: 'Yoplait', ru: 'Йоплэ', ar: 'يوبليه' },
            'דניאלה': { en: 'Daniella', ru: 'Даниэла', ar: 'دانييلا' },
            'מעדן וניל': { en: 'Vanilla Dessert', ru: 'Ванильный десерт', ar: 'حلوى فانيلا' },
            'מעדן שוקולד': { en: 'Chocolate Dessert', ru: 'Шоколадный десерт', ar: 'حلوى شوكولاتة' },
            'מעדן קרמל': { en: 'Caramel Dessert', ru: 'Карамельный десерт', ar: 'حلوى كراميل' },
            'מעדן ביסקוויטים': { en: 'Biscuit Dessert', ru: 'Десерт с печеньем', ar: 'حلوى بسكويت' },
            'מעדן לוטוס': { en: 'Lotus Dessert', ru: 'Десерт Лотос', ar: 'حلوى لوتس' },
            'שוקו תנובה': { en: 'Tnuva Chocolate Milk', ru: 'Шоколадное молоко Тнува', ar: 'شوكو تنوفا' },
            'מעדן יוגורט': { en: 'Yogurt Dessert', ru: 'Йогуртовый десерт', ar: 'حلوى زبادي' },
            'מעדן תות': { en: 'Strawberry Dessert', ru: 'Клубничный десерт', ar: 'حلوى فراولة' },
            'מעדן בננה': { en: 'Banana Dessert', ru: 'Банановый десерт', ar: 'حلوى موز' },
            'מוס וניל': { en: 'Vanilla Mousse', ru: 'Ванильный мусс', ar: 'موس فانيلا' },
            'פרי גד': { en: 'Pri Gad', ru: 'При Гад', ar: 'بري جاد' },
            'דן בראון': { en: 'Dan Brown', ru: 'Дан Браун', ar: 'دان براون' },
            'קרם ברולה': { en: 'Crème Brûlée', ru: 'Крем-брюле', ar: 'كريم بروليه' },
            'פנקוטה': { en: 'Panna Cotta', ru: 'Панна-котта', ar: 'بانا كوتا' },
            'סהרון': { en: 'Saharon', ru: 'Сахарон', ar: 'سهرون' },
            'גו': { en: 'Go', ru: 'Гоу', ar: 'جو' },
            'מונטה': { en: 'Monte', ru: 'Монте', ar: 'مونتي' },
            'קינדר מילק': { en: 'Kinder Milk', ru: 'Киндер Милк', ar: 'كيندر ميلك' },
            // Candles - נרות (additional)
            'נרות חנוכה צבעוניים': { en: 'Colorful Hanukkah Candles', ru: 'Цветные ханукальные свечи', ar: 'شموع حانوكا ملونة' },
            'נר נשמה 24 שעות': { en: 'Memorial Candle 24 Hours', ru: 'Поминальная свеча 24 часа', ar: 'شمعة ذكرى 24 ساعة' },
            'נר נשמה 48 שעות': { en: 'Memorial Candle 48 Hours', ru: 'Поминальная свеча 48 часов', ar: 'شمعة ذكرى 48 ساعة' },
            'נר נשמה 7 ימים': { en: 'Memorial Candle 7 Days', ru: 'Поминальная свеча 7 дней', ar: 'شمعة ذكرى 7 أيام' },
            'נר הבדלה': { en: 'Havdalah Candle', ru: 'Свеча Хавдалы', ar: 'شمعة هافدالاه' },
            'נרות יום הולדת': { en: 'Birthday Candles', ru: 'Свечи на день рождения', ar: 'شموع عيد ميلاد' },
            'נרות ריחניים': { en: 'Scented Candles', ru: 'Ароматические свечи', ar: 'شموع معطرة' },
            'נרות דקורטיביים': { en: 'Decorative Candles', ru: 'Декоративные свечи', ar: 'شموع ديكورية' },
            'פתילות': { en: 'Wicks', ru: 'Фитили', ar: 'فتائل' },
            'מציתים': { en: 'Lighters', ru: 'Зажигалки', ar: 'ولاعات' },
            // Baking - אפיה (additional)
            'קמח תופח': { en: 'Self Rising Flour', ru: 'Самоподнимающаяся мука', ar: 'طحين ذاتي الرفع' },
            'קמח לחלה': { en: 'Challah Flour', ru: 'Мука для халы', ar: 'طحين للحلة' },
            'קמח ללחם': { en: 'Bread Flour', ru: 'Хлебная мука', ar: 'طحين للخبز' },
            'קמח לפיצה': { en: 'Pizza Flour', ru: 'Мука для пиццы', ar: 'طحين للبيتزا' },
            'קמח לפוקצ\'ה': { en: 'Focaccia Flour', ru: 'Мука для фокаччи', ar: 'طحين للفوكاتشيا' },
            'קמח לבן מנופה': { en: 'Sifted White Flour', ru: 'Просеянная белая мука', ar: 'طحين أبيض منخول' },
            'קורנפלור': { en: 'Cornflour', ru: 'Кукурузный крахмал', ar: 'نشا الذرة' },
            'עמילן': { en: 'Starch', ru: 'Крахмал', ar: 'نشا' },
            'עמילן תירס': { en: 'Corn Starch', ru: 'Кукурузный крахмал', ar: 'نشا ذرة' },
            'סוכר דמררה': { en: 'Demerara Sugar', ru: 'Сахар демерара', ar: 'سكر ديميرارا' },
            'סוכר וניל': { en: 'Vanilla Sugar', ru: 'Ванильный сахар', ar: 'سكر فانيلا' },
            'סוכרת': { en: 'Sweetener', ru: 'Подсластитель', ar: 'محلي صناعي' },
            'סטיביה': { en: 'Stevia', ru: 'Стевия', ar: 'ستيفيا' },
            'שמרים יבשים': { en: 'Dry Yeast', ru: 'Сухие дрожжи', ar: 'خميرة جافة' },
            'שמרים טריים': { en: 'Fresh Yeast', ru: 'Свежие дрожжи', ar: 'خميرة طازجة' },
            'סודה לשתייה': { en: 'Baking Soda', ru: 'Пищевая сода', ar: 'صودا الخبز' },
            'תמצית וניל': { en: 'Vanilla Extract', ru: 'Ванильный экстракт', ar: 'خلاصة الفانيلا' },
            'מקלות וניל': { en: 'Vanilla Sticks', ru: 'Ванильные палочки', ar: 'أعواد الفانيلا' },
            'שוקולד צ\'יפס מריר': { en: 'Dark Chocolate Chips', ru: 'Горькие шоколадные капли', ar: 'رقائق شوكولاتة داكنة' },
            'שוקולד צ\'יפס לבן': { en: 'White Chocolate Chips', ru: 'Белые шоколадные капли', ar: 'رقائق شوكولاتة بيضاء' },
            'שוקולד מריר לאפייה': { en: 'Dark Baking Chocolate', ru: 'Горький шоколад для выпечки', ar: 'شوكولاتة داكنة للخبز' },
            'שוקולד חלב לאפייה': { en: 'Milk Baking Chocolate', ru: 'Молочный шоколад для выпечки', ar: 'شوكولاتة حليب للخبز' },
            'שוקולד לבן לאפייה': { en: 'White Baking Chocolate', ru: 'Белый шоколад для выпечки', ar: 'شوكولاتة بيضاء للخبز' },
            'אבקת קקאו': { en: 'Cocoa Powder', ru: 'Какао-порошок', ar: 'بودرة كاكاو' },
            'קוקוס טחון': { en: 'Ground Coconut', ru: 'Молотый кокос', ar: 'جوز هند مطحون' },
            'שקדים טחונים': { en: 'Ground Almonds', ru: 'Молотый миндаль', ar: 'لوز مطحون' },
            'שקדים פרוסים': { en: 'Sliced Almonds', ru: 'Нарезанный миндаль', ar: 'لوز شرائح' },
            'שקדים שלמים': { en: 'Whole Almonds', ru: 'Целый миндаль', ar: 'لوز كامل' },
            'אגוזי מלך טחונים': { en: 'Ground Walnuts', ru: 'Молотые грецкие орехи', ar: 'جوز مطحون' },
            'פקאן טחון': { en: 'Ground Pecans', ru: 'Молотый пекан', ar: 'بيكان مطحون' },
            'קשיו': { en: 'Cashews', ru: 'Кешью', ar: 'كاجو' },
            'פיסטוק': { en: 'Pistachios', ru: 'Фисташки', ar: 'فستق' },
            'אגוזי לוז': { en: 'Hazelnuts', ru: 'Фундук', ar: 'بندق' },
            'תמרים מג\'הול': { en: 'Medjool Dates', ru: 'Финики Меджул', ar: 'تمر مجهول' },
            'פרג': { en: 'Poppy Seeds', ru: 'Мак', ar: 'بذور الخشخاش' },
            'מרציפן': { en: 'Marzipan', ru: 'Марципан', ar: 'مرزبان' },
            'פונדנט': { en: 'Fondant', ru: 'Помадка', ar: 'فوندان' },
            'בצק סוכר': { en: 'Sugar Dough', ru: 'Сахарное тесто', ar: 'عجينة سكر' },
            'צבעי מאכל': { en: 'Food Coloring', ru: 'Пищевые красители', ar: 'ألوان طعام' },
            'סוכריות לקישוט': { en: 'Decorating Sprinkles', ru: 'Посыпка для украшения', ar: 'حبيبات للتزيين' },
            'גליטר לאפייה': { en: 'Baking Glitter', ru: 'Блёстки для выпечки', ar: 'جليتر للخبز' },
            'פירורי לחם': { en: 'Breadcrumbs', ru: 'Панировочные сухари', ar: 'فتات الخبز' },
            'פירורי ביסקוויט': { en: 'Biscuit Crumbs', ru: 'Бисквитная крошка', ar: 'فتات البسكويت' },
            'פודינג שוקולד': { en: 'Chocolate Pudding', ru: 'Шоколадный пудинг', ar: 'بودينغ شوكولاتة' },
            'פודינג וניל': { en: 'Vanilla Pudding', ru: 'Ванильный пудинг', ar: 'بودينغ فانيلا' },
            // Canned - שימורים
            'אורז יסמין': { en: 'Jasmine Rice', ru: 'Жасминовый рис', ar: 'أرز ياسمين' },
            'אורז מלא': { en: 'Brown Rice', ru: 'Коричневый рис', ar: 'أرز بني' },
            'אורז סושי': { en: 'Sushi Rice', ru: 'Рис для суши', ar: 'أرز سوشي' },
            'אורז פרסי': { en: 'Persian Rice', ru: 'Персидский рис', ar: 'أرز فارسي' },
            'פסטה פנה': { en: 'Penne Pasta', ru: 'Пенне', ar: 'معكرونة بيني' },
            'פסטה פרפלה': { en: 'Farfalle Pasta', ru: 'Фарфалле', ar: 'معكرونة فرفالي' },
            'פסטה פוזילי': { en: 'Fusilli Pasta', ru: 'Фузилли', ar: 'معكرونة فوزيلي' },
            'פסטה לזניה': { en: 'Lasagna Sheets', ru: 'Листы лазаньи', ar: 'شرائح لازانيا' },
            'פסטה מלאה': { en: 'Whole Wheat Pasta', ru: 'Цельнозерновая паста', ar: 'معكرونة قمح كامل' },
            'קוסקוס מלא': { en: 'Whole Wheat Couscous', ru: 'Цельнозерновой кускус', ar: 'كسكس قمح كامل' },
            'קוסקוס פתיתים': { en: 'Israeli Couscous', ru: 'Птитим', ar: 'بتيتيم' },
            'קטניות': { en: 'Legumes', ru: 'Бобовые', ar: 'بقوليات' },
            'רוטב פסטה': { en: 'Pasta Sauce', ru: 'Соус для пасты', ar: 'صلصة باستا' },
            'רסק עגבניות': { en: 'Tomato Paste', ru: 'Томатная паста', ar: 'معجون طماطم' },
            'טונה בשמן': { en: 'Tuna in Oil', ru: 'Тунец в масле', ar: 'تونة بالزيت' },
            'טונה ברוטב': { en: 'Tuna in Sauce', ru: 'Тунец в соусе', ar: 'تونة بالصلصة' },
            'תירס מתוק': { en: 'Sweet Corn', ru: 'Сладкая кукуруза', ar: 'ذرة حلوة' },
            'גרגירי תירס': { en: 'Corn Kernels', ru: 'Зёрна кукурузы', ar: 'حبوب ذرة' },
            'שמן זית כתית': { en: 'Extra Virgin Olive Oil', ru: 'Оливковое масло экстра вирджин', ar: 'زيت زيتون بكر' },
            'שמן קנולה': { en: 'Canola Oil', ru: 'Рапсовое масло', ar: 'زيت كانولا' },
            'שמן חמניות': { en: 'Sunflower Oil', ru: 'Подсолнечное масло', ar: 'زيت عباد الشمس' },
            'שמן תירס': { en: 'Corn Oil', ru: 'Кукурузное масло', ar: 'زيت ذرة' },
            'שמן שומשום': { en: 'Sesame Oil', ru: 'Кунжутное масло', ar: 'زيت سمسم' },
            'שמן אגוזים': { en: 'Nut Oil', ru: 'Ореховое масло', ar: 'زيت مكسرات' },
            'חומץ בלסמי': { en: 'Balsamic Vinegar', ru: 'Бальзамический уксус', ar: 'خل بلسمي' },
            'חומץ יין': { en: 'Wine Vinegar', ru: 'Винный уксус', ar: 'خل نبيذ' },
            'חומץ תפוחים': { en: 'Apple Cider Vinegar', ru: 'Яблочный уксус', ar: 'خل تفاح' },
            'חומץ לבן': { en: 'White Vinegar', ru: 'Белый уксус', ar: 'خل أبيض' },
            'מיץ לימון': { en: 'Lemon Juice', ru: 'Лимонный сок', ar: 'عصير ليمون' },
            'חומוס טחון': { en: 'Ground Chickpeas', ru: 'Молотый нут', ar: 'حمص مطحون' },
            'זיתים שחורים': { en: 'Black Olives', ru: 'Чёрные оливки', ar: 'زيتون أسود' },
            'זיתים ירוקים': { en: 'Green Olives', ru: 'Зелёные оливки', ar: 'زيتون أخضر' },
            'זיתים קלמטה': { en: 'Kalamata Olives', ru: 'Оливки Каламата', ar: 'زيتون كالاماتا' },
            'מלפפון חמוץ': { en: 'Pickled Cucumber', ru: 'Маринованный огурец', ar: 'خيار مخلل' },
            'פפריקה קלויה': { en: 'Roasted Peppers', ru: 'Печёный перец', ar: 'فلفل مشوي' },
            'בוטנים': { en: 'Peanuts', ru: 'Арахис', ar: 'فول سوداني' },
            'חיטה': { en: 'Wheat', ru: 'Пшеница', ar: 'قمح' },
            'בורגול': { en: 'Bulgur', ru: 'Булгур', ar: 'برغل' },
            'פריקה': { en: 'Freekeh', ru: 'Фрике', ar: 'فريكة' },
            'נודלס': { en: 'Noodles', ru: 'Лапша', ar: 'نودلز' },
            'אטריות': { en: 'Noodles', ru: 'Лапша', ar: 'شعيرية' },
            'פול': { en: 'Fava Beans', ru: 'Бобы', ar: 'فول' },
            'גרגירי חומוס': { en: 'Chickpeas', ru: 'Нут', ar: 'حمص حبوب' },
            'עדשים כתומות': { en: 'Red Lentils', ru: 'Красная чечевица', ar: 'عدس أحمر' },
            'עדשים ירוקות': { en: 'Green Lentils', ru: 'Зелёная чечевица', ar: 'عدس أخضر' },
            'שעועית לבנה': { en: 'White Beans', ru: 'Белая фасоль', ar: 'فاصوليا بيضاء' },
            'שעועית אדומה': { en: 'Red Beans', ru: 'Красная фасоль', ar: 'فاصوليا حمراء' },
            'שעועית שחורה': { en: 'Black Beans', ru: 'Чёрная фасоль', ar: 'فاصوليا سوداء' },
            'אפונה': { en: 'Peas', ru: 'Горошек', ar: 'بازلاء' },
            'סויה': { en: 'Soybeans', ru: 'Соевые бобы', ar: 'فول الصويا' },
            'מאש': { en: 'Mung Beans', ru: 'Маш', ar: 'ماش' },
            // Spices - תבלינים
            'מלח ים': { en: 'Sea Salt', ru: 'Морская соль', ar: 'ملح بحري' },
            'מלח שולחן': { en: 'Table Salt', ru: 'Столовая соль', ar: 'ملح طعام' },
            'מלח גס': { en: 'Coarse Salt', ru: 'Крупная соль', ar: 'ملح خشن' },
            'פלפל גרוס': { en: 'Coarse Pepper', ru: 'Крупный перец', ar: 'فلفل خشن' },
            'פפריקה מתוקה': { en: 'Sweet Paprika', ru: 'Сладкая паприка', ar: 'بابريكا حلوة' },
            'פפריקה חריפה': { en: 'Hot Paprika', ru: 'Острая паприка', ar: 'بابريكا حارة' },
            'פפריקה מעושנת': { en: 'Smoked Paprika', ru: 'Копчёная паприка', ar: 'بابريكا مدخنة' },
            'קינמון טחון': { en: 'Ground Cinnamon', ru: 'Молотая корица', ar: 'قرفة مطحونة' },
            'מקלות קינמון': { en: 'Cinnamon Sticks', ru: 'Палочки корицы', ar: 'أعواد قرفة' },
            'אבקת שום': { en: 'Garlic Powder', ru: 'Чесночный порошок', ar: 'بودرة ثوم' },
            'אבקת בצל': { en: 'Onion Powder', ru: 'Луковый порошок', ar: 'بودرة بصل' },
            'אורגנו': { en: 'Oregano', ru: 'Орегано', ar: 'أوريجانو' },
            'בזיליקום': { en: 'Basil', ru: 'Базилик', ar: 'ريحان' },
            'סומק': { en: 'Sumac', ru: 'Сумах', ar: 'سماق' },
            'חוואייג׳': { en: 'Hawaij', ru: 'Хавайдж', ar: 'حوائج' },
            'תבלין לעוף': { en: 'Chicken Seasoning', ru: 'Приправа для курицы', ar: 'توابل للدجاج' },
            'תבלין לדגים': { en: 'Fish Seasoning', ru: 'Приправа для рыбы', ar: 'توابل للسمك' },
            'תבלין לבשר': { en: 'Meat Seasoning', ru: 'Приправа для мяса', ar: 'توابل للحم' },
            'תבלין גריל': { en: 'Grill Seasoning', ru: 'Приправа для гриля', ar: 'توابل للشوي' },
            'גרם מסאלה': { en: 'Garam Masala', ru: 'Гарам масала', ar: 'جارام ماسالا' },
            'ציילי': { en: 'Chili', ru: 'Чили', ar: 'فلفل حار' },
            'קיאן': { en: 'Cayenne', ru: 'Кайенский перец', ar: 'كايين' },
            'זנגביל': { en: 'Ginger', ru: 'Имбирь', ar: 'زنجبيل' },
            'אגוז מוסקט': { en: 'Nutmeg', ru: 'Мускатный орех', ar: 'جوزة الطيب' },
            'ציפורן': { en: 'Cloves', ru: 'Гвоздика', ar: 'قرنفل' },
            'כוסברה טחונה': { en: 'Ground Coriander', ru: 'Молотый кориандр', ar: 'كزبرة مطحونة' },
            'קרדמון': { en: 'Cardamom', ru: 'Кардамон', ar: 'هيل' },
            'עלי דפנה': { en: 'Bay Leaves', ru: 'Лавровый лист', ar: 'ورق الغار' },
            'רוזמרין': { en: 'Rosemary', ru: 'Розмарин', ar: 'إكليل الجبل' },
            'טימין': { en: 'Thyme', ru: 'Тимьян', ar: 'زعتر' },
            'הל': { en: 'Cardamom', ru: 'Кардамон', ar: 'هال' },
            'כוכב אניס': { en: 'Star Anise', ru: 'Звёздочка аниса', ar: 'يانسون نجمي' },
            'עירית': { en: 'Savory', ru: 'Чабер', ar: 'صعتر بري' },
            'מרווה': { en: 'Sage', ru: 'Шалфей', ar: 'مريمية' },
            // Coffee & Tea - קפה ותה
            'קפה ג\'קובס': { en: 'Jacobs Coffee', ru: 'Кофе Якобс', ar: 'قهوة جاكوبس' },
            'קפה שחור': { en: 'Black Coffee', ru: 'Чёрный кофе', ar: 'قهوة سوداء' },
            'קפה נספרסו': { en: 'Nespresso Coffee', ru: 'Кофе Неспрессо', ar: 'قهوة نسبريسو' },
            'קפה נטול קפאין': { en: 'Decaf Coffee', ru: 'Кофе без кофеина', ar: 'قهوة منزوعة الكافيين' },
            'קפסולות נספרסו': { en: 'Nespresso Capsules', ru: 'Капсулы Неспрессо', ar: 'كبسولات نسبريسو' },
            'קפסולות דולצ\'ה': { en: 'Dolce Gusto Capsules', ru: 'Капсулы Дольче Густо', ar: 'كبسولات دولتشي' },
            'קפסולות לוואצה': { en: 'Lavazza Capsules', ru: 'Капсулы Лаваца', ar: 'كبسولات لافاتزا' },
            'קפסולות טאסימו': { en: 'Tassimo Capsules', ru: 'Капсулы Тассимо', ar: 'كبسولات تاسيمو' },
            'קפסולות לנדוור': { en: 'Landwer Capsules', ru: 'Капсулы Ландвер', ar: 'كبسولات لاندفير' },
            'קפה קלוי טחון': { en: 'Ground Roasted Coffee', ru: 'Молотый обжаренный кофе', ar: 'قهوة محمصة مطحونة' },
            'תה ירוק יסמין': { en: 'Jasmine Green Tea', ru: 'Зелёный чай с жасмином', ar: 'شاي أخضر بالياسمين' },
            'תה צמחים': { en: 'Herbal Tea', ru: 'Травяной чай', ar: 'شاي أعشاب' },
            'תה לואיזה': { en: 'Louisa Tea', ru: 'Чай Луиза', ar: 'شاي لويزا' },
            'תה ליפטון': { en: 'Lipton Tea', ru: 'Чай Липтон', ar: 'شاي ليبتون' },
            'תה ויסוצקי': { en: 'Wissotzky Tea', ru: 'Чай Виссоцкий', ar: 'شاي ويسوتسكي' },
            'תה קמומיל': { en: 'Chamomile Tea', ru: 'Ромашковый чай', ar: 'شاي بابونج' },
            'תה מרווה': { en: 'Sage Tea', ru: 'Чай с шалфеем', ar: 'شاي مريمية' },
            'תה ג\'ינג\'ר': { en: 'Ginger Tea', ru: 'Имбирный чай', ar: 'شاي زنجبيل' },
            'תה לימון': { en: 'Lemon Tea', ru: 'Лимонный чай', ar: 'شاي ليمون' },
            'תה ארל גריי': { en: 'Earl Grey Tea', ru: 'Чай Эрл Грей', ar: 'شاي إيرل جراي' },
            'תה אנגלי': { en: 'English Tea', ru: 'Английский чай', ar: 'شاي إنجليزي' },
            'חלב מרוכז': { en: 'Condensed Milk', ru: 'Сгущённое молоко', ar: 'حليب مركز' },
            'אייס קפה': { en: 'Iced Coffee', ru: 'Холодный кофе', ar: 'قهوة مثلجة' },
            'קקאו שוקו': { en: 'Chocolate Cocoa', ru: 'Шоколадное какао', ar: 'كاكاو شوكولاتة' },
            // Drinks - משקאות
            'מים בטעמים': { en: 'Flavored Water', ru: 'Ароматизированная вода', ar: 'مياه بنكهات' },
            'מי עדן': { en: 'Eden Water', ru: 'Вода Эден', ar: 'مياه عدن' },
            'נביעות': { en: 'Neviot Water', ru: 'Вода Невиот', ar: 'مياه نفيعوت' },
            'קולה 1.5 ליטר': { en: 'Cola 1.5L', ru: 'Кола 1.5л', ar: 'كولا 1.5 لتر' },
            'קולה פחית': { en: 'Cola Can', ru: 'Кола в банке', ar: 'كولا علبة' },
            'שישיית קולה': { en: 'Cola 6-Pack', ru: 'Упаковка колы 6 шт', ar: 'علبة كولا 6' },
            'קולה זירו': { en: 'Cola Zero', ru: 'Кола зеро', ar: 'كولا زيرو' },
            'קולה דיאט': { en: 'Diet Cola', ru: 'Диетическая кола', ar: 'كولا دايت' },
            'פפסי': { en: 'Pepsi', ru: 'Пепси', ar: 'بيبسي' },
            'פפסי מקס': { en: 'Pepsi Max', ru: 'Пепси Макс', ar: 'بيبسي ماكس' },
            'ספרייט פחית': { en: 'Sprite Can', ru: 'Спрайт в банке', ar: 'سبرايت علبة' },
            'ספרייט זירו': { en: 'Sprite Zero', ru: 'Спрайт зеро', ar: 'سبرايت زيرو' },
            'פאנטה': { en: 'Fanta', ru: 'Фанта', ar: 'فانتا' },
            'סודה': { en: 'Soda', ru: 'Сода', ar: 'صودا' },
            'טוניק': { en: 'Tonic', ru: 'Тоник', ar: 'تونيك' },
            'מיץ תפוזים סחוט': { en: 'Fresh Squeezed Orange Juice', ru: 'Свежевыжатый апельсиновый сок', ar: 'عصير برتقال طازج' },
            'מיץ ענבים': { en: 'Grape Juice', ru: 'Виноградный сок', ar: 'عصير عنب' },
            'מיץ גזר': { en: 'Carrot Juice', ru: 'Морковный сок', ar: 'عصير جزر' },
            'מיץ רימונים': { en: 'Pomegranate Juice', ru: 'Гранатовый сок', ar: 'عصير رمان' },
            'לימונדה': { en: 'Lemonade', ru: 'Лимонад', ar: 'ليموناضة' },
            'לימונענע': { en: 'Lemon Mint', ru: 'Лимон с мятой', ar: 'ليمون نعناع' },
            'רד בול': { en: 'Red Bull', ru: 'Ред Булл', ar: 'ريد بول' },
            'מונסטר': { en: 'Monster', ru: 'Монстер', ar: 'مونستر' },
            'משקה ספורט': { en: 'Sports Drink', ru: 'Спортивный напиток', ar: 'مشروب رياضي' },
            'משקה אנרגיה': { en: 'Energy Drink', ru: 'Энергетический напиток', ar: 'مشروب طاقة' },
            'מי קוקוס': { en: 'Coconut Water', ru: 'Кокосовая вода', ar: 'ماء جوز الهند' },
            // Wine & Alcohol - יין ואלכוהול
            'יין אדום': { en: 'Red Wine', ru: 'Красное вино', ar: 'نبيذ أحمر' },
            'יין לבן': { en: 'White Wine', ru: 'Белое вино', ar: 'نبيذ أبيض' },
            'יין רוזה': { en: 'Rosé Wine', ru: 'Розовое вино', ar: 'نبيذ روزيه' },
            'יין מבעבע': { en: 'Sparkling Wine', ru: 'Игристое вино', ar: 'نبيذ فوار' },
            'יין יבש': { en: 'Dry Wine', ru: 'Сухое вино', ar: 'نبيذ جاف' },
            'יין מתוק': { en: 'Sweet Wine', ru: 'Сладкое вино', ar: 'نبيذ حلو' },
            'יין קידוש': { en: 'Kiddush Wine', ru: 'Вино для кидуша', ar: 'نبيذ كيدوش' },
            'שמפניה': { en: 'Champagne', ru: 'Шампанское', ar: 'شمبانيا' },
            'פרוסקו': { en: 'Prosecco', ru: 'Просекко', ar: 'بروسيكو' },
            'בירה': { en: 'Beer', ru: 'Пиво', ar: 'بيرة' },
            'בירה גולדסטאר': { en: 'Goldstar Beer', ru: 'Пиво Голдстар', ar: 'بيرة جولدستار' },
            'בירה מכבי': { en: 'Maccabi Beer', ru: 'Пиво Маккаби', ar: 'بيرة مكابي' },
            'בירה הייניקן': { en: 'Heineken Beer', ru: 'Пиво Хайнекен', ar: 'بيرة هاينكن' },
            'בירה קורונה': { en: 'Corona Beer', ru: 'Пиво Корона', ar: 'بيرة كورونا' },
            'בירה ללא אלכוהול': { en: 'Non-Alcoholic Beer', ru: 'Безалкогольное пиво', ar: 'بيرة بدون كحول' },
            'סיידר': { en: 'Cider', ru: 'Сидр', ar: 'سايدر' },
            'ערק': { en: 'Arak', ru: 'Арак', ar: 'عرق' },
            'וודקה': { en: 'Vodka', ru: 'Водка', ar: 'فودكا' },
            'וויסקי': { en: 'Whisky', ru: 'Виски', ar: 'ويسكي' },
            'רום': { en: 'Rum', ru: 'Ром', ar: 'روم' },
            'ג\'ין': { en: 'Gin', ru: 'Джин', ar: 'جين' },
            'טקילה': { en: 'Tequila', ru: 'Текила', ar: 'تيكيلا' },
            'קוניאק': { en: 'Cognac', ru: 'Коньяк', ar: 'كونياك' },
            'ליקר': { en: 'Liqueur', ru: 'Ликёр', ar: 'ليكور' },
            'בייליס': { en: 'Baileys', ru: 'Бейлис', ar: 'بيلز' },
            // Cleaning - ניקיון
            'נייר טואלט תלת שכבתי': { en: '3-Ply Toilet Paper', ru: 'Трёхслойная туалетная бумага', ar: 'ورق تواليت ثلاث طبقات' },
            'ממחטות נייר': { en: 'Tissues', ru: 'Бумажные салфетки', ar: 'مناديل ورقية' },
            'סבון כלים פיירי': { en: 'Fairy Dish Soap', ru: 'Средство для посуды Фейри', ar: 'صابون أطباق فيري' },
            'נוזל כלים': { en: 'Dish Liquid', ru: 'Жидкость для посуды', ar: 'سائل أطباق' },
            'אבקת כביסה אריאל': { en: 'Ariel Laundry Detergent', ru: 'Стиральный порошок Ариэль', ar: 'مسحوق غسيل أريال' },
            'ג\'ל כביסה': { en: 'Laundry Gel', ru: 'Гель для стирки', ar: 'جل غسيل' },
            'קפסולות כביסה': { en: 'Laundry Pods', ru: 'Капсулы для стирки', ar: 'كبسولات غسيل' },
            'מבשם כביסה': { en: 'Laundry Scent', ru: 'Ароматизатор для белья', ar: 'معطر غسيل' },
            'מנקה רצפות': { en: 'Floor Cleaner', ru: 'Средство для мытья полов', ar: 'منظف أرضيات' },
            'מנקה חלונות': { en: 'Window Cleaner', ru: 'Средство для окон', ar: 'منظف نوافذ' },
            'מנקה אמבטיה': { en: 'Bathroom Cleaner', ru: 'Средство для ванной', ar: 'منظف حمام' },
            'מנקה שירותים': { en: 'Toilet Cleaner', ru: 'Средство для унитаза', ar: 'منظف مرحاض' },
            'מנקה תנור': { en: 'Oven Cleaner', ru: 'Средство для духовки', ar: 'منظف فرن' },
            'אבקת ניקוי': { en: 'Cleaning Powder', ru: 'Чистящий порошок', ar: 'مسحوق تنظيف' },
            'סיף': { en: 'Cif', ru: 'Сиф', ar: 'سيف' },
            'מר מוסקל': { en: 'Mr. Muscle', ru: 'Мистер Мускул', ar: 'مستر مسل' },
            'ספוגים': { en: 'Sponges', ru: 'Губки', ar: 'إسفنج' },
            'ספוגי פלדה': { en: 'Steel Wool', ru: 'Металлическая мочалка', ar: 'ليفة معدنية' },
            'שקיות אשפה גדולות': { en: 'Large Garbage Bags', ru: 'Большие мусорные пакеты', ar: 'أكياس قمامة كبيرة' },
            'שקיות זיפלוק': { en: 'Ziplock Bags', ru: 'Пакеты с застёжкой', ar: 'أكياس زيبلوك' },
            'שקיות כריכים': { en: 'Sandwich Bags', ru: 'Пакеты для бутербродов', ar: 'أكياس ساندويتش' },
            'נייר אפייה': { en: 'Baking Paper', ru: 'Бумага для выпечки', ar: 'ورق خبز' },
            'טבליות למדיח': { en: 'Dishwasher Tablets', ru: 'Таблетки для посудомоечной машины', ar: 'أقراص غسالة صحون' },
            'מלח למדיח': { en: 'Dishwasher Salt', ru: 'Соль для посудомоечной машины', ar: 'ملح غسالة صحون' },
            'מטהר אוויר': { en: 'Air Freshener', ru: 'Освежитель воздуха', ar: 'معطر جو' },
            // Hygiene - היגיינה
            'סבון ידיים נוזלי': { en: 'Liquid Hand Soap', ru: 'Жидкое мыло для рук', ar: 'صابون يدين سائل' },
            'מגבונים לחים': { en: 'Wet Wipes', ru: 'Влажные салфетки', ar: 'مناديل مبللة' },
            'ג\'ל אלכוהול': { en: 'Hand Sanitizer', ru: 'Антисептик для рук', ar: 'جل كحولي' },
            'מברשת שיניים חשמלית': { en: 'Electric Toothbrush', ru: 'Электрическая зубная щётка', ar: 'فرشاة أسنان كهربائية' },
            'משחת שיניים סנסודיין': { en: 'Sensodyne Toothpaste', ru: 'Зубная паста Сенсодайн', ar: 'معجون أسنان سنسوداين' },
            'מי פה': { en: 'Mouthwash', ru: 'Ополаскиватель для рта', ar: 'غسول فم' },
            'חוט דנטלי': { en: 'Dental Floss', ru: 'Зубная нить', ar: 'خيط أسنان' },
            'קיסמי שיניים': { en: 'Toothpicks', ru: 'Зубочистки', ar: 'أعواد أسنان' },
            'שמפו הד אנד שולדרס': { en: 'Head & Shoulders Shampoo', ru: 'Шампунь Хэд энд Шолдерс', ar: 'شامبو هيد آند شولدرز' },
            'שמפו נגד קשקשים': { en: 'Anti-Dandruff Shampoo', ru: 'Шампунь против перхоти', ar: 'شامبو ضد القشرة' },
            'מסכה לשיער': { en: 'Hair Mask', ru: 'Маска для волос', ar: 'ماسك شعر' },
            'ספריי לשיער': { en: 'Hair Spray', ru: 'Лак для волос', ar: 'سبراي شعر' },
            'ג\'ל לשיער': { en: 'Hair Gel', ru: 'Гель для волос', ar: 'جل شعر' },
            'סבון גוף': { en: 'Body Soap', ru: 'Мыло для тела', ar: 'صابون جسم' },
            'ג\'ל רחצה': { en: 'Shower Gel', ru: 'Гель для душа', ar: 'جل استحمام' },
            'קרם גילוח': { en: 'Shaving Cream', ru: 'Крем для бритья', ar: 'كريم حلاقة' },
            'סכיני גילוח': { en: 'Razors', ru: 'Бритвы', ar: 'شفرات حلاقة' },
            'דאודורנט רול און': { en: 'Roll-On Deodorant', ru: 'Роликовый дезодорант', ar: 'مزيل عرق رول أون' },
            'דאודורנט ספריי': { en: 'Spray Deodorant', ru: 'Дезодорант-спрей', ar: 'مزيل عرق سبراي' },
            'קרם פנים': { en: 'Face Cream', ru: 'Крем для лица', ar: 'كريم وجه' },
            'קרם ידיים': { en: 'Hand Cream', ru: 'Крем для рук', ar: 'كريم يدين' },
            'קרם גוף': { en: 'Body Cream', ru: 'Крем для тела', ar: 'كريم جسم' },
            'לוסיון גוף': { en: 'Body Lotion', ru: 'Лосьон для тела', ar: 'لوشن جسم' },
            'תחבושות': { en: 'Bandages', ru: 'Бинты', ar: 'ضمادات' },
            'פלסטריה': { en: 'Band-Aids', ru: 'Пластыри', ar: 'لصقات جروح' },
            'צמר גפן': { en: 'Cotton Wool', ru: 'Вата', ar: 'قطن طبي' },
            'מקלוני אוזניים': { en: 'Cotton Swabs', ru: 'Ватные палочки', ar: 'أعواد قطنية' },
            'טמפונים': { en: 'Tampons', ru: 'Тампоны', ar: 'سدادات قطنية' },
            'מגני תחתון': { en: 'Panty Liners', ru: 'Ежедневные прокладки', ar: 'فوط يومية' },
            'תחבושות יום': { en: 'Day Pads', ru: 'Дневные прокладки', ar: 'فوط نهارية' },
            'תחבושות לילה': { en: 'Night Pads', ru: 'Ночные прокладки', ar: 'فوط ليلية' },
            'קרם הגנה': { en: 'Sunscreen', ru: 'Солнцезащитный крем', ar: 'كريم حماية من الشمس' },
            'מסיר איפור': { en: 'Makeup Remover', ru: 'Средство для снятия макияжа', ar: 'مزيل مكياج' },
            // Baby - תינוקות
            'חיתולים מידה 1': { en: 'Diapers Size 1', ru: 'Подгузники размер 1', ar: 'حفاضات مقاس 1' },
            'חיתולים מידה 2': { en: 'Diapers Size 2', ru: 'Подгузники размер 2', ar: 'حفاضات مقاس 2' },
            'חיתולים מידה 3': { en: 'Diapers Size 3', ru: 'Подгузники размер 3', ar: 'حفاضات مقاس 3' },
            'חיתולים מידה 4': { en: 'Diapers Size 4', ru: 'Подгузники размер 4', ar: 'حفاضات مقاس 4' },
            'חיתולים מידה 5': { en: 'Diapers Size 5', ru: 'Подгузники размер 5', ar: 'حفاضات مقاس 5' },
            'חיתולים מידה 6': { en: 'Diapers Size 6', ru: 'Подгузники размер 6', ar: 'حفاضات مقاس 6' },
            'מכנסוני חיתול': { en: 'Diaper Pants', ru: 'Трусики-подгузники', ar: 'سراويل حفاضات' },
            'חיתולי לילה': { en: 'Night Diapers', ru: 'Ночные подгузники', ar: 'حفاضات ليلية' },
            'מגבונים רגישים': { en: 'Sensitive Wipes', ru: 'Чувствительные салфетки', ar: 'مناديل للبشرة الحساسة' },
            'סבון לתינוקות': { en: 'Baby Soap', ru: 'Детское мыло', ar: 'صابون أطفال' },
            'אל סבון לתינוקות': { en: 'Baby Soap-Free Cleanser', ru: 'Бессмыльное средство для детей', ar: 'غسول بدون صابون للأطفال' },
            'קרם החתלה': { en: 'Diaper Cream', ru: 'Крем под подгузник', ar: 'كريم حفاضات' },
            'משחת החתלה': { en: 'Diaper Ointment', ru: 'Мазь под подгузник', ar: 'مرهم حفاضات' },
            'שמן תינוקות': { en: 'Baby Oil', ru: 'Детское масло', ar: 'زيت أطفال' },
            'אבקת חלב סימילאק': { en: 'Similac Formula', ru: 'Смесь Симилак', ar: 'حليب سيميلاك' },
            'אבקת חלב מטרנה': { en: 'Materna Formula', ru: 'Смесь Матерна', ar: 'حليب ماترنا' },
            'מחית פירות': { en: 'Fruit Puree', ru: 'Фруктовое пюре', ar: 'مهروس فواكه' },
            'מחית ירקות': { en: 'Vegetable Puree', ru: 'Овощное пюре', ar: 'مهروس خضار' },
            'דייסה לתינוקות': { en: 'Baby Cereal', ru: 'Детская каша', ar: 'حبوب للأطفال' },
            'חטיף תינוקות': { en: 'Baby Snack', ru: 'Детский снэк', ar: 'وجبة خفيفة للأطفال' },
            'מוצצים': { en: 'Pacifiers', ru: 'Соски-пустышки', ar: 'مصاصات' },
            'בקבוק תינוק': { en: 'Baby Bottle', ru: 'Детская бутылочка', ar: 'رضاعة' },
            'פטמות': { en: 'Nipples', ru: 'Соски', ar: 'حلمات رضاعة' },
            // Pets - חיות מחמד
            'מזון יבש לכלבים': { en: 'Dry Dog Food', ru: 'Сухой корм для собак', ar: 'طعام جاف للكلاب' },
            'מזון רטוב לכלבים': { en: 'Wet Dog Food', ru: 'Влажный корм для собак', ar: 'طعام رطب للكلاب' },
            'מזון לגורים': { en: 'Puppy Food', ru: 'Корм для щенков', ar: 'طعام للجراء' },
            'מזון יבש לחתולים': { en: 'Dry Cat Food', ru: 'Сухой корм для кошек', ar: 'طعام جاف للقطط' },
            'מזון רטוב לחתולים': { en: 'Wet Cat Food', ru: 'Влажный корм для кошек', ar: 'طعام رطب للقطط' },
            'מזון לגורי חתולים': { en: 'Kitten Food', ru: 'Корм для котят', ar: 'طعام للقطط الصغيرة' },
            'חול מתגבש': { en: 'Clumping Litter', ru: 'Комкующийся наполнитель', ar: 'رمل متكتل' },
            'חול סיליקה': { en: 'Silica Litter', ru: 'Силикагелевый наполнитель', ar: 'رمل سيليكا' },
            'חטיפים לכלבים': { en: 'Dog Treats', ru: 'Лакомства для собак', ar: 'مكافآت للكلاب' },
            'חטיפים לחתולים': { en: 'Cat Treats', ru: 'Лакомства для кошек', ar: 'مكافآت للقطط' },
            'עצמות לכעיסה': { en: 'Chew Bones', ru: 'Жевательные кости', ar: 'عظام للمضغ' },
            'צעצועים לכלבים': { en: 'Dog Toys', ru: 'Игрушки для собак', ar: 'ألعاب للكلاب' },
            'צעצועים לחתולים': { en: 'Cat Toys', ru: 'Игрушки для кошек', ar: 'ألعاب للقطط' },
            'מיטה לכלב': { en: 'Dog Bed', ru: 'Лежанка для собаки', ar: 'سرير للكلب' },
            'מיטה לחתול': { en: 'Cat Bed', ru: 'Лежанка для кошки', ar: 'سرير للقط' },
            'קערת אוכל': { en: 'Food Bowl', ru: 'Миска для еды', ar: 'وعاء طعام' },
            'קערת מים': { en: 'Water Bowl', ru: 'Миска для воды', ar: 'وعاء ماء' },
            'רצועה לכלב': { en: 'Dog Leash', ru: 'Поводок для собаки', ar: 'مقود للكلب' },
            'קולר': { en: 'Collar', ru: 'Ошейник', ar: 'طوق' },
            'שמפו לכלבים': { en: 'Dog Shampoo', ru: 'Шампунь для собак', ar: 'شامبو للكلاب' },
            'שקיות קקי': { en: 'Poop Bags', ru: 'Пакеты для экскрементов', ar: 'أكياس فضلات' },
            'מזון לדגים': { en: 'Fish Food', ru: 'Корм для рыб', ar: 'طعام للأسماك' },
            'מזון לציפורים': { en: 'Bird Food', ru: 'Корм для птиц', ar: 'طعام للطيور' },
            'מזון לאוגרים': { en: 'Hamster Food', ru: 'Корм для хомяков', ar: 'طعام للهامستر' },
            // === ADDITIONAL TRANSLATIONS ===
            // Baking - אפייה (missing)
            'קמח תופח': { en: 'Self-Rising Flour', ru: 'Самоподнимающаяся мука', ar: 'طحين ذاتي الرفع' },
            'קמח לחלה': { en: 'Challah Flour', ru: 'Мука для халы', ar: 'طحين للحلة' },
            'קמח ללחם': { en: 'Bread Flour', ru: 'Хлебная мука', ar: 'طحين للخبز' },
            'קמח לפיצה': { en: 'Pizza Flour', ru: 'Мука для пиццы', ar: 'طحين للبيتزا' },
            'קמח לפוקצ\'ה': { en: 'Focaccia Flour', ru: 'Мука для фокаччи', ar: 'طحين للفوكاتشيا' },
            'קמח לבן מנופה': { en: 'Sifted White Flour', ru: 'Просеянная белая мука', ar: 'طحين أبيض منخول' },
            'קורנפלור': { en: 'Cornflour', ru: 'Кукурузная мука', ar: 'نشا الذرة' },
            'עמילן': { en: 'Starch', ru: 'Крахмал', ar: 'نشا' },
            'עמילן תירס': { en: 'Corn Starch', ru: 'Кукурузный крахмал', ar: 'نشا الذرة' },
            'סוכר דמררה': { en: 'Demerara Sugar', ru: 'Сахар демерара', ar: 'سكر ديميرارا' },
            'סוכר וניל': { en: 'Vanilla Sugar', ru: 'Ванильный сахар', ar: 'سكر فانيليا' },
            'סוכרת': { en: 'Sweetener', ru: 'Подсластитель', ar: 'محلي صناعي' },
            'סטיביה': { en: 'Stevia', ru: 'Стевия', ar: 'ستيفيا' },
            'שמרים יבשים': { en: 'Dry Yeast', ru: 'Сухие дрожжи', ar: 'خميرة جافة' },
            'שמרים טריים': { en: 'Fresh Yeast', ru: 'Свежие дрожжи', ar: 'خميرة طازجة' },
            'סודה לשתייה': { en: 'Baking Soda', ru: 'Пищевая сода', ar: 'بيكربونات الصوديوم' },
            'תמצית וניל': { en: 'Vanilla Extract', ru: 'Экстракт ванили', ar: 'خلاصة الفانيليا' },
            'מקלות וניל': { en: 'Vanilla Pods', ru: 'Стручки ванили', ar: 'أعواد الفانيليا' },
            'שוקולד צ\'יפס מריר': { en: 'Dark Chocolate Chips', ru: 'Горький шоколад крошка', ar: 'رقائق شوكولاتة داكنة' },
            'שוקולד צ\'יפס לבן': { en: 'White Chocolate Chips', ru: 'Белый шоколад крошка', ar: 'رقائق شوكولاتة بيضاء' },
            'שוקולד מריר לאפייה': { en: 'Dark Baking Chocolate', ru: 'Горький шоколад для выпечки', ar: 'شوكولاتة داكنة للخبز' },
            'שוקולד חלב לאפייה': { en: 'Milk Baking Chocolate', ru: 'Молочный шоколад для выпечки', ar: 'شوكولاتة بالحليب للخبز' },
            'שוקולד לבן לאפייה': { en: 'White Baking Chocolate', ru: 'Белый шоколад для выпечки', ar: 'شوكولاتة بيضاء للخبز' },
            'אבקת קקאו': { en: 'Cocoa Powder', ru: 'Какао порошок', ar: 'مسحوق الكاكاو' },
            'קוקוס טחון': { en: 'Ground Coconut', ru: 'Молотый кокос', ar: 'جوز هند مطحون' },
            'שקדים טחונים': { en: 'Ground Almonds', ru: 'Молотый миндаль', ar: 'لوز مطحون' },
            'שקדים פרוסים': { en: 'Sliced Almonds', ru: 'Нарезанный миндаль', ar: 'لوز شرائح' },
            'שקדים שלמים': { en: 'Whole Almonds', ru: 'Цельный миндаль', ar: 'لوز كامل' },
            'אגוזי מלך טחונים': { en: 'Ground Walnuts', ru: 'Молотые грецкие орехи', ar: 'جوز مطحون' },
            'פקאן טחון': { en: 'Ground Pecans', ru: 'Молотый пекан', ar: 'بيكان مطحون' },
            'קשיו': { en: 'Cashews', ru: 'Кешью', ar: 'كاجو' },
            'פיסטוק': { en: 'Pistachios', ru: 'Фисташки', ar: 'فستق' },
            'אגוזי לוז': { en: 'Hazelnuts', ru: 'Фундук', ar: 'بندق' },
            'חמוציות': { en: 'Cranberries', ru: 'Клюква', ar: 'توت بري' },
            'תמרים מג\'הול': { en: 'Medjool Dates', ru: 'Финики Меджул', ar: 'تمر مجهول' },
            'פרג': { en: 'Poppy Seeds', ru: 'Маковые семена', ar: 'بذور الخشخاش' },
            'שומשום': { en: 'Sesame Seeds', ru: 'Кунжут', ar: 'سمسم' },
            'מרציפן': { en: 'Marzipan', ru: 'Марципан', ar: 'مرزبان' },
            'פונדנט': { en: 'Fondant', ru: 'Помадка', ar: 'فوندان' },
            'בצק סוכר': { en: 'Sugar Paste', ru: 'Сахарная паста', ar: 'عجينة السكر' },
            'צבעי מאכל': { en: 'Food Coloring', ru: 'Пищевые красители', ar: 'ملونات غذائية' },
            'סוכריות לקישוט': { en: 'Sprinkles', ru: 'Посыпка', ar: 'حبيبات للتزيين' },
            'גליטר לאפייה': { en: 'Baking Glitter', ru: 'Глиттер для выпечки', ar: 'غليتر للخبز' },
            'פירורי לחם': { en: 'Breadcrumbs', ru: 'Панировочные сухари', ar: 'فتات الخبز' },
            'פירורי ביסקוויט': { en: 'Biscuit Crumbs', ru: 'Крошка печенья', ar: 'فتات البسكويت' },
            'פודינג שוקולד': { en: 'Chocolate Pudding', ru: 'Шоколадный пудинг', ar: 'بودينغ شوكولاتة' },
            'פודינג וניל': { en: 'Vanilla Pudding', ru: 'Ванильный пудинг', ar: 'بودينغ فانيليا' },
            // Meat - בשר (missing)
            'בשר טחון רזה טרי': { en: 'Fresh Lean Ground Beef', ru: 'Свежий нежирный фарш', ar: 'لحم مفروم قليل الدسم طازج' },
            'אנטריקוט קפוא': { en: 'Frozen Entrecote', ru: 'Замороженный антрекот', ar: 'أنتريكوت مجمد' },
            'סינטה טרייה': { en: 'Fresh Sirloin', ru: 'Свежая вырезка', ar: 'لحم بقر طازج' },
            'סינטה קפואה': { en: 'Frozen Sirloin', ru: 'Замороженная вырезка', ar: 'لحم بقر مجمد' },
            'פילה בקר טרי': { en: 'Fresh Beef Fillet', ru: 'Свежее филе говядины', ar: 'فيليه بقر طازج' },
            'פילה בקר קפוא': { en: 'Frozen Beef Fillet', ru: 'Замороженное филе говядины', ar: 'فيليه بقر مجمد' },
            'צלעות בקר טריות': { en: 'Fresh Beef Ribs', ru: 'Свежие говяжьи рёбра', ar: 'ضلوع بقر طازجة' },
            'צלעות בקר קפואות': { en: 'Frozen Beef Ribs', ru: 'Замороженные говяжьи рёбра', ar: 'ضلوع بقر مجمدة' },
            'שפונדרה טרייה': { en: 'Fresh Shoulder', ru: 'Свежая лопатка', ar: 'كتف طازج' },
            'שפונדרה קפואה': { en: 'Frozen Shoulder', ru: 'Замороженная лопатка', ar: 'كتف مجمد' },
            'אסאדו טרי': { en: 'Fresh Asado', ru: 'Свежий асадо', ar: 'أسادو طازج' },
            'אסאדו קפוא': { en: 'Frozen Asado', ru: 'Замороженный асадо', ar: 'أسادو مجمد' },
            'גולש טרי': { en: 'Fresh Goulash Meat', ru: 'Свежее мясо для гуляша', ar: 'لحم غولاش طازج' },
            'גולש קפוא': { en: 'Frozen Goulash Meat', ru: 'Замороженное мясо для гуляша', ar: 'لحم غولاش مجمد' },
            'בשר לשווארמה טרי': { en: 'Fresh Shawarma Meat', ru: 'Свежее мясо для шаурмы', ar: 'لحم شاورما طازج' },
            'בשר לשווארמה קפוא': { en: 'Frozen Shawarma Meat', ru: 'Замороженное мясо для шаурмы', ar: 'لحم شاورما مجمد' },
            'טלה טרי': { en: 'Fresh Lamb', ru: 'Свежая баранина', ar: 'لحم غنم طازج' },
            'טלה קפוא': { en: 'Frozen Lamb', ru: 'Замороженная баранина', ar: 'لحم غنم مجمد' },
            'כבש טרי': { en: 'Fresh Mutton', ru: 'Свежая баранина', ar: 'لحم خروف طازج' },
            'כבש קפוא': { en: 'Frozen Mutton', ru: 'Замороженная баранина', ar: 'لحم خروف مجمد' },
            'שניצל עוף קפוא': { en: 'Frozen Chicken Schnitzel', ru: 'Замороженный куриный шницель', ar: 'شنيتسل دجاج مجمد' },
            'שניצל הודו טרי': { en: 'Fresh Turkey Schnitzel', ru: 'Свежий шницель из индейки', ar: 'شنيتسل ديك رومي طازج' },
            'שניצל הודו קפוא': { en: 'Frozen Turkey Schnitzel', ru: 'Замороженный шницель из индейки', ar: 'شنيتسل ديك رومي مجمد' },
            'קבב טרי': { en: 'Fresh Kebab', ru: 'Свежий кебаб', ar: 'كباب طازج' },
            'קבב קפוא': { en: 'Frozen Kebab', ru: 'Замороженный кебаб', ar: 'كباب مجمد' },
            'המבורגר ביתי': { en: 'Homemade Burger', ru: 'Домашний бургер', ar: 'همبرغر منزلي' },
            'נקניקיות עוף': { en: 'Chicken Sausages', ru: 'Куриные сосиски', ar: 'نقانق دجاج' },
            'נקניקיות בקר': { en: 'Beef Sausages', ru: 'Говяжьи сосиски', ar: 'نقانق بقر' },
            // Fish - דגים (missing)
            'סלמון קפוא': { en: 'Frozen Salmon', ru: 'Замороженный лосось', ar: 'سلمون مجمد' },
            'פילה סלמון טרי': { en: 'Fresh Salmon Fillet', ru: 'Свежее филе лосося', ar: 'فيليه سلمون طازج' },
            'פילה סלמון קפוא': { en: 'Frozen Salmon Fillet', ru: 'Замороженное филе лосося', ar: 'فيليه سلمون مجمد' },
            'פילה אמנון טרי': { en: 'Fresh Tilapia Fillet', ru: 'Свежее филе тилапии', ar: 'فيليه بلطي طازج' },
            'פילה אמנון קפוא': { en: 'Frozen Tilapia Fillet', ru: 'Замороженное филе тилапии', ar: 'فيليه بلطي مجمد' },
            'פילה בורי טרי': { en: 'Fresh Mullet Fillet', ru: 'Свежее филе кефали', ar: 'فيليه بوري طازج' },
            'פילה בורי קפוא': { en: 'Frozen Mullet Fillet', ru: 'Замороженное филе кефали', ar: 'فيليه بوري مجمد' },
            'פילה דניס טרי': { en: 'Fresh Sea Bream Fillet', ru: 'Свежее филе дениса', ar: 'فيليه دنيس طازج' },
            'פילה דניס קפוא': { en: 'Frozen Sea Bream Fillet', ru: 'Замороженное филе дениса', ar: 'فيليه دنيس مجمد' },
            'טונה טרייה': { en: 'Fresh Tuna', ru: 'Свежий тунец', ar: 'تونة طازجة' },
            'דג שלם טרי': { en: 'Fresh Whole Fish', ru: 'Свежая цельная рыба', ar: 'سمك كامل طازج' },
            'דג שלם קפוא': { en: 'Frozen Whole Fish', ru: 'Замороженная цельная рыба', ar: 'سمك كامل مجمد' },
            'נסיכי ים': { en: 'Surimi', ru: 'Сурими', ar: 'سوريمي' },
            'שרימפס קפוא': { en: 'Frozen Shrimp', ru: 'Замороженные креветки', ar: 'جمبري مجمد' },
            'קלמארי קפוא': { en: 'Frozen Calamari', ru: 'Замороженные кальмары', ar: 'كاليماري مجمد' },
            'מולים': { en: 'Mussels', ru: 'Мидии', ar: 'بلح البحر' },
            'סרדינים': { en: 'Sardines', ru: 'Сардины', ar: 'سردين' },
            'דג מעושן': { en: 'Smoked Fish', ru: 'Копчёная рыба', ar: 'سمك مدخن' },
            // Canned & Dry Foods - שימורים (missing)
            'אורז יסמין': { en: 'Jasmine Rice', ru: 'Рис жасмин', ar: 'أرز ياسمين' },
            'אורז מלא': { en: 'Brown Rice', ru: 'Бурый рис', ar: 'أرز بني' },
            'אורז סושי': { en: 'Sushi Rice', ru: 'Рис для суши', ar: 'أرز سوشي' },
            'אורז פרסי': { en: 'Persian Rice', ru: 'Персидский рис', ar: 'أرز فارسي' },
            'פסטה פנה': { en: 'Penne Pasta', ru: 'Паста пенне', ar: 'باستا بيني' },
            'פסטה פרפלה': { en: 'Farfalle Pasta', ru: 'Паста фарфалле', ar: 'باستا فرفالي' },
            'פסטה פוזילי': { en: 'Fusilli Pasta', ru: 'Паста фузилли', ar: 'باستا فوزيلي' },
            'פסטה לזניה': { en: 'Lasagna Sheets', ru: 'Листы для лазаньи', ar: 'رقائق لازانيا' },
            'פסטה מלאה': { en: 'Whole Wheat Pasta', ru: 'Цельнозерновая паста', ar: 'باستا قمح كامل' },
            'קוסקוס מלא': { en: 'Whole Wheat Couscous', ru: 'Цельнозерновой кускус', ar: 'كسكس قمح كامل' },
            'קוסקוס פתיתים': { en: 'Ptitim Couscous', ru: 'Птитим кускус', ar: 'كسكس بتيتيم' },
            'קטניות': { en: 'Legumes', ru: 'Бобовые', ar: 'بقوليات' },
            'רוטב פסטה': { en: 'Pasta Sauce', ru: 'Соус для пасты', ar: 'صلصة باستا' },
            'רסק עגבניות': { en: 'Tomato Paste', ru: 'Томатная паста', ar: 'معجون طماطم' },
            'טונה במים': { en: 'Tuna in Water', ru: 'Тунец в воде', ar: 'تونة بالماء' },
            'טונה בשמן': { en: 'Tuna in Oil', ru: 'Тунец в масле', ar: 'تونة بالزيت' },
            'טונה ברוטב': { en: 'Tuna in Sauce', ru: 'Тунец в соусе', ar: 'تونة بالصلصة' },
            'תירס מתוק': { en: 'Sweet Corn', ru: 'Сладкая кукуруза', ar: 'ذرة حلوة' },
            'גרגירי תירס': { en: 'Corn Kernels', ru: 'Зёрна кукурузы', ar: 'حبوب الذرة' },
            'שמן זית כתית': { en: 'Extra Virgin Olive Oil', ru: 'Оливковое масло экстра вирджин', ar: 'زيت زيتون بكر ممتاز' },
            'שמן קנולה': { en: 'Canola Oil', ru: 'Рапсовое масло', ar: 'زيت كانولا' },
            'שמן חמניות': { en: 'Sunflower Oil', ru: 'Подсолнечное масло', ar: 'زيت دوار الشمس' },
            'שמן תירס': { en: 'Corn Oil', ru: 'Кукурузное масло', ar: 'زيت الذرة' },
            'שמן שומשום': { en: 'Sesame Oil', ru: 'Кунжутное масло', ar: 'زيت السمسم' },
            'שמן אגוזים': { en: 'Nut Oil', ru: 'Ореховое масло', ar: 'زيت المكسرات' },
            'חומץ בלסמי': { en: 'Balsamic Vinegar', ru: 'Бальзамический уксус', ar: 'خل بلسميك' },
            'חומץ יין': { en: 'Wine Vinegar', ru: 'Винный уксус', ar: 'خل النبيذ' },
            'חומץ תפוחים': { en: 'Apple Cider Vinegar', ru: 'Яблочный уксус', ar: 'خل التفاح' },
            'חומץ לבן': { en: 'White Vinegar', ru: 'Белый уксус', ar: 'خل أبيض' },
            'מיץ לימון': { en: 'Lemon Juice', ru: 'Лимонный сок', ar: 'عصير ليمون' },
            'חומוס טחון': { en: 'Ground Chickpeas', ru: 'Молотый нут', ar: 'حمص مطحون' },
            'זיתים שחורים': { en: 'Black Olives', ru: 'Чёрные оливки', ar: 'زيتون أسود' },
            'זיתים ירוקים': { en: 'Green Olives', ru: 'Зелёные оливки', ar: 'زيتون أخضر' },
            'זיתים קלמטה': { en: 'Kalamata Olives', ru: 'Оливки Каламата', ar: 'زيتون كالاماتا' },
            'מלפפון חמוץ': { en: 'Pickled Cucumber', ru: 'Солёный огурец', ar: 'خيار مخلل' },
            'פפריקה קלויה': { en: 'Roasted Peppers', ru: 'Жареный перец', ar: 'فلفل مشوي' },
            'בוטנים': { en: 'Peanuts', ru: 'Арахис', ar: 'فول سوداني' },
            'חיטה': { en: 'Wheat', ru: 'Пшеница', ar: 'قمح' },
            'בורגול': { en: 'Bulgur', ru: 'Булгур', ar: 'برغل' },
            'קינואה': { en: 'Quinoa', ru: 'Киноа', ar: 'كينوا' },
            'פריקה': { en: 'Freekeh', ru: 'Фрике', ar: 'فريكة' },
            'נודלס': { en: 'Noodles', ru: 'Лапша', ar: 'نودلز' },
            'אטריות': { en: 'Vermicelli', ru: 'Вермишель', ar: 'شعيرية' },
            'פול': { en: 'Fava Beans', ru: 'Бобы', ar: 'فول' },
            'גרגירי חומוס': { en: 'Chickpeas', ru: 'Нут', ar: 'حبوب الحمص' },
            'עדשים כתומות': { en: 'Orange Lentils', ru: 'Оранжевая чечевица', ar: 'عدس برتقالي' },
            'עדשים ירוקות': { en: 'Green Lentils', ru: 'Зелёная чечевица', ar: 'عدس أخضر' },
            'שעועית לבנה': { en: 'White Beans', ru: 'Белая фасоль', ar: 'فاصوليا بيضاء' },
            'שעועית אדומה': { en: 'Red Beans', ru: 'Красная фасоль', ar: 'فاصوليا حمراء' },
            'שעועית שחורה': { en: 'Black Beans', ru: 'Чёрная фасоль', ar: 'فاصوليا سوداء' },
            'אפונה': { en: 'Peas', ru: 'Горох', ar: 'بازلاء' },
            'סויה': { en: 'Soy', ru: 'Соя', ar: 'فول الصويا' },
            'מאש': { en: 'Mung Beans', ru: 'Маш', ar: 'ماش' },
            // Spices - תבלינים (missing)
            'מלח ים': { en: 'Sea Salt', ru: 'Морская соль', ar: 'ملح بحري' },
            'מלח שולחן': { en: 'Table Salt', ru: 'Столовая соль', ar: 'ملح طعام' },
            'מלח גס': { en: 'Coarse Salt', ru: 'Крупная соль', ar: 'ملح خشن' },
            'פלפל גרוס': { en: 'Coarse Pepper', ru: 'Крупный перец', ar: 'فلفل خشن' },
            'פפריקה מתוקה': { en: 'Sweet Paprika', ru: 'Сладкая паприка', ar: 'بابريكا حلوة' },
            'פפריקה חריפה': { en: 'Hot Paprika', ru: 'Острая паприка', ar: 'بابريكا حارة' },
            'פפריקה מעושנת': { en: 'Smoked Paprika', ru: 'Копчёная паприка', ar: 'بابريكا مدخنة' },
            'קינמון טחון': { en: 'Ground Cinnamon', ru: 'Молотая корица', ar: 'قرفة مطحونة' },
            'מקלות קינמון': { en: 'Cinnamon Sticks', ru: 'Палочки корицы', ar: 'أعواد قرفة' },
            'אבקת שום': { en: 'Garlic Powder', ru: 'Чесночный порошок', ar: 'بودرة ثوم' },
            'אבקת בצל': { en: 'Onion Powder', ru: 'Луковый порошок', ar: 'بودرة بصل' },
            'אורגנו': { en: 'Oregano', ru: 'Орегано', ar: 'أوريجانو' },
            'בזיליקום': { en: 'Basil', ru: 'Базилик', ar: 'ريحان' },
            'סומק': { en: 'Sumac', ru: 'Сумах', ar: 'سماق' },
            'חוואייג׳': { en: 'Hawaij', ru: 'Хаваидж', ar: 'حوايج' },
            'תבלין לעוף': { en: 'Chicken Seasoning', ru: 'Приправа для курицы', ar: 'بهارات دجاج' },
            'תבלין לדגים': { en: 'Fish Seasoning', ru: 'Приправа для рыбы', ar: 'بهارات سمك' },
            'תבלין לבשר': { en: 'Meat Seasoning', ru: 'Приправа для мяса', ar: 'بهارات لحم' },
            'תבלין גריל': { en: 'Grill Seasoning', ru: 'Приправа для гриля', ar: 'بهارات شواء' },
            'גרם מסאלה': { en: 'Garam Masala', ru: 'Гарам масала', ar: 'غرام ماسالا' },
            'ציילי': { en: 'Chili', ru: 'Чили', ar: 'فلفل حار' },
            'קיאן': { en: 'Cayenne', ru: 'Кайенский перец', ar: 'فلفل كايين' },
            'זנגביל': { en: 'Ginger', ru: 'Имбирь', ar: 'زنجبيل' },
            'אגוז מוסקט': { en: 'Nutmeg', ru: 'Мускатный орех', ar: 'جوزة الطيب' },
            'ציפורן': { en: 'Cloves', ru: 'Гвоздика', ar: 'قرنفل' },
            'כוסברה טחונה': { en: 'Ground Coriander', ru: 'Молотый кориандр', ar: 'كزبرة مطحونة' },
            'קרדמון': { en: 'Cardamom', ru: 'Кардамон', ar: 'هيل' },
            'עלי דפנה': { en: 'Bay Leaves', ru: 'Лавровые листья', ar: 'ورق الغار' },
            'רוזמרין': { en: 'Rosemary', ru: 'Розмарин', ar: 'إكليل الجبل' },
            'טימין': { en: 'Thyme', ru: 'Тимьян', ar: 'زعتر' },
            'פפריקה מנטה': { en: 'Mint Paprika', ru: 'Мятная паприка', ar: 'بابريكا نعناع' },
            'הל': { en: 'Cardamom', ru: 'Кардамон', ar: 'هال' },
            'כוכב אניס': { en: 'Star Anise', ru: 'Звёздчатый анис', ar: 'ينسون نجمي' },
            'עירית': { en: 'Chives', ru: 'Шнитт-лук', ar: 'ثوم معمر' },
            'מרווה': { en: 'Sage', ru: 'Шалфей', ar: 'مريمية' },
            // Coffee & Tea - קפה ותה (missing)
            'קפה ג\'קובס': { en: 'Jacobs Coffee', ru: 'Кофе Якобс', ar: 'قهوة جاكوبس' },
            'קפה שחור': { en: 'Black Coffee', ru: 'Чёрный кофе', ar: 'قهوة سوداء' },
            'קפה נספרסו': { en: 'Nespresso Coffee', ru: 'Кофе Неспрессо', ar: 'قهوة نسبريسو' },
            'קפה נטול קפאין': { en: 'Decaf Coffee', ru: 'Кофе без кофеина', ar: 'قهوة منزوعة الكافيين' },
            'קפסולות נספרסו': { en: 'Nespresso Capsules', ru: 'Капсулы Неспрессо', ar: 'كبسولات نسبريسو' },
            'קפסולות דולצ\'ה': { en: 'Dolce Gusto Capsules', ru: 'Капсулы Дольче Густо', ar: 'كبسولات دولتشي' },
            'קפסולות לוואצה': { en: 'Lavazza Capsules', ru: 'Капсулы Лаваццо', ar: 'كبسولات لافاتزا' },
            'קפסולות טאסימו': { en: 'Tassimo Capsules', ru: 'Капсулы Тассимо', ar: 'كبسولات تاسيمو' },
            'קפסולות לנדוור': { en: 'Landwer Capsules', ru: 'Капсулы Ландвер', ar: 'كبسولات لندور' },
            'קפה קלוי טחון': { en: 'Ground Roasted Coffee', ru: 'Молотый жареный кофе', ar: 'قهوة محمصة مطحونة' },
            'תה ירוק יסמין': { en: 'Jasmine Green Tea', ru: 'Зелёный чай с жасмином', ar: 'شاي أخضر بالياسمين' },
            'תה צמחים': { en: 'Herbal Tea', ru: 'Травяной чай', ar: 'شاي أعشاب' },
            'תה לואיזה': { en: 'Lemon Verbena Tea', ru: 'Чай Луиза', ar: 'شاي لويزا' },
            'תה ליפטון': { en: 'Lipton Tea', ru: 'Чай Липтон', ar: 'شاي ليبتون' },
            'תה ויסוצקי': { en: 'Wissotzky Tea', ru: 'Чай Вайсоцкий', ar: 'شاي ويسوتسكي' },
            'תה פוקימון': { en: 'Pokémon Tea', ru: 'Чай Покемон', ar: 'شاي بوكيمون' },
            'תה קמומיל': { en: 'Chamomile Tea', ru: 'Ромашковый чай', ar: 'شاي بابونج' },
            'תה מרווה': { en: 'Sage Tea', ru: 'Чай с шалфеем', ar: 'شاي مريمية' },
            'תה ג\'ינג\'ר': { en: 'Ginger Tea', ru: 'Имбирный чай', ar: 'شاي زنجبيل' },
            'תה לימון': { en: 'Lemon Tea', ru: 'Лимонный чай', ar: 'شاي ليمون' },
            'תה ארל גריי': { en: 'Earl Grey Tea', ru: 'Чай Эрл Грей', ar: 'شاي إيرل غراي' },
            'תה אנגלי': { en: 'English Tea', ru: 'Английский чай', ar: 'شاي إنجليزي' },
            'חלב מרוכז': { en: 'Condensed Milk', ru: 'Сгущённое молоко', ar: 'حليب مكثف' },
            'אייס קפה': { en: 'Iced Coffee', ru: 'Айс кофе', ar: 'قهوة مثلجة' },
            'קקאו שוקו': { en: 'Chocolate Cocoa', ru: 'Шоколадный какао', ar: 'كاكاو شوكولاتة' },
            // Drinks - משקאות (missing)
            'מים בטעמים': { en: 'Flavored Water', ru: 'Ароматизированная вода', ar: 'مياه بنكهات' },
            'מי עדן': { en: 'Eden Water', ru: 'Вода Эден', ar: 'مياه عدن' },
            'נביעות': { en: 'Neviot Water', ru: 'Вода Невиот', ar: 'مياه نفيعوت' },
            'קולה 1.5 ליטר': { en: 'Cola 1.5L', ru: 'Кола 1.5л', ar: 'كولا 1.5 لتر' },
            'קולה 1 ליטר': { en: 'Cola 1L', ru: 'Кола 1л', ar: 'كولا 1 لتر' },
            'קולה פחית': { en: 'Cola Can', ru: 'Кола банка', ar: 'كولا علبة' },
            'שישיית קולה': { en: 'Cola 6-Pack', ru: 'Кола упаковка 6', ar: 'عبوة كولا 6' },
            'שישיית קולה פחיות': { en: 'Cola 6-Pack Cans', ru: 'Кола 6 банок', ar: 'عبوة كولا 6 علب' },
            'קולה זירו 1.5 ליטר': { en: 'Coke Zero 1.5L', ru: 'Кола Зеро 1.5л', ar: 'كولا زيرو 1.5 لتر' },
            'קולה זירו 1 ליטר': { en: 'Coke Zero 1L', ru: 'Кола Зеро 1л', ar: 'كولا زيرو 1 لتر' },
            'קולה זירו פחית': { en: 'Coke Zero Can', ru: 'Кола Зеро банка', ar: 'كولا زيرو علبة' },
            'שישיית קולה זירו': { en: 'Coke Zero 6-Pack', ru: 'Кола Зеро упаковка 6', ar: 'عبوة كولا زيرو 6' },
            'קולה דיאט': { en: 'Diet Coke', ru: 'Диетическая кола', ar: 'كولا دايت' },
            'קולה דיאט 1.5 ליטר': { en: 'Diet Coke 1.5L', ru: 'Диетическая кола 1.5л', ar: 'كولا دايت 1.5 لتر' },
            'פפסי': { en: 'Pepsi', ru: 'Пепси', ar: 'بيبسي' },
            'פפסי 1.5 ליטר': { en: 'Pepsi 1.5L', ru: 'Пепси 1.5л', ar: 'بيبسي 1.5 لتر' },
            'פפסי פחית': { en: 'Pepsi Can', ru: 'Пепси банка', ar: 'بيبسي علبة' },
            'שישיית פפסי': { en: 'Pepsi 6-Pack', ru: 'Пепси упаковка 6', ar: 'عبوة بيبسي 6' },
            'פפסי מקס': { en: 'Pepsi Max', ru: 'Пепси Макс', ar: 'بيبسي ماكس' },
            'פפסי מקס 1.5 ליטר': { en: 'Pepsi Max 1.5L', ru: 'Пепси Макс 1.5л', ar: 'بيبسي ماكس 1.5 لتر' },
            'ספרייט 1.5 ליטר': { en: 'Sprite 1.5L', ru: 'Спрайт 1.5л', ar: 'سبرايت 1.5 لتر' },
            'ספרייט פחית': { en: 'Sprite Can', ru: 'Спрайт банка', ar: 'سبرايت علبة' },
            'שישיית ספרייט': { en: 'Sprite 6-Pack', ru: 'Спрайт упаковка 6', ar: 'عبوة سبرايت 6' },
            'ספרייט זירו': { en: 'Sprite Zero', ru: 'Спрайт Зеро', ar: 'سبرايت زيرو' },
            'פאנטה': { en: 'Fanta', ru: 'Фанта', ar: 'فانتا' },
            'פאנטה 1.5 ליטר': { en: 'Fanta 1.5L', ru: 'Фанта 1.5л', ar: 'فانتا 1.5 لتر' },
            'פאנטה פחית': { en: 'Fanta Can', ru: 'Фанта банка', ar: 'فانتا علبة' },
            'שישיית פאנטה': { en: 'Fanta 6-Pack', ru: 'Фанта упаковка 6', ar: 'عبوة فانتا 6' },
            'סודה': { en: 'Soda', ru: 'Содовая', ar: 'صودا' },
            'סודה פחית': { en: 'Soda Can', ru: 'Содовая банка', ar: 'صودا علبة' },
            'טוניק': { en: 'Tonic', ru: 'Тоник', ar: 'تونيك' },
            'טוניק פחית': { en: 'Tonic Can', ru: 'Тоник банка', ar: 'تونيك علبة' },
            'מיץ תפוזים סחוט': { en: 'Fresh Orange Juice', ru: 'Свежевыжатый апельсиновый сок', ar: 'عصير برتقال طازج' },
            'מיץ תפוזים 1 ליטר': { en: 'Orange Juice 1L', ru: 'Апельсиновый сок 1л', ar: 'عصير برتقال 1 لتر' },
            'מיץ ענבים': { en: 'Grape Juice', ru: 'Виноградный сок', ar: 'عصير عنب' },
            'מיץ גזר': { en: 'Carrot Juice', ru: 'Морковный сок', ar: 'عصير جزر' },
            'מיץ רימונים': { en: 'Pomegranate Juice', ru: 'Гранатовый сок', ar: 'عصير رمان' },
            'מיץ פריגת': { en: 'Prigat Juice', ru: 'Сок Пригат', ar: 'عصير بريجات' },
            'מיץ ספרינג': { en: 'Spring Juice', ru: 'Сок Спринг', ar: 'عصير سبرينج' },
            'נקטר': { en: 'Nectar', ru: 'Нектар', ar: 'نكتار' },
            'תפוזינה': { en: 'Tapuzina', ru: 'Тапузина', ar: 'تبوزينا' },
            'לימונדה': { en: 'Lemonade', ru: 'Лимонад', ar: 'ليموناضة' },
            'לימונענע': { en: 'Mint Lemonade', ru: 'Мятный лимонад', ar: 'ليموناضة بالنعناع' },
            'XL אנרגיה': { en: 'XL Energy', ru: 'XL Энерджи', ar: 'إكس إل طاقة' },
            'XL פחית': { en: 'XL Can', ru: 'XL банка', ar: 'إكس إل علبة' },
            'רד בול': { en: 'Red Bull', ru: 'Ред Булл', ar: 'ريد بول' },
            'רד בול פחית': { en: 'Red Bull Can', ru: 'Ред Булл банка', ar: 'ريد بول علبة' },
            'מונסטר': { en: 'Monster', ru: 'Монстр', ar: 'مونستر' },
            'מונסטר פחית': { en: 'Monster Can', ru: 'Монстр банка', ar: 'مونستر علبة' },
            'משקה ספורט': { en: 'Sports Drink', ru: 'Спортивный напиток', ar: 'مشروب رياضي' },
            'משקה אנרגיה': { en: 'Energy Drink', ru: 'Энергетический напиток', ar: 'مشروب طاقة' },
            'משקה איזוטוני': { en: 'Isotonic Drink', ru: 'Изотонический напиток', ar: 'مشروب متساوي التوتر' },
            'מי קוקוס': { en: 'Coconut Water', ru: 'Кокосовая вода', ar: 'ماء جوز الهند' },
            // Wine & Alcohol - יין ואלכוהול (missing)
            'יין אדום': { en: 'Red Wine', ru: 'Красное вино', ar: 'نبيذ أحمر' },
            'יין לבן': { en: 'White Wine', ru: 'Белое вино', ar: 'نبيذ أبيض' },
            'יין רוזה': { en: 'Rosé Wine', ru: 'Розовое вино', ar: 'نبيذ روزيه' },
            'יין מבעבע': { en: 'Sparkling Wine', ru: 'Игристое вино', ar: 'نبيذ فوار' },
            'יין יבש': { en: 'Dry Wine', ru: 'Сухое вино', ar: 'نبيذ جاف' },
            'יין חצי יבש': { en: 'Semi-Dry Wine', ru: 'Полусухое вино', ar: 'نبيذ نصف جاف' },
            'יין מתוק': { en: 'Sweet Wine', ru: 'Сладкое вино', ar: 'نبيذ حلو' },
            'יין קידוש': { en: 'Kiddush Wine', ru: 'Вино для кидуша', ar: 'نبيذ القداس' },
            'יין לפסח': { en: 'Passover Wine', ru: 'Вино для Песаха', ar: 'نبيذ عيد الفصح' },
            'יין ברקן': { en: 'Barkan Wine', ru: 'Вино Баркан', ar: 'نبيذ بركان' },
            'יין יקב גולן': { en: 'Golan Heights Wine', ru: 'Вино Голанские высоты', ar: 'نبيذ مرتفعات الجولان' },
            'יין כרמל': { en: 'Carmel Wine', ru: 'Вино Кармель', ar: 'نبيذ الكرمل' },
            'יין טפרברג': { en: 'Teperberg Wine', ru: 'Вино Теперберг', ar: 'نبيذ تيبربرغ' },
            'יין גלנס': { en: 'Galil Wine', ru: 'Вино Галиль', ar: 'نبيذ الجليل' },
            'יין פסגות': { en: 'Psagot Wine', ru: 'Вино Псагот', ar: 'نبيذ بساجوت' },
            'יין רמת נגב': { en: 'Ramat Negev Wine', ru: 'Вино Рамат Негев', ar: 'نبيذ رامات النقب' },
            'יין ארזה': { en: 'Arza Wine', ru: 'Вино Арза', ar: 'نبيذ أرزا' },
            'יין יתיר': { en: 'Yatir Wine', ru: 'Вино Ятир', ar: 'نبيذ يتير' },
            'שמפניה': { en: 'Champagne', ru: 'Шампанское', ar: 'شامبانيا' },
            'פרוסקו': { en: 'Prosecco', ru: 'Просекко', ar: 'بروسيكو' },
            'קאווה': { en: 'Cava', ru: 'Кава', ar: 'كافا' },
            'אסתי': { en: 'Asti', ru: 'Асти', ar: 'أستي' },
            'בירה': { en: 'Beer', ru: 'Пиво', ar: 'بيرة' },
            'בירה גולדסטאר': { en: 'Goldstar Beer', ru: 'Пиво Голдстар', ar: 'بيرة جولدستار' },
            'בירה מכבי': { en: 'Maccabee Beer', ru: 'Пиво Маккаби', ar: 'بيرة مكابي' },
            'בירה קרלסברג': { en: 'Carlsberg Beer', ru: 'Пиво Карлсберг', ar: 'بيرة كارلسبرغ' },
            'בירה הייניקן': { en: 'Heineken Beer', ru: 'Пиво Хайнекен', ar: 'بيرة هاينكن' },
            'בירה קורונה': { en: 'Corona Beer', ru: 'Пиво Корона', ar: 'بيرة كورونا' },
            'בירה סטלה': { en: 'Stella Beer', ru: 'Пиво Стелла', ar: 'بيرة ستيلا' },
            'בירה טובורג': { en: 'Tuborg Beer', ru: 'Пиво Туборг', ar: 'بيرة توبورغ' },
            'בירה אלכסנדר': { en: 'Alexander Beer', ru: 'Пиво Александр', ar: 'بيرة ألكسندر' },
            'בירה בזלת': { en: 'Bazelet Beer', ru: 'Пиво Базелет', ar: 'بيرة بازلت' },
            'בירה מלכה': { en: 'Malka Beer', ru: 'Пиво Малка', ar: 'بيرة ملكة' },
            'בירה ללא אלכוהול': { en: 'Non-Alcoholic Beer', ru: 'Безалкогольное пиво', ar: 'بيرة بدون كحول' },
            'סיידר': { en: 'Cider', ru: 'Сидр', ar: 'سايدر' },
            'סיידר תפוחים': { en: 'Apple Cider', ru: 'Яблочный сидр', ar: 'سايدر تفاح' },
            'ערק': { en: 'Arak', ru: 'Арак', ar: 'عرق' },
            'ערק אלית': { en: 'Elite Arak', ru: 'Арак Элит', ar: 'عرق إليت' },
            'וודקה': { en: 'Vodka', ru: 'Водка', ar: 'فودكا' },
            'וודקה אבסולוט': { en: 'Absolut Vodka', ru: 'Водка Абсолют', ar: 'فودكا أبسولوت' },
            'וודקה סמירנוף': { en: 'Smirnoff Vodka', ru: 'Водка Смирнов', ar: 'فودكا سميرنوف' },
            'וודקה גריי גוס': { en: 'Grey Goose Vodka', ru: 'Водка Грей Гус', ar: 'فودكا غراي غوس' },
            'וויסקי': { en: 'Whiskey', ru: 'Виски', ar: 'ويسكي' },
            'וויסקי ג\'וני ווקר': { en: 'Johnnie Walker', ru: 'Джонни Уокер', ar: 'جوني ووكر' },
            'וויסקי ג\'ק דניאלס': { en: 'Jack Daniels', ru: 'Джек Дэниелс', ar: 'جاك دانيلز' },
            'וויסקי ג\'יימסון': { en: 'Jameson', ru: 'Джеймсон', ar: 'جيمسون' },
            'רום': { en: 'Rum', ru: 'Ром', ar: 'روم' },
            'רום בקרדי': { en: 'Bacardi Rum', ru: 'Ром Бакарди', ar: 'روم باكاردي' },
            'ג\'ין': { en: 'Gin', ru: 'Джин', ar: 'جن' },
            'ג\'ין גורדונס': { en: 'Gordons Gin', ru: 'Джин Гордонс', ar: 'جن غوردونز' },
            'טקילה': { en: 'Tequila', ru: 'Текила', ar: 'تكيلا' },
            'קוניאק': { en: 'Cognac', ru: 'Коньяк', ar: 'كونياك' },
            'בראנדי': { en: 'Brandy', ru: 'Бренди', ar: 'براندي' },
            'ליקר': { en: 'Liqueur', ru: 'Ликёр', ar: 'ليكيور' },
            'ליקר קפה': { en: 'Coffee Liqueur', ru: 'Кофейный ликёр', ar: 'ليكيور قهوة' },
            'ליקר שוקולד': { en: 'Chocolate Liqueur', ru: 'Шоколадный ликёр', ar: 'ليكيور شوكولاتة' },
            'ליקר פירות': { en: 'Fruit Liqueur', ru: 'Фруктовый ликёр', ar: 'ليكيور فواكه' },
            'אמרטו': { en: 'Amaretto', ru: 'Амаретто', ar: 'أماريتو' },
            'בייליס': { en: 'Baileys', ru: 'Бейлис', ar: 'بيليز' },
            'קמפרי': { en: 'Campari', ru: 'Кампари', ar: 'كامباري' },
            'אפרול': { en: 'Aperol', ru: 'Апероль', ar: 'أبيرول' },
            'סנגריה': { en: 'Sangria', ru: 'Сангрия', ar: 'سانغريا' },
            // Cereals - דגנים (missing)
            'קורנפלקס קלאסי': { en: 'Classic Cornflakes', ru: 'Классические кукурузные хлопья', ar: 'كورن فليكس كلاسيك' },
            'קורנפלקס דבש': { en: 'Honey Cornflakes', ru: 'Кукурузные хлопья с мёдом', ar: 'كورن فليكس عسل' },
            'קורנפלקס שוקולד': { en: 'Chocolate Cornflakes', ru: 'Шоколадные кукурузные хлопья', ar: 'كورن فليكس شوكولاتة' },
            'קורנפלקס כריות': { en: 'Pillow Cereal', ru: 'Подушечки', ar: 'حبوب وسائد' },
            'קורנפלקס פירות': { en: 'Fruit Cornflakes', ru: 'Фруктовые кукурузные хлопья', ar: 'كورن فليكس فواكه' },
            'טריקס': { en: 'Trix', ru: 'Трикс', ar: 'تريكس' },
            'פתיתי תירס': { en: 'Corn Flakes', ru: 'Кукурузные хлопья', ar: 'رقائق الذرة' },
            'גרנולה': { en: 'Granola', ru: 'Гранола', ar: 'جرانولا' },
            'גרנולה שוקולד': { en: 'Chocolate Granola', ru: 'Шоколадная гранола', ar: 'جرانولا شوكولاتة' },
            'גרנולה פירות': { en: 'Fruit Granola', ru: 'Фруктовая гранола', ar: 'جرانولا فواكه' },
            'גרנולה אגוזים': { en: 'Nut Granola', ru: 'Гранола с орехами', ar: 'جرانولا مكسرات' },
            'מוזלי': { en: 'Muesli', ru: 'Мюсли', ar: 'موسلي' },
            'שיבולת שועל': { en: 'Oatmeal', ru: 'Овсяные хлопья', ar: 'شوفان' },
            'פצפוצי אורז': { en: 'Rice Puffs', ru: 'Воздушный рис', ar: 'أرز منفوخ' },
            'קוואקר': { en: 'Quaker Oats', ru: 'Квакер', ar: 'كويكر' },
            'דגנים מלאים': { en: 'Whole Grain Cereal', ru: 'Цельнозерновые хлопья', ar: 'حبوب كاملة' },
            'מיני וויטס': { en: 'Mini Wheats', ru: 'Мини Витс', ar: 'ميني ويتس' },
            'צ\'ריוס': { en: 'Cheerios', ru: 'Чириос', ar: 'تشيريوز' },
            'נסטלה פיטנס': { en: 'Nestle Fitness', ru: 'Нестле Фитнес', ar: 'نستله فيتنس' },
            'סנאק בר': { en: 'Snack Bar', ru: 'Снэк бар', ar: 'بار وجبة خفيفة' },
            'חטיף דגנים': { en: 'Cereal Bar', ru: 'Злаковый батончик', ar: 'بار حبوب' },
            'חטיף גרנולה': { en: 'Granola Bar', ru: 'Батончик гранола', ar: 'بار جرانولا' },
            'אול בראן': { en: 'All Bran', ru: 'Олл Бран', ar: 'أول بران' },
            'פרוטי לופס': { en: 'Froot Loops', ru: 'Фрут Лупс', ar: 'فروت لوبس' },
            'קוקו פופס': { en: 'Coco Pops', ru: 'Коко Попс', ar: 'كوكو بوبس' },
            'ליון': { en: 'Lion', ru: 'Лайон', ar: 'ليون' },
            'סמאקס': { en: 'Smacks', ru: 'Смэкс', ar: 'سماكس' },
            'צ\'רינגס': { en: 'Cheerios', ru: 'Чирингс', ar: 'تشيرينجز' },
            'קראנץ\'': { en: 'Crunch', ru: 'Кранч', ar: 'كرانش' },
            'סיני קראנץ\'': { en: 'Cini Crunch', ru: 'Сини Кранч', ar: 'سيني كرانش' },
            'כדורי שוקולד': { en: 'Chocolate Balls', ru: 'Шоколадные шарики', ar: 'كرات شوكولاتة' },
            // Frozen - קפואים (missing)
            'גלידה וניל': { en: 'Vanilla Ice Cream', ru: 'Ванильное мороженое', ar: 'آيس كريم فانيليا' },
            'גלידה שוקולד': { en: 'Chocolate Ice Cream', ru: 'Шоколадное мороженое', ar: 'آيس كريم شوكولاتة' },
            'גלידה תות': { en: 'Strawberry Ice Cream', ru: 'Клубничное мороженое', ar: 'آيس كريم فراولة' },
            'גלידה פיסטוק': { en: 'Pistachio Ice Cream', ru: 'Фисташковое мороженое', ar: 'آيس كريم فستق' },
            'גלידה קרמל': { en: 'Caramel Ice Cream', ru: 'Карамельное мороженое', ar: 'آيس كريم كراميل' },
            'גלידת פרווה': { en: 'Pareve Ice Cream', ru: 'Парве мороженое', ar: 'آيس كريم بارفيه' },
            'ארטיק': { en: 'Popsicle', ru: 'Эскимо', ar: 'مثلجات' },
            'מגנום': { en: 'Magnum', ru: 'Магнум', ar: 'ماغنوم' },
            'קורנטו': { en: 'Cornetto', ru: 'Корнетто', ar: 'كورنيتو' },
            'שלגון': { en: 'Shalgon', ru: 'Шалгон', ar: 'شالجون' },
            'פירות קפואים': { en: 'Frozen Fruits', ru: 'Замороженные фрукты', ar: 'فواكه مجمدة' },
            'תותים קפואים': { en: 'Frozen Strawberries', ru: 'Замороженная клубника', ar: 'فراولة مجمدة' },
            'פטל קפוא': { en: 'Frozen Raspberries', ru: 'Замороженная малина', ar: 'توت العليق مجمد' },
            'אוכמניות קפואות': { en: 'Frozen Blueberries', ru: 'Замороженная черника', ar: 'توت أزرق مجمد' },
            'מנגו קפוא': { en: 'Frozen Mango', ru: 'Замороженный манго', ar: 'مانجو مجمد' },
            'ירקות קפואים': { en: 'Frozen Vegetables', ru: 'Замороженные овощи', ar: 'خضار مجمدة' },
            'ירקות מוקפצים': { en: 'Stir Fry Vegetables', ru: 'Овощи для жарки', ar: 'خضار للقلي' },
            'אפונה קפואה': { en: 'Frozen Peas', ru: 'Замороженный горошек', ar: 'بازلاء مجمدة' },
            'תירס קפוא': { en: 'Frozen Corn', ru: 'Замороженная кукуруза', ar: 'ذرة مجمدة' },
            'שעועית ירוקה קפואה': { en: 'Frozen Green Beans', ru: 'Замороженная стручковая фасоль', ar: 'فاصوليا خضراء مجمدة' },
            'ברוקולי קפוא': { en: 'Frozen Broccoli', ru: 'Замороженная брокколи', ar: 'بروكلي مجمد' },
            'תרד קפוא': { en: 'Frozen Spinach', ru: 'Замороженный шпинат', ar: 'سبانخ مجمدة' },
            'שניצל קפוא': { en: 'Frozen Schnitzel', ru: 'Замороженный шницель', ar: 'شنيتسل مجمد' },
            'נאגטס קפואים': { en: 'Frozen Nuggets', ru: 'Замороженные наггетсы', ar: 'ناجتس مجمدة' },
            'קציצות קפואות': { en: 'Frozen Meatballs', ru: 'Замороженные котлеты', ar: 'كفتة مجمدة' },
            'פיצה קפואה': { en: 'Frozen Pizza', ru: 'Замороженная пицца', ar: 'بيتزا مجمدة' },
            'פיצה משפחתית': { en: 'Family Pizza', ru: 'Семейная пицца', ar: 'بيتزا عائلية' },
            'לזניה קפואה': { en: 'Frozen Lasagna', ru: 'Замороженная лазанья', ar: 'لازانيا مجمدة' },
            'בצק עלים': { en: 'Puff Pastry', ru: 'Слоёное тесто', ar: 'عجينة باف' },
            'בצק פילו': { en: 'Phyllo Dough', ru: 'Тесто фило', ar: 'عجينة فيلو' },
            'בצק פיצה': { en: 'Pizza Dough', ru: 'Тесто для пиццы', ar: 'عجينة بيتزا' },
            'בצק מאפים': { en: 'Pastry Dough', ru: 'Тесто для выпечки', ar: 'عجينة معجنات' },
            'בצק ג\'חנון': { en: 'Jachnun Dough', ru: 'Тесто для джахнуна', ar: 'عجينة جحنون' },
            'בצק מלווח': { en: 'Malawach Dough', ru: 'Тесто для малавах', ar: 'عجينة ملوح' },
            'בצק סמבוסק': { en: 'Sambousek Dough', ru: 'Тесто для самбусек', ar: 'عجينة سمبوسك' },
            'בצק בורקס': { en: 'Bourekas Dough', ru: 'Тесто для борекас', ar: 'عجينة بوريك' },
            'בלינצ\'ס': { en: 'Blintzes', ru: 'Блинчики', ar: 'بلينتز' },
            'קרפ': { en: 'Crepes', ru: 'Блины', ar: 'كريب' },
            'וופל קפוא': { en: 'Frozen Waffle', ru: 'Замороженные вафли', ar: 'وافل مجمد' },
            'ג\'חנון אפוי מוכן': { en: 'Ready Baked Jachnun', ru: 'Готовый джахнун', ar: 'جحنون جاهز' },
            // Health - בריאות (missing)
            'יוגורט חלבון': { en: 'Protein Yogurt', ru: 'Протеиновый йогурт', ar: 'زبادي بروتين' },
            'משקה חלבון': { en: 'Protein Drink', ru: 'Протеиновый напиток', ar: 'مشروب بروتين' },
            'שייק חלבון': { en: 'Protein Shake', ru: 'Протеиновый коктейль', ar: 'شيك بروتين' },
            'אבקת חלבון': { en: 'Protein Powder', ru: 'Протеиновый порошок', ar: 'مسحوق بروتين' },
            'פרוטאין בר': { en: 'Protein Bar', ru: 'Протеиновый батончик', ar: 'بار بروتين' },
            'חטיף חלבון': { en: 'Protein Snack', ru: 'Протеиновый снэк', ar: 'وجبة بروتين خفيفة' },
            'חטיף אנרגיה': { en: 'Energy Snack', ru: 'Энергетический снэк', ar: 'وجبة طاقة خفيفة' },
            'פיתה מלאה': { en: 'Whole Wheat Pita', ru: 'Цельнозерновая пита', ar: 'بيتا قمح كامل' },
            'קרקר דגנים': { en: 'Grain Crackers', ru: 'Зерновые крекеры', ar: 'مقرمشات حبوب' },
            'קרקר אורז': { en: 'Rice Crackers', ru: 'Рисовые крекеры', ar: 'مقرمشات أرز' },
            'סלט טונה': { en: 'Tuna Salad', ru: 'Салат из тунца', ar: 'سلطة تونة' },
            'חזה עוף מעושן': { en: 'Smoked Chicken Breast', ru: 'Копчёная куриная грудка', ar: 'صدر دجاج مدخن' },
            'גרנולה בריאות': { en: 'Health Granola', ru: 'Гранола здоровье', ar: 'جرانولا صحية' },
            'זרעי צ\'יה': { en: 'Chia Seeds', ru: 'Семена чиа', ar: 'بذور الشيا' },
            'זרעי פשתן': { en: 'Flax Seeds', ru: 'Семена льна', ar: 'بذور الكتان' },
            'אגוזים טבעיים': { en: 'Natural Nuts', ru: 'Натуральные орехи', ar: 'مكسرات طبيعية' },
            'שקדים טבעיים': { en: 'Natural Almonds', ru: 'Натуральный миндаль', ar: 'لوز طبيعي' },
            'פירות יבשים ללא סוכר': { en: 'Sugar-Free Dried Fruits', ru: 'Сухофрукты без сахара', ar: 'فواكه مجففة بدون سكر' },
            'גוג\'י ברי': { en: 'Goji Berries', ru: 'Ягоды годжи', ar: 'توت غوجي' },
            'ספירולינה': { en: 'Spirulina', ru: 'Спирулина', ar: 'سبيرولينا' },
            'ויטמינים': { en: 'Vitamins', ru: 'Витамины', ar: 'فيتامينات' },
            'אומגה 3': { en: 'Omega 3', ru: 'Омега 3', ar: 'أوميغا 3' },
            'פרוביוטיקה': { en: 'Probiotics', ru: 'Пробиотики', ar: 'بروبيوتيك' },
            // Cleaning - ניקיון (missing)
            'נייר טואלט תלת שכבתי': { en: 'Triple Layer Toilet Paper', ru: 'Трёхслойная туалетная бумага', ar: 'ورق تواليت ثلاث طبقات' },
            'מגבות נייר לידיים': { en: 'Hand Paper Towels', ru: 'Бумажные полотенца для рук', ar: 'مناديل ورقية لليدين' },
            'סבון כלים פיירי': { en: 'Fairy Dish Soap', ru: 'Моющее средство Фейри', ar: 'صابون أطباق فيري' },
            'אבקת כביסה אריאל': { en: 'Ariel Laundry Powder', ru: 'Стиральный порошок Ариэль', ar: 'مسحوق غسيل أريال' },
            'ג\'ל כביסה מרוכז': { en: 'Concentrated Laundry Gel', ru: 'Концентрированный гель для стирки', ar: 'جل غسيل مركز' },
            'קפסולות כביסה': { en: 'Laundry Pods', ru: 'Капсулы для стирки', ar: 'كبسولات غسيل' },
            'מרכך כביסה': { en: 'Fabric Softener', ru: 'Кондиционер для белья', ar: 'منعم أقمشة' },
            'מבשם כביסה': { en: 'Laundry Fragrance', ru: 'Ароматизатор для белья', ar: 'معطر غسيل' },
            'אקונומיקה ג\'ל': { en: 'Bleach Gel', ru: 'Гель с хлором', ar: 'جل مبيض' },
            'מאיץ כביסה': { en: 'Laundry Booster', ru: 'Усилитель стирки', ar: 'معزز غسيل' },
            'מנקה רצפות סנו': { en: 'Sano Floor Cleaner', ru: 'Средство для пола Сано', ar: 'منظف أرضيات سانو' },
            'מנקה חלונות': { en: 'Window Cleaner', ru: 'Средство для окон', ar: 'منظف زجاج' },
            'מנקה אמבטיה': { en: 'Bathroom Cleaner', ru: 'Средство для ванной', ar: 'منظف حمام' },
            'מנקה שירותים': { en: 'Toilet Cleaner', ru: 'Средство для унитаза', ar: 'منظف مرحاض' },
            'מנקה כיריים': { en: 'Stovetop Cleaner', ru: 'Средство для плиты', ar: 'منظف موقد' },
            'מנקה תנור': { en: 'Oven Cleaner', ru: 'Средство для духовки', ar: 'منظف فرن' },
            'מנקה שומנים': { en: 'Degreaser', ru: 'Обезжириватель', ar: 'مزيل دهون' },
            'אבקת ניקוי': { en: 'Cleaning Powder', ru: 'Чистящий порошок', ar: 'مسحوق تنظيف' },
            'סיף': { en: 'Cif', ru: 'Сиф', ar: 'سيف' },
            'מר מוסקל': { en: 'Mr. Muscle', ru: 'Мистер Мускул', ar: 'مستر ماسل' },
            'ספוגים': { en: 'Sponges', ru: 'Губки', ar: 'إسفنج' },
            'ספוגי פלדה': { en: 'Steel Wool', ru: 'Металлические губки', ar: 'ليف معدني' },
            'מטליות רצפה': { en: 'Floor Cloths', ru: 'Тряпки для пола', ar: 'قماش أرضية' },
            'מטליות ניקוי': { en: 'Cleaning Cloths', ru: 'Салфетки для уборки', ar: 'قماش تنظيف' },
            'שקיות אשפה גדולות': { en: 'Large Garbage Bags', ru: 'Большие мусорные пакеты', ar: 'أكياس قمامة كبيرة' },
            'שקיות אשפה ריחניות': { en: 'Scented Garbage Bags', ru: 'Ароматизированные мусорные пакеты', ar: 'أكياس قمامة معطرة' },
            'שקיות זיפלוק': { en: 'Ziplock Bags', ru: 'Пакеты с замком', ar: 'أكياس زيبلوك' },
            'שקיות כריכים': { en: 'Sandwich Bags', ru: 'Пакеты для сэндвичей', ar: 'أكياس ساندويتش' },
            'שקיות קפואים': { en: 'Freezer Bags', ru: 'Пакеты для заморозки', ar: 'أكياس تجميد' },
            'נייר אפייה': { en: 'Baking Paper', ru: 'Бумага для выпечки', ar: 'ورق خبز' },
            'נייר אלומיניום': { en: 'Aluminum Foil', ru: 'Алюминиевая фольга', ar: 'ورق ألمنيوم' },
            'ניילון נצמד': { en: 'Cling Wrap', ru: 'Пищевая плёнка', ar: 'غلاف بلاستيكي' },
            'טבליות למדיח': { en: 'Dishwasher Tablets', ru: 'Таблетки для посудомойки', ar: 'أقراص غسالة صحون' },
            'מלח למדיח': { en: 'Dishwasher Salt', ru: 'Соль для посудомойки', ar: 'ملح غسالة صحون' },
            'נוזל מבריק למדיח': { en: 'Dishwasher Rinse Aid', ru: 'Ополаскиватель для посудомойки', ar: 'ملمع غسالة صحون' },
            'מנקה מדיח': { en: 'Dishwasher Cleaner', ru: 'Очиститель посудомойки', ar: 'منظف غسالة صحون' },
            'גרייני אשפה': { en: 'Trash Deodorizer', ru: 'Поглотитель запаха', ar: 'مزيل روائح القمامة' },
            // Hygiene - היגיינה (missing)
            'ראשים למברשת': { en: 'Brush Heads', ru: 'Насадки для щётки', ar: 'رؤوس فرشاة' },
            'שמפו פנטן': { en: 'Pantene Shampoo', ru: 'Шампунь Пантин', ar: 'شامبو بانتين' },
            'שמפו לשיער יבש': { en: 'Dry Hair Shampoo', ru: 'Шампунь для сухих волос', ar: 'شامبو للشعر الجاف' },
            'שמפו לשיער שמן': { en: 'Oily Hair Shampoo', ru: 'Шампунь для жирных волос', ar: 'شامبو للشعر الدهني' },
            'מרכך שיער': { en: 'Hair Conditioner', ru: 'Кондиционер для волос', ar: 'بلسم شعر' },
            'סרום לשיער': { en: 'Hair Serum', ru: 'Сыворотка для волос', ar: 'سيروم شعر' },
            'קצף לשיער': { en: 'Hair Mousse', ru: 'Мусс для волос', ar: 'موس شعر' },
            'שמפו לילדים': { en: 'Kids Shampoo', ru: 'Детский шампунь', ar: 'شامبو أطفال' },
            'ג\'ל רחצה ניוואה': { en: 'Nivea Shower Gel', ru: 'Гель для душа Нивея', ar: 'جل استحمام نيفيا' },
            'ג\'ל גילוח': { en: 'Shaving Gel', ru: 'Гель для бритья', ar: 'جل حلاقة' },
            'סכיני גילוח ג\'ילט': { en: 'Gillette Razors', ru: 'Бритвы Жилетт', ar: 'شفرات جيليت' },
            'דאודורנט': { en: 'Deodorant', ru: 'Дезодорант', ar: 'مزيل عرق' },
            'אנטיפרספירנט': { en: 'Antiperspirant', ru: 'Антиперспирант', ar: 'مضاد التعرق' },
            'קרם לחות': { en: 'Moisturizer', ru: 'Увлажняющий крем', ar: 'كريم مرطب' },
            'קרם רגליים': { en: 'Foot Cream', ru: 'Крем для ног', ar: 'كريم أقدام' },
            'שמן גוף': { en: 'Body Oil', ru: 'Масло для тела', ar: 'زيت جسم' },
            'קרם שיזוף': { en: 'Tanning Cream', ru: 'Крем для загара', ar: 'كريم تسمير' },
            'אפטר סאן': { en: 'After Sun', ru: 'После загара', ar: 'بعد الشمس' },
            'מגבונים להסרת איפור': { en: 'Makeup Remover Wipes', ru: 'Салфетки для снятия макияжа', ar: 'مناديل إزالة المكياج' },
            // Candles - נרות (missing)
            'נרות חנוכה צבעוניים': { en: 'Colorful Hanukkah Candles', ru: 'Цветные свечи Хануки', ar: 'شموع حانوكا ملونة' },
            'נר נשמה 24 שעות': { en: 'Memorial Candle 24H', ru: 'Поминальная свеча 24ч', ar: 'شمعة ذكرى 24 ساعة' },
            'נר נשמה 48 שעות': { en: 'Memorial Candle 48H', ru: 'Поминальная свеча 48ч', ar: 'شمعة ذكرى 48 ساعة' },
            'נר נשמה 7 ימים': { en: 'Memorial Candle 7 Days', ru: 'Поминальная свеча 7 дней', ar: 'شمعة ذكرى 7 أيام' },
            'נר הבדלה': { en: 'Havdalah Candle', ru: 'Свеча Хавдала', ar: 'شمعة هفدالا' },
            'נרות יום הולדת': { en: 'Birthday Candles', ru: 'Свечи для дня рождения', ar: 'شموع عيد ميلاد' },
            'נרות ריחניים': { en: 'Scented Candles', ru: 'Ароматические свечи', ar: 'شموع معطرة' },
            'נרות דקורטיביים': { en: 'Decorative Candles', ru: 'Декоративные свечи', ar: 'شموع ديكور' },
            'פתילות': { en: 'Wicks', ru: 'Фитили', ar: 'فتائل' },
            'גפרורים': { en: 'Matches', ru: 'Спички', ar: 'كبريت' },
            'מציתים': { en: 'Lighters', ru: 'Зажигалки', ar: 'ولاعات' },
            // Baby - תינוקות (missing)
            'מגבונים לתינוקות': { en: 'Baby Wipes', ru: 'Детские салфетки', ar: 'مناديل أطفال' },
            'שמפו לתינוקות': { en: 'Baby Shampoo', ru: 'Детский шампунь', ar: 'شامبو أطفال' },
            'קרם פוש': { en: 'Tush Cream', ru: 'Крем для попы', ar: 'كريم للمؤخرة' },
            'קרם דסיטין': { en: 'Desitin Cream', ru: 'Крем Деситин', ar: 'كريم ديسيتين' },
            'קרם פנים לתינוק': { en: 'Baby Face Cream', ru: 'Детский крем для лица', ar: 'كريم وجه للأطفال' },
            'ביסלי לתינוקות': { en: 'Baby Bissli', ru: 'Бисли для детей', ar: 'بيسلي للأطفال' },
            'מיץ לתינוקות': { en: 'Baby Juice', ru: 'Детский сок', ar: 'عصير للأطفال' },
            'מברשת שיניים לתינוק': { en: 'Baby Toothbrush', ru: 'Детская зубная щётка', ar: 'فرشاة أسنان للأطفال' },
            'משחת שיניים לתינוק': { en: 'Baby Toothpaste', ru: 'Детская зубная паста', ar: 'معجون أسنان للأطفال' },
            'שמפו ילדים': { en: 'Kids Shampoo', ru: 'Детский шампунь', ar: 'شامبو أطفال' },
            'סבון ילדים': { en: 'Kids Soap', ru: 'Детское мыло', ar: 'صابون أطفال' },
            // Pets - חיות מחמד (missing)
            'מזון לכלבים': { en: 'Dog Food', ru: 'Корм для собак', ar: 'طعام للكلاب' },
            'מזון לכלבים בוגרים': { en: 'Adult Dog Food', ru: 'Корм для взрослых собак', ar: 'طعام للكلاب البالغة' },
            'מזון לחתולים': { en: 'Cat Food', ru: 'Корм для кошек', ar: 'طعام للقطط' },
            'מזון לחתולים בוגרים': { en: 'Adult Cat Food', ru: 'Корм для взрослых кошек', ar: 'طعام للقطط البالغة' },
            'חול לחתולים': { en: 'Cat Litter', ru: 'Наполнитель для кошек', ar: 'رمل قطط' },
            'דנטסטיקס': { en: 'Dentastix', ru: 'Дентастикс', ar: 'دنتاستيكس' },
            'מסרק לכלב': { en: 'Dog Brush', ru: 'Расчёска для собак', ar: 'فرشاة للكلب' },
            'משטח אימון': { en: 'Training Pad', ru: 'Пелёнка для приучения', ar: 'وسادة تدريب' },
            // Desserts - קינוחים (missing)
            'מילקי': { en: 'Milky', ru: 'Милки', ar: 'ميلكي' },
            'מילקי אוראו': { en: 'Milky Oreo', ru: 'Милки Орео', ar: 'ميلكي أوريو' },
            'דנונה': { en: 'Danone', ru: 'Данон', ar: 'دانون' },
            'דנונה שוקולד': { en: 'Chocolate Danone', ru: 'Данон шоколадный', ar: 'دانون شوكولاتة' },
            'יופלה': { en: 'Yoplait', ru: 'Йоплейт', ar: 'يوبليه' },
            'דניאלה': { en: 'Daniella', ru: 'Даниэла', ar: 'دانيلا' },
            'מעדן וניל': { en: 'Vanilla Pudding', ru: 'Ванильный десерт', ar: 'حلوى فانيليا' },
            'מעדן שוקולד': { en: 'Chocolate Pudding', ru: 'Шоколадный десерт', ar: 'حلوى شوكولاتة' },
            'מעדן קרמל': { en: 'Caramel Pudding', ru: 'Карамельный десерт', ar: 'حلوى كراميل' },
            'מעדן ביסקוויטים': { en: 'Biscuit Pudding', ru: 'Десерт с печеньем', ar: 'حلوى بسكويت' },
            'מעדן לוטוס': { en: 'Lotus Pudding', ru: 'Десерт Лотус', ar: 'حلوى لوتس' },
            'שוקו יטבתה': { en: 'Yotvata Chocolate Milk', ru: 'Шоколадное молоко Йотвата', ar: 'حليب شوكولاتة يوطفاتا' },
            'שוקו תנובה': { en: 'Tnuva Chocolate Milk', ru: 'Шоколадное молоко Тнува', ar: 'حليب شوكولاتة تنوفا' },
            'מעדן יוגורט': { en: 'Yogurt Dessert', ru: 'Йогуртовый десерт', ar: 'حلوى زبادي' },
            'מעדן תות': { en: 'Strawberry Pudding', ru: 'Клубничный десерт', ar: 'حلوى فراولة' },
            'מעדן בננה': { en: 'Banana Pudding', ru: 'Банановый десерт', ar: 'حلوى موز' },
            'מוס שוקולד': { en: 'Chocolate Mousse', ru: 'Шоколадный мусс', ar: 'موس شوكولاتة' },
            'מוס וניל': { en: 'Vanilla Mousse', ru: 'Ванильный мусс', ar: 'موس فانيليا' },
            'פרי גד': { en: 'Pri Gad', ru: 'При Гад', ar: 'بري جاد' },
            'דן בראון': { en: 'Dan Brown', ru: 'Дан Браун', ar: 'دان براون' },
            'טירמיסו': { en: 'Tiramisu', ru: 'Тирамису', ar: 'تيراميسو' },
            'קרם ברולה': { en: 'Crème Brûlée', ru: 'Крем-брюле', ar: 'كريم بروليه' },
            'פנקוטה': { en: 'Panna Cotta', ru: 'Панна котта', ar: 'بانا كوتا' },
            'אורז חלב': { en: 'Rice Pudding', ru: 'Рисовый пудинг', ar: 'أرز بالحليب' },
            'סהרון': { en: 'Saharon', ru: 'Сахарон', ar: 'سهارون' },
            'גו': { en: 'Go', ru: 'Гоу', ar: 'جو' },
            'מונטה': { en: 'Monte', ru: 'Монте', ar: 'مونتي' },
            'קינדר מילק': { en: 'Kinder Milk', ru: 'Киндер Милк', ar: 'كيندر ميلك' },
            // Deli - דלי (missing)
            'סלמי מעושן': { en: 'Smoked Salami', ru: 'Копчёная салями', ar: 'سلامي مدخن' },
            'נקניק כתף': { en: 'Shoulder Sausage', ru: 'Плечевая колбаса', ar: 'نقانق كتف' },
            'סלמי תה': { en: 'Tea Salami', ru: 'Чайная салями', ar: 'سلامي شاي' },
            'נקניק סלמי קוניאק': { en: 'Cognac Salami', ru: 'Салями коньяк', ar: 'سلامي كونياك' },
            'נקניק מרטלדה': { en: 'Mortadella', ru: 'Мортаделла', ar: 'مورتاديلا' },
            'רוסטביף': { en: 'Roast Beef', ru: 'Ростбиф', ar: 'روست بيف' },
            'כתף בקר מפולפל': { en: 'Peppered Beef Shoulder', ru: 'Говяжья лопатка с перцем', ar: 'كتف بقر مفلفل' },
            'פסטרמה איטלקית': { en: 'Italian Pastrami', ru: 'Итальянская пастрами', ar: 'بسطرمة إيطالية' },
            'פסטרמה גחלים': { en: 'Charcoal Pastrami', ru: 'Пастрами на углях', ar: 'بسطرمة فحم' },
            'פסטרמה גריל': { en: 'Grilled Pastrami', ru: 'Пастрами гриль', ar: 'بسطرمة مشوية' },
            'פסטרמה הודו': { en: 'Turkey Pastrami', ru: 'Пастрами из индейки', ar: 'بسطرمة ديك رومي' },
            'פסטרמה דבש': { en: 'Honey Pastrami', ru: 'Пастрами с мёдом', ar: 'بسطرمة عسل' },
            'פסטרמה ברביקיו': { en: 'BBQ Pastrami', ru: 'Пастрами барбекю', ar: 'بسطرمة باربكيو' },
            'פסטרמה צלויה על לבנים': { en: 'Brick Roasted Pastrami', ru: 'Пастрами на кирпичах', ar: 'بسطرمة مشوية على الطوب' },
            'פסטרמה פרגיות': { en: 'Cornish Hen Pastrami', ru: 'Пастрами из цыплят', ar: 'بسطرمة فراخ' },
            'פסטרמה כפרית': { en: 'Village Pastrami', ru: 'Деревенская пастрами', ar: 'بسطرمة ريفية' },
            // Salads - סלטים (missing)
            'סלט חצילים': { en: 'Eggplant Salad', ru: 'Салат из баклажанов', ar: 'سلطة باذنجان' },
            'סלט מטבוחה': { en: 'Matbucha', ru: 'Матбуха', ar: 'مطبوخة' },
            'סלט טורקי': { en: 'Turkish Salad', ru: 'Турецкий салат', ar: 'سلطة تركية' },
            'סלט כרוב': { en: 'Cabbage Salad', ru: 'Салат из капусты', ar: 'سلطة ملفوف' },
            'סלט גזר': { en: 'Carrot Salad', ru: 'Салат из моркови', ar: 'سلطة جزر' },
            'סלט קולסלו': { en: 'Coleslaw', ru: 'Коулсло', ar: 'كولسلو' },
            'סלט ביצים': { en: 'Egg Salad', ru: 'Яичный салат', ar: 'سلطة بيض' },
            'סלט טונה': { en: 'Tuna Salad', ru: 'Салат с тунцом', ar: 'سلطة تونة' },
            'סלט בולגרי': { en: 'Bulgarian Salad', ru: 'Болгарский салат', ar: 'سلطة بلغارية' },
            'סלט ירקות': { en: 'Vegetable Salad', ru: 'Овощной салат', ar: 'سلطة خضار' },
            'סלט קינואה': { en: 'Quinoa Salad', ru: 'Салат с киноа', ar: 'سلطة كينوا' },
            'סלט פסטה': { en: 'Pasta Salad', ru: 'Салат с пастой', ar: 'سلطة باستا' },
            'סלט עדשים': { en: 'Lentil Salad', ru: 'Салат из чечевицы', ar: 'سلطة عدس' },
            'גואקמולה': { en: 'Guacamole', ru: 'Гуакамоле', ar: 'غواكامولي' },
            'סלסה': { en: 'Salsa', ru: 'Сальса', ar: 'صلصا' },
            'באבא גנוש': { en: 'Baba Ganoush', ru: 'Баба гануш', ar: 'بابا غنوج' },
            'סלט חומוס': { en: 'Hummus Salad', ru: 'Салат с хумусом', ar: 'سلطة حمص' },
            'סלט פטריות': { en: 'Mushroom Salad', ru: 'Грибной салат', ar: 'سلطة فطر' },
            'סלט סלק': { en: 'Beet Salad', ru: 'Свекольный салат', ar: 'سلطة شمندر' },
            'סלט תפו״א': { en: 'Potato Salad', ru: 'Картофельный салат', ar: 'سلطة بطاطا' },
            'סלט פלפלים קלויים': { en: 'Roasted Pepper Salad', ru: 'Салат из печёных перцев', ar: 'سلطة فلفل مشوي' },
            'ממרח אבוקדו': { en: 'Avocado Spread', ru: 'Авокадо намазка', ar: 'معجون أفوكادو' },
            'סלט אבוקדו': { en: 'Avocado Salad', ru: 'Салат из авокадо', ar: 'سلطة أفوكادو' },
            // Snacks - חטיפים (missing)
            'במבה אדומים': { en: 'Red Bamba', ru: 'Красная Бамба', ar: 'بامبا أحمر' },
            'במבה נוגט': { en: 'Nougat Bamba', ru: 'Бамба нуга', ar: 'بامبا نوجا' },
            'ביסלי גריל': { en: 'Grill Bissli', ru: 'Бисли гриль', ar: 'بيسلي شواء' },
            'ביסלי בצל': { en: 'Onion Bissli', ru: 'Бисли с луком', ar: 'بيسلي بصل' },
            'ביסלי פיצה': { en: 'Pizza Bissli', ru: 'Бисли пицца', ar: 'بيسلي بيتزا' },
            'דוריטוס צ\'ילי': { en: 'Chili Doritos', ru: 'Доритос чили', ar: 'دوريتوس فلفل' },
            'טורטייה צ\'יפס': { en: 'Tortilla Chips', ru: 'Чипсы тортилья', ar: 'رقائق تورتيلا' },
            'תפוצ\'יפס': { en: 'Tapuchips', ru: 'Тапучипс', ar: 'تابوتشيبس' },
            'פרינגלס': { en: 'Pringles', ru: 'Принглс', ar: 'برينجلز' },
            'פרינגלס חמוץ': { en: 'Sour Pringles', ru: 'Принглс кислые', ar: 'برينجلز حامض' },
            'פופקורן': { en: 'Popcorn', ru: 'Попкорн', ar: 'فشار' },
            'פופקורן מיקרו': { en: 'Microwave Popcorn', ru: 'Попкорн для микроволновки', ar: 'فشار ميكروويف' },
            'פופקורן קרמל': { en: 'Caramel Popcorn', ru: 'Карамельный попкорн', ar: 'فشار كراميل' },
            'שוקולד פרה': { en: 'Para Chocolate', ru: 'Шоколад Пара', ar: 'شوكولاتة بارا' },
            'שוקולד מילקה': { en: 'Milka Chocolate', ru: 'Шоколад Милка', ar: 'شوكولاتة ميلكا' },
            'שוקולד חלב': { en: 'Milk Chocolate', ru: 'Молочный шоколад', ar: 'شوكولاتة بالحليب' },
            'שוקולד מריר': { en: 'Dark Chocolate', ru: 'Горький шоколад', ar: 'شوكولاتة داكنة' },
            'שוקולד לבן': { en: 'White Chocolate', ru: 'Белый шоколад', ar: 'شوكولاتة بيضاء' },
            'שוקולד עם אגוזים': { en: 'Chocolate with Nuts', ru: 'Шоколад с орехами', ar: 'شوكولاتة بالمكسرات' },
            'קינדר': { en: 'Kinder', ru: 'Киндер', ar: 'كيندر' },
            'סניקרס': { en: 'Snickers', ru: 'Сникерс', ar: 'سنيكرز' },
            'מארס': { en: 'Mars', ru: 'Марс', ar: 'مارس' },
            'טוויקס': { en: 'Twix', ru: 'Твикс', ar: 'تويكس' },
            'קיטקט': { en: 'KitKat', ru: 'КитКат', ar: 'كيت كات' },
            'ביסקוויטים': { en: 'Biscuits', ru: 'Печенье', ar: 'بسكويت' },
            'עוגיות אוראו': { en: 'Oreo Cookies', ru: 'Печенье Орео', ar: 'بسكويت أوريو' },
            'עוגיות לוטוס': { en: 'Lotus Cookies', ru: 'Печенье Лотус', ar: 'بسكويت لوتس' },
            'וופלים': { en: 'Waffles', ru: 'Вафли', ar: 'وافل' },
            'וופל בלגי': { en: 'Belgian Waffle', ru: 'Бельгийские вафли', ar: 'وافل بلجيكي' },
            'קצפת': { en: 'Whipped Cream', ru: 'Взбитые сливки', ar: 'كريمة مخفوقة' },
            'מרשמלו': { en: 'Marshmallow', ru: 'Маршмеллоу', ar: 'مارشميلو' },
            'סוכריות': { en: 'Candy', ru: 'Конфеты', ar: 'حلوى' },
            'סוכריות גומי': { en: 'Gummy Candy', ru: 'Жевательные конфеты', ar: 'حلوى مطاطية' },
            'דובונים': { en: 'Gummy Bears', ru: 'Мишки желейные', ar: 'دببة حلوى' },
            'מסטיק': { en: 'Gum', ru: 'Жвачка', ar: 'علكة' },
            'מנטוס': { en: 'Mentos', ru: 'Ментос', ar: 'منتوس' },
            'טיק טק': { en: 'Tic Tac', ru: 'Тик Так', ar: 'تيك تاك' },
            'עוגת שוקולד': { en: 'Chocolate Cake', ru: 'Шоколадный торт', ar: 'كيكة شوكولاتة' },
            'עוגת גבינה': { en: 'Cheesecake', ru: 'Чизкейк', ar: 'تشيز كيك' },
            'קרמבו': { en: 'Krembo', ru: 'Кремко', ar: 'كريمبو' },
            'פסק זמן': { en: 'Time Out', ru: 'Песек Зман', ar: 'بيسك زمان' },
            'קליק': { en: 'Click', ru: 'Клик', ar: 'كليك' },
            'טעמי': { en: 'Taami', ru: 'Таами', ar: 'طعمي' },
            // Spreads - ממרחים (missing)
            'ממרח שוקולד השחר העולה': { en: 'Hashachar Haole Chocolate Spread', ru: 'Шоколадная паста Хашахар Хаоле', ar: 'شوكولاتة الشحار هاعولة' },
            'ממרח שוקולד עלית': { en: 'Elite Chocolate Spread', ru: 'Шоколадная паста Элит', ar: 'شوكولاتة إيليت' },
            'ממרח אגוזים': { en: 'Nut Spread', ru: 'Ореховая паста', ar: 'معجون مكسرات' },
            'ממרח לוטוס': { en: 'Lotus Spread', ru: 'Паста Лотус', ar: 'معجون لوتس' },
            'חמאת בוטנים': { en: 'Peanut Butter', ru: 'Арахисовая паста', ar: 'زبدة فول سوداني' },
            'חמאת בוטנים חלקה': { en: 'Smooth Peanut Butter', ru: 'Гладкая арахисовая паста', ar: 'زبدة فول سوداني ناعمة' },
            'חמאת בוטנים קראנצ\'י': { en: 'Crunchy Peanut Butter', ru: 'Хрустящая арахисовая паста', ar: 'زبدة فول سوداني مقرمشة' },
            'חמאת בוטנים סקיפי': { en: 'Skippy Peanut Butter', ru: 'Арахисовая паста Скиппи', ar: 'زبدة فول سوداني سكيبي' },
            'חמאת שקדים': { en: 'Almond Butter', ru: 'Миндальная паста', ar: 'زبدة اللوز' },
            'חמאת קשיו': { en: 'Cashew Butter', ru: 'Паста из кешью', ar: 'زبدة الكاجو' },
            'חמאת אגוזי לוז': { en: 'Hazelnut Butter', ru: 'Паста из фундука', ar: 'زبدة البندق' },
            'טחינה גולמית': { en: 'Raw Tahini', ru: 'Сырая тахина', ar: 'طحينة خام' },
            'טחינה אל ארז': { en: 'Al Arz Tahini', ru: 'Тахина Аль Арз', ar: 'طحينة الأرز' },
            'טחינה הבאבא': { en: 'Hababa Tahini', ru: 'Тахина Хабаба', ar: 'طحينة الحبابة' },
            'חלווה פרוסה': { en: 'Sliced Halva', ru: 'Нарезанная халва', ar: 'حلاوة شرائح' },
            'חלווה שוקולד': { en: 'Chocolate Halva', ru: 'Шоколадная халва', ar: 'حلاوة شوكولاتة' },
            'חלווה פיסטוק': { en: 'Pistachio Halva', ru: 'Фисташковая халва', ar: 'حلاوة فستق' },
            'ריבה תות': { en: 'Strawberry Jam', ru: 'Клубничное варенье', ar: 'مربى فراولة' },
            'ריבה משמש': { en: 'Apricot Jam', ru: 'Абрикосовое варенье', ar: 'مربى مشمش' },
            'ריבה דובדבן': { en: 'Cherry Jam', ru: 'Вишнёвое варенье', ar: 'مربى كرز' },
            'ריבה תפוז': { en: 'Orange Jam', ru: 'Апельсиновое варенье', ar: 'مربى برتقال' },
            'ריבה פטל': { en: 'Raspberry Jam', ru: 'Малиновое варенье', ar: 'مربى توت' },
            'ריבה ללא סוכר': { en: 'Sugar-Free Jam', ru: 'Варенье без сахара', ar: 'مربى بدون سكر' },
            'מרמלדה': { en: 'Marmalade', ru: 'Мармелад', ar: 'مرملاد' },
            'דבש טהור': { en: 'Pure Honey', ru: 'Чистый мёд', ar: 'عسل نقي' },
            'דבש פרחים': { en: 'Flower Honey', ru: 'Цветочный мёд', ar: 'عسل الزهور' },
            'דבש אורגני': { en: 'Organic Honey', ru: 'Органический мёд', ar: 'عسل عضوي' },
            'סילאן טהור': { en: 'Pure Date Syrup', ru: 'Чистый силан', ar: 'سيلان نقي' },
            'ממרח שום': { en: 'Garlic Spread', ru: 'Чесночная намазка', ar: 'معجون ثوم' },
            'ממרח זיתים': { en: 'Olive Spread', ru: 'Оливковая намазка', ar: 'معجون زيتون' },
            'ממרח עגבניות מיובשות': { en: 'Sun-Dried Tomato Spread', ru: 'Намазка из вяленых томатов', ar: 'معجون طماطم مجففة' },
            'ממרח ארטישוק': { en: 'Artichoke Spread', ru: 'Намазка из артишоков', ar: 'معجون خرشوف' },
            'פסטו ירוק': { en: 'Green Pesto', ru: 'Зелёный песто', ar: 'بيستو أخضر' },
            'פסטו אדום': { en: 'Red Pesto', ru: 'Красный песто', ar: 'بيستو أحمر' },
            'ממרח טונה': { en: 'Tuna Spread', ru: 'Тунцовая намазка', ar: 'معجون تونة' },
            'ממרח חציל': { en: 'Eggplant Spread', ru: 'Баклажановая намазка', ar: 'معجون باذنجان' },
            'חומוס ממרח': { en: 'Hummus Spread', ru: 'Хумус намазка', ar: 'حمص للدهن' },
            // Additional meat products
            'עוף שלם טרי': { en: 'Fresh Whole Chicken', ru: 'Свежая целая курица', ar: 'دجاج كامل طازج' },
            'עוף שלם קפוא': { en: 'Frozen Whole Chicken', ru: 'Замороженная целая курица', ar: 'دجاج كامل مجمد' },
            'חזה עוף טרי': { en: 'Fresh Chicken Breast', ru: 'Свежая куриная грудка', ar: 'صدر دجاج طازج' },
            'חזה עוף קפוא': { en: 'Frozen Chicken Breast', ru: 'Замороженная куриная грудка', ar: 'صدر دجاج مجمد' },
            'חזה עוף פרוס טרי': { en: 'Fresh Sliced Chicken Breast', ru: 'Свежая нарезанная куриная грудка', ar: 'صدر دجاج مقطع طازج' },
            'כרעיים עוף טריות': { en: 'Fresh Chicken Drumsticks', ru: 'Свежие куриные голени', ar: 'أفخاذ دجاج طازجة' },
            'כרעיים עוף קפואות': { en: 'Frozen Chicken Drumsticks', ru: 'Замороженные куриные голени', ar: 'أفخاذ دجاج مجمدة' },
            'שוקיים עוף טריים': { en: 'Fresh Chicken Thighs', ru: 'Свежие куриные бёдра', ar: 'وركي دجاج طازجة' },
            'שוקיים עוף קפואים': { en: 'Frozen Chicken Thighs', ru: 'Замороженные куриные бёдра', ar: 'وركي دجاج مجمدة' },
            'כנפיים עוף טריות': { en: 'Fresh Chicken Wings', ru: 'Свежие куриные крылышки', ar: 'أجنحة دجاج طازجة' },
            'כנפיים עוף קפואות': { en: 'Frozen Chicken Wings', ru: 'Замороженные куриные крылышки', ar: 'أجنحة دجاج مجمدة' },
            'עוף טחון טרי': { en: 'Fresh Ground Chicken', ru: 'Свежий куриный фарш', ar: 'دجاج مفروم طازج' },
            'עוף טחון קפוא': { en: 'Frozen Ground Chicken', ru: 'Замороженный куриный фарш', ar: 'دجاج مفروم مجمد' },
            'כבד עוף טרי': { en: 'Fresh Chicken Liver', ru: 'Свежая куриная печень', ar: 'كبد دجاج طازج' },
            'כבד עוף קפוא': { en: 'Frozen Chicken Liver', ru: 'Замороженная куриная печень', ar: 'كبد دجاج مجمد' },
            'לבבות עוף': { en: 'Chicken Hearts', ru: 'Куриные сердца', ar: 'قلوب دجاج' },
            'פרגית טרייה': { en: 'Fresh Cornish Hen', ru: 'Свежий цыплёнок', ar: 'فرخة طازجة' },
            'פרגית קפואה': { en: 'Frozen Cornish Hen', ru: 'Замороженный цыплёнок', ar: 'فرخة مجمدة' },
            'חזה הודו טרי': { en: 'Fresh Turkey Breast', ru: 'Свежая грудка индейки', ar: 'صدر ديك رومي طازج' },
            'חזה הודו קפוא': { en: 'Frozen Turkey Breast', ru: 'Замороженная грудка индейки', ar: 'صدر ديك رومي مجمد' },
            'הודו טחון טרי': { en: 'Fresh Ground Turkey', ru: 'Свежий фарш из индейки', ar: 'ديك رومي مفروم طازج' },
            'הודו טחון קפוא': { en: 'Frozen Ground Turkey', ru: 'Замороженный фарш из индейки', ar: 'ديك رومي مفروم مجمد' },
            'בשר טחון טרי': { en: 'Fresh Ground Beef', ru: 'Свежий говяжий фарш', ar: 'لحم مفروم طازج' },
            'בשר טחון קפוא': { en: 'Frozen Ground Beef', ru: 'Замороженный говяжий фарш', ar: 'لحم مفروم مجمد' },
            'אנטריקוט טרי': { en: 'Fresh Entrecote', ru: 'Свежий антрекот', ar: 'أنتريكوت طازج' },
            'שניצל עוף טרי': { en: 'Fresh Chicken Schnitzel', ru: 'Свежий куриный шницель', ar: 'شنيتسل دجاج طازج' },
            'המבורגר טרי': { en: 'Fresh Burger', ru: 'Свежий бургер', ar: 'همبرغر طازج' },
            // Additional fish
            'סלמון טרי': { en: 'Fresh Salmon', ru: 'Свежий лосось', ar: 'سلمون طازج' },
            'סלמון מעושן': { en: 'Smoked Salmon', ru: 'Копчёный лосось', ar: 'سلمون مدخن' },
            // Additional misc
            'רולדה': { en: 'Roll Cake', ru: 'Рулет', ar: 'رولاد' },
            'גלידה': { en: 'Ice Cream', ru: 'Мороженое', ar: 'آيس كريم' },
            'המבורגר קפוא': { en: 'Frozen Burger', ru: 'Замороженный бургер', ar: 'همبرغر مجمد' }
        };

        // Helper function to get translated product name
        function getProductTranslation(productName, language) {
            if (!productName) return '';
            if (!language || language === 'he') return productName;
            const translation = PRODUCT_TRANSLATIONS[productName];
            if (translation && translation[language]) {
                return translation[language];
            }
            return productName; // Return Hebrew if no translation found
        }

        // Helper function to extract number from quantity (handles both number and string formats)
        function getQuantityNumber(quantity) {
            if (typeof quantity === 'number') return quantity;
            if (typeof quantity === 'string') {
                const numMatch = quantity.match(/^([\d.]+)/);
                return numMatch ? parseFloat(numMatch[1]) : 1;
            }
            return 1;
        }

        // Confetti burst effect component
        function ConfettiBurst({ x, y, onComplete }) {
            const [particles, setParticles] = useState([]);

            useEffect(() => {
                const colors = ['#10b981', '#34d399', '#6ee7b7', '#fbbf24', '#f472b6', '#818cf8'];
                const newParticles = [];
                for (let i = 0; i < 12; i++) {
                    const angle = (i / 12) * 360;
                    const velocity = 60 + Math.random() * 40;
                    const size = 4 + Math.random() * 4;
                    newParticles.push({
                        id: i,
                        color: colors[Math.floor(Math.random() * colors.length)],
                        angle,
                        velocity,
                        size,
                        x: Math.cos(angle * Math.PI / 180) * velocity,
                        y: Math.sin(angle * Math.PI / 180) * velocity
                    });
                }
                setParticles(newParticles);
                const timer = setTimeout(() => onComplete?.(), 600);
                return () => clearTimeout(timer);
            }, []);

            return (
                <div style={{ position: 'absolute', left: x, top: y, pointerEvents: 'none', zIndex: 50 }}>
                    {particles.map(p => (
                        <div
                            key={p.id}
                            className="confetti-particle"
                            style={{
                                width: p.size,
                                height: p.size,
                                borderRadius: '50%',
                                backgroundColor: p.color,
                                '--tx': `${p.x}px`,
                                '--ty': `${p.y}px`,
                                animation: `particleFly 0.6s ease-out forwards`
                            }}
                        />
                    ))}
                </div>
            );
        }

        // Swipeable Item Component
        function SwipeableItem({ children, onSwipeRight, onSwipeLeft, className, purchased }) {
            const [touchStart, setTouchStart] = useState(null);
            const [touchDelta, setTouchDelta] = useState(0);
            const [isSwiping, setIsSwiping] = useState(false);
            const [completing, setCompleting] = useState(null); // 'right' or 'left'
            const THRESHOLD = 80;

            const handleTouchStart = (e) => {
                setTouchStart(e.touches[0].clientX);
                setIsSwiping(true);
            };

            const handleTouchMove = (e) => {
                if (touchStart === null) return;
                const delta = e.touches[0].clientX - touchStart;
                // RTL: negative delta = swiping right visually, positive = swiping left
                setTouchDelta(delta);
            };

            const handleTouchEnd = () => {
                if (Math.abs(touchDelta) > THRESHOLD) {
                    // RTL adjustment: negative delta means swiping toward the left side of screen (which is "right" in RTL)
                    if (touchDelta < -THRESHOLD) {
                        // Swiped left on screen = "right" action in RTL = bought
                        setCompleting('right');
                        setTimeout(() => {
                            onSwipeRight?.();
                            setCompleting(null);
                            setTouchDelta(0);
                        }, 300);
                    } else if (touchDelta > THRESHOLD) {
                        // Swiped right on screen = "left" action in RTL = postpone
                        setCompleting('left');
                        setTimeout(() => {
                            onSwipeLeft?.();
                            setCompleting(null);
                            setTouchDelta(0);
                        }, 300);
                    }
                } else {
                    setTouchDelta(0);
                }
                setTouchStart(null);
                setIsSwiping(false);
            };

            const showRightIndicator = touchDelta < -30;
            const showLeftIndicator = touchDelta > 30;
            const rightProgress = Math.min(Math.abs(Math.min(touchDelta, 0)) / THRESHOLD, 1);
            const leftProgress = Math.min(Math.max(touchDelta, 0) / THRESHOLD, 1);

            return (
                <div className={`swipe-container ${className || ''}`}>
                    {/* Right swipe background (bought - green) */}
                    <div
                        className="swipe-bg-right swipe-background"
                        style={{ opacity: rightProgress }}
                    >
                        <div className="swipe-indicator">
                            <span className={`swipe-icon swipe-icon-emoji ${showRightIndicator ? 'visible' : ''}`} style={{ transform: `scale(${0.5 + rightProgress * 0.5})` }}>
                                ✓
                            </span>
                            <span className={`swipe-icon text-sm ${showRightIndicator ? 'visible' : ''}`}>
                                נקנה
                            </span>
                        </div>
                    </div>
                    {/* Left swipe background (postpone - orange) */}
                    <div
                        className="swipe-bg-left swipe-background"
                        style={{ opacity: leftProgress }}
                    >
                        <div className="swipe-indicator">
                            <span className={`swipe-icon swipe-icon-emoji ${showLeftIndicator ? 'visible' : ''}`} style={{ transform: `scale(${0.5 + leftProgress * 0.5})` }}>
                                ⏭
                            </span>
                            <span className={`swipe-icon text-sm ${showLeftIndicator ? 'visible' : ''}`}>
                                אח״כ
                            </span>
                        </div>
                    </div>
                    {/* Content */}
                    <div
                        className={`swipe-content ${isSwiping ? 'swiping' : ''} ${completing === 'right' ? 'slide-out-right' : ''} ${completing === 'left' ? 'slide-out-left' : ''}`}
                        style={{ transform: completing ? undefined : `translateX(${touchDelta}px)` }}
                        onTouchStart={handleTouchStart}
                        onTouchMove={handleTouchMove}
                        onTouchEnd={handleTouchEnd}
                    >
                        {children}
                    </div>
                </div>
            );
        }

        function ShoppingList() {
            const { user } = useAuth();
            const { family, lists, currentList, setCurrentList, logActivity } = useFamily();
            const { language, changeLanguage, t } = useLanguage();
            // Expose changeLanguage to window for accessibility modal buttons
            window.changeAppLanguage = changeLanguage;

            // Helper function to get translated category name
            const getCategoryName = (categoryKey) => {
                const categoryTranslationMap = {
                    fruits: 'fruitsVeg',
                    dairy: 'dairyProducts',
                    desserts: 'dairyDesserts',
                    meat: 'meat',
                    fish: 'fish',
                    deli: 'deli',
                    salads: 'readySalads',
                    bakery: 'breadBakery',
                    spreads: 'spreads',
                    baking: 'bakingProducts',
                    cereals: 'cereals',
                    canned: 'cannedDry',
                    spices: 'spices',
                    coffee: 'coffeeTea',
                    drinks: 'drinks',
                    wine: 'wineAlcohol',
                    snacks: 'snacks',
                    frozen: 'frozen',
                    health: 'dietProtein',
                    hygiene: 'hygiene',
                    cleaning: 'cleaning',
                    candles: 'candlesOil',
                    baby: 'babyKids',
                    pets: 'pets'
                };
                return t(categoryTranslationMap[categoryKey]) || CATEGORIES[categoryKey]?.name || categoryKey;
            };
            const [items, setItems] = useState([]);
            const prevItemIdsRef = React.useRef(new Set());
            const [selectedCategory, setSelectedCategory] = useState(null);
            const [searchTerm, setSearchTerm] = useState('');
            const [loading, setLoading] = useState(true);
            const [darkMode, setDarkMode] = useState(false);
            const [showFinishShopping, setShowFinishShopping] = useState(false);
            const [showHistory, setShowHistory] = useState(false);
            const [totalAmount, setTotalAmount] = useState('');
            const [receiptPhoto, setReceiptPhoto] = useState(null);
            const [uploadingReceipt, setUploadingReceipt] = useState(false);
            const receiptInputRef = React.useRef(null);
            const [history, setHistory] = useState([]);
            const [showDeleteConfirm, setShowDeleteConfirm] = useState(null);
            const [openItemMenu, setOpenItemMenu] = useState(null);
            const [showDeleteAllConfirm, setShowDeleteAllConfirm] = useState(false);
            const [showFamilySettings, setShowFamilySettings] = useState(false);
            const [showCreateList, setShowCreateList] = useState(false);
            const [editingNote, setEditingNote] = useState(null);
            const [editingItemId, setEditingItemId] = useState(null);
            const [editingItemName, setEditingItemName] = useState('');
            const [confetti, setConfetti] = useState(null);
            const [animatingItems, setAnimatingItems] = useState(new Set());
            const addBarInputRef = React.useRef(null);
            // Chat & Photo states
            const [showChat, setShowChat] = useState(false);
            const [chatMessages, setChatMessages] = useState([]);
            const [chatInput, setChatInput] = useState('');
            const [showCamera, setShowCamera] = useState(false);
            const [capturedPhoto, setCapturedPhoto] = useState(null);
            const [notificationsEnabled, setNotificationsEnabled] = useState(false);
            const lastMessageIdRef = React.useRef(null);
            const videoRef = React.useRef(null);
            const canvasRef = React.useRef(null);
            // Forgotten items tracking
            const [forgottenStats, setForgottenStats] = useState({});
            const [showForgottenStats, setShowForgottenStats] = useState(false);
            const [shoppingStreak, setShoppingStreak] = useState(0);
            const [achievements, setAchievements] = useState([]);
            // Regular items & Calendar
            const [regularItems, setRegularItems] = useState([]);
            const [showRegulars, setShowRegulars] = useState(false);
            const [showCalendar, setShowCalendar] = useState(false);
            const [upcomingHolidays, setUpcomingHolidays] = useState([]);
            // Quantity selector
            const [showQuantitySelector, setShowQuantitySelector] = useState(false);
            const [selectedProduct, setSelectedProduct] = useState(null);
            const [selectedQuantity, setSelectedQuantity] = useState(1);
            const [selectedUnit, setSelectedUnit] = useState('יח\'');
            const [selectedNote, setSelectedNote] = useState('');
            // Calendar view
            const [calendarMonth, setCalendarMonth] = useState(new Date());
            const [selectedHoliday, setSelectedHoliday] = useState(null);
            const [reminderDays, setReminderDays] = useState(7);
            // Voice recognition states
            const [isListening, setIsListening] = useState(false);
            const [voiceSupported, setVoiceSupported] = useState(false);
            const [voiceLang, setVoiceLang] = useState(localStorage.getItem('voiceLang') || 'he-IL');
            // Shopping mode - keeps screen awake
            const [shoppingMode, setShoppingMode] = useState(false);
            const [wakeLock, setWakeLock] = useState(null);
            // Out of stock tracking
            const [outOfStockItems, setOutOfStockItems] = useState([]);
            // Saved lists for quick reuse
            const [savedLists, setSavedLists] = useState([]);
            const [showSavedLists, setShowSavedLists] = useState(false);
            const [showImportWhatsApp, setShowImportWhatsApp] = useState(false);
            const [whatsAppText, setWhatsAppText] = useState('');
            // Real-time editing indicator
            const [activeEditors, setActiveEditors] = useState([]);
            // Holiday recommendations
            const [showHolidayRecommendations, setShowHolidayRecommendations] = useState(false);
            // Price comparison scanner
            const [showPriceScanner, setShowPriceScanner] = useState(false);
            const [scanningPrice, setScanningPrice] = useState(false);
            const [scannedProductName, setScannedProductName] = useState('');
            const [priceCompareResults, setPriceCompareResults] = useState(null);
            const priceVideoRef = React.useRef(null);
            const priceCanvasRef = React.useRef(null);
            // Offline mode state
            const [isOnline, setIsOnline] = useState(navigator.onLine);
            const [pendingOperations, setPendingOperations] = useState(() => {
                try { return JSON.parse(localStorage.getItem('pendingOps') || '[]'); } catch { return []; }
            });
            const [syncStatus, setSyncStatus] = useState('synced');
            // Item animations
            const [exitingItems, setExitingItems] = useState(new Set());
            // Templates system
            const [templates, setTemplates] = useState(() => {
                try { return JSON.parse(localStorage.getItem('shoppingTemplates') || '[]'); } catch { return []; }
            });
            const [showTemplates, setShowTemplates] = useState(false);
            const [showSaveTemplate, setShowSaveTemplate] = useState(false);
            const [newTemplateName, setNewTemplateName] = useState('');
            // Sticky category header
            const [activeCategory, setActiveCategory] = useState(null);
            const categoryObserverRef = React.useRef(null);
            // Price editing
            const [editingPriceId, setEditingPriceId] = useState(null);
            const [editingPriceValue, setEditingPriceValue] = useState('');
            // AI Assistant
            const [showAIAssistant, setShowAIAssistant] = useState(false);
            const [aiSuggestions, setAiSuggestions] = useState([]);
            const [aiThinking, setAiThinking] = useState(false);
            // Onboarding & Help
            const [showOnboarding, setShowOnboarding] = useState(false);
            const [onboardingStep, setOnboardingStep] = useState(0);
            const [showHelp, setShowHelp] = useState(false);
            const [showFeedback, setShowFeedback] = useState(false);
            const [feedbackText, setFeedbackText] = useState('');
            const [feedbackType, setFeedbackType] = useState('bug');
            const [feedbackSending, setFeedbackSending] = useState(false);
            const [feedbackSent, setFeedbackSent] = useState(false);
            // Accessibility
            const [showAccessibility, setShowAccessibility] = useState(false);
            const [accessibilitySettings, setAccessibilitySettings] = useState({
                fontSize: 'normal',
                contrast: 'normal',
                highlightLinks: false,
                cursorSize: 'normal'
            });

            // English to Hebrew grocery translations
            const ENGLISH_TO_HEBREW = {
                // Dairy
                'milk': 'חלב', 'eggs': 'ביצים', 'egg': 'ביצים', 'cheese': 'גבינה', 'butter': 'חמאה',
                'yogurt': 'יוגורט', 'cream': 'שמנת', 'cottage': 'קוטג\'', 'cream cheese': 'גבינת שמנת',
                'sour cream': 'שמנת חמוצה', 'whipped cream': 'קצפת',
                // Bread & Bakery
                'bread': 'לחם', 'pita': 'פיתה', 'challah': 'חלה', 'bagel': 'בייגל', 'croissant': 'קרואסון',
                'toast': 'לחם טוסט', 'rolls': 'לחמניות', 'baguette': 'באגט',
                // Fruits
                'apple': 'תפוח', 'apples': 'תפוחים', 'banana': 'בננה', 'bananas': 'בננות',
                'orange': 'תפוז', 'oranges': 'תפוזים', 'lemon': 'לימון', 'lemons': 'לימונים',
                'grapes': 'ענבים', 'strawberry': 'תות', 'strawberries': 'תותים',
                'watermelon': 'אבטיח', 'melon': 'מלון', 'mango': 'מנגו', 'peach': 'אפרסק',
                'pear': 'אגס', 'plum': 'שזיף', 'cherry': 'דובדבן', 'cherries': 'דובדבנים',
                'avocado': 'אבוקדו', 'pomegranate': 'רימון', 'kiwi': 'קיווי', 'pineapple': 'אננס',
                // Vegetables
                'tomato': 'עגבניה', 'tomatoes': 'עגבניות', 'cucumber': 'מלפפון', 'cucumbers': 'מלפפונים',
                'onion': 'בצל', 'onions': 'בצל', 'garlic': 'שום', 'potato': 'תפוח אדמה', 'potatoes': 'תפוחי אדמה',
                'carrot': 'גזר', 'carrots': 'גזר', 'pepper': 'פלפל', 'peppers': 'פלפלים',
                'lettuce': 'חסה', 'cabbage': 'כרוב', 'broccoli': 'ברוקולי', 'cauliflower': 'כרובית',
                'spinach': 'תרד', 'celery': 'סלרי', 'corn': 'תירס', 'mushroom': 'פטריות', 'mushrooms': 'פטריות',
                'zucchini': 'קישוא', 'eggplant': 'חציל', 'beet': 'סלק', 'radish': 'צנון',
                // Meat & Fish
                'chicken': 'עוף', 'beef': 'בקר', 'meat': 'בשר', 'fish': 'דג', 'salmon': 'סלמון',
                'tuna': 'טונה', 'turkey': 'הודו', 'schnitzel': 'שניצל', 'steak': 'סטייק',
                'ground beef': 'בשר טחון', 'sausage': 'נקניק', 'hot dog': 'נקניקייה',
                // Pantry
                'rice': 'אורז', 'pasta': 'פסטה', 'noodles': 'אטריות', 'flour': 'קמח',
                'sugar': 'סוכר', 'salt': 'מלח', 'oil': 'שמן', 'olive oil': 'שמן זית',
                'vinegar': 'חומץ', 'sauce': 'רוטב', 'ketchup': 'קטשופ', 'mayonnaise': 'מיונז',
                'mustard': 'חרדל', 'honey': 'דבש', 'jam': 'ריבה', 'peanut butter': 'חמאת בוטנים',
                'coffee': 'קפה', 'tea': 'תה', 'juice': 'מיץ', 'water': 'מים', 'soda': 'סודה',
                'cereal': 'דגני בוקר', 'oatmeal': 'שיבולת שועל', 'crackers': 'קרקרים',
                'chips': 'צ\'יפס', 'cookies': 'עוגיות', 'chocolate': 'שוקולד', 'candy': 'ממתקים',
                'nuts': 'אגוזים', 'almonds': 'שקדים', 'walnuts': 'אגוזי מלך',
                // Frozen
                'ice cream': 'גלידה', 'frozen vegetables': 'ירקות קפואים', 'pizza': 'פיצה',
                // Cleaning
                'soap': 'סבון', 'shampoo': 'שמפו', 'toilet paper': 'נייר טואלט',
                'tissues': 'טישו', 'detergent': 'אבקת כביסה', 'dish soap': 'סבון כלים',
                'trash bags': 'שקיות אשפה', 'paper towels': 'מגבות נייר',
                // Baby
                'diapers': 'חיתולים', 'baby food': 'מזון לתינוקות', 'formula': 'תרכובת מזון',
                'wipes': 'מגבונים',
                // Other common
                'hummus': 'חומוס', 'tahini': 'טחינה', 'falafel': 'פלאפל', 'shawarma': 'שווארמה',
                // Herbs & Spices
                'basil': 'בזיליקום', 'oregano': 'אורגנו', 'parsley': 'פטרוזיליה', 'cilantro': 'כוסברה',
                'coriander': 'כוסברה', 'mint': 'נענע', 'dill': 'שמיר', 'rosemary': 'רוזמרין',
                'thyme': 'קורנית', 'cumin': 'כמון', 'paprika': 'פפריקה', 'cinnamon': 'קינמון',
                'turmeric': 'כורכום', 'black pepper': 'פלפל שחור', 'ginger': 'ג\'ינג\'ר',
                // More grains
                'quinoa': 'קינואה', 'couscous': 'קוסקוס', 'bulgur': 'בורגול', 'lentils': 'עדשים',
                'chickpeas': 'חומוס', 'beans': 'שעועית', 'white beans': 'שעועית לבנה',
                // Beverages
                'cola': 'קולה', 'sprite': 'ספרייט', 'fanta': 'פאנטה', 'beer': 'בירה', 'wine': 'יין',
                'mineral water': 'מים מינרליים', 'sparkling water': 'מים מוגזים',
                // More dairy
                'goat cheese': 'גבינת עזים', 'feta': 'פטה', 'labne': 'לבנה', 'labneh': 'לבנה',
                // Snacks
                'bamba': 'במבה', 'bissli': 'ביסלי', 'pretzels': 'בייגלה', 'popcorn': 'פופקורן',
                // Oils
                'canola oil': 'שמן קנולה', 'coconut oil': 'שמן קוקוס', 'sunflower oil': 'שמן חמניות',
                // Other
                'hummus spread': 'ממרח חומוס', 'canned tuna': 'טונה בשימורים', 'sardines': 'סרדינים',
                'olives': 'זיתים', 'pickles': 'חמוצים', 'cornflakes': 'קורנפלקס'
            };
            const [voiceTranscript, setVoiceTranscript] = useState('');
            const recognitionRef = React.useRef(null);

            // Voice status for debugging
            const [voiceStatus, setVoiceStatus] = useState('');
            const voiceTimeoutRef = React.useRef(null);

            // Check voice support and setup recognition
            useEffect(() => {
                const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
                if (SpeechRecognition) {
                    setVoiceSupported(true);
                } else {
                    setVoiceStatus('הדפדפן לא תומך בזיהוי קול');
                }
            }, []);

            // Create recognition when starting to listen
            const createRecognition = () => {
                const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
                if (!SpeechRecognition) return null;

                const recognition = new SpeechRecognition();
                recognition.continuous = false;
                recognition.interimResults = true;
                recognition.maxAlternatives = 3; // More alternatives for better Hebrew recognition

                // Check if iOS Safari - Hebrew support is limited
                const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent);
                const isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);

                if (isIOS && isSafari && voiceLang === 'he-IL') {
                    // iOS Safari has limited Hebrew support, try a workaround
                    recognition.lang = 'he'; // Try shorter code
                } else {
                    recognition.lang = voiceLang;
                }

                recognition.onstart = () => {
                    const isIOSSafari = isIOS && isSafari;
                    if (isIOSSafari && voiceLang === 'he-IL') {
                        setVoiceStatus('מאזין... (ב-iPhone נסה לדבר באנגלית)');
                    } else {
                        setVoiceStatus(voiceLang === 'en-US' ? 'Listening... speak now' : 'מאזין... דבר עכשיו');
                    }
                };

                recognition.onaudiostart = () => {
                    setVoiceStatus(voiceLang === 'en-US' ? 'Hearing audio...' : 'קולט שמע...');
                };

                recognition.onspeechstart = () => {
                    setVoiceStatus(voiceLang === 'en-US' ? 'Detecting speech...' : 'מזהה דיבור...');
                };

                recognition.onresult = (event) => {
                    // Clear timeout since we got a result
                    if (voiceTimeoutRef.current) {
                        clearTimeout(voiceTimeoutRef.current);
                    }

                    const transcript = Array.from(event.results)
                        .map(result => result[0].transcript)
                        .join('');
                    setVoiceTranscript(transcript);
                    setVoiceStatus(voiceLang === 'en-US' ? 'Got it!' : 'קיבלתי!');

                    // If final result, process it
                    if (event.results[0].isFinal) {
                        processVoiceCommand(transcript, voiceLang);
                        setIsListening(false);
                    }
                };

                recognition.onend = () => {
                    if (voiceTimeoutRef.current) {
                        clearTimeout(voiceTimeoutRef.current);
                    }
                    setIsListening(false);
                    if (!voiceTranscript) {
                        const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent);
                        const isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);
                        if (isIOS && isSafari && voiceLang === 'he-IL') {
                            setVoiceStatus('עברית לא נתמכת באייפון. נסה באנגלית או הקלד ידנית 🇺🇸');
                        } else {
                            setVoiceStatus(voiceLang === 'en-US' ? 'No speech detected. Try again.' : 'לא זוהה דיבור. נסה שוב.');
                        }
                    }
                };

                recognition.onerror = (event) => {
                    console.error('Voice recognition error:', event.error);
                    if (voiceTimeoutRef.current) {
                        clearTimeout(voiceTimeoutRef.current);
                    }
                    setIsListening(false);

                    switch(event.error) {
                        case 'not-allowed':
                            setVoiceStatus('נא לאפשר גישה למיקרופון בהגדרות הדפדפן');
                            alert('נא לאפשר גישה למיקרופון. לחץ על סמל המנעול בשורת הכתובת ואפשר מיקרופון.');
                            break;
                        case 'no-speech':
                            setVoiceStatus(voiceLang === 'en-US' ? 'No speech detected. Tap mic to try again.' : 'לא נשמע דיבור. לחץ שוב על המיקרופון.');
                            break;
                        case 'audio-capture':
                            setVoiceStatus('לא נמצא מיקרופון. בדוק את החיבור.');
                            break;
                        case 'network':
                            setVoiceStatus('בעיית רשת. בדוק את החיבור לאינטרנט.');
                            break;
                        case 'aborted':
                            setVoiceStatus(voiceLang === 'en-US' ? 'Cancelled' : 'בוטל');
                            break;
                        default:
                            setVoiceStatus(`שגיאה: ${event.error}`);
                    }
                };

                return recognition;
            };

            // Toggle voice language
            const toggleVoiceLang = () => {
                const newLang = voiceLang === 'he-IL' ? 'en-US' : 'he-IL';
                setVoiceLang(newLang);
                localStorage.setItem('voiceLang', newLang);
            };

            // Shopping Mode - Keep screen awake
            const toggleShoppingMode = async () => {
                if (shoppingMode) {
                    // Turn off shopping mode
                    if (wakeLock) {
                        await wakeLock.release();
                        setWakeLock(null);
                    }
                    setShoppingMode(false);
                } else {
                    // Turn on shopping mode
                    try {
                        if ('wakeLock' in navigator) {
                            const lock = await navigator.wakeLock.request('screen');
                            setWakeLock(lock);
                            lock.addEventListener('release', () => {
                                setShoppingMode(false);
                                setWakeLock(null);
                            });
                        }
                        setShoppingMode(true);
                    } catch (err) {
                        console.log('Wake Lock not supported or failed:', err);
                        setShoppingMode(true); // Still enable mode visually
                    }
                }
            };

            // Mark item as out of stock
            const markOutOfStock = async (item) => {
                try {
                    await window.firestore.updateDoc(
                        window.firestore.doc(window.db, 'shopping-items', item.id),
                        { outOfStock: true, outOfStockAt: new Date(), outOfStockBy: user.displayName || user.email }
                    );
                    // Save to out of stock list for future reference
                    const newOutOfStock = [...outOfStockItems, { name: item.name, date: new Date() }];
                    setOutOfStockItems(newOutOfStock);
                    localStorage.setItem(`outOfStock_${family.id}`, JSON.stringify(newOutOfStock));
                } catch (err) {
                    console.error('Error marking out of stock:', err);
                }
            };

            // Save current list for reuse
            const saveListForReuse = () => {
                const currentItems = items.filter(i => !i.purchased).map(i => ({ name: i.name, category: i.category, quantity: i.quantity, unit: i.unit }));
                if (currentItems.length === 0) return;

                const listName = `רשימה ${new Date().toLocaleDateString('he-IL')}`;
                const newList = { id: Date.now(), name: listName, items: currentItems, createdAt: new Date() };
                const updated = [newList, ...savedLists.slice(0, 9)]; // Keep max 10
                setSavedLists(updated);
                localStorage.setItem(`savedLists_${family.id}`, JSON.stringify(updated));
            };

            // Load saved list to cart
            const loadSavedList = async (savedList) => {
                for (const item of savedList.items) {
                    await addProduct(item.name, item.category);
                }
                setShowSavedLists(false);
            };

            // Delete saved list
            const deleteSavedList = (listId) => {
                const updated = savedLists.filter(list => list.id !== listId);
                setSavedLists(updated);
                localStorage.setItem(`savedLists_${family.id}`, JSON.stringify(updated));
            };

            // Import from WhatsApp text
            const importFromWhatsApp = async () => {
                if (!whatsAppText.trim()) return;

                // Parse WhatsApp text - split by newlines, commas, or bullet points
                const lines = whatsAppText
                    .split(/[\n,•\-\*]/)
                    .map(line => line.trim())
                    .filter(line => line.length > 0 && line.length < 50);

                let addedCount = 0;
                for (const line of lines) {
                    // Try to extract quantity if present (e.g., "2 חלב" or "חלב x3" or "2 ק"ג בשר")
                    let qty = 1;
                    let productName = line;

                    // Match patterns like "2 חלב", "חלב x3", "2 ק"ג בשר"
                    const qtyMatch = line.match(/^([\d.]+)\s*(.+)$/) || line.match(/^(.+?)\s*[xX×]\s*([\d.]+)$/);
                    if (qtyMatch) {
                        qty = parseFloat(qtyMatch[1]) || parseFloat(qtyMatch[2]) || 1;
                        productName = (qtyMatch[2] || qtyMatch[1]).trim();
                        // Remove unit from product name if it starts with a unit
                        productName = productName.replace(/^(ק"ג|קג|גרם|ליטר|מ"ל|יח'|יחידות?)\s*/i, '').trim();
                    }

                    if (!productName) continue;

                    // Detect category and get appropriate unit
                    const category = detectCategory(productName);
                    const unit = CATEGORIES[category]?.unit || 'יח\'';

                    // Check if already exists
                    const existing = items.find(item => item.name === productName && !item.purchased);
                    if (existing) {
                        // Update quantity - extract number if string
                        let existingNum = existing.quantity;
                        if (typeof existingNum === 'string') {
                            const numMatch = existingNum.match(/^([\d.]+)/);
                            existingNum = numMatch ? parseFloat(numMatch[1]) : 1;
                        }
                        const newQty = (existingNum || 0) + qty;
                        await window.firestore.updateDoc(
                            window.firestore.doc(window.db, 'shopping-items', existing.id),
                            { quantity: newQty, unit: unit, updatedAt: new Date() }
                        );
                    } else {
                        // Add new item with correct unit
                        await window.firestore.addDoc(window.firestore.collection(window.db, 'shopping-items'), {
                            name: productName,
                            category: category,
                            quantity: qty,
                            unit: unit,
                            purchased: false,
                            familyId: family.id,
                            listId: currentList.id,
                            addedBy: user.displayName || user.email,
                            addedByUid: user.uid,
                            note: '',
                            createdAt: new Date()
                        });
                    }
                    addedCount++;
                }

                setWhatsAppText('');
                setShowImportWhatsApp(false);
            };

            // ============================================
            // Offline Mode Functions
            // ============================================
            useEffect(() => {
                const handleOnline = () => { setIsOnline(true); syncPendingOperations(); };
                const handleOffline = () => { setIsOnline(false); };
                window.addEventListener('online', handleOnline);
                window.addEventListener('offline', handleOffline);
                return () => {
                    window.removeEventListener('online', handleOnline);
                    window.removeEventListener('offline', handleOffline);
                };
            }, []);

            const queueOperation = (operation) => {
                const ops = [...pendingOperations, { ...operation, timestamp: Date.now() }];
                localStorage.setItem('pendingOps', JSON.stringify(ops));
                setPendingOperations(ops);
                setSyncStatus('pending');
            };

            // Generic update item function for offline sync
            const updateItem = async (itemId, data, skipQueue = false) => {
                try {
                    const itemRef = window.firestore.doc(window.db, 'shopping-items', itemId);
                    await window.firestore.updateDoc(itemRef, data);
                } catch (e) {
                    console.error('Error updating item:', e);
                    if (!skipQueue && !isOnline) {
                        queueOperation({ type: 'update', id: itemId, data });
                    }
                }
            };

            const syncPendingOperations = async () => {
                if (pendingOperations.length === 0) return;
                setSyncStatus('syncing');
                try {
                    for (const op of pendingOperations) {
                        if (op.type === 'add') await addProduct(op.name, op.category, op.quantity, true);
                        else if (op.type === 'delete') await deleteItem(op.id, true);
                        else if (op.type === 'update') await updateItem(op.id, op.data, true);
                    }
                    localStorage.removeItem('pendingOps');
                    setPendingOperations([]);
                    setSyncStatus('synced');
                } catch (e) {
                    console.error('Sync failed:', e);
                    setSyncStatus('pending');
                }
            };

            // ============================================
            // Templates System
            // ============================================
            const saveAsTemplate = (name) => {
                if (!name.trim()) return;
                const template = {
                    id: Date.now(),
                    name: name.trim(),
                    items: items.filter(i => !i.purchased).map(i => ({
                        name: i.name, category: i.category, quantity: i.quantity
                    })),
                    createdAt: new Date().toISOString()
                };
                const newTemplates = [...templates, template];
                setTemplates(newTemplates);
                localStorage.setItem('shoppingTemplates', JSON.stringify(newTemplates));
                setShowSaveTemplate(false);
                setNewTemplateName('');
            };

            const loadTemplate = async (template) => {
                for (const item of template.items) {
                    await addProduct(item.name, item.category, item.quantity);
                }
                setShowTemplates(false);
            };

            const deleteTemplate = (templateId) => {
                const newTemplates = templates.filter(t => t.id !== templateId);
                setTemplates(newTemplates);
                localStorage.setItem('shoppingTemplates', JSON.stringify(newTemplates));
            };

            // ============================================
            // Price per Item
            // ============================================
            const updateItemPrice = async (itemId, price) => {
                try {
                    const priceNum = parseFloat(price) || 0;
                    await window.firestore.updateDoc(
                        window.firestore.doc(window.db, 'shopping-items', itemId),
                        { price: priceNum, updatedAt: new Date() }
                    );
                    setEditingPriceId(null);
                    setEditingPriceValue('');
                } catch (error) {
                    console.error('Error updating price:', error);
                    setEditingPriceId(null);
                }
            };

            const estimatedTotal = React.useMemo(() => {
                return items
                    .filter(i => !i.purchased && i.price)
                    .reduce((sum, i) => sum + (i.price * (parseInt(i.quantity) || 1)), 0);
            }, [items]);

            // Price comparison scanner functions
            const startPriceScanner = async () => {
                setShowPriceScanner(true);
                setScannedProductName('');
                setPriceCompareResults(null);
                try {
                    const stream = await navigator.mediaDevices.getUserMedia({
                        video: { facingMode: 'environment', width: { ideal: 1280 }, height: { ideal: 720 } }
                    });
                    if (priceVideoRef.current) {
                        priceVideoRef.current.srcObject = stream;
                    }
                } catch (err) {
                    console.error('Camera error:', err);
                    alert('לא ניתן לגשת למצלמה');
                    setShowPriceScanner(false);
                }
            };

            const stopPriceScanner = () => {
                if (priceVideoRef.current?.srcObject) {
                    const tracks = priceVideoRef.current.srcObject.getTracks();
                    tracks.forEach(track => {
                        track.stop();
                        track.enabled = false;
                    });
                    priceVideoRef.current.srcObject = null;
                }
                setShowPriceScanner(false);
                setScanningPrice(false);
            };

            // Get product suggestions for price search
            const getPriceSearchSuggestions = (searchText) => {
                if (!searchText || searchText.length < 2) return [];
                const text = searchText.toLowerCase();
                const suggestions = [];
                for (const [cat, products] of Object.entries(PRODUCTS)) {
                    for (const product of products) {
                        if (product.includes(searchText) || product.toLowerCase().includes(text)) {
                            suggestions.push(product);
                            if (suggestions.length >= 8) return suggestions;
                        }
                    }
                }
                return suggestions;
            };

            // Translate English product name to Hebrew
            const translateProductToHebrew = (text) => {
                if (!text) return text;
                const lower = text.toLowerCase().trim();

                // Check direct translation
                if (ENGLISH_TO_HEBREW[lower]) {
                    return ENGLISH_TO_HEBREW[lower];
                }

                // Check if any word matches
                const words = lower.split(/\s+/);
                for (const word of words) {
                    if (ENGLISH_TO_HEBREW[word]) {
                        return ENGLISH_TO_HEBREW[word];
                    }
                }

                // Check partial matches
                for (const [eng, heb] of Object.entries(ENGLISH_TO_HEBREW)) {
                    if (lower.includes(eng) || eng.includes(lower)) {
                        return heb;
                    }
                }

                return text; // Return original if no translation found
            };

            // Check if text is English (contains mostly English letters)
            const isEnglishText = (text) => {
                const englishChars = (text.match(/[a-zA-Z]/g) || []).length;
                const hebrewChars = (text.match(/[\u0590-\u05FF]/g) || []).length;
                return englishChars > hebrewChars;
            };

            const captureAndScanPrice = async () => {
                if (!priceVideoRef.current || !priceCanvasRef.current) return;

                setScanningPrice(true);
                const video = priceVideoRef.current;
                const canvas = priceCanvasRef.current;

                // Use higher resolution for better OCR
                const scale = 2;
                canvas.width = video.videoWidth * scale;
                canvas.height = video.videoHeight * scale;
                const ctx = canvas.getContext('2d');

                // Draw scaled up image
                ctx.drawImage(video, 0, 0, canvas.width, canvas.height);

                // Advanced image preprocessing for OCR
                const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
                const data = imageData.data;
                const grayData = new Uint8Array(canvas.width * canvas.height);

                // Step 1: Convert to perceptually-weighted grayscale (ITU-R BT.709)
                for (let i = 0, j = 0; i < data.length; i += 4, j++) {
                    grayData[j] = Math.round(data[i] * 0.2126 + data[i + 1] * 0.7152 + data[i + 2] * 0.0722);
                }

                // Step 2: Contrast stretching (histogram normalization)
                let min = 255, max = 0;
                for (const v of grayData) { min = Math.min(min, v); max = Math.max(max, v); }
                const range = max - min || 1;
                for (let i = 0; i < grayData.length; i++) {
                    grayData[i] = Math.round(((grayData[i] - min) / range) * 255);
                }

                // Step 3: Otsu's adaptive thresholding
                const histogram = new Uint32Array(256);
                for (const v of grayData) histogram[v]++;

                const total = grayData.length;
                let sum = 0;
                for (let i = 0; i < 256; i++) sum += i * histogram[i];

                let sumB = 0, wB = 0, maxVariance = 0, threshold = 128;
                for (let t = 0; t < 256; t++) {
                    wB += histogram[t];
                    if (wB === 0) continue;
                    const wF = total - wB;
                    if (wF === 0) break;
                    sumB += t * histogram[t];
                    const mB = sumB / wB;
                    const mF = (sum - sumB) / wF;
                    const variance = wB * wF * Math.pow(mB - mF, 2);
                    if (variance > maxVariance) { maxVariance = variance; threshold = t; }
                }

                // Apply threshold with anti-aliasing for smoother edges
                for (let i = 0, j = 0; i < data.length; i += 4, j++) {
                    const val = grayData[j] > threshold ? 255 : 0;
                    data[i] = data[i + 1] = data[i + 2] = val;
                }
                ctx.putImageData(imageData, 0, 0);

                try {
                    // Run Hebrew and English OCR in parallel for speed
                    const [hebResult, engResult] = await Promise.all([
                        Tesseract.recognize(canvas, 'heb', {
                            tessedit_pageseg_mode: '11', // Sparse text
                        }),
                        Tesseract.recognize(canvas, 'eng', {
                            tessedit_pageseg_mode: '11',
                        })
                    ]);

                    // Choose result with higher confidence
                    const hebConf = hebResult.data.confidence || 0;
                    const engConf = engResult.data.confidence || 0;
                    let text = '';
                    let isEnglish = false;

                    if (hebConf >= engConf && hebResult.data.text.trim().length > 2) {
                        text = hebResult.data.text.trim();
                    } else if (engResult.data.text.trim().length > 2) {
                        text = engResult.data.text.trim();
                        isEnglish = true;
                    } else {
                        text = hebResult.data.text.trim() || engResult.data.text.trim();
                        isEnglish = isEnglishText(text);
                    }

                    // Extract words with improved filtering
                    const skipWords = new Set(['של', 'את', 'או', 'גם', 'עם', 'על', 'לא', 'זה', 'אם', 'כי',
                        'the', 'and', 'or', 'is', 'are', 'was', 'were', 'be', 'been', 'being',
                        'have', 'has', 'had', 'do', 'does', 'did', 'will', 'would', 'could', 'should',
                        'may', 'might', 'must', 'shall', 'can', 'need', 'dare', 'ought', 'used',
                        'a', 'an', 'to', 'for', 'of', 'in', 'on', 'at', 'by', 'with', 'from']);

                    const words = text.match(/[\u0590-\u05FFa-zA-Z]{2,}/g) || [];
                    const cleanWords = words.filter(w => w.length >= 2 && !skipWords.has(w.toLowerCase()));

                    if (cleanWords.length > 0) {
                        let productName = cleanWords.slice(0, 4).join(' ');

                        // Translate English to Hebrew
                        if (isEnglish) {
                            productName = translateProductToHebrew(productName);
                        }

                        // Fuzzy match with product database
                        const allProducts = Object.values(PRODUCTS).flat();
                        let bestMatch = null;
                        let bestScore = 0;

                        const searchTerms = productName.toLowerCase().split(/\s+/);
                        for (const product of allProducts) {
                            const productLower = product.toLowerCase();
                            let score = 0;

                            // Exact match bonus
                            if (productLower === productName.toLowerCase()) {
                                score = 100;
                            } else if (productLower.includes(productName.toLowerCase()) || productName.toLowerCase().includes(productLower)) {
                                score = 80;
                            } else {
                                // Word-based matching
                                for (const term of searchTerms) {
                                    if (productLower.includes(term)) score += 20;
                                    if (term.includes(productLower.split(' ')[0])) score += 15;
                                }
                            }

                            if (score > bestScore) {
                                bestScore = score;
                                bestMatch = product;
                            }
                        }

                        if (bestMatch && bestScore >= 30) {
                            setScannedProductName(bestMatch);
                        } else {
                            setScannedProductName(productName);
                        }
                    } else {
                        setScannedProductName('');
                    }
                } catch (err) {
                    console.error('OCR Error:', err);
                } finally {
                    setScanningPrice(false);

                    // Stop camera after scan
                    if (priceVideoRef.current?.srcObject) {
                        const tracks = priceVideoRef.current.srcObject.getTracks();
                        tracks.forEach(track => {
                            track.stop();
                            track.enabled = false;
                        });
                        priceVideoRef.current.srcObject = null;
                    }
                }
            };

            const searchPriceComparison = (productName) => {
                if (!productName) return;

                const encodedName = encodeURIComponent(productName);

                // Israeli supermarket search URLs
                const sites = [
                    { name: 'שופרסל', url: `https://www.shufersal.co.il/online/he/search?text=${encodedName}`, color: 'bg-red-500' },
                    { name: 'רמי לוי', url: `https://www.rami-levy.co.il/he/online/search?q=${encodedName}`, color: 'bg-blue-500' },
                    { name: 'ויקטורי', url: `https://www.victoryonline.co.il/search?q=${encodedName}`, color: 'bg-orange-500' },
                    { name: 'יינות ביתן', url: `https://www.ybitan.co.il/search?q=${encodedName}`, color: 'bg-purple-500' },
                    { name: 'חצי חינם', url: `https://shop.hazi-hinam.co.il/search?q=${encodedName}`, color: 'bg-green-500' }
                ];

                setPriceCompareResults(sites);
            };

            const openPriceLink = (url) => {
                window.open(url, '_blank');
            };

            // Get holiday recommendations
            const getHolidayRecommendations = () => {
                const now = new Date();
                const upcoming = ISRAELI_HOLIDAYS.filter(h => {
                    const daysUntil = Math.ceil((h.dateObj - now) / (1000 * 60 * 60 * 24));
                    return daysUntil > 0 && daysUntil <= 14;
                });

                const recommendations = {
                    'פורים': ['אוזני המן', 'שוקולד', 'ממתקים', 'משקאות', 'פירות יבשים', 'אגוזים'],
                    'פסח': ['מצות', 'יין', 'חרוסת', 'חסה', 'ביצים', 'בשר', 'תפוחי אדמה', 'בצל'],
                    'יום העצמאות': ['בשר טחון', 'נקניקיות', 'המבורגר', 'פחם', 'לחמניות', 'סלטים', 'משקאות קלים'],
                    'ל"ג בעומר': ['נקניקיות', 'בשר', 'פחם', 'תירס', 'לחמניות', 'קטשופ', 'חרדל'],
                    'שבועות': ['גבינות', 'שמנת', 'חלב', 'ביצים', 'פירות', 'עוגת גבינה'],
                    'ראש השנה': ['תפוחים', 'דבש', 'רימונים', 'דגים', 'בשר', 'יין', 'חלה'],
                    'סוכות': ['פירות', 'ירקות', 'בשר', 'עוף', 'יין'],
                    'חנוכה': ['שמן', 'תפוחי אדמה', 'בצל', 'ביצים', 'קמח', 'סופגניות', 'שוקולד מטבעות']
                };

                return upcoming.map(holiday => ({
                    ...holiday,
                    products: recommendations[holiday.name] || []
                })).filter(h => h.products.length > 0);
            };

            // AI Assistant - Smart Shopping Suggestions
            const generateAISuggestions = () => {
                setAiThinking(true);
                setAiSuggestions([]);

                // Simulate AI thinking delay
                setTimeout(() => {
                    const suggestions = [];
                    const currentItems = items.map(i => i.name.toLowerCase());
                    const currentCategories = [...new Set(items.map(i => i.category))];

                    // 1. Suggest complementary items based on what's in cart
                    const complementaryRules = {
                        'פסטה': ['רוטב עגבניות', 'גבינה צהובה', 'שמן זית'],
                        'בשר טחון': ['בצל', 'שום', 'ביצים', 'פירורי לחם'],
                        'חזה עוף': ['לימון', 'שום', 'שמן זית', 'תבלינים'],
                        'לחם': ['חמאה', 'ריבה', 'גבינה צהובה'],
                        'ביצים': ['חלב', 'גבינה צהובה', 'ירקות'],
                        'סלט': ['שמן זית', 'לימון', 'עגבניות', 'מלפפונים'],
                        'אורז': ['רוטב סויה', 'ירקות מוקפצים', 'עוף'],
                        'קפה': ['חלב', 'סוכר', 'עוגיות'],
                        'תה': ['דבש', 'לימון', 'עוגיות'],
                        'שניצל': ['תפוחי אדמה', 'סלט', 'לימון'],
                        'המבורגר': ['לחמניות', 'קטשופ', 'חרדל', 'חסה', 'עגבניות'],
                        'פיצה': ['גבינה צהובה', 'רוטב עגבניות', 'זיתים', 'פטריות']
                    };

                    items.forEach(item => {
                        const itemLower = item.name.toLowerCase();
                        Object.keys(complementaryRules).forEach(key => {
                            if (itemLower.includes(key)) {
                                complementaryRules[key].forEach(suggestion => {
                                    if (!currentItems.some(ci => ci.includes(suggestion.toLowerCase())) &&
                                        !suggestions.some(s => s.name === suggestion)) {
                                        suggestions.push({
                                            type: 'complementary',
                                            name: suggestion,
                                            reason: `משלים ל${item.name}`,
                                            icon: '🧩'
                                        });
                                    }
                                });
                            }
                        });
                    });

                    // 2. Suggest basics if missing
                    const basicItems = ['חלב', 'לחם', 'ביצים', 'חמאה', 'גבינה צהובה'];
                    basicItems.forEach(basic => {
                        if (!currentItems.some(ci => ci.includes(basic.toLowerCase()))) {
                            if (Math.random() > 0.5) { // Don't suggest all basics
                                suggestions.push({
                                    type: 'basic',
                                    name: basic,
                                    reason: 'מוצר בסיסי שכדאי שיהיה בבית',
                                    icon: '🏠'
                                });
                            }
                        }
                    });

                    // 3. Suggest based on day of week
                    const dayOfWeek = new Date().getDay();
                    if (dayOfWeek === 4 || dayOfWeek === 5) { // Thursday or Friday - Shabbat prep
                        const shabbatItems = ['חלה', 'יין', 'נרות שבת', 'עוף', 'תפוחי אדמה'];
                        shabbatItems.forEach(item => {
                            if (!currentItems.some(ci => ci.includes(item.toLowerCase()))) {
                                suggestions.push({
                                    type: 'shabbat',
                                    name: item,
                                    reason: 'לקראת שבת',
                                    icon: '🕯️'
                                });
                            }
                        });
                    }

                    // 4. Suggest based on weather/season (simple logic)
                    const month = new Date().getMonth();
                    if (month >= 5 && month <= 8) { // Summer
                        const summerItems = ['מים', 'אבטיח', 'גלידה', 'מיץ'];
                        summerItems.forEach(item => {
                            if (!currentItems.some(ci => ci.includes(item.toLowerCase())) && Math.random() > 0.6) {
                                suggestions.push({
                                    type: 'seasonal',
                                    name: item,
                                    reason: 'מתאים לקיץ',
                                    icon: '☀️'
                                });
                            }
                        });
                    } else if (month >= 11 || month <= 2) { // Winter
                        const winterItems = ['מרק', 'תה', 'דבש', 'שוקו'];
                        winterItems.forEach(item => {
                            if (!currentItems.some(ci => ci.includes(item.toLowerCase())) && Math.random() > 0.6) {
                                suggestions.push({
                                    type: 'seasonal',
                                    name: item,
                                    reason: 'מתאים לחורף',
                                    icon: '❄️'
                                });
                            }
                        });
                    }

                    // 5. Recipe suggestion based on items
                    if (currentItems.some(ci => ci.includes('פסטה')) &&
                        currentItems.some(ci => ci.includes('רוטב') || ci.includes('עגבני'))) {
                        suggestions.unshift({
                            type: 'recipe',
                            name: '🍝 אפשר להכין פסטה ברוטב עגבניות!',
                            reason: 'כל המרכיבים ברשימה',
                            icon: '👨‍🍳',
                            isRecipe: true
                        });
                    }

                    if (currentItems.some(ci => ci.includes('ביצ')) &&
                        currentItems.some(ci => ci.includes('גבינ'))) {
                        suggestions.unshift({
                            type: 'recipe',
                            name: '🍳 אפשר להכין חביתה עם גבינה!',
                            reason: 'כל המרכיבים ברשימה',
                            icon: '👨‍🍳',
                            isRecipe: true
                        });
                    }

                    // Limit suggestions
                    setAiSuggestions(suggestions.slice(0, 8));
                    setAiThinking(false);
                }, 1500);
            };

            // Add AI suggestion to cart
            const addAISuggestion = async (suggestion) => {
                if (suggestion.isRecipe) return;
                await addProduct(suggestion.name);
                setAiSuggestions(prev => prev.filter(s => s.name !== suggestion.name));
            };

            // Load saved data on mount
            React.useEffect(() => {
                const savedListsData = localStorage.getItem(`savedLists_${family?.id}`);
                if (savedListsData) setSavedLists(JSON.parse(savedListsData));

                const outOfStockData = localStorage.getItem(`outOfStock_${family?.id}`);
                if (outOfStockData) setOutOfStockItems(JSON.parse(outOfStockData));
            }, [family?.id]);

            // Update presence for real-time editing
            React.useEffect(() => {
                if (!family?.id || !user) return;

                const presenceRef = window.firestore.doc(window.db, 'families', family.id, 'presence', user.uid);

                const updatePresence = () => {
                    window.firestore.setDoc(presenceRef, {
                        name: user.displayName || user.email,
                        lastSeen: new Date(),
                        isActive: true
                    }, { merge: true });
                };

                updatePresence();
                const interval = setInterval(updatePresence, 30000);

                // Listen to other editors
                const unsubscribe = window.firestore.onSnapshot(
                    window.firestore.collection(window.db, 'families', family.id, 'presence'),
                    (snapshot) => {
                        const editors = [];
                        const now = new Date();
                        snapshot.forEach(doc => {
                            const data = doc.data();
                            if (doc.id !== user.uid && data.lastSeen) {
                                const lastSeen = data.lastSeen.toDate ? data.lastSeen.toDate() : new Date(data.lastSeen);
                                if ((now - lastSeen) < 60000) { // Active in last minute
                                    editors.push(data.name);
                                }
                            }
                        });
                        setActiveEditors(editors);
                    }
                );

                return () => {
                    clearInterval(interval);
                    unsubscribe();
                    window.firestore.updateDoc(presenceRef, { isActive: false });
                };
            }, [family?.id, user]);

            // Translate English to Hebrew
            const translateToHebrew = (text) => {
                const lowerText = text.toLowerCase().trim();
                // Direct match
                if (ENGLISH_TO_HEBREW[lowerText]) {
                    return ENGLISH_TO_HEBREW[lowerText];
                }
                // Try without 's' for plurals
                if (lowerText.endsWith('s') && ENGLISH_TO_HEBREW[lowerText.slice(0, -1)]) {
                    return ENGLISH_TO_HEBREW[lowerText.slice(0, -1)];
                }
                // Try partial match
                for (const [eng, heb] of Object.entries(ENGLISH_TO_HEBREW)) {
                    if (lowerText.includes(eng) || eng.includes(lowerText)) {
                        return heb;
                    }
                }
                return text; // Return original if no translation found
            };

            useEffect(() => {
                const savedDark = localStorage.getItem('darkMode') === 'true';
                if (savedDark) {
                    setDarkMode(true);
                    document.documentElement.classList.add('dark');
                }
            }, []);

            // Check for first-time visit and show onboarding
            useEffect(() => {
                const hasSeenOnboarding = localStorage.getItem('hasSeenOnboarding');
                if (!hasSeenOnboarding) {
                    setTimeout(() => setShowOnboarding(true), 1000);
                }
                // Load saved accessibility settings
                const savedAccessibility = localStorage.getItem('accessibilitySettings');
                if (savedAccessibility) {
                    const settings = JSON.parse(savedAccessibility);
                    setAccessibilitySettings(settings);
                    applyAccessibilitySettings(settings);
                }
            }, []);

            // Apply accessibility settings to document
            const applyAccessibilitySettings = (settings) => {
                const root = document.documentElement;
                // Font size
                root.style.fontSize = settings.fontSize === 'large' ? '120%' : settings.fontSize === 'small' ? '85%' : '100%';
                // Contrast
                if (settings.contrast === 'high') {
                    root.classList.add('high-contrast');
                    root.classList.remove('low-contrast');
                } else if (settings.contrast === 'low') {
                    root.classList.add('low-contrast');
                    root.classList.remove('high-contrast');
                } else {
                    root.classList.remove('high-contrast', 'low-contrast');
                }
                // Highlight links
                if (settings.highlightLinks) {
                    root.classList.add('highlight-links');
                } else {
                    root.classList.remove('highlight-links');
                }
                // Cursor size
                if (settings.cursorSize === 'large-black') {
                    root.classList.add('cursor-large-black');
                    root.classList.remove('cursor-large-white');
                } else if (settings.cursorSize === 'large-white') {
                    root.classList.add('cursor-large-white');
                    root.classList.remove('cursor-large-black');
                } else {
                    root.classList.remove('cursor-large-black', 'cursor-large-white');
                }
            };

            const updateAccessibility = (key, value) => {
                const newSettings = { ...accessibilitySettings, [key]: value };
                setAccessibilitySettings(newSettings);
                localStorage.setItem('accessibilitySettings', JSON.stringify(newSettings));
                applyAccessibilitySettings(newSettings);
            };

            const resetAccessibility = () => {
                const defaultSettings = { fontSize: 'normal', contrast: 'normal', highlightLinks: false, cursorSize: 'normal' };
                setAccessibilitySettings(defaultSettings);
                localStorage.setItem('accessibilitySettings', JSON.stringify(defaultSettings));
                applyAccessibilitySettings(defaultSettings);
            };

            const completeOnboarding = () => {
                localStorage.setItem('hasSeenOnboarding', 'true');
                setShowOnboarding(false);
            };

            const sendFeedback = async () => {
                if (!feedbackText.trim()) return;
                setFeedbackSending(true);
                try {
                    // Send feedback using EmailJS or similar service (hidden from user)
                    const templateParams = {
                        type: feedbackType,
                        message: feedbackText,
                        user_email: user?.email || 'לא מחובר',
                        user_name: user?.displayName || 'אנונימי'
                    };
                    // Using a simple mailto link as fallback (opens email client)
                    const subject = encodeURIComponent(`[ListNest] ${feedbackType === 'bug' ? 'דיווח על בעיה' : feedbackType === 'feature' ? 'בקשת פיצ\'ר' : 'משוב כללי'}`);
                    const body = encodeURIComponent(`סוג: ${feedbackType}\n\nהודעה:\n${feedbackText}\n\n---\nמשתמש: ${user?.displayName || 'אנונימי'}\nאימייל: ${user?.email || 'לא זמין'}`);
                    window.open(`mailto:shopinglist1979@gmail.com?subject=${subject}&body=${body}`, '_blank');
                    setFeedbackSent(true);
                    setFeedbackText('');
                    setTimeout(() => {
                        setShowFeedback(false);
                        setFeedbackSent(false);
                    }, 2000);
                } catch (error) {
                    console.error('Error sending feedback:', error);
                }
                setFeedbackSending(false);
            };

            useEffect(() => {
                if (!family || !currentList) {
                    setItems([]);
                    setLoading(false);
                    return;
                }

                const q = window.firestore.query(
                    window.firestore.collection(window.db, 'shopping-items'),
                    window.firestore.where('familyId', '==', family.id),
                    window.firestore.where('listId', '==', currentList.id)
                );

                const unsubscribe = window.firestore.onSnapshot(
                    q,
                    (snapshot) => {
                        const itemsData = [];
                        snapshot.forEach((doc) => {
                            itemsData.push({ id: doc.id, ...doc.data() });
                        });
                        // Sort client-side (newest first)
                        itemsData.sort((a, b) => {
                            const dateA = a.createdAt?.toDate?.() || new Date(0);
                            const dateB = b.createdAt?.toDate?.() || new Date(0);
                            return dateB - dateA;
                        });

                        // Check for new items added by other users
                        const currentIds = new Set(itemsData.map(item => item.id));
                        itemsData.forEach(item => {
                            if (!prevItemIdsRef.current.has(item.id) && prevItemIdsRef.current.size > 0) {
                                // New item detected
                                if (item.addedByUid && item.addedByUid !== user?.uid) {
                                    // Added by another user - show notification
                                    showProductNotification(item, item.addedBy || 'מישהו');
                                }
                            }
                        });
                        prevItemIdsRef.current = currentIds;

                        setItems(itemsData);
                        setLoading(false);
                    },
                    (error) => {
                        console.error('שגיאה בטעינת נתונים:', error);
                        setLoading(false);
                    }
                );

                loadHistory();
                return () => unsubscribe();
            }, [family, currentList]);

            const loadHistory = async () => {
                if (!family) return;
                try {
                    const historyQuery = window.firestore.query(
                        window.firestore.collection(window.db, 'shopping-history'),
                        window.firestore.where('familyId', '==', family.id)
                    );
                    const snapshot = await window.firestore.getDocs(historyQuery);
                    const historyData = [];
                    snapshot.forEach(doc => {
                        historyData.push({ id: doc.id, ...doc.data() });
                    });
                    // Sort client-side (newest first)
                    historyData.sort((a, b) => {
                        const dateA = a.completedAt?.toDate?.() || new Date(0);
                        const dateB = b.completedAt?.toDate?.() || new Date(0);
                        return dateB - dateA;
                    });
                    setHistory(historyData);
                } catch (error) {
                    console.error('שגיאה בטעינת היסטוריה:', error);
                }
            };

            // Request notification permission
            useEffect(() => {
                const requestNotificationPermission = async () => {
                    if ('Notification' in window) {
                        if (Notification.permission === 'granted') {
                            setNotificationsEnabled(true);
                        } else if (Notification.permission !== 'denied') {
                            const permission = await Notification.requestPermission();
                            setNotificationsEnabled(permission === 'granted');
                        }
                    }
                };
                requestNotificationPermission();
            }, []);

            // Show chat notification
            const showChatNotification = (message) => {
                if (!notificationsEnabled || !('Notification' in window)) return;
                if (Notification.permission !== 'granted') return;

                // Don't show if chat is open and visible
                if (showChat && document.visibilityState === 'visible') return;

                const title = `💬 ${message.senderName || 'הודעה חדשה'}`;
                const body = message.photoUrl ? '📷 שלח/ה תמונה' : message.text || 'הודעה חדשה';

                try {
                    const notification = new Notification(title, {
                        body: body,
                        icon: '🛒',
                        badge: '🛒',
                        tag: 'chat-message',
                        renotify: true,
                        vibrate: [200, 100, 200]
                    });

                    notification.onclick = () => {
                        window.focus();
                        setShowChat(true);
                        notification.close();
                    };

                    // Auto close after 5 seconds
                    setTimeout(() => notification.close(), 5000);
                } catch (error) {
                    console.error('Notification error:', error);
                }
            };

            // Show product added notification
            const showProductNotification = (item, addedByName) => {
                if (!notificationsEnabled || !('Notification' in window)) return;
                if (Notification.permission !== 'granted') return;
                if (document.visibilityState === 'visible') return; // Don't notify if app is visible

                const title = `🛒 מוצר נוסף לרשימה`;
                const body = `${addedByName} הוסיף/ה: ${item.name}`;

                try {
                    const notification = new Notification(title, {
                        body: body,
                        icon: '🛒',
                        badge: '🛒',
                        tag: 'product-added',
                        renotify: true,
                        vibrate: [200, 100, 200]
                    });

                    notification.onclick = () => {
                        window.focus();
                        notification.close();
                    };

                    setTimeout(() => notification.close(), 4000);
                } catch (error) {
                    console.error('Notification error:', error);
                }
            };

            // Mark messages as read when chat is opened
            const markMessagesAsRead = async () => {
                if (!family || !user || !showChat) return;

                const unreadMessages = chatMessages.filter(msg =>
                    msg.senderUid !== user.uid &&
                    (!msg.readBy || !msg.readBy.includes(user.uid))
                );

                for (const msg of unreadMessages) {
                    try {
                        await window.firestore.updateDoc(
                            window.firestore.doc(window.db, 'family-chat', msg.id),
                            { readBy: window.firestore.arrayUnion(user.uid) }
                        );
                    } catch (e) {
                        console.error('Error marking message as read:', e);
                    }
                }
            };

            // Mark messages as read when chat opens
            useEffect(() => {
                if (showChat && chatMessages.length > 0) {
                    markMessagesAsRead();
                }
            }, [showChat, chatMessages.length]);

            // Load chat messages
            useEffect(() => {
                if (!family) {
                    setChatMessages([]);
                    return;
                }

                const q = window.firestore.query(
                    window.firestore.collection(window.db, 'family-chat'),
                    window.firestore.where('familyId', '==', family.id)
                );

                const unsubscribe = window.firestore.onSnapshot(q, (snapshot) => {
                    const messages = [];
                    snapshot.forEach((doc) => {
                        messages.push({ id: doc.id, ...doc.data() });
                    });
                    messages.sort((a, b) => {
                        const dateA = a.createdAt?.toDate?.() || new Date(0);
                        const dateB = b.createdAt?.toDate?.() || new Date(0);
                        return dateA - dateB;
                    });

                    // Check for new messages from other users and send notification
                    if (messages.length > 0 && user) {
                        const latestMessage = messages[messages.length - 1];
                        if (latestMessage.id !== lastMessageIdRef.current &&
                            latestMessage.senderUid !== user.uid &&
                            lastMessageIdRef.current !== null) {
                            // New message from someone else
                            showChatNotification(latestMessage);
                        }
                        lastMessageIdRef.current = latestMessage.id;
                    }

                    setChatMessages(messages);
                });

                return () => unsubscribe();
            }, [family, user]);

            // Load forgotten stats
            useEffect(() => {
                if (!family) {
                    setForgottenStats({});
                    setShoppingStreak(0);
                    setAchievements([]);
                    return;
                }

                const monthKey = new Date().toISOString().slice(0, 7);
                const docRef = window.firestore.doc(window.db, 'forgotten-stats', `${family.id}_${monthKey}`);

                const unsubscribe = window.firestore.onSnapshot(docRef, (doc) => {
                    if (doc.exists()) {
                        setForgottenStats(doc.data().items || {});
                    } else {
                        setForgottenStats({});
                    }
                });

                // Load streak data
                loadShoppingStreak();

                return () => unsubscribe();
            }, [family]);

            // Recalculate achievements when stats change
            useEffect(() => {
                const newAchievements = [];

                // Only show achievements if we have some shopping history
                const essentials = ['חלב', 'לחם', 'ביצים', 'גבינה', 'עגבניות', 'מלפפונים'];

                // Check for items with zero forgets this month (only show top 3)
                let perfectCount = 0;
                essentials.forEach(item => {
                    if ((!forgottenStats[item] || forgottenStats[item] === 0) && perfectCount < 3) {
                        newAchievements.push({
                            name: `${item} Master`,
                            emoji: '🏆',
                            description: `0 פעמים שכחת ${item} החודש`
                        });
                        perfectCount++;
                    }
                });

                // Perfect week achievement
                if (shoppingStreak >= 7) {
                    newAchievements.push({
                        name: 'שבוע מושלם',
                        emoji: '⭐',
                        description: `${shoppingStreak} קניות ברצף בלי לשכוח!`
                    });
                } else if (shoppingStreak >= 3) {
                    newAchievements.push({
                        name: 'על הדרך הנכונה',
                        emoji: '🌟',
                        description: `${shoppingStreak} קניות ברצף!`
                    });
                }

                // Memory champion
                if (Object.keys(forgottenStats).length === 0 || Object.values(forgottenStats).every(v => v === 0)) {
                    newAchievements.push({
                        name: 'אלוף הזיכרון',
                        emoji: '🧠',
                        description: 'לא שכחת כלום החודש!'
                    });
                }

                setAchievements(newAchievements);
            }, [forgottenStats, shoppingStreak]);

            // Load regular items (items that appear frequently in shopping history)
            useEffect(() => {
                if (!family || history.length === 0) {
                    setRegularItems([]);
                    return;
                }

                // Count item frequency across all shopping history
                const itemCounts = {};
                history.forEach(record => {
                    record.items?.forEach(item => {
                        const name = item.name?.toLowerCase?.() || '';
                        if (name) {
                            itemCounts[name] = (itemCounts[name] || 0) + 1;
                        }
                    });
                });

                // Get items that appear in at least 3 shopping trips or 30% of trips
                const minCount = Math.max(3, Math.floor(history.length * 0.3));
                const regulars = Object.entries(itemCounts)
                    .filter(([_, count]) => count >= minCount)
                    .sort((a, b) => b[1] - a[1])
                    .slice(0, 20)
                    .map(([name, count]) => ({ name, count }));

                setRegularItems(regulars);
            }, [family, history]);

            // Calculate upcoming holidays (within next 14 days)
            useEffect(() => {
                // This is a simplified version - in production you'd use a proper Hebrew calendar library
                const checkUpcomingHolidays = () => {
                    const today = new Date();
                    const twoWeeksFromNow = new Date(today.getTime() + 14 * 24 * 60 * 60 * 1000);

                    // For demo purposes, we'll show random holiday reminders occasionally
                    // In production, you'd integrate with a Hebrew calendar API
                    const savedReminders = JSON.parse(localStorage.getItem('holidayReminders') || '[]');
                    const lastCheck = localStorage.getItem('lastHolidayCheck');
                    const now = Date.now();

                    // Check once per day
                    if (!lastCheck || now - parseInt(lastCheck) > 24 * 60 * 60 * 1000) {
                        localStorage.setItem('lastHolidayCheck', now.toString());
                        // In a real implementation, calculate actual Hebrew dates here
                    }

                    setUpcomingHolidays(savedReminders);
                };

                checkUpcomingHolidays();
            }, []);

            // Add regular items to cart
            const addRegularItems = async () => {
                const currentItemNames = items.map(i => i.name.toLowerCase());
                const itemsToAdd = regularItems.filter(r => !currentItemNames.includes(r.name.toLowerCase()));

                for (const item of itemsToAdd) {
                    // Find category for the item
                    let category = 'other';
                    for (const [cat, products] of Object.entries(PRODUCTS)) {
                        if (products.some(p => p.toLowerCase() === item.name.toLowerCase())) {
                            category = cat;
                            break;
                        }
                    }

                    const unit = CATEGORIES[category]?.unit || 'יח\'';

                    await window.firestore.addDoc(window.firestore.collection(window.db, 'shopping-items'), {
                        name: item.name.charAt(0).toUpperCase() + item.name.slice(1),
                        category,
                        quantity: 1,
                        unit,
                        purchased: false,
                        addedBy: user.displayName || user.email,
                        addedByUid: user.uid,
                        createdAt: new Date(),
                        updatedAt: new Date(),
                        familyId: family.id,
                        listId: currentList.id,
                        isRegular: true
                    });
                }

                if (itemsToAdd.length > 0) {
                    alert(`נוספו ${itemsToAdd.length} מוצרים קבועים לרשימה! 🎉`);
                } else {
                    alert('כל המוצרים הקבועים כבר נמצאים ברשימה');
                }

                setShowRegulars(false);
            };

            // Load shopping streak
            const loadShoppingStreak = async () => {
                if (!family) return;

                try {
                    const streakRef = window.firestore.doc(window.db, 'shopping-streaks', family.id);
                    const streakDoc = await window.firestore.getDoc(streakRef);

                    if (streakDoc.exists()) {
                        const data = streakDoc.data();
                        const lastDate = data.lastShoppingDate?.toDate?.() || new Date(0);
                        const daysSinceLast = Math.floor((new Date() - lastDate) / (1000 * 60 * 60 * 24));

                        // Reset streak if more than 2 days passed
                        if (daysSinceLast > 2) {
                            setShoppingStreak(0);
                        } else {
                            setShoppingStreak(data.streak || 0);
                        }
                    }
                } catch (error) {
                    console.error('Error loading streak:', error);
                }
            };

            // Update streak on successful shopping
            const updateShoppingStreak = async (hadForgottenItems) => {
                if (!family) return;

                try {
                    const streakRef = window.firestore.doc(window.db, 'shopping-streaks', family.id);
                    const streakDoc = await window.firestore.getDoc(streakRef);

                    let newStreak = 1;
                    if (streakDoc.exists() && !hadForgottenItems) {
                        const data = streakDoc.data();
                        const lastDate = data.lastShoppingDate?.toDate?.() || new Date(0);
                        const daysSinceLast = Math.floor((new Date() - lastDate) / (1000 * 60 * 60 * 24));

                        if (daysSinceLast <= 2) {
                            newStreak = (data.streak || 0) + 1;
                        }
                    } else if (hadForgottenItems) {
                        newStreak = 0;
                    }

                    await window.firestore.setDoc(streakRef, {
                        familyId: family.id,
                        streak: newStreak,
                        lastShoppingDate: new Date(),
                        updatedAt: new Date()
                    });

                    setShoppingStreak(newStreak);
                } catch (error) {
                    console.error('Error updating streak:', error);
                }
            };

            // Get playful message for forgotten count
            const getForgottenMessage = (count) => {
                if (count === 0) return { emoji: '👌', text: 'מושלם!' };
                if (count === 1) return { emoji: '😅', text: 'קרה פעם אחת' };
                if (count === 2) return { emoji: '🙈', text: 'אופס, שוב?' };
                if (count === 3) return { emoji: '😬', text: 'שלוש פעמים...' };
                if (count >= 4) return { emoji: '🤦', text: 'בואו נשים תזכורת!' };
                return { emoji: '📊', text: `${count} פעמים` };
            };

            // Voice recognition functions
            const startListening = () => {
                if (isListening) return;

                // Stop any existing recognition
                if (recognitionRef.current) {
                    try { recognitionRef.current.abort(); } catch(e) {}
                }

                // Clear previous timeout
                if (voiceTimeoutRef.current) {
                    clearTimeout(voiceTimeoutRef.current);
                }

                setVoiceTranscript('');
                setVoiceStatus(voiceLang === 'en-US' ? 'Starting...' : 'מתחיל...');
                setIsListening(true);

                // Create fresh recognition instance
                const recognition = createRecognition();
                if (!recognition) {
                    setIsListening(false);
                    setVoiceStatus('הדפדפן לא תומך בזיהוי קול');
                    return;
                }

                recognitionRef.current = recognition;

                try {
                    recognition.start();

                    // Auto-stop after 10 seconds if no result
                    voiceTimeoutRef.current = setTimeout(() => {
                        if (isListening) {
                            setVoiceStatus(voiceLang === 'en-US' ? 'Timeout - try again' : 'זמן ההאזנה נגמר - נסה שוב');
                            try { recognition.stop(); } catch(e) {}
                            setIsListening(false);
                        }
                    }, 10000);

                } catch (e) {
                    console.error('Failed to start recognition:', e);
                    setIsListening(false);
                    setVoiceStatus('שגיאה בהפעלת זיהוי קול: ' + e.message);
                }
            };

            const stopListening = () => {
                if (voiceTimeoutRef.current) {
                    clearTimeout(voiceTimeoutRef.current);
                }
                if (recognitionRef.current) {
                    try {
                        recognitionRef.current.stop();
                    } catch(e) {}
                }
                setIsListening(false);
                setVoiceStatus(voiceLang === 'en-US' ? 'Stopped' : 'הופסק');
            };

            const processVoiceCommand = async (transcript, lang = 'he-IL') => {
                const text = transcript.trim().toLowerCase();
                if (!text) return;

                const isEnglish = lang === 'en-US';
                let itemPatterns;

                if (isEnglish) {
                    // Parse English - remove common phrases and split by "and", commas
                    itemPatterns = text
                        .replace(/add|buy|get|i need|i want|we need|please|some|the|a |an /gi, '')
                        .split(/\s*(?:,|and|&)\s*/)
                        .map(item => item.trim())
                        .filter(item => item.length > 1)
                        .map(item => translateToHebrew(item)); // Translate each item
                } else {
                    // Parse Hebrew - remove common phrases and split by "ו" (and), commas
                    itemPatterns = text
                        .replace(/תוסיף|הוסף|צריך|צריכה|קנה|קני|תקנה|תקני|אני רוצה|אני צריך|אני צריכה/g, '')
                        .split(/\s*(?:,|ו(?:גם)?|וגם)\s*/)
                        .map(item => item.trim())
                        .filter(item => item.length > 1);
                }

                if (itemPatterns.length === 0) {
                    // Try as single item
                    let singleItem;
                    if (isEnglish) {
                        singleItem = translateToHebrew(text.replace(/add|buy|get|i need|i want|we need|please|some|the|a |an /gi, '').trim());
                    } else {
                        singleItem = text.replace(/תוסיף|הוסף|צריך|צריכה|קנה|קני|תקנה|תקני|אני רוצה|אני צריך|אני צריכה/g, '').trim();
                    }
                    if (singleItem.length > 1) {
                        itemPatterns.push(singleItem);
                    }
                }

                let addedCount = 0;
                for (const itemText of itemPatterns) {
                    // Try to find matching product in database
                    let matchedProduct = null;
                    let matchedCategory = 'other';

                    for (const [cat, products] of Object.entries(PRODUCTS)) {
                        const found = products.find(p =>
                            p.includes(itemText) || itemText.includes(p) ||
                            p.split(' ').some(word => itemText.includes(word) && word.length > 2)
                        );
                        if (found) {
                            matchedProduct = found;
                            matchedCategory = cat;
                            break;
                        }
                    }

                    const productName = matchedProduct || itemText;

                    // Check if already in list
                    const existing = items.find(item =>
                        item.name === productName ||
                        item.name.includes(itemText) ||
                        itemText.includes(item.name)
                    );

                    try {
                        if (existing && !existing.purchased) {
                            await window.firestore.updateDoc(
                                window.firestore.doc(window.db, 'shopping-items', existing.id),
                                { quantity: existing.quantity + 1, updatedAt: new Date() }
                            );
                        } else {
                            await window.firestore.addDoc(window.firestore.collection(window.db, 'shopping-items'), {
                                name: productName,
                                category: matchedCategory,
                                quantity: 1,
                                purchased: false,
                                familyId: family.id,
                                listId: currentList.id,
                                addedBy: user.displayName || user.email,
                                addedByUid: user.uid,
                                note: '🎤 נוסף בקול',
                                createdAt: new Date()
                            });
                        }
                        addedCount++;
                    } catch (error) {
                        console.error('Error adding voice item:', error);
                    }
                }

                if (addedCount > 0) {
                    await logActivity('voice_items_added', { count: addedCount, transcript: transcript });
                    // Visual/audio feedback
                    if (navigator.vibrate) navigator.vibrate(100);
                }

                setVoiceTranscript('');
            };

            // Send chat message
            const sendChatMessage = async (text, photoUrl = null) => {
                if (!text.trim() && !photoUrl) return;
                try {
                    await window.firestore.addDoc(window.firestore.collection(window.db, 'family-chat'), {
                        text: text.trim(),
                        photoUrl: photoUrl,
                        senderName: user.displayName || user.email,
                        senderUid: user.uid,
                        familyId: family.id,
                        createdAt: window.firestore.serverTimestamp()
                    });
                    setChatInput('');
                    setCapturedPhoto(null);
                } catch (error) {
                    console.error('שגיאה בשליחת הודעה:', error);
                }
            };

            // Camera functions
            const startCamera = async () => {
                setShowCamera(true);
                try {
                    const stream = await navigator.mediaDevices.getUserMedia({
                        video: { facingMode: 'environment' }
                    });
                    if (videoRef.current) {
                        videoRef.current.srcObject = stream;
                    }
                } catch (error) {
                    console.error('שגיאה בפתיחת מצלמה:', error);
                    alert('לא ניתן לגשת למצלמה');
                    setShowCamera(false);
                }
            };

            const capturePhoto = () => {
                if (videoRef.current && canvasRef.current) {
                    const canvas = canvasRef.current;
                    const video = videoRef.current;
                    canvas.width = video.videoWidth;
                    canvas.height = video.videoHeight;
                    const ctx = canvas.getContext('2d');
                    ctx.drawImage(video, 0, 0);
                    const photoData = canvas.toDataURL('image/jpeg', 0.8);
                    setCapturedPhoto(photoData);
                    stopCamera();
                }
            };

            const stopCamera = () => {
                if (videoRef.current && videoRef.current.srcObject) {
                    const tracks = videoRef.current.srcObject.getTracks();
                    tracks.forEach(track => {
                        track.stop();
                        track.enabled = false;
                    });
                    videoRef.current.srcObject = null;
                }
                setShowCamera(false);
            };

            // Handle receipt photo capture
            const handleReceiptCapture = async (e) => {
                const file = e.target.files?.[0];
                if (!file) return;

                setUploadingReceipt(true);
                try {
                    // Compress and convert to base64
                    const reader = new FileReader();
                    reader.onload = async (event) => {
                        const img = new Image();
                        img.onload = () => {
                            // Create canvas for compression
                            const canvas = document.createElement('canvas');
                            const maxSize = 800;
                            let width = img.width;
                            let height = img.height;

                            // Scale down if too large
                            if (width > height && width > maxSize) {
                                height = (height * maxSize) / width;
                                width = maxSize;
                            } else if (height > maxSize) {
                                width = (width * maxSize) / height;
                                height = maxSize;
                            }

                            canvas.width = width;
                            canvas.height = height;
                            const ctx = canvas.getContext('2d');
                            ctx.drawImage(img, 0, 0, width, height);

                            // Get compressed base64
                            const compressedData = canvas.toDataURL('image/jpeg', 0.7);
                            setReceiptPhoto(compressedData);
                            setUploadingReceipt(false);
                        };
                        img.src = event.target.result;
                    };
                    reader.readAsDataURL(file);
                } catch (error) {
                    console.error('Error processing receipt:', error);
                    setUploadingReceipt(false);
                    alert('שגיאה בעיבוד התמונה');
                }

                // Clear the input
                e.target.value = '';
            };

            // Enhanced toggle purchased with animation
            const togglePurchasedWithAnimation = async (id, currentStatus, event) => {
                if (!currentStatus) {
                    // Adding to purchased - show confetti!
                    const rect = event?.currentTarget?.getBoundingClientRect();
                    if (rect) {
                        setConfetti({ x: rect.left + rect.width / 2, y: rect.top + rect.height / 2 });
                        setTimeout(() => setConfetti(null), 600);
                    }
                    setAnimatingItems(prev => new Set([...prev, id]));
                    setTimeout(() => {
                        setAnimatingItems(prev => {
                            const newSet = new Set(prev);
                            newSet.delete(id);
                            return newSet;
                        });
                    }, 400);
                }
                await togglePurchased(id, currentStatus);
            };

            const handleLogout = async () => {
                try {
                    await window.firebaseAuth.signOut(window.auth);
                } catch (error) {
                    console.error('שגיאה בהתנתקות:', error);
                }
            };

            const toggleDarkMode = () => {
                const newMode = !darkMode;
                setDarkMode(newMode);
                localStorage.setItem('darkMode', String(newMode));
                document.documentElement.classList.toggle('dark');
            };

            // Calendar helper functions
            const getCalendarDays = (date) => {
                const year = date.getFullYear();
                const month = date.getMonth();
                const firstDay = new Date(year, month, 1);
                const lastDay = new Date(year, month + 1, 0);
                const daysInMonth = lastDay.getDate();
                const startingDay = firstDay.getDay();

                const days = [];
                // Add empty cells for days before the first day of the month
                for (let i = 0; i < startingDay; i++) {
                    days.push(null);
                }
                // Add days of the month
                for (let i = 1; i <= daysInMonth; i++) {
                    days.push(new Date(year, month, i));
                }
                return days;
            };

            const getHolidayForDate = (date) => {
                if (!date) return null;
                return ISRAELI_HOLIDAYS.find(h => {
                    const hDate = h.dateObj;
                    return hDate.getDate() === date.getDate() &&
                           hDate.getMonth() === date.getMonth() &&
                           hDate.getFullYear() === date.getFullYear();
                });
            };

            const formatDateForGoogle = (date) => {
                return date.toISOString().replace(/-|:|\.\d+/g, '').slice(0, 8);
            };

            const addToGoogleCalendar = (holiday, daysBefore = 7) => {
                const reminderDate = new Date(holiday.dateObj);
                reminderDate.setDate(reminderDate.getDate() - daysBefore);

                const endDate = new Date(reminderDate);
                endDate.setDate(endDate.getDate() + 1);

                const title = encodeURIComponent(`🛒 קניות לפני ${holiday.name}`);
                const details = encodeURIComponent(`${holiday.reminder}\n\nתזכורת מאפליקציית ListNest`);
                const startStr = formatDateForGoogle(reminderDate);
                const endStr = formatDateForGoogle(endDate);

                const url = `https://calendar.google.com/calendar/render?action=TEMPLATE&text=${title}&dates=${startStr}/${endStr}&details=${details}`;
                window.open(url, '_blank');
            };

            const downloadICSFile = (holiday, daysBefore = 7) => {
                const reminderDate = new Date(holiday.dateObj);
                reminderDate.setDate(reminderDate.getDate() - daysBefore);

                const formatICSDate = (d) => d.toISOString().replace(/-|:|\.\d+/g, '').slice(0, 8);

                const endDate = new Date(reminderDate);
                endDate.setDate(endDate.getDate() + 1);

                const icsContent = `BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//ListNest//Shopping Reminder//HE
BEGIN:VEVENT
DTSTART;VALUE=DATE:${formatICSDate(reminderDate)}
DTEND;VALUE=DATE:${formatICSDate(endDate)}
SUMMARY:🛒 קניות לפני ${holiday.name}
DESCRIPTION:${holiday.reminder}\\n\\nתזכורת מאפליקציית ListNest
END:VEVENT
END:VCALENDAR`;

                const blob = new Blob([icsContent], { type: 'text/calendar;charset=utf-8' });
                const url = URL.createObjectURL(blob);
                const link = document.createElement('a');
                link.href = url;
                link.download = `shopping-reminder-${holiday.name}.ics`;
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
                URL.revokeObjectURL(url);
            };

            const HEBREW_MONTHS = ['ינואר', 'פברואר', 'מרץ', 'אפריל', 'מאי', 'יוני', 'יולי', 'אוגוסט', 'ספטמבר', 'אוקטובר', 'נובמבר', 'דצמבר'];
            const HEBREW_DAYS = ['א׳', 'ב׳', 'ג׳', 'ד׳', 'ה׳', 'ו׳', 'ש׳'];

            // Smart category detection with partial matching
            const detectCategory = (productName) => {
                const name = productName.trim().toLowerCase();

                // First try exact match
                for (const [cat, products] of Object.entries(PRODUCTS)) {
                    if (products.some(p => p === productName || p.toLowerCase() === name)) {
                        return cat;
                    }
                }

                // Then try partial match - product name contains or is contained in known product
                for (const [cat, products] of Object.entries(PRODUCTS)) {
                    if (products.some(p => p.includes(productName) || productName.includes(p) ||
                        p.toLowerCase().includes(name) || name.includes(p.toLowerCase()))) {
                        return cat;
                    }
                }

                // Keyword-based detection for common items
                const keywords = {
                    fruits: ['תפוח', 'בננ', 'עגבני', 'מלפפון', 'גזר', 'בצל', 'שום', 'פלפל', 'חס', 'ירק', 'פרי', 'לימון', 'תפוז', 'ענב', 'אבוקדו', 'תות', 'אבטיח', 'מלון', 'תפו"א', 'תפוא', 'בטטה', 'קישוא', 'חציל', 'ברוקולי', 'כרוב', 'סלק', 'פטריות'],
                    meat: ['בשר', 'עוף', 'חזה', 'שניצל', 'כרעיים', 'כנפיים', 'סלמון', 'דג', 'טונה', 'פילה', 'קציצ', 'המבורגר', 'נקניק', 'אנטריקוט', 'צלעות', 'טחון', 'כבד', 'הודו'],
                    dairy: ['חלב', 'גבינ', 'יוגורט', 'ביצ', 'קוטג', 'שמנת', 'חמאה', 'לבן', 'מוצרלה', 'צפתית'],
                    bakery: ['לחם', 'חלה', 'פיתה', 'לחמני', 'בגט', 'עוגי', 'קרואסון', 'מאפה', 'בורקס'],
                    drinks: ['מים', 'קולה', 'פפסי', 'מיץ', 'סודה', 'ספרייט', 'פאנטה', 'משקה'],
                    wine: ['יין', 'בירה', 'וודקה', 'וויסקי', 'ערק', 'שמפניה', 'אלכוהול'],
                    cleaning: ['נייר טואלט', 'אקונומיקה', 'סבון כלים', 'אבקת כביסה', 'מנקה', 'שקיות אשפה', 'ספוג', 'מטלית'],
                    spices: ['מלח', 'פלפל', 'פפריקה', 'כורכום', 'קינמון', 'אורגנו', 'בזיליקום', 'תבלין', 'סוכר', 'קמח'],
                    canned: ['אורז', 'פסטה', 'שימור', 'טונה', 'תירס', 'זית', 'רסק', 'שמן', 'חומוס', 'טחינה', 'ריבה', 'דבש'],
                    snacks: ['במבה', 'ביסלי', 'שוקולד', 'חטיף', 'עוגיות', 'ממתק', 'צ\'יפס', 'פופקורן'],
                    frozen: ['גלידה', 'קפוא', 'שלגון', 'ארטיק', 'בצק'],
                    hygiene: ['שמפו', 'סבון', 'משחת שיניים', 'דאודורנט', 'מברשת', 'מגבון', 'קרם'],
                    coffee: ['קפה', 'תה', 'נס', 'קפסול'],
                    baby: ['חיתול', 'תינוק', 'פמפרס'],
                    pets: ['כלב', 'חתול', 'מזון לחיות']
                };

                for (const [cat, words] of Object.entries(keywords)) {
                    if (words.some(word => name.includes(word) || productName.includes(word))) {
                        return cat;
                    }
                }

                return 'canned'; // Default fallback to general groceries
            };

            // Check if product is a cheese that should be in grams
            const isCheeseInGrams = (productName) => {
                const cheeseKeywords = [
                    'גבינה צהובה', 'צהובה', 'שמנת', 'בולגרית', 'פרמזן', 'צפתית',
                    'קשקבל', 'רוקפור', 'גאודה', 'ברי', 'אמנטל', 'חלומי', 'גבינת שמנת',
                    'מוצרלה', 'קממבר', 'עמק', 'גלבוע', 'פילדלפיה', 'לאבנה', 'ריקוטה',
                    'מסקרפונה', 'גבינת עזים', 'גבינה לבנה'
                ];
                const nameLower = productName.toLowerCase();
                return cheeseKeywords.some(cheese => nameLower.includes(cheese));
            };

            // Open quantity selector before adding product
            const addProduct = (product) => {
                const category = selectedCategory || detectCategory(product);
                let unit = CATEGORIES[category]?.unit || 'יח\'';
                const unitOptions = CATEGORIES[category]?.unitOptions || ['יח\''];

                // Override unit for cheese products to grams
                if (category === 'dairy' && isCheeseInGrams(product)) {
                    unit = 'גרם';
                }

                setSelectedProduct({ name: product, category, unitOptions });
                setSelectedQuantity(1); // Always start at 1, user can adjust
                setSelectedUnit(unit);
                setShowQuantitySelector(true);
            };

            // Actually add product with selected quantity
            const addProductWithQuantity = async () => {
                if (!selectedProduct) return;

                try {
                    const { name: product, category } = selectedProduct;
                    const existing = items.find(item => item.name === product && !item.purchased);

                    if (existing) {
                        // Add to existing quantity - extract number if string
                        let existingNum = existing.quantity;
                        if (typeof existingNum === 'string') {
                            const numMatch = existingNum.match(/^([\d.]+)/);
                            existingNum = numMatch ? parseFloat(numMatch[1]) : 1;
                        }
                        const newQty = (existingNum || 0) + selectedQuantity;

                        const updateData = {
                                quantity: newQty,
                                unit: selectedUnit,
                                updatedAt: new Date(),
                                updatedBy: user.displayName || user.email
                            };
                        if (selectedNote) {
                            updateData.note = existing.note ? `${existing.note}, ${selectedNote}` : selectedNote;
                        }
                        await window.firestore.updateDoc(
                            window.firestore.doc(window.db, 'shopping-items', existing.id),
                            updateData
                        );
                        await logActivity('quantity_changed', { itemName: product });
                    } else {
                        await window.firestore.addDoc(window.firestore.collection(window.db, 'shopping-items'), {
                            name: product,
                            category: category,
                            quantity: selectedQuantity,
                            unit: selectedUnit,
                            purchased: false,
                            familyId: family.id,
                            listId: currentList.id,
                            addedBy: user.displayName || user.email,
                            addedByUid: user.uid,
                            note: selectedNote || '',
                            createdAt: new Date()
                        });
                        await logActivity('item_added', { itemName: product });
                    }

                    setSearchTerm('');
                    setShowQuantitySelector(false);
                    setSelectedNote('');
                    setSelectedProduct(null);
                } catch (error) {
                    console.error('שגיאה בהוספת מוצר:', error);
                    alert('שגיאה בהוספת המוצר. נסה שוב.');
                }
            };

            const togglePurchased = async (id, currentStatus) => {
                try {
                    const item = items.find(i => i.id === id);

                    // Conflict detection: Check if item was already marked by someone else
                    const docRef = window.firestore.doc(window.db, 'shopping-items', id);
                    const freshDoc = await window.firestore.getDoc(docRef);

                    if (freshDoc.exists()) {
                        const freshData = freshDoc.data();

                        // If someone else already marked it as purchased
                        if (!currentStatus && freshData.purchased && freshData.purchasedBy !== (user.displayName || user.email)) {
                            // Auto-unified: item already purchased by someone else
                            console.log(`Smart conflict resolved: ${item?.name} already marked by ${freshData.purchasedBy}`);
                            return; // No need to update, already done
                        }
                    }

                    await window.firestore.updateDoc(docRef, {
                        purchased: !currentStatus,
                        purchasedBy: !currentStatus ? (user.displayName || user.email) : null,
                        purchasedByUid: !currentStatus ? user.uid : null,
                        purchasedAt: !currentStatus ? new Date() : null
                    });

                    if (!currentStatus && item) {
                        await logActivity('item_purchased', { itemName: item.name });
                    }
                } catch (error) {
                    console.error('שגיאה בעדכון מוצר:', error);
                }
            };

            const updateQuantity = async (id, newQuantity) => {
                try {
                    if (newQuantity < 1) {
                        setShowDeleteConfirm(id);
                    } else {
                        const item = items.find(i => i.id === id);
                        await window.firestore.updateDoc(window.firestore.doc(window.db, 'shopping-items', id), {
                            quantity: newQuantity,
                            updatedAt: new Date(),
                            updatedBy: user.displayName || user.email
                        });
                        if (item) {
                            await logActivity('quantity_changed', { itemName: item.name });
                        }
                    }
                } catch (error) {
                    console.error('שגיאה בעדכון כמות:', error);
                }
            };

            // Inline edit item name
            const startEditingItem = (item) => {
                setEditingItemId(item.id);
                setEditingItemName(item.name);
            };

            const saveItemName = async () => {
                if (!editingItemId || !editingItemName.trim()) {
                    setEditingItemId(null);
                    return;
                }
                try {
                    await window.firestore.updateDoc(window.firestore.doc(window.db, 'shopping-items', editingItemId), {
                        name: editingItemName.trim(),
                        updatedAt: new Date(),
                        updatedBy: user.displayName || user.email
                    });
                } catch (error) {
                    console.error('שגיאה בעדכון שם:', error);
                }
                setEditingItemId(null);
            };

            const deleteItem = async (id, skipAnimation = false) => {
                try {
                    const item = items.find(i => i.id === id);

                    // Add exit animation
                    if (!skipAnimation) {
                        setExitingItems(prev => new Set([...prev, id]));
                        await new Promise(resolve => setTimeout(resolve, 280));
                    }

                    await window.firestore.deleteDoc(window.firestore.doc(window.db, 'shopping-items', id));
                    setShowDeleteConfirm(null);
                    setExitingItems(prev => { const next = new Set(prev); next.delete(id); return next; });

                    if (item) {
                        await logActivity('item_deleted', { itemName: item.name });
                        if (!item.purchased) {
                            await trackForgottenItem(item.name);
                        }
                    }
                } catch (error) {
                    console.error('שגיאה במחיקת מוצר:', error);
                    setExitingItems(prev => { const next = new Set(prev); next.delete(id); return next; });
                }
            };

            // Delete all items from the shopping list
            const deleteAllItems = async () => {
                try {
                    const itemCount = items.length;
                    // Delete all items using Promise.all for parallel deletion
                    await Promise.all(
                        items.map(item =>
                            window.firestore.deleteDoc(window.firestore.doc(window.db, 'shopping-items', item.id))
                        )
                    );
                    await logActivity('all_items_deleted', { itemCount });
                    setShowDeleteAllConfirm(false);
                } catch (error) {
                    console.error('Error deleting all items:', error);
                    setShowDeleteAllConfirm(false);
                }
            };

            // Postpone item - moves it to the end of the list
            const postponeItem = async (id) => {
                try {
                    const item = items.find(i => i.id === id);
                    await window.firestore.updateDoc(window.firestore.doc(window.db, 'shopping-items', id), {
                        postponedAt: new Date(),
                        postponedBy: user.displayName || user.email
                    });
                    if (item) {
                        await logActivity('item_postponed', { itemName: item.name });
                        // Track as forgotten
                        if (!item.purchased) {
                            await trackForgottenItem(item.name);
                        }
                    }
                } catch (error) {
                    console.error('שגיאה בדחיית מוצר:', error);
                }
            };

            // Track forgotten items
            const trackForgottenItem = async (itemName) => {
                try {
                    const monthKey = new Date().toISOString().slice(0, 7); // YYYY-MM
                    const docRef = window.firestore.doc(window.db, 'forgotten-stats', `${family.id}_${monthKey}`);
                    const docSnap = await window.firestore.getDoc(docRef);

                    if (docSnap.exists()) {
                        const data = docSnap.data();
                        const items = data.items || {};
                        items[itemName] = (items[itemName] || 0) + 1;
                        await window.firestore.updateDoc(docRef, { items, updatedAt: new Date() });
                    } else {
                        await window.firestore.setDoc(docRef, {
                            familyId: family.id,
                            month: monthKey,
                            items: { [itemName]: 1 },
                            createdAt: new Date(),
                            updatedAt: new Date()
                        });
                    }
                } catch (error) {
                    console.error('Error tracking forgotten item:', error);
                }
            };

            const updateItemNote = async (itemId, note) => {
                try {
                    const item = items.find(i => i.id === itemId);
                    await window.firestore.updateDoc(window.firestore.doc(window.db, 'shopping-items', itemId), {
                        note: note,
                        updatedAt: new Date(),
                        updatedBy: user.displayName || user.email
                    });
                    if (item && note) {
                        await logActivity('note_added', { itemName: item.name });
                    }
                } catch (error) {
                    console.error('שגיאה בעדכון הערה:', error);
                }
            };

            const finishShopping = async () => {
                if (!totalAmount || parseFloat(totalAmount) <= 0) {
                    alert('נא להזין סכום תקין');
                    return;
                }

                const purchasedItems = items.filter(item => item.purchased);
                const unpurchasedItems = items.filter(item => !item.purchased);

                if (purchasedItems.length === 0) {
                    alert('לא נבחרו מוצרים שנקנו');
                    return;
                }

                try {
                    // Track forgotten items (unpurchased items left behind)
                    const hadForgottenItems = unpurchasedItems.length > 0;
                    for (const item of unpurchasedItems) {
                        await trackForgottenItem(item.name);
                    }

                    await window.firestore.addDoc(window.firestore.collection(window.db, 'shopping-history'), {
                        items: purchasedItems,
                        totalAmount: parseFloat(totalAmount),
                        completedAt: new Date(),
                        completedBy: user.displayName || user.email,
                        completedByUid: user.uid,
                        familyId: family.id,
                        listId: currentList.id,
                        forgottenCount: unpurchasedItems.length,
                        receiptPhoto: receiptPhoto || null
                    });

                    for (const item of purchasedItems) {
                        await window.firestore.deleteDoc(window.firestore.doc(window.db, 'shopping-items', item.id));
                    }

                    // Update shopping streak
                    await updateShoppingStreak(hadForgottenItems);

                    setShowFinishShopping(false);
                    setTotalAmount('');
                    setReceiptPhoto(null);
                    loadHistory();

                    // Show achievement celebration if perfect shopping
                    if (!hadForgottenItems) {
                        setTimeout(() => {
                            alert('🎉 קנייה מושלמת! לא שכחת כלום!');
                        }, 500);
                    }
                } catch (error) {
                    console.error('שגיאה בסיום קנייה:', error);
                    alert('שגיאה בשמירת הקנייה. נסה שוב.');
                }
            };

            const exportToWhatsApp = async () => {
                const unpurchased = items.filter(item => !item.purchased);
                let text = '🛒 רשימת קניות:\n\n';
                Object.entries(CATEGORIES).forEach(([key, cat]) => {
                    const categoryItems = unpurchased.filter(item => item.category === key);
                    if (categoryItems.length > 0) {
                        text += `${cat.icon} ${getCategoryName(key)}:\n`;
                        categoryItems.forEach(item => {
                            text += `  ✓ ${item.name} (${item.quantity})\n`;
                        });
                        text += '\n';
                    }
                });

                // Use native share API if available (better for PWA)
                if (navigator.share) {
                    try {
                        await navigator.share({
                            title: 'רשימת קניות',
                            text: text
                        });
                    } catch (err) {
                        // User cancelled or error - fallback to clipboard
                        if (err.name !== 'AbortError') {
                            await navigator.clipboard.writeText(text);
                            alert('הרשימה הועתקה ללוח!');
                        }
                    }
                } else {
                    // Fallback: copy to clipboard
                    try {
                        await navigator.clipboard.writeText(text);
                        alert('הרשימה הועתקה ללוח! הדבק בווטסאפ או בכל אפליקציה אחרת.');
                    } catch (err) {
                        // Last fallback: open WhatsApp
                        window.open(`https://wa.me/?text=${encodeURIComponent(text)}`, '_blank');
                    }
                }
            };

            if (loading) {
                return (
                    <div className="min-h-screen gradient-bg flex items-center justify-center">
                        <div className="text-center">
                            <div className="text-6xl mb-4 float">🛒</div>
                            <div className="text-xl text-white font-medium">טוען...</div>
                            <div className="mt-4 w-32 h-1 bg-white/20 rounded-full overflow-hidden mx-auto">
                                <div className="h-full w-1/2 progress-animate rounded-full"></div>
                            </div>
                        </div>
                    </div>
                );
            }

            const filteredItems = items;
            const groupedItems = filteredItems.reduce((acc, item) => {
                if (!acc[item.category]) acc[item.category] = [];
                acc[item.category].push(item);
                return acc;
            }, {});

            const totalItems = items.length;
            const purchasedCount = items.filter(item => item.purchased).length;

            // WCAG 4.1.3 - Announce status messages to screen readers
            const announceToScreenReader = (message, priority = 'polite') => {
                const region = document.getElementById(priority === 'assertive' ? 'aria-live-assertive' : 'aria-live-region');
                if (region) {
                    region.textContent = '';
                    setTimeout(() => { region.textContent = message; }, 100);
                }
            };

            return (
                <div className="min-h-screen gradient-bg p-4 pb-20" role="application" aria-label="ListNest - רשימת קניות">
                    {/* Sync Status Indicator */}
                    {(pendingOperations.length > 0 || !isOnline) && (
                        <div className={`sync-indicator ${!isOnline ? 'offline' : syncStatus === 'syncing' ? 'syncing' : 'online'}`}>
                            {!isOnline ? (
                                <><span>🔴</span><span>אופליין</span>{pendingOperations.length > 0 && <span>({pendingOperations.length})</span>}</>
                            ) : syncStatus === 'syncing' ? (
                                <><span className="sync-spin">🔄</span><span>מסנכרן...</span></>
                            ) : (
                                <><span>🟡</span><span>ממתין ({pendingOperations.length})</span></>
                            )}
                        </div>
                    )}

                    {/* Main content landmark for skip link */}
                    <main id="main-content" role="main" aria-label="תוכן ראשי">

                    {showDeleteConfirm && (
                        <div className="fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4">
                            <div className="glass rounded-3xl p-8 max-w-sm w-full shadow-2xl">
                                <div className="text-5xl text-center mb-4">🗑️</div>
                                <h2 className="text-xl font-bold text-center text-gradient mb-2">מחיקת מוצר</h2>
                                <p className="text-gray-600 dark:text-gray-300 mb-6 text-center">האם אתה בטוח שברצונך למחוק מוצר זה?</p>
                                <div className="flex gap-3">
                                    <button onClick={() => deleteItem(showDeleteConfirm)}
                                        className="flex-1 bg-gradient-to-r from-red-500 to-pink-500 text-white px-6 py-3 rounded-xl hover:shadow-lg hover:scale-105 font-semibold transition-all">
                                        מחק
                                    </button>
                                    <button onClick={() => setShowDeleteConfirm(null)}
                                        className="flex-1 px-6 py-3 glass border-2 border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-200 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-700 hover:scale-105 transition-all">
                                        ביטול
                                    </button>
                                </div>
                            </div>
                        </div>
                    )}

                    {showDeleteAllConfirm && (
                        <div className="fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4">
                            <div className="glass rounded-3xl p-8 max-w-sm w-full shadow-2xl">
                                <div className="text-5xl text-center mb-4">⚠️</div>
                                <h2 className="text-xl font-bold text-center text-gradient mb-2">{t('deleteAllTitle')}</h2>
                                <p className="text-gray-600 dark:text-gray-300 mb-2 text-center">{t('deleteAllConfirm')}</p>
                                <p className="text-red-500 dark:text-red-400 mb-6 text-center text-sm font-semibold">{t('deleteAllWarning').replace('{count}', items.length)}</p>
                                <div className="flex gap-3">
                                    <button onClick={deleteAllItems}
                                        className="flex-1 bg-gradient-to-r from-red-500 to-pink-500 text-white px-6 py-3 rounded-xl hover:shadow-lg hover:scale-105 font-semibold transition-all">
                                        {t('deleteAll')}
                                    </button>
                                    <button onClick={() => setShowDeleteAllConfirm(false)}
                                        className="flex-1 px-6 py-3 glass border-2 border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-200 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-700 hover:scale-105 transition-all">
                                        {t('cancel')}
                                    </button>
                                </div>
                            </div>
                        </div>
                    )}

                    {/* Import from WhatsApp Modal */}
                    {showImportWhatsApp && (
                        <div className="fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4">
                            <div className="glass rounded-3xl p-6 max-w-md w-full shadow-2xl">
                                <div className="text-4xl text-center mb-3">📱</div>
                                <h2 className="text-xl font-bold text-center text-gradient mb-2">{t('importFromWhatsapp')}</h2>
                                <p className="text-gray-500 dark:text-gray-400 text-sm text-center mb-4">{t('whatsapp')}</p>
                                <textarea
                                    value={whatsAppText}
                                    onChange={e => setWhatsAppText(e.target.value)}
                                    placeholder={t('importExample')}
                                    className="w-full px-4 py-3 border-2 border-gray-200 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-800 dark:text-white min-h-[150px] mb-4 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-100 transition-all text-sm"
                                    dir="rtl"
                                />
                                <div className="text-xs text-gray-400 dark:text-gray-500 mb-4">
                                    נתמך: שורות נפרדות, פסיקים, מספרים (2 חלב או חלב x2)
                                </div>
                                <div className="flex gap-3">
                                    <button
                                        onClick={importFromWhatsApp}
                                        className="flex-1 btn-gradient text-white py-3 rounded-xl font-semibold hover:shadow-lg transition-all"
                                    >
                                        יבא לרשימה
                                    </button>
                                    <button
                                        onClick={() => { setShowImportWhatsApp(false); setWhatsAppText(''); }}
                                        className="px-6 py-3 rounded-xl bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 font-medium hover:bg-gray-200 dark:hover:bg-gray-600 transition-all"
                                    >
                                        ביטול
                                    </button>
                                </div>
                            </div>
                        </div>
                    )}

                    {/* Saved Lists Modal */}
                    {showSavedLists && (
                        <div className="fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4">
                            <div className="glass rounded-3xl p-6 max-w-md w-full shadow-2xl max-h-[80vh] overflow-y-auto">
                                <div className="text-4xl text-center mb-3">📋</div>
                                <h2 className="text-xl font-bold text-center text-gradient mb-4">רשימות שמורות</h2>
                                {savedLists.length === 0 ? (
                                    <div className="text-center py-8">
                                        <div className="text-5xl mb-3">📝</div>
                                        <p className="text-gray-500 dark:text-gray-400">אין רשימות שמורות</p>
                                        <p className="text-xs text-gray-400 dark:text-gray-500 mt-1">לחץ על "שמור רשימה" לשמירת הרשימה הנוכחית</p>
                                    </div>
                                ) : (
                                    <div className="space-y-3 mb-4">
                                        {savedLists.map(list => (
                                            <div
                                                key={list.id}
                                                className="bg-white dark:bg-gray-800 p-4 rounded-xl border border-gray-100 dark:border-gray-700"
                                            >
                                                <div className="flex items-center justify-between mb-2">
                                                    <span className="font-semibold text-gray-800 dark:text-white">{list.name}</span>
                                                    <div className="flex items-center gap-2">
                                                        <span className="text-xs text-gray-400">{list.items.length} פריטים</span>
                                                        <button
                                                            onClick={() => deleteSavedList(list.id)}
                                                            className="w-7 h-7 rounded-full bg-red-100 dark:bg-red-900/30 text-red-500 flex items-center justify-center hover:bg-red-200 dark:hover:bg-red-900/50 transition-all text-sm"
                                                            title="מחק רשימה"
                                                        >
                                                            🗑️
                                                        </button>
                                                    </div>
                                                </div>
                                                <div className="text-xs text-gray-500 dark:text-gray-400 mb-3 truncate">
                                                    {list.items.slice(0, 5).map(i => i.name).join(', ')}
                                                    {list.items.length > 5 && '...'}
                                                </div>
                                                <button
                                                    onClick={() => loadSavedList(list)}
                                                    className="w-full py-2 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 rounded-lg font-medium hover:bg-indigo-100 dark:hover:bg-indigo-900/50 transition-all text-sm"
                                                >
                                                    טען לעגלה
                                                </button>
                                            </div>
                                        ))}
                                    </div>
                                )}
                                <button
                                    onClick={() => setShowSavedLists(false)}
                                    className="w-full py-3 rounded-xl bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 font-medium hover:bg-gray-200 dark:hover:bg-gray-600 transition-all"
                                >
                                    סגור
                                </button>
                            </div>
                        </div>
                    )}

                    {/* AI Assistant Modal */}
                    {showAIAssistant && (
                        <div className="fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4">
                            <div className="glass rounded-3xl p-6 max-w-lg w-full shadow-2xl max-h-[85vh] overflow-y-auto">
                                <div className="flex justify-between items-center mb-6">
                                    <h2 className="text-2xl font-bold flex items-center gap-3 text-gradient">
                                        <span className="text-3xl">🤖</span>
                                        עוזר קניות חכם
                                    </h2>
                                    <button onClick={() => setShowAIAssistant(false)} className="w-10 h-10 rounded-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center hover:bg-gray-200 dark:hover:bg-gray-600 transition-all">✕</button>
                                </div>

                                {aiThinking ? (
                                    <div className="text-center py-12">
                                        <div className="text-6xl mb-4 animate-bounce">🤔</div>
                                        <p className="text-lg text-gray-600 dark:text-gray-300 font-medium">AI חושב...</p>
                                        <p className="text-sm text-gray-400 dark:text-gray-500 mt-2">מנתח את הרשימה ומכין הצעות</p>
                                        <div className="mt-4 flex justify-center gap-1">
                                            <div className="w-2 h-2 bg-violet-500 rounded-full animate-bounce" style={{animationDelay: '0ms'}}></div>
                                            <div className="w-2 h-2 bg-violet-500 rounded-full animate-bounce" style={{animationDelay: '150ms'}}></div>
                                            <div className="w-2 h-2 bg-violet-500 rounded-full animate-bounce" style={{animationDelay: '300ms'}}></div>
                                        </div>
                                    </div>
                                ) : aiSuggestions.length === 0 ? (
                                    <div className="text-center py-12">
                                        <div className="text-6xl mb-4">🎉</div>
                                        <p className="text-lg text-gray-600 dark:text-gray-300 font-medium">הרשימה שלך נראית מושלמת!</p>
                                        <p className="text-sm text-gray-400 dark:text-gray-500 mt-2">אין לי הצעות נוספות כרגע</p>
                                        <button
                                            onClick={generateAISuggestions}
                                            className="mt-6 px-6 py-3 bg-violet-100 dark:bg-violet-900/50 text-violet-700 dark:text-violet-300 rounded-xl font-medium hover:bg-violet-200 transition-all"
                                        >
                                            🔄 נסה שוב
                                        </button>
                                    </div>
                                ) : (
                                    <div className="space-y-3">
                                        <p className="text-sm text-gray-500 dark:text-gray-400 mb-4">
                                            בהתבסס על הרשימה שלך, הנה כמה הצעות:
                                        </p>
                                        {aiSuggestions.map((suggestion, idx) => (
                                            <div
                                                key={idx}
                                                className={`p-4 rounded-xl border-2 transition-all ${
                                                    suggestion.isRecipe
                                                        ? 'bg-gradient-to-r from-amber-50 to-orange-50 dark:from-amber-900/20 dark:to-orange-900/20 border-amber-300 dark:border-amber-700'
                                                        : 'bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 hover:border-violet-400 dark:hover:border-violet-500'
                                                }`}
                                            >
                                                <div className="flex items-center justify-between">
                                                    <div className="flex items-center gap-3">
                                                        <span className="text-2xl">{suggestion.icon}</span>
                                                        <div>
                                                            <p className="font-bold text-gray-800 dark:text-white">{suggestion.name}</p>
                                                            <p className="text-xs text-gray-500 dark:text-gray-400">{suggestion.reason}</p>
                                                        </div>
                                                    </div>
                                                    {!suggestion.isRecipe && (
                                                        <button
                                                            onClick={() => addAISuggestion(suggestion)}
                                                            className="px-4 py-2 bg-violet-500 text-white rounded-xl text-sm font-medium hover:bg-violet-600 transition-all"
                                                        >
                                                            ➕ הוסף
                                                        </button>
                                                    )}
                                                </div>
                                            </div>
                                        ))}

                                        <div className="flex gap-3 mt-6">
                                            <button
                                                onClick={generateAISuggestions}
                                                className="flex-1 py-3 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-200 rounded-xl font-medium hover:bg-gray-200 dark:hover:bg-gray-600 transition-all"
                                            >
                                                🔄 הצעות חדשות
                                            </button>
                                            <button
                                                onClick={() => setShowAIAssistant(false)}
                                                className="flex-1 py-3 btn-gradient text-white rounded-xl font-medium"
                                            >
                                                ✓ סיימתי
                                            </button>
                                        </div>
                                    </div>
                                )}
                            </div>
                        </div>
                    )}

                    {/* Price Comparison Scanner Modal */}
                    {showPriceScanner && (
                        <div className="fixed inset-0 bg-black/95 flex flex-col z-50">
                            {/* Header */}
                            <div className="p-4 flex items-center justify-between">
                                <button onClick={stopPriceScanner} className="w-10 h-10 rounded-full bg-white/10 flex items-center justify-center text-white text-xl hover:bg-white/20 transition-all">✕</button>
                                <h2 className="text-white font-bold text-lg">🔍 {t('priceComparison')}</h2>
                                <div className="w-10"></div>
                            </div>

                            <div className="flex-1 p-4 overflow-y-auto">
                                {/* Search Input - Primary */}
                                <div className="mb-4">
                                    <label className="text-white text-sm mb-2 block">{t('searchProduct')}</label>
                                    <div className="flex gap-2">
                                        <input
                                            type="text"
                                            value={scannedProductName}
                                            onChange={e => { setScannedProductName(e.target.value); setPriceCompareResults(null); }}
                                            placeholder={t('productSearchExample')}
                                            className="flex-1 px-4 py-3 rounded-xl bg-white text-gray-800 border-2 border-transparent focus:border-cyan-400 transition-all text-lg"
                                            autoFocus
                                        />
                                        <button
                                            onClick={() => searchPriceComparison(scannedProductName)}
                                            disabled={!scannedProductName}
                                            className="px-5 py-3 bg-cyan-500 text-white rounded-xl font-bold disabled:opacity-50 hover:bg-cyan-600 transition-all"
                                        >
                                            🔍
                                        </button>
                                    </div>
                                </div>

                                {/* Autocomplete Suggestions */}
                                {scannedProductName && !priceCompareResults && getPriceSearchSuggestions(scannedProductName).length > 0 && (
                                    <div className="mb-4 bg-white/10 rounded-xl p-2">
                                        <div className="text-gray-400 text-xs mb-2 px-2">הצעות:</div>
                                        <div className="flex flex-wrap gap-2">
                                            {getPriceSearchSuggestions(scannedProductName).map((suggestion, idx) => (
                                                <button
                                                    key={idx}
                                                    onClick={() => { setScannedProductName(suggestion); searchPriceComparison(suggestion); }}
                                                    className="px-3 py-2 bg-white/20 text-white rounded-lg text-sm hover:bg-cyan-500 transition-all"
                                                >
                                                    {suggestion}
                                                </button>
                                            ))}
                                        </div>
                                    </div>
                                )}

                                {/* Quick Popular Products */}
                                {!scannedProductName && !priceCompareResults && (
                                    <div className="mb-4">
                                        <div className="text-gray-400 text-sm mb-2">מוצרים פופולריים:</div>
                                        <div className="flex flex-wrap gap-2">
                                            {['חלב', 'ביצים', 'לחם', 'גבינה צהובה', 'שוקולד', 'קולה', 'במבה', 'שמן זית'].map((product, idx) => (
                                                <button
                                                    key={idx}
                                                    onClick={() => { setScannedProductName(product); searchPriceComparison(product); }}
                                                    className="px-3 py-2 bg-white/10 text-white rounded-lg text-sm hover:bg-white/20 transition-all"
                                                >
                                                    {product}
                                                </button>
                                            ))}
                                        </div>
                                    </div>
                                )}

                                {/* Camera Scan - Secondary Option */}
                                {!priceCompareResults && (
                                    <div className="mb-4 p-4 bg-white/10 rounded-xl border border-white/20">
                                        <div className="text-white text-sm mb-3 text-center font-medium">או צלם את שם המוצר:</div>
                                        <div className="relative aspect-video bg-black rounded-xl overflow-hidden mb-4">
                                            <video ref={priceVideoRef} autoPlay playsInline className="w-full h-full object-cover" />
                                            <canvas ref={priceCanvasRef} className="hidden" />
                                            {scanningPrice && (
                                                <div className="absolute inset-0 bg-black/70 flex items-center justify-center">
                                                    <div className="text-center">
                                                        <div className="text-3xl mb-2 animate-spin">⏳</div>
                                                        <div className="text-white text-sm">מנתח תמונה...</div>
                                                    </div>
                                                </div>
                                            )}
                                            {/* Big Capture Button Overlay */}
                                            {!scanningPrice && (
                                                <button
                                                    onClick={captureAndScanPrice}
                                                    className="absolute bottom-4 left-1/2 transform -translate-x-1/2 w-16 h-16 rounded-full bg-white border-4 border-cyan-400 shadow-lg flex items-center justify-center hover:scale-110 transition-all"
                                                >
                                                    <div className="w-12 h-12 rounded-full bg-gradient-to-r from-cyan-500 to-blue-500 flex items-center justify-center">
                                                        <span className="text-2xl">📸</span>
                                                    </div>
                                                </button>
                                            )}
                                        </div>
                                        <button
                                            onClick={captureAndScanPrice}
                                            disabled={scanningPrice}
                                            className="w-full py-4 bg-gradient-to-r from-cyan-500 to-blue-500 text-white rounded-xl font-bold text-lg shadow-lg disabled:opacity-50 hover:shadow-xl hover:scale-[1.02] transition-all"
                                        >
                                            {scanningPrice ? '⏳ מנתח...' : '📸 לחץ לצילום וזיהוי'}
                                        </button>
                                        <p className="text-gray-400 text-xs text-center mt-2">* כוון את המצלמה לשם המוצר ולחץ על הכפתור</p>
                                    </div>
                                )}

                                {/* Supermarket Links - Results */}
                                {priceCompareResults && (
                                    <div className="space-y-3">
                                        <div className="flex items-center justify-between mb-2">
                                            <h3 className="text-white font-bold">תוצאות עבור: {scannedProductName}</h3>
                                            <button
                                                onClick={() => { setPriceCompareResults(null); }}
                                                className="text-cyan-400 text-sm hover:underline"
                                            >
                                                חיפוש חדש
                                            </button>
                                        </div>
                                        {priceCompareResults.map((site, idx) => (
                                            <button
                                                key={idx}
                                                onClick={() => openPriceLink(site.url)}
                                                className={`w-full p-4 ${site.color} text-white rounded-xl font-bold text-lg flex items-center justify-between hover:opacity-90 hover:scale-[1.02] transition-all`}
                                            >
                                                <span>{site.name}</span>
                                                <span>🔗</span>
                                            </button>
                                        ))}
                                        <button
                                            onClick={() => {
                                                priceCompareResults.forEach(site => window.open(site.url, '_blank'));
                                            }}
                                            className="w-full p-4 bg-gradient-to-r from-indigo-500 to-purple-500 text-white rounded-xl font-bold text-lg mt-2 hover:opacity-90 transition-all"
                                        >
                                            🚀 פתח הכל בו-זמנית
                                        </button>
                                    </div>
                                )}
                            </div>
                        </div>
                    )}

                    {showFinishShopping && (
                        <div className="fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4">
                            <div className="glass rounded-3xl p-8 max-w-md w-full shadow-2xl max-h-[90vh] overflow-y-auto">
                                <div className="text-5xl text-center mb-4">✅</div>
                                <h2 className="text-2xl font-bold text-center text-gradient mb-2">{t('finishShopping')}</h2>
                                <p className="text-gray-600 dark:text-gray-300 mb-6 text-center">{purchasedCount} {t('itemsPurchased')}</p>
                                <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">{t('totalAmount')}</label>
                                <input
                                    type="number"
                                    value={totalAmount}
                                    onChange={e => setTotalAmount(e.target.value)}
                                    placeholder="0"
                                    className="w-full px-5 py-4 border-2 border-indigo-200 dark:border-indigo-600 rounded-xl bg-white/50 dark:bg-gray-700/50 dark:text-white text-xl mb-4 focus:border-indigo-500 focus:ring-4 focus:ring-indigo-100 transition-all"
                                    autoFocus
                                />

                                {/* Receipt Photo Section */}
                                <div className="mb-6">
                                    <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">{t('uploadReceipt')}</label>
                                    <input
                                        type="file"
                                        accept="image/*"
                                        capture="environment"
                                        ref={receiptInputRef}
                                        onChange={handleReceiptCapture}
                                        className="hidden"
                                    />
                                    {!receiptPhoto ? (
                                        <button
                                            onClick={() => receiptInputRef.current?.click()}
                                            disabled={uploadingReceipt}
                                            className="w-full p-4 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-xl hover:border-indigo-400 dark:hover:border-indigo-500 transition-colors flex flex-col items-center gap-2 text-gray-500 dark:text-gray-400 hover:text-indigo-500"
                                        >
                                            {uploadingReceipt ? (
                                                <>
                                                    <div className="animate-spin text-2xl">⏳</div>
                                                    <span className="text-sm">מעלה...</span>
                                                </>
                                            ) : (
                                                <>
                                                    <span className="text-3xl">🧾</span>
                                                    <span className="text-sm">לחץ לצילום קבלה</span>
                                                </>
                                            )}
                                        </button>
                                    ) : (
                                        <div className="relative">
                                            <img
                                                src={receiptPhoto}
                                                alt="קבלה"
                                                className="w-full h-32 object-cover rounded-xl border-2 border-green-300"
                                            />
                                            <button
                                                onClick={() => setReceiptPhoto(null)}
                                                className="absolute top-2 left-2 w-8 h-8 bg-red-500 text-white rounded-full flex items-center justify-center hover:bg-red-600 transition-colors shadow-lg"
                                            >
                                                ✕
                                            </button>
                                            <div className="absolute bottom-2 right-2 bg-green-500 text-white px-2 py-1 rounded-lg text-xs flex items-center gap-1">
                                                <span>✓</span> קבלה צורפה
                                            </div>
                                        </div>
                                    )}
                                </div>

                                <div className="flex gap-3">
                                    <button onClick={finishShopping}
                                        disabled={uploadingReceipt}
                                        className="flex-1 bg-gradient-to-r from-green-500 to-emerald-500 text-white px-6 py-3 rounded-xl hover:shadow-lg hover:scale-105 font-semibold transition-all disabled:opacity-50 disabled:cursor-not-allowed">
                                        ✓ סיים ושמור
                                    </button>
                                    <button onClick={() => { setShowFinishShopping(false); setTotalAmount(''); setReceiptPhoto(null); }}
                                        className="px-6 py-3 glass border-2 border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-200 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-700 hover:scale-105 transition-all">
                                        ביטול
                                    </button>
                                </div>
                            </div>
                        </div>
                    )}

                    {showHistory && (
                        <div className="fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4 overflow-y-auto">
                            <div className="glass rounded-3xl p-8 max-w-2xl w-full max-h-[90vh] overflow-y-auto shadow-2xl scrollbar-thin">
                                <div className="flex justify-between items-center mb-6">
                                    <h2 className="text-2xl font-bold flex items-center gap-3">
                                        <span className="text-3xl">📊</span>
                                        <span className="text-gradient">היסטוריית קניות</span>
                                    </h2>
                                    <button onClick={() => setShowHistory(false)}
                                        className="w-10 h-10 flex items-center justify-center glass rounded-full text-gray-500 hover:text-red-500 dark:hover:text-red-400 text-2xl hover:scale-110 hover:rotate-90 transition-all">×</button>
                                </div>
                                {history.length === 0 ? (
                                    <div className="text-center py-12">
                                        <div className="text-7xl mb-4 float">📭</div>
                                        <p className="text-xl text-gradient font-bold mb-2">{t('noHistoryYet')}</p>
                                        <p className="text-gray-500 dark:text-gray-400">{t('completeFirstShopping')}</p>
                                    </div>
                                ) : (
                                    <div className="space-y-4">
                                        {history.map((record) => (
                                            <div key={record.id} className="glass rounded-xl p-5 card-hover border border-gray-200/50 dark:border-gray-600/50">
                                                <div className="flex justify-between items-start mb-3">
                                                    <div>
                                                        <div className="text-sm text-gray-600 dark:text-gray-400 font-semibold flex items-center gap-2">
                                                            <span className="text-lg">📅</span>
                                                            {record.completedAt?.toDate?.()?.toLocaleDateString('he-IL', {
                                                                year: 'numeric',
                                                                month: 'long',
                                                                day: 'numeric',
                                                                weekday: 'long'
                                                            }) || 'תאריך לא ידוע'}
                                                        </div>
                                                        <div className="text-xs text-gray-500 dark:text-gray-500 mt-1">👤 {record.completedBy}</div>
                                                    </div>
                                                    <div className="text-2xl font-bold bg-gradient-to-r from-green-500 to-emerald-500 bg-clip-text text-transparent">
                                                        ₪{record.totalAmount.toFixed(2)}
                                                    </div>
                                                </div>
                                                <div className="text-sm text-gray-700 dark:text-gray-300 bg-indigo-50/50 dark:bg-indigo-900/20 rounded-lg p-3">
                                                    🛒 {record.items.length} פריטים • ממוצע: ₪{(record.totalAmount / record.items.length).toFixed(2)} לפריט
                                                </div>
                                                {record.receiptPhoto && (
                                                    <div className="mt-3">
                                                        <button
                                                            onClick={() => window.open(record.receiptPhoto, '_blank')}
                                                            className="flex items-center gap-2 text-sm text-indigo-600 dark:text-indigo-400 hover:text-indigo-800 dark:hover:text-indigo-300 transition-colors"
                                                        >
                                                            <span>🧾</span>
                                                            <span>צפה בקבלה</span>
                                                        </button>
                                                    </div>
                                                )}
                                            </div>
                                        ))}
                                        <div className="glass rounded-xl p-5 border-2 border-indigo-200/50 dark:border-indigo-700/50">
                                            <h3 className="font-bold text-gradient mb-4 flex items-center gap-2">
                                                <span className="text-xl">📈</span>
                                                סטטיסטיקה כללית
                                            </h3>
                                            <div className="space-y-3">
                                                <div className="flex justify-between text-gray-700 dark:text-gray-300 bg-gray-50/50 dark:bg-gray-800/50 p-3 rounded-lg">
                                                    <span>סה"כ קניות:</span>
                                                    <span className="font-bold text-lg">{history.length}</span>
                                                </div>
                                                <div className="flex justify-between text-gray-700 dark:text-gray-300 bg-green-50/50 dark:bg-green-900/20 p-3 rounded-lg">
                                                    <span>סה"כ הוצאות:</span>
                                                    <span className="font-bold text-lg text-green-600 dark:text-green-400">
                                                        ₪{history.reduce((sum, h) => sum + h.totalAmount, 0).toFixed(2)}
                                                    </span>
                                                </div>
                                                <div className="flex justify-between text-gray-700 dark:text-gray-300 bg-blue-50/50 dark:bg-blue-900/20 p-3 rounded-lg">
                                                    <span>ממוצע לקנייה:</span>
                                                    <span className="font-bold text-lg text-blue-600 dark:text-blue-400">
                                                        ₪{(history.reduce((sum, h) => sum + h.totalAmount, 0) / history.length).toFixed(2)}
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                )}
                            </div>
                        </div>
                    )}

                    {/* Forgotten Stats Modal */}
                    {showForgottenStats && (
                        <div className="fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4 overflow-y-auto">
                            <div className="glass rounded-3xl p-8 max-w-lg w-full max-h-[90vh] overflow-y-auto shadow-2xl scrollbar-thin">
                                <div className="flex justify-between items-center mb-6">
                                    <h2 className="text-2xl font-bold flex items-center gap-3">
                                        <span className="text-3xl">🧠</span>
                                        <span className="text-gradient">{t('whatForgot')}</span>
                                    </h2>
                                    <button onClick={() => setShowForgottenStats(false)}
                                        className="w-10 h-10 flex items-center justify-center glass rounded-full text-gray-500 hover:text-red-500 dark:hover:text-red-400 text-2xl hover:scale-110 hover:rotate-90 transition-all">×</button>
                                </div>

                                {/* Shopping Streak */}
                                <div className="bg-gradient-to-r from-orange-100 to-amber-100 dark:from-orange-900/30 dark:to-amber-900/30 rounded-2xl p-4 mb-6 border border-orange-200 dark:border-orange-800">
                                    <div className="flex items-center justify-between">
                                        <div>
                                            <div className="text-lg font-bold text-orange-800 dark:text-orange-200">🔥 {t('shoppingStreak')}</div>
                                            <div className="text-sm text-orange-600 dark:text-orange-400">קניות בלי לשכוח דברים</div>
                                        </div>
                                        <div className="text-4xl font-bold text-orange-600 dark:text-orange-400">
                                            {shoppingStreak}
                                        </div>
                                    </div>
                                    {shoppingStreak >= 3 && (
                                        <div className="mt-2 text-sm text-orange-700 dark:text-orange-300 animate-pulse">
                                            ⭐ מדהים! {shoppingStreak} קניות ברצף!
                                        </div>
                                    )}
                                </div>

                                {/* Achievements */}
                                {achievements.length > 0 && (
                                    <div className="mb-6">
                                        <h3 className="font-bold text-gray-800 dark:text-gray-200 mb-3 flex items-center gap-2">
                                            <span>🏆</span> הישגים החודש
                                        </h3>
                                        <div className="grid grid-cols-2 gap-2">
                                            {achievements.map((achievement, idx) => (
                                                <div key={idx} className="bg-gradient-to-br from-yellow-50 to-amber-100 dark:from-yellow-900/20 dark:to-amber-900/20 rounded-xl p-3 border border-yellow-200 dark:border-yellow-800 hover:scale-105 transition-transform">
                                                    <div className="text-2xl mb-1">{achievement.emoji}</div>
                                                    <div className="text-sm font-bold text-amber-800 dark:text-amber-200">{achievement.name}</div>
                                                    <div className="text-xs text-amber-600 dark:text-amber-400">{achievement.description}</div>
                                                </div>
                                            ))}
                                        </div>
                                    </div>
                                )}

                                {/* Monthly Stats */}
                                <div className="mb-4">
                                    <h3 className="font-bold text-gray-800 dark:text-gray-200 mb-3 flex items-center gap-2">
                                        <span>📅</span> סטטיסטיקה חודשית - {new Date().toLocaleDateString('he-IL', { month: 'long', year: 'numeric' })}
                                    </h3>

                                    {Object.keys(forgottenStats).length === 0 ? (
                                        <div className="text-center py-8 bg-green-50 dark:bg-green-900/20 rounded-2xl">
                                            <div className="text-5xl mb-3">🎉</div>
                                            <p className="text-lg font-bold text-green-700 dark:text-green-300">מושלם!</p>
                                            <p className="text-sm text-green-600 dark:text-green-400">לא שכחת כלום החודש</p>
                                        </div>
                                    ) : (
                                        <div className="space-y-2">
                                            {Object.entries(forgottenStats)
                                                .sort(([,a], [,b]) => b - a)
                                                .map(([item, count]) => {
                                                    const msg = getForgottenMessage(count);
                                                    return (
                                                        <div key={item} className="flex items-center justify-between bg-gray-50 dark:bg-gray-800/50 rounded-xl p-3 hover:bg-gray-100 dark:hover:bg-gray-700/50 transition-colors">
                                                            <div className="flex items-center gap-3">
                                                                <span className="text-2xl">{msg.emoji}</span>
                                                                <span className="font-medium text-gray-800 dark:text-gray-200">{item}</span>
                                                            </div>
                                                            <div className="text-left">
                                                                <div className="font-bold text-gray-700 dark:text-gray-300">{count} פעמים</div>
                                                                <div className="text-xs text-gray-500">{msg.text}</div>
                                                            </div>
                                                        </div>
                                                    );
                                                })}
                                        </div>
                                    )}
                                </div>

                                {/* Tips Section */}
                                {Object.keys(forgottenStats).length > 0 && (
                                    <div className="bg-blue-50 dark:bg-blue-900/20 rounded-xl p-4 border border-blue-200 dark:border-blue-800">
                                        <div className="flex items-start gap-2">
                                            <span className="text-xl">💡</span>
                                            <div>
                                                <div className="font-bold text-blue-800 dark:text-blue-200 text-sm">טיפ!</div>
                                                <div className="text-xs text-blue-600 dark:text-blue-400">
                                                    הוסף את הפריטים שנשכחים לעתים קרובות לרשימה קבועה, או הגדר תזכורת בטלפון
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                )}
                            </div>
                        </div>
                    )}

                    {showFamilySettings && <FamilySettingsModal onClose={() => setShowFamilySettings(false)} />}
                    {showCreateList && <CreateListModal onClose={() => setShowCreateList(false)} />}
                    {editingNote && <ItemNoteModal item={editingNote} onClose={() => setEditingNote(null)} onSave={(note) => updateItemNote(editingNote.id, note)} />}

                    {/* Regular Items Modal */}
                    {showRegulars && (
                        <div className="fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4 overflow-y-auto">
                            <div className="glass rounded-3xl p-8 max-w-lg w-full max-h-[90vh] overflow-y-auto shadow-2xl scrollbar-thin">
                                <div className="flex justify-between items-center mb-6">
                                    <h2 className="text-2xl font-bold flex items-center gap-3">
                                        <span className="text-3xl">⭐</span>
                                        <span className="text-gradient">המוצרים הקבועים שלי</span>
                                    </h2>
                                    <button onClick={() => setShowRegulars(false)}
                                        className="w-10 h-10 flex items-center justify-center glass rounded-full text-gray-500 hover:text-red-500 dark:hover:text-red-400 text-2xl hover:scale-110 hover:rotate-90 transition-all">×</button>
                                </div>

                                <p className="text-gray-600 dark:text-gray-400 mb-4 text-sm">
                                    מוצרים שאתה קונה לעתים קרובות, לפי ההיסטוריה שלך:
                                </p>

                                {regularItems.length === 0 ? (
                                    <div className="text-center py-8">
                                        <div className="text-5xl mb-3">📊</div>
                                        <p className="text-gray-500 dark:text-gray-400">אין מספיק היסטוריית קניות</p>
                                        <p className="text-sm text-gray-400 dark:text-gray-500 mt-1">סיים עוד כמה קניות כדי לזהות מוצרים קבועים</p>
                                    </div>
                                ) : (
                                    <>
                                        <div className="space-y-2 mb-6">
                                            {regularItems.map((item, idx) => (
                                                <div key={idx} className="flex items-center justify-between bg-gray-50 dark:bg-gray-800/50 rounded-xl p-3 hover:bg-gray-100 dark:hover:bg-gray-700/50 transition-colors">
                                                    <div className="flex items-center gap-3">
                                                        <span className="text-xl">🔄</span>
                                                        <span className="font-medium text-gray-800 dark:text-gray-200 capitalize">{getProductTranslation(item.name, language)}</span>
                                                    </div>
                                                    <div className="text-sm text-gray-500 dark:text-gray-400">
                                                        נקנה {item.count} פעמים
                                                    </div>
                                                </div>
                                            ))}
                                        </div>

                                        <button
                                            onClick={addRegularItems}
                                            className="w-full bg-gradient-to-r from-amber-500 to-orange-500 text-white px-6 py-4 rounded-xl hover:from-amber-600 hover:to-orange-600 transition-all font-bold text-lg shadow-lg hover:shadow-xl hover:scale-[1.02]"
                                        >
                                            ➕ הוסף את כולם לרשימה
                                        </button>
                                    </>
                                )}
                            </div>
                        </div>
                    )}

                    {/* Calendar & Holidays Modal */}
                    {showCalendar && (
                        <div className="fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4 overflow-y-auto">
                            <div className="glass rounded-3xl p-6 max-w-md w-full max-h-[95vh] overflow-y-auto shadow-2xl scrollbar-thin">
                                {/* Header */}
                                <div className="flex justify-between items-center mb-4">
                                    <h2 className="text-xl font-bold flex items-center gap-2">
                                        <span className="text-2xl">📅</span>
                                        <span className="text-gradient">{t('calendar')}</span>
                                    </h2>
                                    <button onClick={() => { setShowCalendar(false); setSelectedHoliday(null); }}
                                        className="w-10 h-10 flex items-center justify-center glass rounded-full text-gray-500 hover:text-red-500 dark:hover:text-red-400 text-2xl hover:scale-110 hover:rotate-90 transition-all">×</button>
                                </div>

                                {/* Month Navigation */}
                                <div className="flex items-center justify-between mb-4 bg-gradient-to-r from-indigo-500 to-purple-500 text-white rounded-xl p-3">
                                    <button
                                        onClick={() => setCalendarMonth(new Date(calendarMonth.getFullYear(), calendarMonth.getMonth() + 1))}
                                        className="w-10 h-10 rounded-full bg-white/20 hover:bg-white/30 flex items-center justify-center text-xl transition-all"
                                    >
                                        ‹
                                    </button>
                                    <div className="text-center">
                                        <div className="text-lg font-bold">{HEBREW_MONTHS[calendarMonth.getMonth()]}</div>
                                        <div className="text-sm opacity-80">{calendarMonth.getFullYear()}</div>
                                    </div>
                                    <button
                                        onClick={() => setCalendarMonth(new Date(calendarMonth.getFullYear(), calendarMonth.getMonth() - 1))}
                                        className="w-10 h-10 rounded-full bg-white/20 hover:bg-white/30 flex items-center justify-center text-xl transition-all"
                                    >
                                        ›
                                    </button>
                                </div>

                                {/* Days Header */}
                                <div className="grid grid-cols-7 gap-1 mb-2">
                                    {HEBREW_DAYS.map((day, i) => (
                                        <div key={i} className={`text-center text-xs font-bold py-2 ${i === 6 ? 'text-blue-600 dark:text-blue-400' : 'text-gray-600 dark:text-gray-400'}`}>
                                            {day}
                                        </div>
                                    ))}
                                </div>

                                {/* Calendar Grid */}
                                <div className="grid grid-cols-7 gap-1 mb-4">
                                    {getCalendarDays(calendarMonth).map((day, idx) => {
                                        const holiday = getHolidayForDate(day);
                                        const isToday = day && day.toDateString() === new Date().toDateString();
                                        const isSaturday = day && day.getDay() === 6;

                                        return (
                                            <div
                                                key={idx}
                                                onClick={() => holiday && setSelectedHoliday(holiday)}
                                                className={`
                                                    aspect-square rounded-lg flex flex-col items-center justify-center text-sm relative
                                                    ${!day ? '' : 'cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700'}
                                                    ${isToday ? 'ring-2 ring-indigo-500 bg-indigo-50 dark:bg-indigo-900/30' : ''}
                                                    ${isSaturday ? 'text-blue-600 dark:text-blue-400' : 'text-gray-700 dark:text-gray-300'}
                                                    ${holiday ? 'bg-gradient-to-br from-amber-100 to-orange-100 dark:from-amber-900/30 dark:to-orange-900/30 font-bold' : ''}
                                                `}
                                            >
                                                {day && (
                                                    <>
                                                        <span className={`${holiday ? 'text-amber-700 dark:text-amber-300' : ''}`}>{day.getDate()}</span>
                                                        {holiday && (
                                                            <span className="text-xs absolute -bottom-0.5">{holiday.icon}</span>
                                                        )}
                                                    </>
                                                )}
                                            </div>
                                        );
                                    })}
                                </div>

                                {/* Selected Holiday Details */}
                                {selectedHoliday ? (
                                    <div className="bg-gradient-to-r from-amber-50 to-orange-50 dark:from-amber-900/20 dark:to-orange-900/20 rounded-xl p-4 border-2 border-amber-300 dark:border-amber-700 mb-4">
                                        <div className="flex items-center gap-3 mb-3">
                                            <span className="text-3xl">{selectedHoliday.icon}</span>
                                            <div>
                                                <h3 className="font-bold text-lg text-gray-800 dark:text-white">{selectedHoliday.name}</h3>
                                                <p className="text-sm text-amber-700 dark:text-amber-300">{selectedHoliday.date}</p>
                                            </div>
                                        </div>
                                        <p className="text-sm text-gray-600 dark:text-gray-400 mb-4">{selectedHoliday.reminder}</p>

                                        {/* Reminder Days Selector */}
                                        <div className="mb-4">
                                            <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">תזכורת לקניות לפני:</label>
                                            <div className="flex gap-2 flex-wrap">
                                                {[3, 5, 7, 10, 14].map(days => (
                                                    <button
                                                        key={days}
                                                        onClick={() => setReminderDays(days)}
                                                        className={`px-3 py-1 rounded-full text-sm transition-all ${
                                                            reminderDays === days
                                                                ? 'bg-indigo-500 text-white'
                                                                : 'bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200'
                                                        }`}
                                                    >
                                                        {days} ימים
                                                    </button>
                                                ))}
                                            </div>
                                        </div>

                                        {/* Add to Calendar Buttons */}
                                        <div className="space-y-2">
                                            <button
                                                onClick={() => addToGoogleCalendar(selectedHoliday, reminderDays)}
                                                className="w-full flex items-center justify-center gap-2 bg-white dark:bg-gray-800 border-2 border-gray-200 dark:border-gray-600 text-gray-800 dark:text-white px-4 py-3 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-700 transition-all font-medium"
                                            >
                                                <svg className="w-5 h-5" viewBox="0 0 24 24" fill="currentColor">
                                                    <path d="M12 0C5.372 0 0 5.372 0 12s5.372 12 12 12 12-5.372 12-12S18.628 0 12 0zm6.369 8.648l-1.816 1.244c-.216.148-.504.087-.641-.138l-.858-1.416c-.137-.226-.451-.297-.698-.158l-1.674.938c-.247.139-.547.048-.669-.203l-.795-1.628c-.122-.25-.413-.365-.65-.255l-1.66.77c-.236.11-.512-.018-.616-.284l-.703-1.78c-.103-.267-.391-.401-.642-.3l-1.692.682c-.25.1-.528-.048-.618-.331L6.37 4.107c-.09-.282-.373-.44-.631-.353L4 4.42v14.16c0 .552.448 1 1 1h14c.552 0 1-.448 1-1V8.42l-1.631.228z"/>
                                                </svg>
                                                הוסף ל-Google Calendar
                                            </button>
                                            <button
                                                onClick={() => downloadICSFile(selectedHoliday, reminderDays)}
                                                className="w-full flex items-center justify-center gap-2 bg-gradient-to-r from-indigo-500 to-purple-500 text-white px-4 py-3 rounded-xl hover:from-indigo-600 hover:to-purple-600 transition-all font-medium"
                                            >
                                                📥 הורד ליומן (iPhone/מחשב)
                                            </button>
                                        </div>
                                    </div>
                                ) : (
                                    /* Upcoming Holidays List */
                                    <div className="space-y-2">
                                        <h3 className="font-bold text-gray-800 dark:text-white text-sm mb-2">🎉 חגים קרובים:</h3>
                                        {ISRAELI_HOLIDAYS
                                            .filter(h => h.dateObj >= new Date())
                                            .sort((a, b) => a.dateObj - b.dateObj)
                                            .slice(0, 4)
                                            .map((holiday, idx) => {
                                                const daysUntil = Math.ceil((holiday.dateObj - new Date()) / (1000 * 60 * 60 * 24));
                                                return (
                                                    <button
                                                        key={idx}
                                                        onClick={() => {
                                                            setSelectedHoliday(holiday);
                                                            setCalendarMonth(new Date(holiday.dateObj));
                                                        }}
                                                        className="w-full flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-800/50 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-700 transition-all text-right"
                                                    >
                                                        <span className="text-xl">{holiday.icon}</span>
                                                        <div className="flex-1">
                                                            <div className="font-medium text-gray-800 dark:text-white">{holiday.name}</div>
                                                            <div className="text-xs text-gray-500">{holiday.date}</div>
                                                        </div>
                                                        <span className={`text-xs px-2 py-1 rounded-full ${
                                                            daysUntil <= 7 ? 'bg-red-100 text-red-700 dark:bg-red-900/50 dark:text-red-300' :
                                                            daysUntil <= 30 ? 'bg-amber-100 text-amber-700 dark:bg-amber-900/50 dark:text-amber-300' :
                                                            'bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-400'
                                                        }`}>
                                                            {daysUntil} ימים
                                                        </span>
                                                    </button>
                                                );
                                            })}
                                    </div>
                                )}

                                {/* Legend */}
                                <div className="mt-4 p-3 bg-gray-50 dark:bg-gray-800/50 rounded-xl">
                                    <div className="text-xs text-gray-500 dark:text-gray-400 flex flex-wrap gap-3">
                                        <span className="flex items-center gap-1">
                                            <span className="w-3 h-3 rounded bg-amber-200 dark:bg-amber-700"></span> חג
                                        </span>
                                        <span className="flex items-center gap-1">
                                            <span className="w-3 h-3 rounded ring-2 ring-indigo-500"></span> היום
                                        </span>
                                        <span className="flex items-center gap-1">
                                            <span className="text-blue-600">ש׳</span> שבת
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}

                    {/* Quantity Selector Modal */}
                    {showQuantitySelector && selectedProduct && (
                        <div className="fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4">
                            <div className="glass rounded-3xl p-6 max-w-sm w-full shadow-2xl">
                                <div className="text-center mb-6">
                                    <div className="text-4xl mb-2">{CATEGORIES[selectedProduct.category]?.icon || '🛒'}</div>
                                    <h2 className="text-xl font-bold text-gray-800 dark:text-white">{selectedProduct.name}</h2>
                                    <p className="text-sm text-gray-500 dark:text-gray-400">{CATEGORIES[selectedProduct.category]?.name}</p>
                                </div>

                                {/* Quantity Selector */}
                                <div className="mb-6">
                                    <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 text-center">כמות</label>
                                    <div className="flex items-center justify-center gap-4">
                                        <button
                                            onClick={() => setSelectedQuantity(Math.max(0.5, selectedQuantity - (selectedUnit === 'גרם' ? 100 : selectedUnit === 'ק"ג' ? 0.5 : 1)))}
                                            className="w-14 h-14 bg-gray-100 dark:bg-gray-700 rounded-2xl text-2xl font-bold hover:bg-gray-200 dark:hover:bg-gray-600 transition-all hover:scale-110"
                                        >
                                            -
                                        </button>
                                        <div className="text-center min-w-[80px]">
                                            <input
                                                type="number"
                                                value={selectedQuantity}
                                                onChange={(e) => setSelectedQuantity(Math.max(0.1, parseFloat(e.target.value) || 1))}
                                                onFocus={(e) => e.target.select()}
                                                className="w-20 text-center text-3xl font-bold bg-transparent border-none outline-none text-gradient"
                                                step={selectedUnit === 'גרם' ? 100 : selectedUnit === 'ק"ג' ? 0.5 : 1}
                                            />
                                        </div>
                                        <button
                                            onClick={() => setSelectedQuantity(selectedQuantity + (selectedUnit === 'גרם' ? 100 : selectedUnit === 'ק"ג' ? 0.5 : 1))}
                                            className="w-14 h-14 btn-gradient text-white rounded-2xl text-2xl font-bold hover:scale-110 transition-all"
                                        >
                                            +
                                        </button>
                                    </div>
                                </div>

                                {/* Unit Selector */}
                                <div className="mb-6">
                                    <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 text-center">יחידת מידה</label>
                                    <div className="flex justify-center gap-2 flex-wrap">
                                        {selectedProduct.unitOptions?.map((unit) => (
                                            <button
                                                key={unit}
                                                onClick={() => {
                                                    setSelectedUnit(unit);
                                                    // Reset quantity when changing units
                                                    if (unit === 'גרם') setSelectedQuantity(100);
                                                    else if (unit === 'ק"ג') setSelectedQuantity(1);
                                                    else setSelectedQuantity(1);
                                                }}
                                                className={`px-4 py-2 rounded-xl font-medium transition-all ${
                                                    selectedUnit === unit
                                                        ? 'btn-gradient text-white shadow-lg'
                                                        : 'bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600'
                                                }`}
                                            >
                                                {unit}
                                            </button>
                                        ))}
                                    </div>
                                </div>

                                {/* Note Input */}
                                <div className="mb-4">
                                    <label className="block text-sm font-medium text-gray-600 dark:text-gray-400 mb-2">📝 הוסף הערה (אופציונלי):</label>
                                    <input
                                        type="text"
                                        value={selectedNote}
                                        onChange={(e) => setSelectedNote(e.target.value)}
                                        placeholder="לדוגמה: טרי, ללא גלוטן, אורגני..."
                                        className="w-full px-4 py-3 rounded-xl border-2 border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 dark:text-white focus:border-indigo-400 transition-all"
                                    />
                                </div>

                                {/* Preview */}
                                <div className="bg-indigo-50 dark:bg-indigo-900/30 rounded-xl p-3 mb-6 text-center">
                                    <span className="text-lg font-bold text-indigo-700 dark:text-indigo-300">
                                        {selectedProduct.name} - {selectedQuantity} {selectedUnit}
                                        {selectedNote && <span className="block text-sm mt-1">📝 {selectedNote}</span>}
                                    </span>
                                </div>

                                {/* Buttons */}
                                <div className="flex gap-3">
                                    <button
                                        onClick={addProductWithQuantity}
                                        className="flex-1 btn-gradient text-white px-6 py-4 rounded-xl font-bold text-lg shadow-lg hover:shadow-xl hover:scale-[1.02] transition-all"
                                    >
                                        ➕ הוסף לרשימה
                                    </button>
                                    <button
                                        onClick={() => { setShowQuantitySelector(false); setSelectedProduct(null); setSelectedNote(''); }}
                                        className="px-6 py-4 glass border-2 border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-200 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-700 transition-all"
                                    >
                                        ביטול
                                    </button>
                                </div>
                            </div>
                        </div>
                    )}

                    {/* Confetti Effect */}
                    {confetti && <ConfettiBurst x={confetti.x} y={confetti.y} onComplete={() => setConfetti(null)} />}

                    {/* Family Chat Modal */}
                    {showChat && (
                        <div className="fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4">
                            <div className="bg-white dark:bg-gray-900 rounded-3xl w-full max-w-lg h-[85vh] max-h-[650px] shadow-2xl flex flex-col overflow-hidden">
                                {/* Chat Header - Modern Design */}
                                <div className="p-4 flex items-center justify-between bg-white dark:bg-gray-800 border-b border-gray-100 dark:border-gray-700">
                                    <div className="flex items-center gap-3">
                                        <div className="w-12 h-12 rounded-full bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center text-white text-xl shadow-lg">
                                            👨‍👩‍👧‍👦
                                        </div>
                                        <div>
                                            <h2 className="font-bold text-gray-800 dark:text-white">{family?.name}</h2>
                                            <p className="text-xs text-gray-500 dark:text-gray-400">
                                                {activeEditors.length > 0 ? `${activeEditors[0]} מקליד/ה...` : 'צ\'אט משפחתי'}
                                            </p>
                                        </div>
                                    </div>
                                    <div className="flex items-center gap-2">
                                        <button
                                            onClick={async () => {
                                                if ('Notification' in window) {
                                                    if (Notification.permission === 'granted') {
                                                        setNotificationsEnabled(!notificationsEnabled);
                                                    } else if (Notification.permission !== 'denied') {
                                                        const permission = await Notification.requestPermission();
                                                        setNotificationsEnabled(permission === 'granted');
                                                    } else {
                                                        alert('התראות חסומות. אנא אפשר התראות בהגדרות הדפדפן.');
                                                    }
                                                }
                                            }}
                                            className={`w-10 h-10 rounded-xl flex items-center justify-center transition-all ${notificationsEnabled ? 'bg-green-100 dark:bg-green-900/50 text-green-600' : 'bg-gray-100 dark:bg-gray-700 text-gray-500'}`}
                                            title={notificationsEnabled ? 'התראות פעילות' : 'הפעל התראות'}
                                        >
                                            {notificationsEnabled ? '🔔' : '🔕'}
                                        </button>
                                        <button onClick={() => setShowChat(false)} className="w-10 h-10 rounded-xl bg-gray-100 dark:bg-gray-700 flex items-center justify-center text-gray-500 hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors">
                                            <svg className="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth={2}>
                                                <path strokeLinecap="round" strokeLinejoin="round" d="M6 18L18 6M6 6l12 12" />
                                            </svg>
                                        </button>
                                    </div>
                                </div>

                                {/* Chat Messages - Modern Bubbles */}
                                <div className="flex-1 overflow-y-auto p-4 space-y-4 bg-gradient-to-b from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-900 scrollbar-thin">
                                    {chatMessages.length === 0 ? (
                                        <div className="text-center py-16">
                                            <div className="w-20 h-20 rounded-full bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center mx-auto mb-4">
                                                <span className="text-4xl">💬</span>
                                            </div>
                                            <p className="text-gray-600 dark:text-gray-300 font-medium">אין הודעות עדיין</p>
                                            <p className="text-sm text-gray-400 dark:text-gray-500 mt-1">שלחו הודעה ראשונה למשפחה!</p>
                                        </div>
                                    ) : (
                                        chatMessages.map(msg => {
                                            const isMe = msg.senderUid === user.uid;
                                            return (
                                                <div key={msg.id} className={`flex ${isMe ? 'justify-start' : 'justify-end'} items-end gap-2`}>
                                                    {isMe && (
                                                        <div className="w-8 h-8 rounded-full bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center text-white text-xs font-bold flex-shrink-0">
                                                            {(msg.senderName || '?')[0]}
                                                        </div>
                                                    )}
                                                    <div className={`max-w-[75%] ${isMe ? 'order-2' : ''}`}>
                                                        {!isMe && <p className="text-xs text-gray-500 dark:text-gray-400 mb-1 mr-2 font-medium">{msg.senderName}</p>}
                                                        <div className={`rounded-2xl p-3 shadow-sm ${
                                                            isMe
                                                                ? 'bg-indigo-500 text-white rounded-bl-md'
                                                                : 'bg-white dark:bg-gray-700 text-gray-800 dark:text-white rounded-br-md border border-gray-100 dark:border-gray-600'
                                                        }`}>
                                                            {msg.photoUrl && (
                                                                <img src={msg.photoUrl} alt="תמונה" className="rounded-xl mb-2 max-w-full cursor-pointer hover:opacity-90 shadow-sm" onClick={() => window.open(msg.photoUrl, '_blank')} />
                                                            )}
                                                            {msg.text && <p className="text-sm leading-relaxed">{msg.text}</p>}
                                                            <div className={`flex items-center gap-1 mt-1.5 ${isMe ? 'justify-start' : 'justify-end'}`}>
                                                                <p className={`text-xs ${isMe ? 'text-indigo-200' : 'text-gray-400'}`}>
                                                                    {msg.createdAt?.toDate?.().toLocaleTimeString('he-IL', { hour: '2-digit', minute: '2-digit' }) || ''}
                                                                </p>
                                                                {isMe && (
                                                                    <span className={`text-xs ${msg.readBy && msg.readBy.some(uid => uid !== msg.senderUid) ? 'text-cyan-300' : 'text-indigo-300'}`}>
                                                                        {msg.readBy && msg.readBy.some(uid => uid !== msg.senderUid) ? '✓✓' : '✓'}
                                                                    </span>
                                                                )}
                                                            </div>
                                                        </div>
                                                    </div>
                                                    {!isMe && (
                                                        <div className="w-8 h-8 rounded-full bg-gradient-to-br from-emerald-500 to-teal-600 flex items-center justify-center text-white text-xs font-bold flex-shrink-0">
                                                            {(msg.senderName || '?')[0]}
                                                        </div>
                                                    )}
                                                </div>
                                            );
                                        })
                                    )}
                                </div>

                                {/* Photo Preview - Improved */}
                                {capturedPhoto && (
                                    <div className="px-4 py-3 bg-white dark:bg-gray-800 border-t border-gray-100 dark:border-gray-700">
                                        <div className="relative inline-block">
                                            <img src={capturedPhoto} alt="תצוגה מקדימה" className="h-24 rounded-xl shadow-md" />
                                            <button onClick={() => setCapturedPhoto(null)} className="absolute -top-2 -right-2 w-7 h-7 bg-red-500 text-white rounded-full text-sm flex items-center justify-center shadow-lg hover:bg-red-600 transition-colors">✕</button>
                                        </div>
                                    </div>
                                )}

                                {/* Chat Input - Modern Design */}
                                <div className="p-4 bg-white dark:bg-gray-800 border-t border-gray-100 dark:border-gray-700">
                                    <div className="flex items-center gap-3">
                                        <button onClick={startCamera} className="w-11 h-11 rounded-xl bg-gray-100 dark:bg-gray-700 flex items-center justify-center text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 transition-all" title="צלם תמונה">
                                            <svg className="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth={2}>
                                                <path strokeLinecap="round" strokeLinejoin="round" d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z" />
                                                <path strokeLinecap="round" strokeLinejoin="round" d="M15 13a3 3 0 11-6 0 3 3 0 016 0z" />
                                            </svg>
                                        </button>
                                        <input
                                            type="text"
                                            value={chatInput}
                                            onChange={e => setChatInput(e.target.value)}
                                            onKeyPress={e => e.key === 'Enter' && sendChatMessage(chatInput, capturedPhoto)}
                                            placeholder="הקלד הודעה..."
                                            className="flex-1 px-4 py-3 border border-gray-200 dark:border-gray-600 rounded-xl bg-gray-50 dark:bg-gray-700 dark:text-white focus:border-indigo-400 focus:ring-2 focus:ring-indigo-100 dark:focus:ring-indigo-900/50 transition-all text-sm"
                                        />
                                        <button
                                            onClick={() => sendChatMessage(chatInput, capturedPhoto)}
                                            className="w-11 h-11 bg-indigo-500 hover:bg-indigo-600 rounded-xl flex items-center justify-center text-white transition-all shadow-md hover:shadow-lg"
                                        >
                                            <svg className="w-5 h-5 rotate-180" fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth={2}>
                                                <path strokeLinecap="round" strokeLinejoin="round" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8" />
                                            </svg>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}

                    {/* Camera Modal */}
                    {showCamera && (
                        <div className="fixed inset-0 bg-black z-[60] flex flex-col">
                            <div className="flex items-center justify-between p-4 bg-black/50">
                                <button onClick={stopCamera} className="text-white text-lg px-4 py-2">ביטול</button>
                                <h2 className="text-white font-bold">צלם מוצר</h2>
                                <div className="w-16"></div>
                            </div>
                            <div className="flex-1 flex items-center justify-center bg-black">
                                <video ref={videoRef} autoPlay playsInline className="max-w-full max-h-full" />
                            </div>
                            <div className="p-6 bg-black/50 flex justify-center" style={{ paddingBottom: 'calc(1.5rem + env(safe-area-inset-bottom, 1.5rem))' }}>
                                <button onClick={capturePhoto} className="w-20 h-20 rounded-full bg-white border-4 border-gray-300 hover:scale-105 transition-transform flex items-center justify-center">
                                    <div className="w-16 h-16 rounded-full bg-white border-2 border-gray-400"></div>
                                </button>
                            </div>
                            <canvas ref={canvasRef} className="hidden" />
                        </div>
                    )}

                    <div className="max-w-4xl mx-auto">
                        <div className="glass rounded-3xl shadow-xl p-6 mb-6 relative overflow-hidden">
                            <div className="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500"></div>
                            <div className="flex items-center justify-between mb-4">
                                <div className="flex items-center gap-4">
                                    <div className="w-14 h-14 rounded-2xl btn-gradient flex items-center justify-center shadow-lg">
                                        <span className="text-3xl">🛒</span>
                                    </div>
                                    <div>
                                        <h1 className="text-2xl font-bold text-gradient">ListNest</h1>
                                        <div className="flex items-center gap-2 mt-1 flex-wrap">
                                            <button onClick={() => setShowFamilySettings(true)} className="px-3 py-1 rounded-full text-sm font-medium bg-gradient-to-r from-indigo-100 to-purple-100 text-indigo-700 dark:from-indigo-900/50 dark:to-purple-900/50 dark:text-indigo-300 hover:scale-105 transition-transform cursor-pointer">
                                                👨‍👩‍👧‍👦 {family?.name}
                                            </button>
                                            <span className="px-2 py-1 rounded-full text-xs bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300">
                                                👤 {user.displayName || user.email}
                                            </span>
                                        </div>
                                    </div>
                                </div>
                                <div className="flex items-center gap-2">
                                    <button
                                        onClick={toggleShoppingMode}
                                        className={`w-10 h-10 rounded-xl flex items-center justify-center text-lg hover:scale-110 transition-all touch-target ${
                                            shoppingMode
                                                ? 'bg-green-500 text-white shadow-lg shadow-green-200 dark:shadow-green-900/50 animate-pulse'
                                                : 'bg-green-100 dark:bg-green-900/50 text-green-600 dark:text-green-400'
                                        }`}
                                        title={shoppingMode ? t('shoppingModeActive') : t('enableShoppingMode')}
                                        aria-label={shoppingMode ? t('shoppingModeActive') : t('enableShoppingMode')}
                                        aria-pressed={shoppingMode}
                                    >
                                        <span aria-hidden="true">{shoppingMode ? '🛒' : '📱'}</span>
                                    </button>
                                    <button
                                        onClick={() => setShowChat(true)}
                                        className="w-10 h-10 rounded-xl bg-blue-100 dark:bg-blue-900/50 flex items-center justify-center text-lg hover:scale-110 transition-transform relative touch-target"
                                        title={t('familyChat')}
                                        aria-label={chatMessages.some(msg => msg.senderUid !== user.uid && (!msg.readBy || !msg.readBy.includes(user.uid))) ? `${t('familyChat')} - ${t('newMessages')}` : t('familyChat')}
                                    >
                                        <span aria-hidden="true">💬</span>
                                        {chatMessages.some(msg => msg.senderUid !== user.uid && (!msg.readBy || !msg.readBy.includes(user.uid))) && (
                                            <>
                                                <span className="absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full animate-pulse" aria-hidden="true"></span>
                                                <span className="sr-only">{t('newMessages')}</span>
                                            </>
                                        )}
                                    </button>
                                    <button
                                        onClick={toggleDarkMode}
                                        className="w-10 h-10 rounded-xl bg-gray-100 dark:bg-gray-700 flex items-center justify-center text-lg hover:scale-110 transition-transform touch-target"
                                        aria-label={darkMode ? t('lightMode') : t('darkMode')}
                                        aria-pressed={darkMode}
                                    >
                                        <span aria-hidden="true">{darkMode ? '☀️' : '🌙'}</span>
                                    </button>
                                    <button
                                        onClick={handleLogout}
                                        className="w-10 h-10 rounded-xl bg-red-100 dark:bg-red-900/50 flex items-center justify-center text-lg hover:scale-110 transition-transform text-red-600 dark:text-red-400 touch-target"
                                        title={t('logout')}
                                        aria-label={t('logout')}
                                    >
                                        <span aria-hidden="true">🚪</span>
                                    </button>
                                </div>
                            </div>

                            {/* List Selector - Wrapping Grid */}
                            <div className="flex flex-wrap gap-2 mb-4">
                                {lists.map(list => (
                                    <button
                                        key={list.id}
                                        onClick={() => setCurrentList(list)}
                                        className={`flex items-center gap-1.5 px-3 py-2 rounded-xl transition-all text-sm ${
                                            currentList?.id === list.id
                                                ? 'btn-gradient text-white shadow-lg'
                                                : 'bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200'
                                        }`}
                                    >
                                        <span>{list.icon}</span>
                                        <span className="font-medium">{list.name}</span>
                                        {list.isDefault && <span className="text-xs">⭐</span>}
                                    </button>
                                ))}
                                <button
                                    onClick={() => setShowCreateList(true)}
                                    className="flex items-center gap-1.5 px-3 py-2 rounded-xl bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 hover:bg-indigo-100 dark:hover:bg-indigo-900/50 transition-all text-sm"
                                >
                                    <span>➕</span>
                                    <span className="font-medium">{t('newList')}</span>
                                </button>
                            </div>

                            {/* Active Editors & Shopping Mode Indicator */}
                            {(activeEditors.length > 0 || shoppingMode) && (
                                <div className="flex items-center gap-3 mb-4 flex-wrap">
                                    {shoppingMode && (
                                        <div className="flex items-center gap-2 px-3 py-1.5 bg-green-100 dark:bg-green-900/50 text-green-700 dark:text-green-300 rounded-full text-sm font-medium">
                                            <span className="w-2 h-2 bg-green-500 rounded-full animate-pulse"></span>
                                            מצב קניות פעיל
                                        </div>
                                    )}
                                    {activeEditors.length > 0 && (
                                        <div className="flex items-center gap-2 px-3 py-1.5 bg-blue-100 dark:bg-blue-900/50 text-blue-700 dark:text-blue-300 rounded-full text-sm">
                                            <span className="w-2 h-2 bg-blue-500 rounded-full animate-pulse"></span>
                                            {activeEditors.join(', ')} עורך/ת כרגע
                                        </div>
                                    )}
                                </div>
                            )}

                            {/* Quick Actions Bar - 4 icons in a row */}
                            <div className="grid grid-cols-4 gap-2 mb-4">
                                <button
                                    onClick={() => setShowImportWhatsApp(true)}
                                    className="flex flex-col items-center justify-center py-3 rounded-xl bg-green-50 dark:bg-green-900/30 text-green-700 dark:text-green-300 hover:bg-green-100 dark:hover:bg-green-900/50 transition-all"
                                >
                                    <span className="text-2xl mb-1">📥</span>
                                    <span className="text-xs font-medium">{t('importList')}</span>
                                </button>
                                <button
                                    onClick={() => setShowSavedLists(true)}
                                    className="flex flex-col items-center justify-center py-3 rounded-xl bg-purple-50 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 hover:bg-purple-100 dark:hover:bg-purple-900/50 transition-all relative"
                                >
                                    <span className="text-2xl mb-1">📋</span>
                                    <span className="text-xs font-medium">רשימות</span>
                                    {savedLists.length > 0 && <span className="absolute top-1 right-1 bg-purple-500 text-white w-5 h-5 rounded-full text-xs flex items-center justify-center">{savedLists.length}</span>}
                                </button>
                                <button
                                    onClick={saveListForReuse}
                                    className="flex flex-col items-center justify-center py-3 rounded-xl bg-amber-50 dark:bg-amber-900/30 text-amber-700 dark:text-amber-300 hover:bg-amber-100 dark:hover:bg-amber-900/50 transition-all"
                                >
                                    <span className="text-2xl mb-1">💾</span>
                                    <span className="text-xs font-medium">שמירה</span>
                                </button>
                                <button
                                    onClick={startPriceScanner}
                                    className="flex flex-col items-center justify-center py-3 rounded-xl bg-cyan-50 dark:bg-cyan-900/30 text-cyan-700 dark:text-cyan-300 hover:bg-cyan-100 dark:hover:bg-cyan-900/50 transition-all"
                                >
                                    <span className="text-2xl mb-1">📸</span>
                                    <span className="text-xs font-medium">מחירים</span>
                                </button>
                            </div>

                            {/* AI Assistant Button */}
                            <button
                                onClick={() => { setShowAIAssistant(true); generateAISuggestions(); }}
                                className="w-full mb-4 flex items-center justify-center gap-3 py-3 px-4 rounded-xl bg-gradient-to-r from-violet-500 to-purple-600 text-white font-bold shadow-lg hover:shadow-xl hover:scale-[1.02] transition-all"
                            >
                                <span className="text-2xl">🤖</span>
                                <span>עוזר קניות חכם - הצעות AI</span>
                                <span className="text-lg">✨</span>
                            </button>

                            {/* Holiday Recommendations Banner */}
                            {getHolidayRecommendations().length > 0 && (
                                <div className="mb-4 p-4 bg-gradient-to-r from-amber-50 to-orange-50 dark:from-amber-900/30 dark:to-orange-900/30 rounded-2xl border border-amber-200 dark:border-amber-700">
                                    <div className="flex items-center justify-between mb-2">
                                        <div className="flex items-center gap-2">
                                            <span className="text-xl">{getHolidayRecommendations()[0].icon}</span>
                                            <span className="font-bold text-amber-800 dark:text-amber-200">{getHolidayRecommendations()[0].name} מתקרב!</span>
                                        </div>
                                        <button
                                            onClick={() => setShowHolidayRecommendations(!showHolidayRecommendations)}
                                            className="text-sm text-amber-600 dark:text-amber-400 hover:underline"
                                        >
                                            {showHolidayRecommendations ? 'הסתר' : 'הצג המלצות'}
                                        </button>
                                    </div>
                                    {showHolidayRecommendations && (
                                        <div className="flex flex-wrap gap-2 mt-2">
                                            {getHolidayRecommendations()[0].products.map((product, idx) => (
                                                <button
                                                    key={idx}
                                                    onClick={() => addProduct(product)}
                                                    className="px-3 py-1.5 bg-white dark:bg-gray-800 rounded-lg text-sm font-medium text-amber-700 dark:text-amber-300 hover:bg-amber-100 dark:hover:bg-amber-900/50 transition-all border border-amber-200 dark:border-amber-700"
                                                >
                                                    + {product}
                                                </button>
                                            ))}
                                        </div>
                                    )}
                                </div>
                            )}

                            <div className="flex items-center justify-between mb-4">
                                <div className="text-sm text-gray-500 dark:text-gray-400">
                                    {currentList?.icon} {currentList?.name}
                                </div>
                                <button
                                    onClick={() => document.getElementById('shopping-list-section')?.scrollIntoView({ behavior: 'smooth' })}
                                    className="flex items-center gap-2 px-4 py-2 bg-gradient-to-br from-indigo-50 to-purple-50 dark:from-indigo-900/30 dark:to-purple-900/30 rounded-xl hover:shadow-lg transition-all border border-indigo-200/50 dark:border-indigo-700/50">
                                    <span className="text-xs text-gray-500 dark:text-gray-400 font-medium">פריטים</span>
                                    <span className="text-xl font-bold text-gradient">{totalItems}</span>
                                </button>
                            </div>

                            {totalItems > 0 && (
                                <div className="bg-gradient-to-r from-indigo-500/10 to-purple-500/10 dark:from-indigo-500/20 dark:to-purple-500/20 rounded-2xl p-4 mb-4">
                                    <div className="flex justify-between mb-2 text-sm">
                                        <span className="text-gray-600 dark:text-gray-300 font-medium">{t('shoppingProgress')}</span>
                                        <span className="font-bold text-gradient">{purchasedCount} / {totalItems}</span>
                                    </div>
                                    <div className="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5 overflow-hidden">
                                        <div className="progress-animate h-2.5 rounded-full transition-all duration-700 ease-out"
                                            style={{ width: `${totalItems > 0 ? (purchasedCount / totalItems) * 100 : 0}%` }} />
                                    </div>
                                    {purchasedCount === totalItems && totalItems > 0 && (
                                        <div className="text-center mt-2 text-sm text-green-600 dark:text-green-400 font-medium">🎉 {t('allPurchased')}</div>
                                    )}
                                </div>
                            )}

                            <div className="grid grid-cols-2 gap-3">
                                <button onClick={() => purchasedCount > 0 ? setShowFinishShopping(true) : alert(t('markPurchased'))}
                                    className="relative overflow-hidden bg-gradient-to-br from-emerald-50 to-green-100 dark:from-emerald-900/30 dark:to-green-900/30 p-4 rounded-2xl border border-emerald-200/50 dark:border-emerald-700/50 card-hover group">
                                    <div className="absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-700"></div>
                                    <div className="text-sm text-gray-600 dark:text-gray-400 font-medium">{t('finishShopping')}</div>
                                    <div className="text-3xl my-1">✅</div>
                                    {purchasedCount > 0 ? (
                                        <div className="text-xs text-emerald-600 dark:text-emerald-400 font-semibold">{purchasedCount} {t('itemsPurchased')}</div>
                                    ) : (
                                        <div className="text-xs text-gray-400 dark:text-gray-500">{t('markPurchased')}</div>
                                    )}
                                </button>
                                <button onClick={() => setShowHistory(true)}
                                    className="relative overflow-hidden bg-gradient-to-br from-purple-50 to-pink-100 dark:from-purple-900/30 dark:to-pink-900/30 p-4 rounded-2xl border border-purple-200/50 dark:border-purple-700/50 card-hover group">
                                    <div className="absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-700"></div>
                                    <div className="text-sm text-gray-600 dark:text-gray-400 font-medium">{t('history')}</div>
                                    <div className="text-3xl my-1">📊</div>
                                    <div className="text-xs text-purple-600 dark:text-purple-400 font-semibold">{history.length} {t('purchases')}</div>
                                </button>
                            </div>

                            <div className="mt-4 flex gap-3">
                                {items.filter(item => !item.purchased).length > 0 && (
                                    <button onClick={exportToWhatsApp}
                                        className="flex-1 bg-gradient-to-r from-green-500 to-emerald-500 text-white px-4 py-3 rounded-lg hover:from-green-600 hover:to-emerald-600 transition-all font-semibold shadow-lg hover:shadow-xl hover:scale-105">
                                        📤 {t('exportList')}
                                    </button>
                                )}
                                {items.length > 0 && (
                                    <button onClick={() => setShowDeleteAllConfirm(true)}
                                        className="flex-1 bg-gradient-to-r from-red-500 to-rose-500 text-white px-4 py-3 rounded-lg hover:from-red-600 hover:to-rose-600 transition-all font-semibold shadow-lg hover:shadow-xl hover:scale-105">
                                        🗑️ {t('deleteAll')}
                                    </button>
                                )}
                            </div>

                            <div className="mt-3 flex gap-2">
                                <button onClick={() => setShowForgottenStats(true)}
                                    className="flex-1 bg-gradient-to-r from-rose-400 to-pink-500 text-white px-4 py-3 rounded-lg hover:from-rose-500 hover:to-pink-600 transition-all font-semibold shadow-lg hover:shadow-xl hover:scale-[1.02] flex items-center justify-center gap-2">
                                    <span>🧠</span>
                                    <span>{t('whatForgot')}</span>
                                    {shoppingStreak > 0 && (
                                        <span className="bg-white/20 px-2 py-0.5 rounded-full text-xs">🔥 {shoppingStreak}</span>
                                    )}
                                </button>
                                <button onClick={() => setShowCalendar(true)}
                                    className="w-14 bg-gradient-to-r from-violet-400 to-purple-500 text-white rounded-lg hover:from-violet-500 hover:to-purple-600 transition-all shadow-lg hover:shadow-xl hover:scale-105 flex items-center justify-center"
                                    title={t('calendar')}>
                                    📅
                                </button>
                            </div>

                            {/* Add Regulars Button */}
                            {regularItems.length > 0 && (
                                <div className="mt-3">
                                    <button onClick={() => setShowRegulars(true)}
                                        className="w-full bg-gradient-to-r from-amber-400 to-orange-500 text-white px-4 py-3 rounded-lg hover:from-amber-500 hover:to-orange-600 transition-all font-semibold shadow-lg hover:shadow-xl hover:scale-[1.02] flex items-center justify-center gap-2">
                                        <span>⭐</span>
                                        <span>הוסף את הקבועים שלי</span>
                                        <span className="bg-white/20 px-2 py-0.5 rounded-full text-xs">{regularItems.length}</span>
                                    </button>
                                </div>
                            )}
                        </div>

                        {searchTerm && (
                            <div className="glass rounded-2xl shadow-xl p-6 mb-6 card-hover">
                                <div className="flex justify-between items-center mb-4">
                                    <h2 className="text-xl font-bold dark:text-white flex items-center gap-2">
                                        <span className="text-2xl">🔍</span>
                                        <span className="text-gradient">תוצאות חיפוש</span>
                                    </h2>
                                    <button onClick={() => setSearchTerm('')} className="btn-gradient text-white text-sm px-4 py-2 rounded-full font-medium hover:shadow-lg hover:scale-105 transition-all">נקה חיפוש ✕</button>
                                </div>
                                <div className="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3">
                                    {Object.entries(PRODUCTS).flatMap(([category, products]) =>
                                        products
                                            .filter(product => product.includes(searchTerm))
                                            .map((product, idx) => (
                                                <button key={`${category}-${idx}`} onClick={() => { addProduct(product); setSelectedCategory(category); }}
                                                    className="group relative bg-white dark:bg-gray-800 p-4 rounded-2xl border border-gray-100 dark:border-gray-700 hover:border-indigo-300 dark:hover:border-indigo-600 hover:shadow-lg hover:shadow-indigo-100/50 dark:hover:shadow-indigo-900/30 transition-all duration-200 text-right"
                                                >
                                                    <div className="flex items-start gap-3">
                                                        <div className="w-10 h-10 rounded-xl bg-gray-50 dark:bg-gray-700 flex items-center justify-center text-xl group-hover:scale-110 transition-transform">
                                                            {CATEGORIES[category]?.icon}
                                                        </div>
                                                        <div className="flex-1 min-w-0">
                                                            <div className="font-semibold text-gray-700 dark:text-gray-200 text-sm leading-tight mb-1">{getProductTranslation(product, language)}</div>
                                                            <div className="text-xs text-gray-400 dark:text-gray-500">{getCategoryName(category)}</div>
                                                        </div>
                                                        <div className="w-6 h-6 rounded-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center opacity-0 group-hover:opacity-100 group-hover:bg-indigo-500 transition-all duration-200">
                                                            <svg className="w-3.5 h-3.5 text-gray-400 group-hover:text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth={2.5}>
                                                                <path strokeLinecap="round" strokeLinejoin="round" d="M12 4v16m8-8H4" />
                                                            </svg>
                                                        </div>
                                                    </div>
                                                </button>
                                            ))
                                    )}
                                </div>
                                {Object.entries(PRODUCTS).flatMap(([_, products]) => products.filter(p => p.includes(searchTerm))).length === 0 && (
                                    <div className="text-center py-8">
                                        <div className="text-6xl mb-4">🔍</div>
                                        <p className="text-gray-500 dark:text-gray-400 text-lg">{t('noProductsFound')} "<span className="font-bold">{searchTerm}</span>"</p>
                                        <p className="text-sm text-gray-400 dark:text-gray-500 mt-2">{t('tryAnotherSearch')}</p>
                                    </div>
                                )}
                            </div>
                        )}

                        {!selectedCategory && !searchTerm ? (
                            <div className="glass rounded-2xl shadow-xl p-6 mb-6">
                                <h2 className="text-2xl font-bold text-center mb-2 dark:text-white flex items-center justify-center gap-2">
                                    <span className="text-3xl">🏷️</span>
                                    <span className="text-gradient">{t('selectCategory')}</span>
                                </h2>
                                <p className="text-center text-gray-500 dark:text-gray-400 text-sm mb-6">{t('addItemsHint')}</p>
                                <div className="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3">
                                    {Object.entries(CATEGORIES).map(([key, cat]) => {
                                        const count = items.filter(item => item.category === key && !item.purchased).length;
                                        return (
                                            <button
                                                key={key}
                                                onClick={() => { setSelectedCategory(key); setTimeout(() => { const el = document.getElementById('products-section'); if (el) el.scrollIntoView({ behavior: 'smooth', block: 'start' }); }, 50); }}
                                                className="group relative bg-white dark:bg-gray-800 p-5 rounded-2xl border border-gray-100 dark:border-gray-700 hover:border-indigo-300 dark:hover:border-indigo-600 hover:shadow-xl hover:shadow-indigo-100/50 dark:hover:shadow-indigo-900/30 transition-all duration-200"
                                            >
                                                <div className="flex flex-col items-center text-center">
                                                    <div className="w-14 h-14 rounded-2xl bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-700 dark:to-gray-600 flex items-center justify-center text-3xl mb-3 group-hover:scale-110 group-hover:shadow-lg transition-all duration-200">
                                                        {cat.icon}
                                                    </div>
                                                    <div className="text-sm font-semibold text-gray-700 dark:text-gray-200">{getCategoryName(key)}</div>
                                                </div>
                                                {count > 0 && (
                                                    <div className="absolute -top-1 -left-1 bg-indigo-500 text-white text-xs font-bold rounded-full w-6 h-6 flex items-center justify-center shadow-md">
                                                        {count}
                                                    </div>
                                                )}
                                            </button>
                                        );
                                    })}
                                </div>
                            </div>
                        ) : selectedCategory && !searchTerm && (
                            <>
                                {/* Fixed Back Button at Bottom */}
                                <div className="fixed bottom-28 left-4 right-4 z-40 flex justify-center pointer-events-none" style={{ paddingBottom: 'env(safe-area-inset-bottom, 0px)' }}>
                                    <button onClick={() => setSelectedCategory(null)}
                                        className="pointer-events-auto btn-gradient text-white px-6 py-3 rounded-full font-bold shadow-2xl hover:shadow-xl hover:scale-105 transition-all flex items-center gap-2 text-lg">
                                        <span>←</span>
                                        <span>{t('backToCategories')}</span>
                                    </button>
                                </div>

                                <div id="products-section" className="glass rounded-2xl shadow-xl mb-6">
                                    {/* Category Header */}
                                    <div className="p-4 border-b border-gray-200 dark:border-gray-700">
                                        <h2 className="text-xl font-bold flex items-center justify-center gap-2 dark:text-white">
                                            <span className="text-3xl">{CATEGORIES[selectedCategory].icon}</span>
                                            <span className="text-gradient">{getCategoryName(selectedCategory)}</span>
                                        </h2>
                                    </div>

                                    {/* Products Grid */}
                                    <div className="p-4">
                                        <div className="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3">
                                            {PRODUCTS[selectedCategory]?.map((product, idx) => (
                                                <button key={idx} onClick={() => addProduct(product)}
                                                    className="group relative bg-white dark:bg-gray-800 p-4 rounded-2xl border border-gray-100 dark:border-gray-700 hover:border-indigo-300 dark:hover:border-indigo-600 hover:shadow-lg hover:shadow-indigo-100/50 dark:hover:shadow-indigo-900/30 transition-all duration-200 text-right"
                                                    style={{animationDelay: `${idx * 30}ms`}}
                                                >
                                                <div className="flex items-center justify-between gap-2">
                                                    <div className="w-8 h-8 rounded-full bg-gray-50 dark:bg-gray-700 flex items-center justify-center group-hover:bg-indigo-500 group-hover:scale-110 transition-all duration-200">
                                                        <svg className="w-4 h-4 text-gray-400 group-hover:text-white transition-colors" fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth={2.5}>
                                                            <path strokeLinecap="round" strokeLinejoin="round" d="M12 4v16m8-8H4" />
                                                        </svg>
                                                    </div>
                                                    <span className="flex-1 font-semibold text-gray-700 dark:text-gray-200 text-sm leading-tight">{getProductTranslation(product, language)}</span>
                                                </div>
                                            </button>
                                        ))}
                                    </div>
                                </div>
                            </div>
                            </>
                        )}

                        {filteredItems.length > 0 && (
                            <div id="shopping-list-section" className="glass rounded-2xl shadow-xl p-6 mb-6">
                                <h2 className="text-2xl font-bold mb-4 dark:text-white flex items-center gap-3">
                                    <span className="text-3xl">📝</span>
                                    <span className="text-gradient">הרשימה שלי</span>
                                    <span className="btn-gradient text-white text-sm px-3 py-1 rounded-full">{filteredItems.length}</span>
                                </h2>

                                {/* Estimated Total & Templates */}
                                <div className="flex flex-wrap items-center gap-3 mb-6 pb-4 border-b border-gray-200 dark:border-gray-700">
                                    {estimatedTotal > 0 && (
                                        <div className="flex items-center gap-2 bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-400 px-4 py-2 rounded-xl">
                                            <span>💰</span>
                                            <span className="font-semibold">סה״כ משוער: ₪{estimatedTotal.toFixed(2)}</span>
                                        </div>
                                    )}
                                    <button
                                        onClick={() => setShowTemplates(!showTemplates)}
                                        className="flex items-center gap-2 bg-purple-50 dark:bg-purple-900/20 text-purple-700 dark:text-purple-400 px-4 py-2 rounded-xl hover:bg-purple-100 dark:hover:bg-purple-900/40 transition-all"
                                    >
                                        <span>📋</span>
                                        <span className="font-medium">תבניות</span>
                                    </button>
                                    {items.filter(i => !i.purchased).length > 0 && (
                                        <button
                                            onClick={() => setShowSaveTemplate(true)}
                                            className="flex items-center gap-2 bg-indigo-50 dark:bg-indigo-900/20 text-indigo-700 dark:text-indigo-400 px-4 py-2 rounded-xl hover:bg-indigo-100 dark:hover:bg-indigo-900/40 transition-all"
                                        >
                                            <span>💾</span>
                                            <span className="font-medium">שמור כתבנית</span>
                                        </button>
                                    )}
                                </div>

                                {/* Templates Panel */}
                                {showTemplates && (
                                    <div className="mb-6 p-4 bg-purple-50 dark:bg-purple-900/20 rounded-xl">
                                        <h3 className="font-bold text-purple-700 dark:text-purple-400 mb-3 flex items-center gap-2">
                                            <span>📋</span> התבניות שלי
                                        </h3>
                                        {templates.length === 0 ? (
                                            <p className="text-sm text-gray-500 dark:text-gray-400">אין תבניות שמורות עדיין. שמור רשימה כתבנית לשימוש חוזר!</p>
                                        ) : (
                                            <div className="grid gap-2">
                                                {templates.map(template => (
                                                    <div key={template.id} className="flex items-center justify-between bg-white dark:bg-gray-800 p-3 rounded-lg">
                                                        <div>
                                                            <span className="font-medium">{template.name}</span>
                                                            <span className="text-xs text-gray-500 mr-2">({template.items.length} פריטים)</span>
                                                        </div>
                                                        <div className="flex gap-2">
                                                            <button
                                                                onClick={() => loadTemplate(template)}
                                                                className="text-xs bg-purple-500 text-white px-3 py-1 rounded-lg hover:bg-purple-600"
                                                            >
                                                                טען
                                                            </button>
                                                            <button
                                                                onClick={() => deleteTemplate(template.id)}
                                                                className="text-xs bg-red-100 text-red-600 px-3 py-1 rounded-lg hover:bg-red-200"
                                                            >
                                                                מחק
                                                            </button>
                                                        </div>
                                                    </div>
                                                ))}
                                            </div>
                                        )}
                                    </div>
                                )}

                                {/* Save Template Modal */}
                                {showSaveTemplate && (
                                    <div className="fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4">
                                        <div className="glass rounded-2xl p-6 w-full max-w-md">
                                            <h3 className="text-xl font-bold mb-4 flex items-center gap-2">
                                                <span>💾</span> שמור כתבנית
                                            </h3>
                                            <input
                                                type="text"
                                                value={newTemplateName}
                                                onChange={(e) => setNewTemplateName(e.target.value)}
                                                placeholder="שם התבנית (לדוגמה: קניות שבועיות)"
                                                className="w-full p-3 border rounded-xl dark:bg-gray-700 dark:border-gray-600 mb-4"
                                                autoFocus
                                            />
                                            <p className="text-sm text-gray-500 dark:text-gray-400 mb-4">
                                                יישמרו {items.filter(i => !i.purchased).length} פריטים לא מסומנים
                                            </p>
                                            <div className="flex gap-3">
                                                <button
                                                    onClick={() => { setShowSaveTemplate(false); setNewTemplateName(''); }}
                                                    className="flex-1 px-4 py-2 border rounded-xl hover:bg-gray-100 dark:hover:bg-gray-700"
                                                >
                                                    ביטול
                                                </button>
                                                <button
                                                    onClick={() => saveAsTemplate(newTemplateName)}
                                                    disabled={!newTemplateName.trim()}
                                                    className="flex-1 btn-gradient text-white px-4 py-2 rounded-xl disabled:opacity-50"
                                                >
                                                    שמור
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                )}

                                {Object.entries(groupedItems).map(([category, categoryItems]) => (
                                    <div key={category} className="mb-6">
                                        <h3 className="sticky-category-header flex items-center gap-2 mb-3 pb-2 border-b border-gray-200 dark:border-gray-700">
                                            <span className="text-xl">{CATEGORIES[category]?.icon}</span>
                                            <span className="text-base font-semibold text-gray-700 dark:text-gray-300">{CATEGORIES[category]?.name}</span>
                                            <span className="text-xs bg-orange-100 dark:bg-orange-900/40 text-orange-600 dark:text-orange-400 px-2 py-0.5 rounded-full font-medium">{categoryItems.length}</span>
                                        </h3>
                                        {categoryItems.map(item => (
                                            <SwipeableItem
                                                key={item.id}
                                                className={`mb-3 ${exitingItems.has(item.id) ? 'item-exit' : 'item-enter'}`}
                                                purchased={item.purchased}
                                                onSwipeRight={() => !item.purchased && togglePurchasedWithAnimation(item.id, item.purchased)}
                                                onSwipeLeft={() => !item.purchased && postponeItem(item.id)}
                                            >
                                                <div className={`product-card ${animatingItems.has(item.id) ? 'success-glow' : ''} ${item.purchased ? 'purchased' : ''}`}>
                                                    {/* Clean single-row layout */}
                                                    <div className="item-row" role="group" aria-label={`פריט: ${item.name}`}>
                                                        {/* Checkbox */}
                                                        <button
                                                            onClick={(e) => togglePurchasedWithAnimation(item.id, item.purchased, e)}
                                                            aria-label={item.purchased ? `בטל סימון עבור ${item.name}` : `סמן ${item.name} כנקנה`}
                                                            className={`item-checkbox ${item.purchased ? 'checked' : ''}`}
                                                        >
                                                            {item.purchased && (
                                                                <svg className={`w-4 h-4 text-white ${animatingItems.has(item.id) ? 'check-animate' : ''}`} fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth={3}>
                                                                    <path strokeLinecap="round" strokeLinejoin="round" d="M5 13l4 4L19 7" />
                                                                </svg>
                                                            )}
                                                        </button>

                                                        {/* Product Name */}
                                                        <div className="flex-1 min-w-0">
                                                            {editingItemId === item.id ? (
                                                                <input
                                                                    type="text"
                                                                    value={editingItemName}
                                                                    onChange={(e) => setEditingItemName(e.target.value)}
                                                                    onBlur={saveItemName}
                                                                    onKeyDown={(e) => e.key === 'Enter' && saveItemName()}
                                                                    className="inline-edit-input w-full text-base font-medium"
                                                                    autoFocus
                                                                />
                                                            ) : (
                                                                <div
                                                                    onClick={() => !item.purchased && startEditingItem(item)}
                                                                    className={`item-name ${item.purchased ? 'purchased' : ''} cursor-pointer`}
                                                                >
                                                                    {getProductTranslation(item.name, language)}
                                                                </div>
                                                            )}
                                                            {/* Status indicators */}
                                                            <div className="flex items-center gap-2 flex-wrap">
                                                                {item.note && (
                                                                    <span className="item-note-badge" onClick={() => setEditingNote(item)}>
                                                                        📝 {item.note.length > 15 ? item.note.substring(0, 15) + '...' : item.note}
                                                                    </span>
                                                                )}
                                                                {item.postponedBy && !item.purchased && (
                                                                    <span className="item-status postponed">נדחה</span>
                                                                )}
                                                                {item.purchased && item.purchasedBy && (
                                                                    <span className="item-status purchased-by">✓ {item.purchasedBy}</span>
                                                                )}
                                                                {item.outOfStock && (
                                                                    <span className="item-status postponed">🚫 אזל</span>
                                                                )}
                                                            </div>
                                                        </div>

                                                        {/* Price display/edit */}
                                                        {editingPriceId === item.id ? (
                                                            <div className="flex items-center gap-1 flex-shrink-0">
                                                                <input
                                                                    type="number"
                                                                    value={editingPriceValue}
                                                                    onChange={(e) => setEditingPriceValue(e.target.value)}
                                                                    onBlur={() => { updateItemPrice(item.id, parseFloat(editingPriceValue) || 0); }}
                                                                    onKeyDown={(e) => e.key === 'Enter' && updateItemPrice(item.id, parseFloat(editingPriceValue) || 0)}
                                                                    className="w-16 px-2 py-1 text-sm border rounded dark:bg-gray-700 dark:border-gray-600"
                                                                    placeholder="₪"
                                                                    autoFocus
                                                                />
                                                            </div>
                                                        ) : item.price ? (
                                                            <button
                                                                onClick={() => { setEditingPriceId(item.id); setEditingPriceValue(item.price.toString()); }}
                                                                className="text-xs text-green-600 dark:text-green-400 font-medium px-2 py-1 rounded hover:bg-green-50 dark:hover:bg-green-900/20"
                                                            >
                                                                ₪{item.price.toFixed(2)}
                                                            </button>
                                                        ) : null}

                                                        {/* Quantity - compact stepper */}
                                                        <div className="qty-stepper flex-shrink-0" role="group" aria-label={`כמות ${item.name}`}>
                                                            <button
                                                                onClick={() => updateQuantity(item.id, getQuantityNumber(item.quantity) - 1)}
                                                                className="qty-btn"
                                                                aria-label="הפחת"
                                                            >−</button>
                                                            <span className="qty-value">{getQuantityNumber(item.quantity)}</span>
                                                            <button
                                                                onClick={() => updateQuantity(item.id, getQuantityNumber(item.quantity) + 1)}
                                                                className="qty-btn"
                                                                aria-label="הוסף"
                                                            >+</button>
                                                        </div>

                                                        {/* Menu button */}
                                                        <button
                                                            onClick={() => setOpenItemMenu(openItemMenu === item.id ? null : item.id)}
                                                            className="item-menu-btn"
                                                            aria-label="תפריט פעולות"
                                                        >
                                                            <svg className="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                                                                <path d="M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z" />
                                                            </svg>
                                                        </button>
                                                    </div>

                                                    {/* Actions Menu */}
                                                    {openItemMenu === item.id && (
                                                        <React.Fragment>
                                                            <div className="item-menu-backdrop" onClick={() => setOpenItemMenu(null)} />
                                                            <div className="item-actions-menu">
                                                                {!item.note && (
                                                                    <button onClick={() => { setEditingNote(item); setOpenItemMenu(null); }} className="item-action-btn">
                                                                        <span>📝</span> הוסף הערה
                                                                    </button>
                                                                )}
                                                                {!item.price && (
                                                                    <button onClick={() => { setEditingPriceId(item.id); setEditingPriceValue(''); setOpenItemMenu(null); }} className="item-action-btn">
                                                                        <span>💰</span> הוסף מחיר משוער
                                                                    </button>
                                                                )}
                                                                {!item.purchased && (
                                                                    <button onClick={() => { postponeItem(item.id); setOpenItemMenu(null); }} className="item-action-btn">
                                                                        <span>⏭️</span> דחה לסוף הרשימה
                                                                    </button>
                                                                )}
                                                                {!item.purchased && !item.outOfStock && (
                                                                    <button onClick={() => { markOutOfStock(item); setOpenItemMenu(null); }} className="item-action-btn">
                                                                        <span>🚫</span> אזל מהמלאי
                                                                    </button>
                                                                )}
                                                                <button onClick={() => { setShowDeleteConfirm(item.id); setOpenItemMenu(null); }} className="item-action-btn danger">
                                                                    <span>🗑️</span> מחק מהרשימה
                                                                </button>
                                                            </div>
                                                        </React.Fragment>
                                                    )}
                                                </div>
                                            </SwipeableItem>
                                        ))}
                                    </div>
                                ))}
                            </div>
                        )}

                        {filteredItems.length === 0 && !searchTerm && (
                            <div className="glass rounded-2xl shadow-xl p-12 text-center">
                                <div className="text-7xl mb-6 float">🛒</div>
                                <p className="text-2xl text-gradient font-bold mb-2">{t('emptyList')}</p>
                                <p className="text-gray-500 dark:text-gray-400 mt-2">{t('addProductsBelow')}</p>
                            </div>
                        )}

                        {/* Bottom spacing for sticky bar */}
                        <div className="h-24"></div>
                    </div>

                    {/* Sticky Add Bar */}
                    <div className="sticky-add-bar">
                        <div className="max-w-2xl mx-auto flex gap-2 items-center">
                            <div className="relative flex-1">
                                <label htmlFor="product-search" className="sr-only">{t('searchProduct')}</label>
                                <input
                                    id="product-search"
                                    ref={addBarInputRef}
                                    type="text"
                                    value={searchTerm}
                                    onChange={e => setSearchTerm(e.target.value)}
                                    placeholder={`🔍 ${t('addProductPlaceholder')}`}
                                    aria-label={t('searchProduct')}
                                    aria-autocomplete="list"
                                    className="w-full px-4 py-3 pr-4 pl-12 border-2 border-gray-200 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-800 dark:text-white focus:border-indigo-500 dark:focus:border-indigo-400 focus:ring-2 focus:ring-indigo-100 dark:focus:ring-indigo-900/30 transition-all text-base font-medium placeholder:text-gray-400"
                                />
                                {searchTerm && (
                                    <button
                                        onClick={() => setSearchTerm('')}
                                        className="absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-red-500 text-xl touch-target"
                                        aria-label="נקה שדה חיפוש"
                                    >
                                        <span aria-hidden="true">✕</span>
                                    </button>
                                )}
                            </div>
                            {voiceSupported && (
                                <button
                                    onClick={isListening ? stopListening : startListening}
                                    className={`w-12 h-12 rounded-xl flex items-center justify-center text-xl transition-all touch-target ${
                                        isListening
                                            ? 'bg-red-500 text-white animate-pulse'
                                            : 'bg-indigo-100 dark:bg-indigo-900/50 text-indigo-600 dark:text-indigo-400 hover:bg-indigo-200'
                                    }`}
                                    aria-label={isListening ? 'הפסק הקלטה קולית' : 'התחל הקלטה קולית להוספת מוצרים'}
                                    aria-pressed={isListening}
                                >
                                    <span aria-hidden="true">{isListening ? '⏹️' : '🎤'}</span>
                                </button>
                            )}
                        </div>

                        {/* Voice listening indicator - Enhanced */}
                        {isListening && (
                            <div className="max-w-2xl mx-auto mt-2 expand-in">
                                <div className="bg-gradient-to-r from-purple-100 to-indigo-100 dark:from-purple-900/50 dark:to-indigo-900/50 rounded-xl p-4 border-2 border-purple-300 dark:border-purple-700">
                                    <div className="flex items-center justify-between mb-2">
                                        <div className="flex items-center gap-2">
                                            <div className="flex items-center h-4">
                                                <span className="sound-wave"></span>
                                                <span className="sound-wave"></span>
                                                <span className="sound-wave"></span>
                                            </div>
                                            <span className="text-sm font-bold text-purple-700 dark:text-purple-300">
                                                {voiceStatus || (voiceLang === 'en-US' ? 'Listening...' : 'מקשיב...')}
                                            </span>
                                        </div>
                                        <button onClick={toggleVoiceLang} className="text-xs px-3 py-1 bg-white dark:bg-gray-800 rounded-full shadow-sm font-medium">
                                            {voiceLang === 'en-US' ? '🇺🇸 English' : '🇮🇱 עברית'}
                                        </button>
                                    </div>
                                    {voiceTranscript && (
                                        <div className="bg-white dark:bg-gray-800 rounded-lg p-3 mt-2">
                                            <p className="text-gray-600 dark:text-gray-300 text-sm">
                                                <span className="text-purple-500">שמעתי:</span> {voiceTranscript}
                                            </p>
                                        </div>
                                    )}
                                    <p className="text-xs text-purple-500 dark:text-purple-400 mt-2 text-center">
                                        💡 טיפ: דבר ברור ואמור "הוסף חלב וביצים"
                                    </p>
                                </div>
                            </div>
                        )}

                        {/* Voice status message (when not listening) */}
                        {!isListening && voiceStatus && voiceStatus !== 'מתחיל...' && (
                            <div className="max-w-2xl mx-auto mt-2 text-center">
                                <p className="text-sm text-gray-500 dark:text-gray-400 bg-gray-100 dark:bg-gray-800 rounded-lg py-2 px-4 inline-block">
                                    {voiceStatus}
                                </p>
                            </div>
                        )}

                        {/* Quick add suggestions when searching */}
                        {searchTerm && !isListening && (
                            <div className="max-w-2xl mx-auto mt-2 flex flex-wrap gap-1.5 pb-1">
                                {Object.entries(PRODUCTS)
                                    .flatMap(([cat, prods]) => prods.map(p => ({ name: p, cat })))
                                    .filter(p => p.name.includes(searchTerm))
                                    .slice(0, 6)
                                    .map((p, i) => (
                                        <button
                                            key={i}
                                            onClick={() => addProduct(p.name)}
                                            className="px-2.5 py-1.5 bg-indigo-100 dark:bg-indigo-900/50 text-indigo-700 dark:text-indigo-300 rounded-lg text-xs font-medium hover:bg-indigo-200 dark:hover:bg-indigo-800 transition-all expand-in"
                                        >
                                            {CATEGORIES[p.cat]?.icon} {p.name}
                                        </button>
                                    ))}
                                {searchTerm.length >= 2 && !Object.values(PRODUCTS).flat().some(p => p === searchTerm) && (
                                    <button
                                        onClick={() => addProduct(searchTerm)}
                                        className="px-2.5 py-1.5 bg-emerald-100 dark:bg-emerald-900/50 text-emerald-700 dark:text-emerald-300 rounded-lg text-xs font-medium hover:bg-emerald-200 dark:hover:bg-emerald-800 transition-all expand-in"
                                    >
                                        ➕ "{searchTerm}"
                                    </button>
                                )}
                            </div>
                        )}
                    </div>

                    {/* Accessibility Button */}
                    <button
                        onClick={() => setShowAccessibility(true)}
                        className="accessibility-btn"
                        title={t('accessibilitySettings')}
                        aria-label={t('accessibilitySettings')}
                    >
                        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="12" cy="4" r="2" fill="white"/>
                            <path d="M19 13v-2c-1.54.02-3.09-.75-4.07-1.83l-1.29-1.43c-.17-.19-.38-.34-.61-.45-.01 0-.01-.01-.02-.01H13c-.35-.2-.75-.3-1.19-.26C10.76 7.11 10 8.04 10 9.09V15c0 1.1.9 2 2 2h5v5h2v-5.5c0-1.1-.9-2-2-2h-3v-3.45c1.29 1.07 3.25 1.94 5 1.95zm-6.17 5c-.41 1.16-1.52 2-2.83 2-1.66 0-3-1.34-3-3 0-1.31.84-2.41 2-2.83V12.1c-2.28.46-4 2.48-4 4.9 0 2.76 2.24 5 5 5 2.42 0 4.44-1.72 4.9-4h-2.07z" fill="white"/>
                        </svg>
                    </button>

                    {/* Help Button */}
                    <button
                        onClick={() => setShowHelp(true)}
                        className="fixed bottom-100 left-4 w-12 h-12 bg-gradient-to-r from-green-500 to-emerald-500 rounded-full flex items-center justify-center text-white text-2xl shadow-lg z-[9998] hover:scale-110 transition-transform touch-target"
                        style={{ bottom: '160px' }}
                        title={t('helpAndFeedback')}
                        aria-label={t('helpAndFeedback')}
                    >
                        <span aria-hidden="true">?</span>
                    </button>

                    {/* Back to Top Button */}
                    <button
                        onClick={() => window.scrollTo({ top: 0, behavior: 'smooth' })}
                        className="fixed left-4 w-12 h-12 bg-gradient-to-r from-indigo-500 to-purple-500 rounded-full flex items-center justify-center text-white text-2xl shadow-lg z-[9998] hover:scale-110 transition-transform touch-target"
                        style={{ bottom: '220px' }}
                        title="חזור לראש הדף"
                        aria-label="חזור לראש הדף"
                    >
                        <span aria-hidden="true">↑</span>
                    </button>

                    {/* Accessibility Modal */}
                    {showAccessibility && (
                        <div className="fixed inset-0 bg-black/50 z-[10000] flex items-start justify-center pt-10 overflow-y-auto" onClick={() => setShowAccessibility(false)}>
                            <div className="bg-white dark:bg-gray-800 rounded-2xl shadow-2xl w-full max-w-md mx-4 mb-10" onClick={e => e.stopPropagation()}>
                                <div className="flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700">
                                    <button onClick={() => setShowAccessibility(false)} className="text-2xl text-gray-500 hover:text-gray-700 touch-target" aria-label="סגור תפריט נגישות"><span aria-hidden="true">✕</span></button>
                                    <h2 className="text-xl font-bold text-gray-800 dark:text-white">סרגל נגישות</h2>
                                    <div className="w-8"></div>
                                </div>
                                <div className="p-4 space-y-4">
                                    {/* Skip to content */}
                                    <button onClick={() => { document.querySelector('main, [role="main"], .max-w-4xl')?.scrollIntoView(); setShowAccessibility(false); }}
                                        className="w-full py-3 bg-gray-100 dark:bg-gray-700 rounded-xl font-medium text-gray-800 dark:text-white hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors">
                                        דלג לתוכן העמוד
                                    </button>

                                    {/* Font Size */}
                                    <div>
                                        <p className="text-sm text-gray-500 dark:text-gray-400 mb-2 text-center">גופן וקישורים</p>
                                        <div className="flex gap-2">
                                            <button onClick={() => updateAccessibility('fontSize', 'large')}
                                                className={`flex-1 py-2 rounded-xl font-medium transition-colors ${accessibilitySettings.fontSize === 'large' ? 'bg-blue-500 text-white' : 'bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-white'}`}>
                                                הגדלת טקסט
                                            </button>
                                            <button onClick={() => updateAccessibility('fontSize', 'small')}
                                                className={`flex-1 py-2 rounded-xl font-medium transition-colors ${accessibilitySettings.fontSize === 'small' ? 'bg-blue-500 text-white' : 'bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-white'}`}>
                                                הקטנת טקסט
                                            </button>
                                            <button onClick={() => updateAccessibility('highlightLinks', !accessibilitySettings.highlightLinks)}
                                                className={`flex-1 py-2 rounded-xl font-medium transition-colors ${accessibilitySettings.highlightLinks ? 'bg-blue-500 text-white' : 'bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-white'}`}>
                                                הדגש קישורים
                                            </button>
                                        </div>
                                    </div>

                                    {/* Contrast */}
                                    <div>
                                        <p className="text-sm text-gray-500 dark:text-gray-400 mb-2 text-center">צבעים</p>
                                        <div className="flex gap-2">
                                            <button onClick={() => updateAccessibility('contrast', 'low')}
                                                className={`flex-1 py-2 rounded-xl font-medium transition-colors ${accessibilitySettings.contrast === 'low' ? 'bg-blue-500 text-white' : 'bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-white'}`}>
                                                ניגודיות עדינה
                                            </button>
                                            <button onClick={() => updateAccessibility('contrast', 'normal')}
                                                className={`flex-1 py-2 rounded-xl font-medium transition-colors ${accessibilitySettings.contrast === 'normal' ? 'bg-blue-500 text-white' : 'bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-white'}`}>
                                                ניגודיות רגילה
                                            </button>
                                            <button onClick={() => updateAccessibility('contrast', 'high')}
                                                className={`flex-1 py-2 rounded-xl font-medium transition-colors ${accessibilitySettings.contrast === 'high' ? 'bg-blue-500 text-white' : 'bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-white'}`}>
                                                ניגודיות גבוהה
                                            </button>
                                        </div>
                                    </div>

                                    {/* Cursor */}
                                    <div>
                                        <p className="text-sm text-gray-500 dark:text-gray-400 mb-2 text-center">סמן העכבר</p>
                                        <div className="flex gap-2">
                                            <button onClick={() => updateAccessibility('cursorSize', 'large-black')}
                                                className={`flex-1 py-2 rounded-xl font-medium transition-colors ${accessibilitySettings.cursorSize === 'large-black' ? 'bg-blue-500 text-white' : 'bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-white'}`}>
                                                סמן גדול שחור
                                            </button>
                                            <button onClick={() => updateAccessibility('cursorSize', 'normal')}
                                                className={`flex-1 py-2 rounded-xl font-medium transition-colors ${accessibilitySettings.cursorSize === 'normal' ? 'bg-blue-500 text-white' : 'bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-white'}`}>
                                                סמן רגיל
                                            </button>
                                            <button onClick={() => updateAccessibility('cursorSize', 'large-white')}
                                                className={`flex-1 py-2 rounded-xl font-medium transition-colors ${accessibilitySettings.cursorSize === 'large-white' ? 'bg-blue-500 text-white' : 'bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-white'}`}>
                                                סמן גדול לבן
                                            </button>
                                        </div>
                                    </div>

                                    {/* Language Selector */}
                                    <div>
                                        <p className="text-sm text-gray-500 dark:text-gray-400 mb-2 text-center">🌐 שפה / Language</p>
                                        <div className="grid grid-cols-4 gap-2">
                                            <button onClick={() => { if(window.changeAppLanguage) window.changeAppLanguage('he'); }}
                                                className={`py-2 rounded-xl font-medium transition-colors ${localStorage.getItem('appLanguage') === 'he' || !localStorage.getItem('appLanguage') ? 'bg-blue-500 text-white' : 'bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-white'}`}>
                                                עברית
                                            </button>
                                            <button onClick={() => { if(window.changeAppLanguage) window.changeAppLanguage('en'); }}
                                                className={`py-2 rounded-xl font-medium transition-colors ${localStorage.getItem('appLanguage') === 'en' ? 'bg-blue-500 text-white' : 'bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-white'}`}>
                                                English
                                            </button>
                                            <button onClick={() => { if(window.changeAppLanguage) window.changeAppLanguage('ru'); }}
                                                className={`py-2 rounded-xl font-medium transition-colors ${localStorage.getItem('appLanguage') === 'ru' ? 'bg-blue-500 text-white' : 'bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-white'}`}>
                                                Русский
                                            </button>
                                            <button onClick={() => { if(window.changeAppLanguage) window.changeAppLanguage('ar'); }}
                                                className={`py-2 rounded-xl font-medium transition-colors ${localStorage.getItem('appLanguage') === 'ar' ? 'bg-blue-500 text-white' : 'bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-white'}`}>
                                                العربية
                                            </button>
                                        </div>
                                    </div>

                                    {/* Reset */}
                                    <button onClick={resetAccessibility}
                                        className="w-full py-3 bg-gray-200 dark:bg-gray-600 rounded-xl font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-300 dark:hover:bg-gray-500 transition-colors">
                                        איפוס כל ההגדרות
                                    </button>

                                    {/* Footer links */}
                                    <div className="flex justify-between pt-2 border-t border-gray-200 dark:border-gray-700">
                                        <button onClick={() => setShowFeedback(true)} className="text-blue-500 hover:underline text-sm">צור קשר</button>
                                        <button onClick={() => alert('אפליקציית ListNest מחויבת לנגישות מלאה לכל המשתמשים.\n\nהאפליקציה תוכננה בהתאם לתקן הישראלי ת"י 5568 ולהנחיות WCAG 2.1 ברמה AA.\n\nלשאלות בנושא נגישות ניתן לפנות אלינו.')} className="text-blue-500 hover:underline text-sm">הצהרת נגישות</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}

                    {/* Help Modal */}
                    {showHelp && (
                        <div className="fixed inset-0 bg-black/50 z-[10000] flex items-center justify-center p-4" onClick={() => setShowHelp(false)}>
                            <div className="bg-white dark:bg-gray-800 rounded-2xl shadow-2xl w-full max-w-lg max-h-[90vh] overflow-y-auto" onClick={e => e.stopPropagation()}>
                                <div className="flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700 sticky top-0 bg-white dark:bg-gray-800">
                                    <button onClick={() => setShowHelp(false)} className="text-2xl text-gray-500 hover:text-gray-700 touch-target" aria-label="סגור חלון עזרה"><span aria-hidden="true">✕</span></button>
                                    <h2 className="text-xl font-bold text-gray-800 dark:text-white">עזרה</h2>
                                    <div className="w-8"></div>
                                </div>
                                <div className="p-4 space-y-4">
                                    <div className="bg-indigo-50 dark:bg-indigo-900/30 rounded-xl p-4">
                                        <h3 className="font-bold text-indigo-800 dark:text-indigo-200 mb-2">🛒 איך להשתמש באפליקציה</h3>
                                        <ul className="text-sm text-indigo-700 dark:text-indigo-300 space-y-2 list-disc list-inside">
                                            <li>בחר קטגוריה ולחץ על מוצר להוספה לרשימה</li>
                                            <li>החלק שמאלה על מוצר לסימון "נקנה"</li>
                                            <li>החלק ימינה או לחץ על ⏭ לדחייה לסוף הרשימה</li>
                                            <li>השתמש בחיפוש או הקלטה קולית להוספה מהירה</li>
                                            <li>שמור רשימות לשימוש חוזר</li>
                                        </ul>
                                    </div>
                                    <div className="bg-purple-50 dark:bg-purple-900/30 rounded-xl p-4">
                                        <h3 className="font-bold text-purple-800 dark:text-purple-200 mb-2">👨‍👩‍👧‍👦 שיתוף עם המשפחה</h3>
                                        <ul className="text-sm text-purple-700 dark:text-purple-300 space-y-2 list-disc list-inside">
                                            <li>שתף קוד, QR, קישור או WhatsApp</li>
                                            <li><strong>הורים (אבא/אמא)</strong> - הרשאות מנהל מלאות</li>
                                            <li><strong>ילדים</strong> - יכולים להוסיף ולסמן מוצרים בלבד</li>
                                            <li>קבל התראות כשמישהו מוסיף מוצר</li>
                                            <li>צ'אט מובנה לתיאום הקניות</li>
                                        </ul>
                                    </div>
                                    <div className="bg-amber-50 dark:bg-amber-900/30 rounded-xl p-4">
                                        <h3 className="font-bold text-amber-800 dark:text-amber-200 mb-2">📷 סריקה חכמה</h3>
                                        <ul className="text-sm text-amber-700 dark:text-amber-300 space-y-2 list-disc list-inside">
                                            <li>סרוק מתכון להוספת מרכיבים אוטומטית</li>
                                            <li>צלם מוצר לזיהוי והשוואת מחירים</li>
                                        </ul>
                                    </div>
                                    <div className="bg-green-50 dark:bg-green-900/30 rounded-xl p-4">
                                        <h3 className="font-bold text-green-800 dark:text-green-200 mb-2">🌐 שפות ונגישות</h3>
                                        <ul className="text-sm text-green-700 dark:text-green-300 space-y-2 list-disc list-inside">
                                            <li>תמיכה בעברית, אנגלית, רוסית וערבית</li>
                                            <li>החלף שפה בכפתור הנגישות (♿)</li>
                                            <li>מצב כהה/בהיר, הגדלת טקסט ועוד</li>
                                        </ul>
                                    </div>
                                    <button onClick={() => { setShowHelp(false); setShowFeedback(true); }}
                                        className="w-full py-3 bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-xl font-bold hover:opacity-90 transition-opacity">
                                        📧 שלח משוב או דיווח על בעיה
                                    </button>
                                    <button onClick={() => { localStorage.removeItem('hasSeenOnboarding'); setShowHelp(false); setShowOnboarding(true); setOnboardingStep(0); }}
                                        className="w-full py-3 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-200 rounded-xl font-medium hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors">
                                        🎓 הצג הדרכה מחדש
                                    </button>
                                </div>
                            </div>
                        </div>
                    )}

                    {/* Feedback Modal */}
                    {showFeedback && (
                        <div className="fixed inset-0 bg-black/50 z-[10001] flex items-center justify-center p-4" onClick={() => setShowFeedback(false)}>
                            <div className="bg-white dark:bg-gray-800 rounded-2xl shadow-2xl w-full max-w-md" onClick={e => e.stopPropagation()}>
                                <div className="flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700">
                                    <button onClick={() => setShowFeedback(false)} className="text-2xl text-gray-500 hover:text-gray-700">✕</button>
                                    <h2 className="text-xl font-bold text-gray-800 dark:text-white">שלח משוב</h2>
                                    <div className="w-8"></div>
                                </div>
                                {feedbackSent ? (
                                    <div className="p-8 text-center">
                                        <div className="text-5xl mb-4">✅</div>
                                        <p className="text-lg font-medium text-gray-800 dark:text-white">תודה על המשוב!</p>
                                        <p className="text-gray-500 dark:text-gray-400">נחזור אליך בהקדם</p>
                                    </div>
                                ) : (
                                    <div className="p-4 space-y-4">
                                        <div>
                                            <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">סוג הפנייה</label>
                                            <div className="flex gap-2">
                                                <button onClick={() => setFeedbackType('bug')}
                                                    className={`flex-1 py-2 rounded-xl font-medium transition-colors ${feedbackType === 'bug' ? 'bg-red-500 text-white' : 'bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-200'}`}>
                                                    🐛 באג
                                                </button>
                                                <button onClick={() => setFeedbackType('feature')}
                                                    className={`flex-1 py-2 rounded-xl font-medium transition-colors ${feedbackType === 'feature' ? 'bg-blue-500 text-white' : 'bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-200'}`}>
                                                    💡 בקשה
                                                </button>
                                                <button onClick={() => setFeedbackType('other')}
                                                    className={`flex-1 py-2 rounded-xl font-medium transition-colors ${feedbackType === 'other' ? 'bg-purple-500 text-white' : 'bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-200'}`}>
                                                    💬 אחר
                                                </button>
                                            </div>
                                        </div>
                                        <div>
                                            <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">תיאור</label>
                                            <textarea
                                                value={feedbackText}
                                                onChange={(e) => setFeedbackText(e.target.value)}
                                                placeholder="ספר לנו מה קרה או מה תרצה לראות..."
                                                className="w-full h-32 p-3 border border-gray-200 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 text-gray-800 dark:text-white resize-none focus:ring-2 focus:ring-indigo-500"
                                            />
                                        </div>
                                        <button onClick={sendFeedback} disabled={!feedbackText.trim() || feedbackSending}
                                            className="w-full py-3 bg-gradient-to-r from-indigo-500 to-purple-500 text-white rounded-xl font-bold disabled:opacity-50 hover:opacity-90 transition-opacity">
                                            {feedbackSending ? '⏳ שולח...' : '📤 שלח'}
                                        </button>
                                    </div>
                                )}
                            </div>
                        </div>
                    )}

                    {/* Onboarding Modal */}
                    {showOnboarding && (
                        <div className="fixed inset-0 bg-black/70 z-[10002] flex items-center justify-center p-4">
                            <div className="bg-white dark:bg-gray-800 rounded-2xl shadow-2xl w-full max-w-md overflow-hidden">
                                {onboardingStep === 0 && (
                                    <div className="p-6 text-center">
                                        <div className="text-6xl mb-4">🛒</div>
                                        <h2 className="text-2xl font-bold text-gray-800 dark:text-white mb-2">ברוכים הבאים ל-ListNest!</h2>
                                        <p className="text-gray-600 dark:text-gray-300 mb-6">רשימת קניות חכמה לכל המשפחה</p>
                                        <button onClick={() => setOnboardingStep(1)} className="w-full py-3 bg-gradient-to-r from-indigo-500 to-purple-500 text-white rounded-xl font-bold">
                                            בואו נתחיל! →
                                        </button>
                                    </div>
                                )}
                                {onboardingStep === 1 && (
                                    <div className="p-6">
                                        <div className="text-4xl mb-3 text-center">📱</div>
                                        <h3 className="text-xl font-bold text-gray-800 dark:text-white mb-2 text-center">הוספת מוצרים</h3>
                                        <div className="bg-indigo-50 dark:bg-indigo-900/30 rounded-xl p-4 mb-4">
                                            <ul className="text-sm text-gray-700 dark:text-gray-300 space-y-2">
                                                <li>📂 <strong>קטגוריות:</strong> בחר קטגוריה ולחץ על מוצר</li>
                                                <li>🔍 <strong>חיפוש:</strong> הקלד שם מוצר בשורת החיפוש</li>
                                                <li>🎤 <strong>קולי:</strong> לחץ על המיקרופון ואמור את המוצר</li>
                                            </ul>
                                        </div>
                                        <div className="flex gap-2">
                                            <button onClick={() => setOnboardingStep(0)} className="flex-1 py-2 bg-gray-100 dark:bg-gray-700 rounded-xl">← הקודם</button>
                                            <button onClick={() => setOnboardingStep(2)} className="flex-1 py-2 bg-indigo-500 text-white rounded-xl">הבא →</button>
                                        </div>
                                    </div>
                                )}
                                {onboardingStep === 2 && (
                                    <div className="p-6">
                                        <div className="text-4xl mb-3 text-center">👆</div>
                                        <h3 className="text-xl font-bold text-gray-800 dark:text-white mb-2 text-center">ניהול הרשימה</h3>
                                        <div className="bg-green-50 dark:bg-green-900/30 rounded-xl p-4 mb-4">
                                            <ul className="text-sm text-gray-700 dark:text-gray-300 space-y-2">
                                                <li>👈 <strong>החלקה שמאלה:</strong> סימון "נקנה" ✓</li>
                                                <li>👉 <strong>החלקה ימינה:</strong> דחייה לסוף הרשימה</li>
                                                <li>🔢 <strong>לחיצה על כמות:</strong> שינוי כמות</li>
                                                <li>📝 <strong>לחיצה ארוכה:</strong> עריכת הערה</li>
                                            </ul>
                                        </div>
                                        <div className="flex gap-2">
                                            <button onClick={() => setOnboardingStep(1)} className="flex-1 py-2 bg-gray-100 dark:bg-gray-700 rounded-xl">← הקודם</button>
                                            <button onClick={() => setOnboardingStep(3)} className="flex-1 py-2 bg-indigo-500 text-white rounded-xl">הבא →</button>
                                        </div>
                                    </div>
                                )}
                                {onboardingStep === 3 && (
                                    <div className="p-6">
                                        <div className="text-4xl mb-3 text-center">👨‍👩‍👧‍👦</div>
                                        <h3 className="text-xl font-bold text-gray-800 dark:text-white mb-2 text-center">שיתוף משפחתי</h3>
                                        <div className="bg-purple-50 dark:bg-purple-900/30 rounded-xl p-4 mb-4">
                                            <ul className="text-sm text-gray-700 dark:text-gray-300 space-y-2">
                                                <li>📤 <strong>שיתוף:</strong> קוד, QR, WhatsApp או קישור</li>
                                                <li>👨👩 <strong>הורים:</strong> אבא/אמא - הרשאות מנהל מלאות</li>
                                                <li>👦 <strong>ילדים:</strong> יכולים להוסיף ולסמן מוצרים בלבד</li>
                                                <li>🔔 <strong>התראות:</strong> קבל הודעה כשמישהו מוסיף מוצר</li>
                                                <li>💬 <strong>צ'אט:</strong> תקשורת משפחתית בזמן אמת</li>
                                            </ul>
                                        </div>
                                        <div className="flex gap-2">
                                            <button onClick={() => setOnboardingStep(2)} className="flex-1 py-2 bg-gray-100 dark:bg-gray-700 rounded-xl">← הקודם</button>
                                            <button onClick={() => setOnboardingStep(4)} className="flex-1 py-2 bg-indigo-500 text-white rounded-xl">הבא →</button>
                                        </div>
                                    </div>
                                )}
                                {onboardingStep === 4 && (
                                    <div className="p-6 text-center">
                                        <div className="text-6xl mb-4">🎉</div>
                                        <h3 className="text-xl font-bold text-gray-800 dark:text-white mb-2">מוכנים לקניות!</h3>
                                        <p className="text-gray-600 dark:text-gray-300 mb-4">תמיד אפשר לחזור להדרכה מכפתור העזרה</p>
                                        <div className="flex flex-wrap gap-2 text-xs text-gray-500 dark:text-gray-400 justify-center mb-4">
                                            <span>🌐 עברית | English | Русский | العربية</span>
                                        </div>
                                        <div className="flex gap-2 text-xs text-gray-500 dark:text-gray-400 justify-center mb-4">
                                            <span>♿ נגישות</span>
                                            <span>•</span>
                                            <span>❓ עזרה</span>
                                            <span>•</span>
                                            <span>🌙 מצב כהה</span>
                                        </div>
                                        <button onClick={completeOnboarding} className="w-full py-3 bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-xl font-bold">
                                            ✨ בואו נתחיל!
                                        </button>
                                    </div>
                                )}
                                {/* Progress dots */}
                                <div className="flex justify-center gap-2 pb-4">
                                    {[0, 1, 2, 3, 4].map(step => (
                                        <div key={step} className={`w-2 h-2 rounded-full transition-colors ${onboardingStep === step ? 'bg-indigo-500' : 'bg-gray-300 dark:bg-gray-600'}`} />
                                    ))}
                                </div>
                            </div>
                        </div>
                    )}
                    </main>
                </div>
            );
        }

        // Main App Content (inside FamilyProvider)
        function AppContent() {
            const { family, loading: familyLoading } = useFamily();

            if (familyLoading) {
                return (
                    <div className="min-h-screen gradient-bg flex items-center justify-center">
                        <div className="text-center">
                            <div className="text-6xl mb-4 float">👨‍👩‍👧‍👦</div>
                            <div className="text-xl text-white font-medium">טוען משפחה...</div>
                            <div className="mt-4 w-32 h-1 bg-white/20 rounded-full overflow-hidden mx-auto">
                                <div className="h-full w-1/2 progress-animate rounded-full"></div>
                            </div>
                        </div>
                    </div>
                );
            }

            if (!family) {
                return <NoFamilyScreen />;
            }

            return <ShoppingList />;
        }

        // Main App Component
        function App() {
            const { user, loading } = useAuth();

            if (loading) {
                return (
                    <div className="min-h-screen gradient-bg flex items-center justify-center">
                        <div className="text-center">
                            <div className="text-6xl mb-4 float">🛒</div>
                            <div className="text-xl text-white font-medium">טוען...</div>
                            <div className="mt-4 w-32 h-1 bg-white/20 rounded-full overflow-hidden mx-auto">
                                <div className="h-full w-1/2 progress-animate rounded-full"></div>
                            </div>
                        </div>
                    </div>
                );
            }

            if (!user) {
                return <AuthScreen />;
            }

            return (
                <FamilyProvider>
                    <AppContent />
                </FamilyProvider>
            );
        }

        ReactDOM.render(
            <LanguageProvider>
                <AuthProvider>
                    <App />
                </AuthProvider>
            </LanguageProvider>,
            document.getElementById('root')
        );
    </script>

    <!-- Service Worker Registration -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('sw.js')
                    .then(registration => {
                        console.log('ServiceWorker registered:', registration.scope);
                    })
                    .catch(error => {
                        console.log('ServiceWorker registration failed:', error);
                    });
            });
        }
    </script>
</body>
</html>
