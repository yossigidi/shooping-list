<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#4F46E5">
    <title>×¨×©×™××ª ×§× ×™×•×ª ××©×¤×—×ª×™×ª Pro</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>tailwind.config = { darkMode: 'class' }</script>
    
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getFirestore, collection, addDoc, updateDoc, deleteDoc, doc, onSnapshot, query, orderBy, getDocs } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';
        
        const firebaseConfig = {
            apiKey: "AIzaSyD3pwFMmo4mMjxgzUz5oPynt0D68Yy3Iz0",
            authDomain: "shooping-list-d846b.firebaseapp.com",
            projectId: "shooping-list-d846b",
            storageBucket: "shooping-list-d846b.firebasestorage.app",
            messagingSenderId: "1099114666122",
            appId: "1:1099114666122:web:5c704bf2da52aa3ca63573"
        };
        
        const app = initializeApp(firebaseConfig);
        window.db = getFirestore(app);
        window.firestore = { collection, addDoc, updateDoc, deleteDoc, doc, onSnapshot, query, orderBy, getDocs };
    </script>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel">
        const { useState, useEffect } = React;

        const CATEGORIES = {
            fruits: { name: '×¤×™×¨×•×ª ×•×™×¨×§×•×ª', icon: 'ğŸ¥¬' },
            dairy: { name: '×—×œ×‘×™', icon: 'ğŸ¥›' },
            desserts: { name: '××¢×“× ×™ ×—×œ×‘', icon: 'ğŸ®' },
            meat: { name: '×‘×©×¨ ×•×“×’×™×', icon: 'ğŸ—' },
            deli: { name: '××¢×“× ×™×”', icon: 'ğŸ¥“' },
            bakery: { name: '×œ×—× ×•×××¤×™×', icon: 'ğŸ' },
            cereals: { name: '×“×’× ×™× ×•×§×•×¨× ×¤×œ×§×¡', icon: 'ğŸ¥£' },
            canned: { name: '×©×™××•×¨×™× ×•××–×•×Ÿ ×™×‘×©', icon: 'ğŸ¥«' },
            spices: { name: '×ª×‘×œ×™× ×™× ×•×‘×™×©×•×œ', icon: 'ğŸ§‚' },
            coffee: { name: '×§×¤×” ×•×ª×”', icon: 'â˜•' },
            drinks: { name: '××©×§××•×ª', icon: 'ğŸ¥¤' },
            snacks: { name: '×—×˜×™×¤×™× ×•×××ª×§×™×', icon: 'ğŸ¿' },
            frozen: { name: '×§×¤×•××™×', icon: 'ğŸ§Š' },
            health: { name: '×“×™××˜×” ×•×—×œ×‘×•×Ÿ', icon: 'ğŸ’ª' },
            hygiene: { name: '×”×™×’×™×™× ×” ×•×¨×—×¦×”', icon: 'ğŸ§´' },
            cleaning: { name: '× ×™×§×™×•×Ÿ', icon: 'ğŸ§¹' },
            candles: { name: '× ×¨×•×ª ×•×©××Ÿ', icon: 'ğŸ•¯ï¸' },
            baby: { name: '×ª×™× ×•×§×•×ª ×•×™×œ×“×™×', icon: 'ğŸ‘¶' },
            pets: { name: '×—×™×•×ª ××—××“', icon: 'ğŸ¾' },
            other: { name: '××—×¨', icon: 'ğŸ“¦' }
        };

        const FAMILY_MEMBERS = [
            { id: 'member1', name: '××‘×', color: 'bg-blue-100 text-blue-800 border-blue-300 dark:bg-blue-900 dark:text-blue-200' },
            { id: 'member2', name: '×××', color: 'bg-pink-100 text-pink-800 border-pink-300 dark:bg-pink-900 dark:text-pink-200' },
            { id: 'member3', name: '×¢××™×ª', color: 'bg-green-100 text-green-800 border-green-300 dark:bg-green-900 dark:text-green-200' },
            { id: 'member4', name: '×¨×•× ×™', color: 'bg-yellow-100 text-yellow-800 border-yellow-300 dark:bg-yellow-900 dark:text-yellow-200' },
            { id: 'member5', name: '× ×•×¢×”', color: 'bg-purple-100 text-purple-800 border-purple-300 dark:bg-purple-900 dark:text-purple-200' },
            { id: 'member6', name: '×××•×¨', color: 'bg-orange-100 text-orange-800 border-orange-300 dark:bg-orange-900 dark:text-orange-200' }
        ];

        const PRODUCTS = {
            dairy: ['×—×œ×‘', '×—×œ×‘ 3%', '×—×œ×‘ 1%', '×—×œ×‘ ×“×œ ×©×•××Ÿ', '×œ×‘×Ÿ', '×’×‘×™× ×” ×¦×”×•×‘×”', '×’×‘×™× ×” ×¦×”×•×‘×” ×¢××§', '×’×‘×™× ×” ×¦×”×•×‘×” ×’×œ×‘×•×¢', '×§×•×˜×’×³', '×§×•×˜×’×³ 5%', '×§×•×˜×’×³ 3%', '×’×‘×™× ×” ×‘×•×œ×’×¨×™×ª', '×¦×¤×ª×™×ª', '×’×‘×™× ×ª ×©×× ×ª', '×¤×¨××–×Ÿ', '××•×¦×¨×œ×”', '×‘×™×¦×™×', '×‘×™×¦×™× ××•×¨×’× ×™×•×ª', '×‘×™×¦×™× ×—×•×¤×©×™×•×ª', '×—×××”', '×©×× ×ª ××ª×•×§×”', '×©×× ×ª ×—××•×¦×”', '×™×•×’×•×¨×˜', '×™×•×’×•×¨×˜ ×™×•×•× ×™', '×™×•×’×•×¨×˜ ×ª× ×•×‘×”', '×™×•×’×•×¨×˜ ×©×˜×¨××•×¡', '×’×‘×™× ×” ×œ×‘× ×”', '×™×•×’×•×¨×˜ ××•×¨×’× ×™', '×™×•×’×•×¨×˜ ×œ×™×œ×“×™×', '×’×‘×™× ×ª ×¢×–×™×', '×’×‘×™× ×ª ×¨×•×§×¤×•×¨', '×§×©×§×‘×œ', '×’××•×“×”', '×—×œ×•××™', '×¤×™×œ×“×œ×¤×™×”', '×œ××‘× ×”', '×’×‘×™× ×ª ×ª×¤×•×—', '×—×××” ×‘×¦×œ', '×—×××” ×©×•×', '××¨×’×¨×™× ×”'],
            
            fruits: ['×¢×’×‘× ×™×•×ª', '×¢×’×‘× ×™×•×ª ×©×¨×™', '××œ×¤×¤×•× ×™×', '××œ×¤×¤×•×Ÿ ×—××•×¥', '×‘×¦×œ', '×‘×¦×œ ×™×¨×•×§', '×©×•×', '×¤×œ×¤×œ ××“×•×', '×¤×œ×¤×œ ×™×¨×•×§', '×¤×œ×¤×œ ×¦×”×•×‘', '×—×¡×”', '×—×¡×” ××™×™×¡×‘×¨×’', '×›×¨×•×‘', '×›×¨×•×‘ ×¡×’×•×œ', '×’×–×¨', '×’×–×¨ ×‘×™×™×‘×™', '×¡×œ×§', '×ª×¤×•×—×™ ××“××”', '×‘×˜×˜×”', '×§×™×©×•×', '×—×¦×™×œ', '×‘×¨×•×§×•×œ×™', '×›×¨×•×‘×™×ª', '×ª×¨×“', '×©××™×¨', '×˜×¨×’×•×Ÿ', '×¨××©×“', '×¨×™×—×Ÿ', '× ×¢× ×¢', '×¨×•×§×˜', '×¤×˜×¨×•×–×™×œ×™×”', '×›×•×¡×‘×¨×”', '×¡×œ×¨×™', '×©×•××¨', '×œ×™××•×Ÿ', '×œ×™×™×', '×‘× × ×•×ª', '×ª×¤×•×—×™×', '×ª×¤×•×—×™× ×™×¨×•×§×™×', '×ª×¤×•×–×™×', '××‘×˜×™×—', '××œ×•×Ÿ', '×¢× ×‘×™×', '××’×¡', '×©×–×™×¤×™×', '××¤×¨×¡×§×™×', '× ×§×˜×¨×™× ×•×ª', '×§×œ×× ×˜×™× ×•×ª', '×§×™×•×•×™', '×¨×™××•× ×™×', '×× ×’×•', '×× × ×¡', '××‘×•×§×“×•', '×ª×•×ª×™×'],
            
            bakery: ['×œ×—×', '×œ×—× ××œ×', '×œ×—× ×©×™×¤×•×Ÿ', '×œ×—× ×›×•×¡××™×Ÿ', '×—×œ×”', '×—×œ×” ××œ××”', '×¢×•×’×™×•×ª', '×¤×™×ª×•×ª', '×¤×™×ª×•×ª ××œ××•×ª', '×œ×—×× ×™×•×ª', '×‘×’×˜', '×¦×³×‘×˜×”', '×¨×•×œ×“×”', '×œ×—× ×©×•××©×•×', '×œ×—× ×¤×©×•×˜', '××¦×•×ª'],
            
            meat: ['×¢×•×£ ×©×œ×', '×—×–×” ×¢×•×£', '×›×¨×¢×™×™× ×¢×•×£', '×›× ×¤×™×™× ×¢×•×£', '×¢×•×£ ×˜×—×•×Ÿ', '×‘×©×¨ ×˜×—×•×Ÿ', '×× ×˜×¨×™×§×•×˜', '×¤×™×œ×” ×¢×•×£', '×“×’×™×', '×¡×œ××•×Ÿ', '×¤×™×œ×” ×“×’', '×©× ×™×¦×œ', '×§×‘×‘', '×”××‘×•×¨×’×¨', '×›×‘×“ ×¢×•×£', '× ×§× ×™×§×™×•×ª ×¢×•×£', '×¤×¨×’×™×ª'],
            
            desserts: ['××™×œ×§×™', '×“× ×•× ×”', '×™×•×¤×œ×”', '×“× ×™××œ×”', '××¢×“×Ÿ ×•× ×™×œ', '××¢×“×Ÿ ×©×•×§×•×œ×“', '××¢×“×Ÿ ×§×¨××œ', '××¢×“×Ÿ ×‘×™×¡×§×•×•×™×˜×™×', '××¢×“×Ÿ ×œ×•×˜×•×¡', '×©×•×§×• ×™×˜×‘×ª×”', '×¤×•×“×™× ×’', '××¢×“×Ÿ ×™×•×’×•×¨×˜', '××¢×“×Ÿ ×ª×•×ª', '××¢×“×Ÿ ×‘× × ×”', '××•×¡ ×©×•×§×•×œ×“', '××•×¡ ×•× ×™×œ', '×¤×¨×™ ×’×“', '×“×Ÿ ×‘×¨××•×Ÿ'],
            
            deli: ['× ×§× ×™×§×™×•×ª', '×¡×œ××™', '×¤×¡×˜×¨××”', '×§×‘× ×•×¡', '× ×§× ×™×§ ××¢×•×©×Ÿ', '×—×–×” ×”×•×“×• ××¢×•×©×Ÿ', '×¨×•×¡×˜×‘×™×£', '×©×™×¤×•×“×™×'],
            
            canned: ['××•×¨×–', '××•×¨×– ×‘×¡××˜×™', '××•×¨×– ×™×¡××™×Ÿ', '×¤×¡×˜×”', '×¤×¡×˜×” ×¤× ×”', '×¤×¡×˜×” ×¡×¤×’×˜×™', '×§×•×¡×§×•×¡', '×§×˜× ×™×•×ª', '×¨×•×˜×‘ ×¢×’×‘× ×™×•×ª', '×˜×•× ×”', '×ª×™×¨×¡', '×©××Ÿ ×–×™×ª', '×©××Ÿ ×§× ×•×œ×”', '×©××Ÿ ×—×× ×™×•×ª', '×©××Ÿ ×ª×™×¨×¡', '×©××Ÿ ×–×™×ª ×›×ª×™×ª ××¢×•×œ×”', '×—×•××¥ ×‘×œ×¡××™', '×—×•××¥ ×™×™×Ÿ ××“×•×', '×—×•××¥ ×™×™×Ÿ ×œ×‘×Ÿ', '×—×•××¥ ×ª×¤×•×—×™×', '××™×¥ ×œ×™××•×Ÿ', '×—×•××•×¡ ×˜×—×•×Ÿ', '×˜×—×™× ×” ×’×•×œ××™×ª', '×˜×—×™× ×” ××¢×•×¨×‘×ª', '×××¨×— ×©×•×', '×–×™×ª×™×', '×–×™×ª×™× ×©×—×•×¨×™×', '×–×™×ª×™× ×™×¨×•×§×™×', '××œ×¤×¤×•×Ÿ ×—××•×¥', '×¤×œ×¤×œ ×—×¨×™×£', '×¨×™×‘×”', '×“×‘×©', '×‘×•×˜× ×™×', '×©×•××©×•×', '×¤×¨×’', '×—×™×˜×”', '×‘×•×¨×’×•×œ', '×§×™× ×•××”', '× ×•×“×œ×¡', '××˜×¨×™×•×ª ×¡×™× ×™×•×ª', '×¤×•×œ ×¡×™× ×™', '×’×¨×’×¨×™ ×—×•××•×¡'],
            
            cereals: ['×§×•×¨× ×¤×œ×§×¡ ×§×œ××¡×™', '×§×•×¨× ×¤×œ×§×¡ ×“×‘×©', '×§×•×¨× ×¤×œ×§×¡ ×©×•×§×•×œ×“', '×§×•×¨× ×¤×œ×§×¡ ×›×¨×™×•×ª', '×§×•×¨× ×¤×œ×§×¡ ×›×¨×™×•×ª ×©×•×§×•×œ×“', '×§×•×¨× ×¤×œ×§×¡ ×›×¨×™×•×ª ×“×‘×©', '×˜×¨×™×§×¡', '×¤×ª×™×ª×™ ×ª×™×¨×¡', '×¤×ª×™×ª×™ ×©×•×§×•×œ×“', '×¤×ª×™×ª×™ ×“×‘×©', '×’×¨× ×•×œ×”', '××•×–×œ×™', '×©×™×‘×•×œ×ª ×©×•×¢×œ', '×¤×¦×¤×•×¦×™ ××•×¨×–', '×§×•×•××§×¨', '×“×’× ×™ ×‘×•×§×¨', '××™× ×™ ×•×•×™×˜×¡', '×¤×¨×•×˜×™×–', '×›×¨×™×•×ª ×©×•×§×•×œ×“', '×¦×™'×¨×™×•×¡', '×œ××§×™ ×¦'××¨××¡', '×§×¤×˜×Ÿ ×§×¨×× ×¥', '× ×¡×˜×œ×” ×¤×™×˜× ×¡'],
            
            spices: ['××œ×—', '×¡×•×›×¨', '×¡×•×›×¨ ×—×•×', '×¡×•×›×¨ ×”××¨×”', '×¡×•×›×¨ ×’×•×œ×Ÿ', '×§×•×‘×™×•×ª ×¡×•×›×¨', '×¤×œ×¤×œ ×©×—×•×¨', '×¤×¤×¨×™×§×”', '×›×•×¨×›×•×', '×›××•×Ÿ', '×§×™× ××•×Ÿ', '××‘×§×ª ×©×•×', '××‘×§×ª ×‘×¦×œ', '××•×¨×’× ×•', '×‘×–×™×œ×™×§×•×', '×–×¢×ª×¨', '×—×•×•××™×™×’×³', '×ª×‘×œ×™×Ÿ ×œ×¢×•×£', '×ª×‘×œ×™×Ÿ ×œ×“×’×™×', '×§××¨×™', '×§××— ×œ×‘×Ÿ', '×§××— ××œ×', '×©××¨×™×', '××‘×§×ª ××¤×™×™×”', '×¡×•×“×” ×œ×©×ª×™×™×”', '×•× ×™×œ', '×©×•×§×•×œ×“ ×¦×³×™×¤×¡', '××’×•×–×™×', '×©×§×“×™×', '××’×•×–×™ ××œ×š', '×§×©×™×•', '×¦×™××•×§×™×', '×ª××¨×™×', '×¢×“×©×™×', '×—×•××•×¡ ×™×‘×©', '×¤×•×œ', '×©×¢×•×¢×™×ª ×œ×‘× ×”', '×©×¢×•×¢×™×ª ××“×•××”', '×›×•×¡××ª', '×‘×•×¨×’×•×œ ×“×§', '×§××— ×ª×™×¨×¡', '×§×•×¨× ×¤×œ×•×¨', '×§×§××•'],
            
            coffee: ['×§×¤×” × ××¡', '×§×¤×” ×˜×•×¨×§×™', '×§×¤×” × ×¡×¤×¨×¡×•', '×§×¤×¡×•×œ×•×ª ×§×¤×”', '×§×¤×” ×©×—×•×¨ ×˜×—×•×Ÿ', '×§×¤×” × ×˜×•×œ ×§×¤××™×Ÿ', '×ª×” ×©×—×•×¨', '×ª×” ×™×¨×•×§', '×ª×” ×¦××—×™×', '×ª×” × ×¢× ×¢', '×ª×” ×œ×•××™×–×”', '×ª×” ×œ×™×¤×˜×•×Ÿ', '×ª×” ×•×™×¡×•×¦×§×™', '×§×¤×” ×¢×œ×™×ª', '×§×¤×¡×•×œ×•×ª × ×¡×¤×¨×¡×•', '×§×¤×¡×•×œ×•×ª ×“×•×œ×¦'×” ×’×•×¡×˜×•', '×§×¤×¡×•×œ×•×ª ×œ× ×“×•×•×¨', '×§×¤×¡×•×œ×•×ª ×˜××¡×™××•', '×—×œ×‘ ××¨×•×›×–', '×¡×•×›×¨ ×œ×§×¤×”', '×××ª×™×§ ×¡×•×›×¨×œ×•×–', '×××ª×™×§ ×¡×˜×™×‘×™×”', '×ª×” ×§××•××™×œ', '×ª×” ××¨×•×•×”'],
            
            drinks: ['××™× ××™× ×¨×œ×™×', '×§×•×œ×”', '×§×•×œ×” ×–×™×¨×•', '×¡×¤×¨×™×™×˜', '××™×¥', '××™×¥ ×ª×¤×•×–×™×', '×¤×¨×™×’×ª', '××™×™×¡ ×§×¤×”', '× ×‘×™×¢×•×ª', '×ª×¤×•×–×™× ×”', '×œ×™××•× ×“×”', '×¤×× ×˜×”', '××™× ××™× ×¨×œ×™×™× ×ª×¤×•×–×™×', '××™×¥ ×¢× ×‘×™×', '××™×¥ ×ª×¤×•×—×™×', '××©×§×” ×× ×¨×’×™×”', '×¡×•×“×”'],
            
            snacks: ['×‘××‘×”', '×‘×™×¡×œ×™', '×“×•×¨×™×˜×•×¡', '×˜×•×¨×˜×™×™×”', '×¤×•×¤×§×•×¨×Ÿ', '×©×•×§×•×œ×“ ×¤×¨×”', '×©×•×§×•×œ×“ ××™×œ×§×™', '×©×•×§×•×œ×“ ×—×œ×‘', '×©×•×§×•×œ×“ ××¨×™×¨', '× ×•×˜×œ×”', '×××¨×— ×©×•×§×•×œ×“', '×—×˜×™×£ ×× ×¨×’×™×”', '×‘×™×¡×§×•×•×™×˜×™×', '×§×œ×™×§', '×ª×¤×•×¦'×™×¤×¡', '×•×•×¤×œ×™×', '×•×•×¤×œ×™', '×¢×•×’×ª ×“×‘×©', '××¨×©××œ×•', '×¡×•×›×¨×™×•×ª', '××¡×˜×™×§', '×’×•××™ ×“×•×‘×•× ×™×', '×§×¦×¤×ª', '×œ×•×˜×•×¡', '×¢×•×’×™×•×ª ××•×¨××•', '×¤×¨×™× ×’×œ×¡', '×ª×œ××”'],
            
            frozen: ['×’×œ×™×“×”', '×’×œ×™×“×” ×•× ×™×œ', '×’×œ×™×“×” ×©×•×§×•×œ×“', '×™×¨×§×•×ª ×§×¤×•××™×', '×©× ×™×¦×œ ×§×¤×•×', '×¤×™×¦×” ×§×¤×•××”', '×‘×¦×§ ×¢×œ×™× ×§×¤×•×', '×‘×¦×§ ×¤×™×œ×• ×§×¤×•×', '×‘×¦×§ ×¤×™×¦×” ×§×¤×•×', '×‘×¦×§ ×’\'×—× ×•×Ÿ ×§×¤×•×', '×‘×¦×§ ××œ×•×•×— ×§×¤×•×', '×‘×¦×§ ×¡××‘×•×¡×§ ×§×¤×•×', '×‘×¦×§ ×‘×•×¨×§×¡ ×§×¤×•×', '×§×•×‘×™×•×ª ×‘×¦×§ ×§×¤×•×', '×¤×™×¨×•×ª ×§×¤×•××™×', '×ª×•×ª×™× ×§×¤×•××™×', '××¤×•× ×” ×§×¤×•××”', '×ª×™×¨×¡ ×§×¤×•×', '×‘×œ×™× ×¦\'×¡'],
            
            health: ['×™×•×’×•×¨×˜ ×™×•×•× ×™ 0%', '×™×•×’×•×¨×˜ ×—×œ×‘×•×Ÿ',  '×§×•×˜×’\' 3%', '×’×‘×™× ×ª ×§×•×˜×’\' 0%', '×—×œ×‘ ×¡×•×™×”', '×—×œ×‘ ×©×§×“×™×', '×—×œ×‘ ×“×œ ×©×•××Ÿ', '×©×™×™×§ ×—×œ×‘×•×Ÿ', '×¤×¨×•×˜××™×Ÿ ×‘×¨', '××‘×§×ª ×—×œ×‘×•×Ÿ', '×œ×—× ××œ×', '×¤×™×ª×” ××œ××”', '×§×¨×§×¨ ×“×’× ×™×', '×—×˜×™×£ ×—×œ×‘×•×Ÿ', '×˜×•× ×” ×‘××™×', '×—×–×” ×¢×•×£ ××¢×•×©×Ÿ', '×‘×™×• ×™×•×’×•×¨×˜', '×¤×¨×•×‘×™×•×˜×™×§×”', '×—×œ×‘ ×¡×¨×”', '××©×§×” ×—×œ×‘×•×Ÿ'],
            
            cleaning: ['× ×™×¨ ×˜×•××œ×˜', '××’×‘×•×ª × ×™×¨', '×¡×‘×•×Ÿ ×›×œ×™×', '××‘×§×ª ×›×‘×™×¡×”', '×’\'×œ ×›×‘×™×¡×”', '××¨×›×š ×›×‘×™×¡×”', '××¨×›×š ×‘× ×™×—×•×—', '××‘×©× ×›×‘×™×¡×”', '××§×•× ×•××™×§×”', '××§×•× ×•××™×§×” ×’'×œ', '×¡×™×£', '×× ×§×” ×¨×¦×¤×•×ª', '×× ×§×” ×—×œ×•× ×•×ª', '×× ×§×” ×××‘×˜×™×”', '××‘×§×ª × ×™×§×•×™', '×¡×¤×•×’×™× ×œ××˜×‘×—', '×©×§×™×•×ª ××©×¤×”', '×©×§×™×•×ª ××©×¤×” ×’×“×•×œ×•×ª', '× ×•×–×œ ×›×œ×™×', '×˜×‘×œ×™×•×ª ×œ××“×™×—', '××œ×— ×œ××“×™×—', '× ×•×–×œ ×©×˜×™×¤×” ×œ××“×™×—', '××‘×§×ª ×¡×•×“×”', '×—×•××¥ ×œ× ×™×§×™×•×Ÿ', '××˜×œ×™×•×ª × ×™×§×•×™', '× ×™×™×¨ ××¤×™×™×”', '× ×™×™×¨ ××œ×•××™× ×™×•×', '×©×§×™×•×ª ×¤×œ×¡×˜×™×§'],
            
            hygiene: ['×¡×‘×•×Ÿ ×™×“×™×™×', '××’×‘×•× ×™× ×œ×—×™×', '××‘×¨×©×ª ×©×™× ×™×™×', '××©×—×ª ×©×™× ×™×™×', '××™ ×¤×”', '×—×•×˜ ×“× ×˜×œ×™', '×©××¤×•', '××¨×›×š ×©×™×¢×¨', '×©××¤×• ×œ×™×œ×“×™×', '×¡×‘×•×Ÿ ×’×•×£', '×’'×œ ×¨×—×¦×”', '××¡×›×” ×œ×©×™×¢×¨', '×§×¨× ×’×™×œ×•×—', '×¡×›×™× ×™ ×’×™×œ×•×—', '×“××•×“×•×¨× ×˜', '×§×¨× ×¤× ×™×', '×§×¨× ×™×“×™×™×', '×§×¨× ×’×•×£', '××‘×¨×©×ª ×©×™×¢×¨', '×’'×œ ×œ×©×™×¢×¨', '×¡×¤×¨×™×™ ×œ×©×™×¢×¨', '×ª×—×‘×•×©×•×ª', '×¤×œ×¡×˜×¨×™×”', '×¦××¨ ×’×¤×Ÿ', '××§×œ×•× ×™ ××•×–× ×™×™×', '×˜××¤×•× ×™×', '××’× ×™ ×ª×—×ª×•×Ÿ', '×ª×—×ª×•× ×™ × ×™×¨', '×ª×—×ª×•× ×™ ×—×“ ×¤×¢××™', '×§×¨× ×©×™×–×•×£', '××¡×™×¨ ××™×¤×•×¨'],
            
            candles: ['× ×¨×•×ª ×©×‘×ª', '× ×¨×•×ª ×—× ×•×›×”', '× ×¨ × ×©××” 24 ×©×¢×•×ª', '× ×¨ × ×©××” 7 ×™××™×', '× ×¨ ×”×‘×“×œ×”', '×©××Ÿ ×œ× ×¨', '×©××Ÿ ×¤×¨×¤×™×Ÿ'],
            
            baby: ['×—×™×ª×•×œ×™×', '××’×‘×•× ×™× ×œ×ª×™× ×•×§×•×ª', '×©××¤×• ×œ×ª×™× ×•×§×•×ª', '×¡×‘×•×Ÿ ×œ×ª×™× ×•×§×•×ª', '×§×¨× ×”×—×ª×œ×”', '××‘×§×ª ×—×œ×‘ ×ª×—×œ×™×£', '××–×•×Ÿ ×œ×ª×™× ×•×§×•×ª', '×—×˜×™×¤×™× ×œ×™×œ×“×™×', '××•×¦×¦×™×', '×‘×§×‘×•×§×™×', '××‘×¨×©×ª ×©×™× ×™×™× ×œ×ª×™× ×•×§×•×ª'],
            
            pets: ['××–×•×Ÿ ×œ×›×œ×‘×™×', '××–×•×Ÿ ×œ×—×ª×•×œ×™×', '×—×•×œ ×œ×—×ª×•×œ×™×', '×—×˜×™×¤×™× ×œ×›×œ×‘×™×', '×—×˜×™×¤×™× ×œ×—×ª×•×œ×™×', '×¦×¢×¦×•×¢×™× ×œ×—×™×•×ª ××—××“']
        };

        function LoginScreen({ onLogin }) {
            const [darkMode, setDarkMode] = useState(false);

            useEffect(() => {
                loadSettings();
            }, []);

            const loadSettings = async () => {
                try {
                    const result = await window.storage.get('darkMode');
                    if (result && result.value === 'true') {
                        setDarkMode(true);
                        document.documentElement.classList.add('dark');
                    }
                } catch (error) {
                    console.log('×˜×¢×™× ×ª ×”×’×“×¨×•×ª ×¨××©×•× ×™×ª');
                }
            };

            const toggleDarkMode = async () => {
                const newMode = !darkMode;
                setDarkMode(newMode);
                try {
                    await window.storage.set('darkMode', String(newMode));
                } catch (error) {
                    console.error('×©×’×™××” ×‘×©××™×¨×ª ××¦×‘ ×ª×¦×•×’×”:', error);
                }
                document.documentElement.classList.toggle('dark');
            };

            return (
                <div className="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-indigo-950 flex items-center justify-center p-4">
                    <div className="bg-white dark:bg-gray-800 rounded-2xl shadow-2xl p-8 max-w-md w-full relative">
                        <button onClick={toggleDarkMode} className="absolute top-4 left-4 p-2 rounded-lg bg-gray-200 dark:bg-gray-700 text-2xl hover:scale-110 transition-transform">
                            {darkMode ? 'â˜€ï¸' : 'ğŸŒ™'}
                        </button>
                        <div className="text-center mb-8">
                            <div className="text-6xl mb-4">ğŸ›’</div>
                            <h1 className="text-3xl font-bold text-gray-800 dark:text-white mb-2">×¨×©×™××ª ×§× ×™×•×ª Pro</h1>
                            <p className="text-gray-600 dark:text-gray-300">×‘×—×¨ ××ª ×”×©× ×©×œ×š</p>
                        </div>
                        <div className="space-y-3">
                            {FAMILY_MEMBERS.map(member => (
                                <button key={member.id} onClick={() => onLogin(member)}
                                    className={`w-full p-4 rounded-lg border-2 ${member.color} hover:shadow-lg hover:scale-105 transition-all font-semibold text-lg`}>
                                    {member.name}
                                </button>
                            ))}
                        </div>
                    </div>
                </div>
            );
        }

        function ShoppingList() {
            const [currentUser, setCurrentUser] = useState(null);
            const [items, setItems] = useState([]);
            const [selectedCategory, setSelectedCategory] = useState(null);
            const [searchTerm, setSearchTerm] = useState('');
            const [loading, setLoading] = useState(true);
            const [darkMode, setDarkMode] = useState(false);
            const [showFinishShopping, setShowFinishShopping] = useState(false);
            const [showHistory, setShowHistory] = useState(false);
            const [totalAmount, setTotalAmount] = useState('');
            const [history, setHistory] = useState([]);
            const [showDeleteConfirm, setShowDeleteConfirm] = useState(null);

            useEffect(() => {
                loadUserSettings();
                loadFirebaseData();
            }, []);

            const loadUserSettings = async () => {
                try {
                    const userResult = await window.storage.get('current-user');
                    const darkResult = await window.storage.get('darkMode');
                    
                    if (userResult && userResult.value) {
                        setCurrentUser(JSON.parse(userResult.value));
                    }
                    
                    if (darkResult && darkResult.value === 'true') {
                        setDarkMode(true);
                        document.documentElement.classList.add('dark');
                    }
                } catch (error) {
                    console.log('×˜×¢×™× ×” ×¨××©×•× ×™×ª');
                }
            };

            const loadFirebaseData = () => {
                if (window.db && window.firestore) {
                    const q = window.firestore.query(
                        window.firestore.collection(window.db, 'shopping-items'),
                        window.firestore.orderBy('createdAt', 'desc')
                    );
                    
                    const unsubscribe = window.firestore.onSnapshot(
                        q, 
                        (snapshot) => {
                            const itemsData = [];
                            snapshot.forEach((doc) => {
                                itemsData.push({ id: doc.id, ...doc.data() });
                            });
                            setItems(itemsData);
                            setLoading(false);
                        },
                        (error) => {
                            console.error('×©×’×™××” ×‘×˜×¢×™× ×ª × ×ª×•× ×™×:', error);
                            alert('×©×’×™××” ×‘×˜×¢×™× ×ª ×¨×©×™××ª ×”×§× ×™×•×ª. × ×¡×” ×œ×¨×¢× ×Ÿ ××ª ×”×“×£.');
                            setLoading(false);
                        }
                    );

                    loadHistory();
                    return () => unsubscribe();
                }
            };

            const loadHistory = async () => {
                try {
                    const historyQuery = window.firestore.query(
                        window.firestore.collection(window.db, 'shopping-history'),
                        window.firestore.orderBy('completedAt', 'desc')
                    );
                    const snapshot = await window.firestore.getDocs(historyQuery);
                    const historyData = [];
                    snapshot.forEach(doc => {
                        historyData.push({ id: doc.id, ...doc.data() });
                    });
                    setHistory(historyData);
                } catch (error) {
                    console.error('×©×’×™××” ×‘×˜×¢×™× ×ª ×”×™×¡×˜×•×¨×™×”:', error);
                }
            };

            const handleLogin = async (user) => {
                try {
                    await window.storage.set('current-user', JSON.stringify(user));
                    setCurrentUser(user);
                } catch (error) {
                    console.error('×©×’×™××” ×‘×©××™×¨×ª ××©×ª××©:', error);
                    setCurrentUser(user);
                }
            };

            const handleLogout = async () => {
                try {
                    await window.storage.delete('current-user');
                } catch (error) {
                    console.error('×©×’×™××” ×‘××—×™×§×ª ××©×ª××©:', error);
                }
                setCurrentUser(null);
            };

            const toggleDarkMode = async () => {
                const newMode = !darkMode;
                setDarkMode(newMode);
                try {
                    await window.storage.set('darkMode', String(newMode));
                } catch (error) {
                    console.error('×©×’×™××” ×‘×©××™×¨×ª ××¦×‘ ×ª×¦×•×’×”:', error);
                }
                document.documentElement.classList.toggle('dark');
            };

            const addProduct = async (product) => {
                try {
                    const category = selectedCategory || Object.keys(PRODUCTS).find(cat => PRODUCTS[cat].includes(product));
                    const existing = items.find(item => item.name === product && !item.purchased);
                    
                    if (existing) {
                        await window.firestore.updateDoc(
                            window.firestore.doc(window.db, 'shopping-items', existing.id),
                            { quantity: existing.quantity + 1 }
                        );
                    } else {
                        await window.firestore.addDoc(window.firestore.collection(window.db, 'shopping-items'), {
                            name: product,
                            category: category,
                            quantity: 1,
                            purchased: false,
                            addedBy: currentUser.name,
                            addedByColor: currentUser.color,
                            createdAt: new Date()
                        });
                    }
                    setSearchTerm('');
                } catch (error) {
                    console.error('×©×’×™××” ×‘×”×•×¡×¤×ª ××•×¦×¨:', error);
                    alert('×©×’×™××” ×‘×”×•×¡×¤×ª ×”××•×¦×¨. × ×¡×” ×©×•×‘.');
                }
            };

            const togglePurchased = async (id, currentStatus) => {
                try {
                    await window.firestore.updateDoc(window.firestore.doc(window.db, 'shopping-items', id), {
                        purchased: !currentStatus
                    });
                } catch (error) {
                    console.error('×©×’×™××” ×‘×¢×“×›×•×Ÿ ××•×¦×¨:', error);
                    alert('×©×’×™××” ×‘×¢×“×›×•×Ÿ. × ×¡×” ×©×•×‘.');
                }
            };

            const updateQuantity = async (id, newQuantity) => {
                try {
                    if (newQuantity < 1) {
                        setShowDeleteConfirm(id);
                    } else {
                        await window.firestore.updateDoc(window.firestore.doc(window.db, 'shopping-items', id), {
                            quantity: newQuantity
                        });
                    }
                } catch (error) {
                    console.error('×©×’×™××” ×‘×¢×“×›×•×Ÿ ×›××•×ª:', error);
                    alert('×©×’×™××” ×‘×¢×“×›×•×Ÿ ×”×›××•×ª. × ×¡×” ×©×•×‘.');
                }
            };

            const deleteItem = async (id) => {
                try {
                    await window.firestore.deleteDoc(window.firestore.doc(window.db, 'shopping-items', id));
                    setShowDeleteConfirm(null);
                } catch (error) {
                    console.error('×©×’×™××” ×‘××—×™×§×ª ××•×¦×¨:', error);
                    alert('×©×’×™××” ×‘××—×™×§×”. × ×¡×” ×©×•×‘.');
                }
            };

            const finishShopping = async () => {
                if (!totalAmount || parseFloat(totalAmount) <= 0) {
                    alert('× × ×œ×”×–×™×Ÿ ×¡×›×•× ×ª×§×™×Ÿ');
                    return;
                }

                const purchasedItems = items.filter(item => item.purchased);
                if (purchasedItems.length === 0) {
                    alert('×œ× × ×‘×—×¨×• ××•×¦×¨×™× ×©× ×§× ×•');
                    return;
                }

                try {
                    await window.firestore.addDoc(window.firestore.collection(window.db, 'shopping-history'), {
                        items: purchasedItems,
                        totalAmount: parseFloat(totalAmount),
                        completedAt: new Date(),
                        completedBy: currentUser.name
                    });

                    for (const item of purchasedItems) {
                        await window.firestore.deleteDoc(window.firestore.doc(window.db, 'shopping-items', item.id));
                    }

                    setShowFinishShopping(false);
                    setTotalAmount('');
                    loadHistory();
                } catch (error) {
                    console.error('×©×’×™××” ×‘×¡×™×•× ×§× ×™×™×”:', error);
                    alert('×©×’×™××” ×‘×©××™×¨×ª ×”×§× ×™×™×”. × ×¡×” ×©×•×‘.');
                }
            };

            const exportToWhatsApp = () => {
                const unpurchased = items.filter(item => !item.purchased);
                let text = 'ğŸ›’ ×¨×©×™××ª ×§× ×™×•×ª:\n\n';
                Object.entries(CATEGORIES).forEach(([key, cat]) => {
                    const categoryItems = unpurchased.filter(item => item.category === key);
                    if (categoryItems.length > 0) {
                        text += `${cat.icon} ${cat.name}:\n`;
                        categoryItems.forEach(item => {
                            text += `  âœ“ ${item.name} (${item.quantity})\n`;
                        });
                        text += '\n';
                    }
                });
                window.open(`https://wa.me/?text=${encodeURIComponent(text)}`, '_blank');
            };

            if (loading && !currentUser) {
                return (
                    <div className="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-indigo-950 flex items-center justify-center">
                        <div className="text-xl text-gray-600 dark:text-gray-300">×˜×•×¢×Ÿ...</div>
                    </div>
                );
            }

            if (!currentUser) return <LoginScreen onLogin={handleLogin} />;

            const filteredItems = items;
            const groupedItems = filteredItems.reduce((acc, item) => {
                if (!acc[item.category]) acc[item.category] = [];
                acc[item.category].push(item);
                return acc;
            }, {});

            const totalItems = items.reduce((sum, item) => sum + item.quantity, 0);
            const purchasedCount = items.filter(item => item.purchased).reduce((sum, item) => sum + item.quantity, 0);

            return (
                <div className="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-indigo-950 p-4">
                    
                    {showDeleteConfirm && (
                        <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
                            <div className="bg-white dark:bg-gray-800 rounded-2xl p-6 max-w-sm w-full">
                                <h2 className="text-xl font-bold text-gray-800 dark:text-white mb-4">âŒ ××—×™×§×ª ××•×¦×¨</h2>
                                <p className="text-gray-600 dark:text-gray-300 mb-6">×”×× ××ª×” ×‘×˜×•×— ×©×‘×¨×¦×•× ×š ×œ××—×•×§ ××•×¦×¨ ×–×”?</p>
                                <div className="flex gap-2">
                                    <button onClick={() => deleteItem(showDeleteConfirm)} 
                                        className="flex-1 bg-red-600 text-white px-6 py-3 rounded-lg hover:bg-red-700 font-semibold">
                                        ××—×§
                                    </button>
                                    <button onClick={() => setShowDeleteConfirm(null)}
                                        className="flex-1 px-6 py-3 bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-lg hover:bg-gray-400 dark:hover:bg-gray-500">
                                        ×‘×™×˜×•×œ
                                    </button>
                                </div>
                            </div>
                        </div>
                    )}

                    {showFinishShopping && (
                        <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
                            <div className="bg-white dark:bg-gray-800 rounded-2xl p-6 max-w-md w-full">
                                <h2 className="text-2xl font-bold text-gray-800 dark:text-white mb-4">âœ… ×¡×™×•× ×§× ×™×™×”</h2>
                                <p className="text-gray-600 dark:text-gray-300 mb-4">× ×§× ×• {purchasedCount} ×¤×¨×™×˜×™×</p>
                                <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">××” ×”×™×” ×”×¡×›×•× ×”×›×•×œ×œ? â‚ª</label>
                                <input 
                                    type="number" 
                                    value={totalAmount} 
                                    onChange={e => setTotalAmount(e.target.value)}
                                    placeholder="0"
                                    className="w-full px-4 py-3 border-2 rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white text-xl mb-4"
                                    autoFocus
                                />
                                <div className="flex gap-2">
                                    <button onClick={finishShopping} 
                                        className="flex-1 bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 font-semibold">
                                        âœ“ ×¡×™×™× ×•×©××•×¨
                                    </button>
                                    <button onClick={() => { setShowFinishShopping(false); setTotalAmount(''); }}
                                        className="px-6 py-3 bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-lg hover:bg-gray-400 dark:hover:bg-gray-500">
                                        ×‘×™×˜×•×œ
                                    </button>
                                </div>
                            </div>
                        </div>
                    )}

                    {showHistory && (
                        <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto">
                            <div className="bg-white dark:bg-gray-800 rounded-2xl p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto">
                                <div className="flex justify-between items-center mb-4">
                                    <h2 className="text-2xl font-bold text-gray-800 dark:text-white">ğŸ“Š ×”×™×¡×˜×•×¨×™×™×ª ×§× ×™×•×ª</h2>
                                    <button onClick={() => setShowHistory(false)} 
                                        className="text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 text-3xl hover:scale-110 transition-transform">Ã—</button>
                                </div>
                                {history.length === 0 ? (
                                    <div className="text-center py-12">
                                        <div className="text-6xl mb-4">ğŸ“­</div>
                                        <p className="text-gray-600 dark:text-gray-400">××™×Ÿ ×”×™×¡×˜×•×¨×™×” ×¢×“×™×™×Ÿ</p>
                                        <p className="text-sm text-gray-500 dark:text-gray-500 mt-2">×¡×™×™××• ×§× ×™×™×” ×¨××©×•× ×” ×œ×¨××•×ª ×¡×˜×˜×™×¡×˜×™×§×”</p>
                                    </div>
                                ) : (
                                    <div className="space-y-4">
                                        {history.map((record) => (
                                            <div key={record.id} className="border-2 border-gray-200 dark:border-gray-600 rounded-lg p-4 hover:shadow-lg transition-shadow">
                                                <div className="flex justify-between items-start mb-2">
                                                    <div>
                                                        <div className="text-sm text-gray-600 dark:text-gray-400 font-semibold">
                                                            ğŸ“… {record.completedAt?.toDate?.()?.toLocaleDateString('he-IL', { 
                                                                year: 'numeric', 
                                                                month: 'long', 
                                                                day: 'numeric',
                                                                weekday: 'long'
                                                            }) || '×ª××¨×™×š ×œ× ×™×“×•×¢'}
                                                        </div>
                                                        <div className="text-xs text-gray-500 dark:text-gray-500">ğŸ‘¤ {record.completedBy}</div>
                                                    </div>
                                                    <div className="text-2xl font-bold text-green-600 dark:text-green-400">
                                                        â‚ª{record.totalAmount.toFixed(2)}
                                                    </div>
                                                </div>
                                                <div className="text-sm text-gray-700 dark:text-gray-300 bg-gray-50 dark:bg-gray-700 rounded p-2">
                                                    ğŸ›’ {record.items.length} ×¤×¨×™×˜×™× â€¢ ×××•×¦×¢: â‚ª{(record.totalAmount / record.items.length).toFixed(2)} ×œ×¤×¨×™×˜
                                                </div>
                                            </div>
                                        ))}
                                        <div className="bg-gradient-to-r from-indigo-50 to-purple-50 dark:from-indigo-900/30 dark:to-purple-900/30 p-4 rounded-lg border-2 border-indigo-200 dark:border-indigo-700">
                                            <h3 className="font-bold text-gray-800 dark:text-white mb-3">ğŸ“ˆ ×¡×˜×˜×™×¡×˜×™×§×” ×›×œ×œ×™×ª</h3>
                                            <div className="space-y-2">
                                                <div className="flex justify-between text-gray-700 dark:text-gray-300">
                                                    <span>×¡×”"×› ×§× ×™×•×ª:</span>
                                                    <span className="font-bold">{history.length}</span>
                                                </div>
                                                <div className="flex justify-between text-gray-700 dark:text-gray-300">
                                                    <span>×¡×”"×› ×”×•×¦××•×ª:</span>
                                                    <span className="font-bold text-green-600 dark:text-green-400">
                                                        â‚ª{history.reduce((sum, h) => sum + h.totalAmount, 0).toFixed(2)}
                                                    </span>
                                                </div>
                                                <div className="flex justify-between text-gray-700 dark:text-gray-300">
                                                    <span>×××•×¦×¢ ×œ×§× ×™×™×”:</span>
                                                    <span className="font-bold text-blue-600 dark:text-blue-400">
                                                        â‚ª{(history.reduce((sum, h) => sum + h.totalAmount, 0) / history.length).toFixed(2)}
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                )}
                            </div>
                        </div>
                    )}
                    
                    <div className="max-w-4xl mx-auto">
                        <div className="bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 mb-6">
                            <div className="flex items-center justify-between mb-4">
                                <div className="flex items-center gap-3">
                                    <span className="text-4xl">ğŸ›’</span>
                                    <div>
                                        <h1 className="text-3xl font-bold text-gray-800 dark:text-white">×¨×©×™××ª ×§× ×™×•×ª Pro</h1>
                                        <div className="flex items-center gap-2 mt-1 flex-wrap">
                                            <span className={`px-3 py-1 rounded-full text-sm font-semibold border ${currentUser.color}`}>
                                                ğŸ‘¤ {currentUser.name}
                                            </span>
                                            <button onClick={handleLogout} className="text-gray-500 hover:text-red-600 text-sm hover:underline transition-colors">×”×—×œ×£ ××©×ª××©</button>
                                            <button onClick={toggleDarkMode} className="text-2xl hover:scale-110 transition-transform">{darkMode ? 'â˜€ï¸' : 'ğŸŒ™'}</button>
                                        </div>
                                    </div>
                                </div>
                                <button 
                                    onClick={() => document.getElementById('shopping-list-section')?.scrollIntoView({ behavior: 'smooth' })}
                                    className="flex flex-col items-center gap-1 px-4 py-2 bg-indigo-100 dark:bg-indigo-900 rounded-lg hover:bg-indigo-200 dark:hover:bg-indigo-800 transition-all hover:scale-105">
                                    <div className="text-sm text-gray-600 dark:text-gray-300">×¡×”×´×› ×¤×¨×™×˜×™×</div>
                                    <div className="text-2xl font-bold text-indigo-600 dark:text-indigo-400">{totalItems}</div>
                                    <div className="text-xs text-indigo-600 dark:text-indigo-400">ğŸ‘‡ ×œ×—×¥ ×œ×¨×©×™××”</div>
                                </button>
                            </div>

                            {totalItems > 0 && (
                                <div className="bg-gradient-to-r from-indigo-50 to-purple-50 dark:from-indigo-900/30 dark:to-purple-900/30 rounded-lg p-4 mb-4 border-2 border-indigo-200 dark:border-indigo-700">
                                    <div className="flex justify-between mb-2 text-sm">
                                        <span className="text-gray-700 dark:text-gray-300 font-semibold">×”×ª×§×“××•×ª ×§× ×™×™×”</span>
                                        <span className="font-bold text-indigo-700 dark:text-indigo-400">{purchasedCount} / {totalItems}</span>
                                    </div>
                                    <div className="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-3 overflow-hidden">
                                        <div className="bg-gradient-to-r from-indigo-600 to-purple-600 dark:from-indigo-500 dark:to-purple-500 h-3 rounded-full transition-all duration-500" 
                                            style={{ width: `${totalItems > 0 ? (purchasedCount / totalItems) * 100 : 0}%` }} />
                                    </div>
                                </div>
                            )}

                            <div className="grid grid-cols-2 gap-3">
                                <button onClick={() => purchasedCount > 0 ? setShowFinishShopping(true) : alert('××™×Ÿ ××•×¦×¨×™× ×©× ×§× ×• ×¢×“×™×™×Ÿ. ×¡××Ÿ ××•×¦×¨×™× ×©×§× ×™×ª.')}
                                    className="bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-900/30 dark:to-emerald-900/30 p-4 rounded-lg border-2 border-green-200 dark:border-green-700 hover:shadow-lg hover:scale-105 transition-all">
                                    <div className="text-sm text-gray-600 dark:text-gray-400 font-semibold">×¡×™×™× ×§× ×™×™×”</div>
                                    <div className="text-3xl font-bold text-green-600 dark:text-green-400 my-1">âœ“</div>
                                    {purchasedCount > 0 ? (
                                        <div className="text-xs text-green-600 dark:text-green-400 font-semibold">{purchasedCount} ×¤×¨×™×˜×™× × ×§× ×•</div>
                                    ) : (
                                        <div className="text-xs text-gray-500 dark:text-gray-500">×¡××Ÿ ××•×¦×¨×™× ×©×§× ×™×ª</div>
                                    )}
                                </button>
                                <button onClick={() => setShowHistory(true)}
                                    className="bg-gradient-to-br from-purple-50 to-pink-50 dark:from-purple-900/30 dark:to-pink-900/30 p-4 rounded-lg border-2 border-purple-200 dark:border-purple-700 hover:shadow-lg hover:scale-105 transition-all">
                                    <div className="text-sm text-gray-600 dark:text-gray-400 font-semibold">×”×™×¡×˜×•×¨×™×”</div>
                                    <div className="text-3xl font-bold text-purple-600 dark:text-purple-400 my-1">ğŸ“Š</div>
                                    <div className="text-xs text-purple-600 dark:text-purple-400 font-semibold">{history.length} ×§× ×™×•×ª ×§×•×“××•×ª</div>
                                </button>
                            </div>

                            {items.filter(item => !item.purchased).length > 0 && (
                                <div className="mt-4">
                                    <button onClick={exportToWhatsApp} 
                                        className="w-full bg-gradient-to-r from-green-500 to-emerald-500 text-white px-4 py-3 rounded-lg hover:from-green-600 hover:to-emerald-600 transition-all font-semibold shadow-lg hover:shadow-xl hover:scale-105">
                                        ğŸ“± ×©×ª×£ ×¨×©×™××” ×‘-WhatsApp
                                    </button>
                                </div>
                            )}
                        </div>

                        <div className="bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-4 mb-6">
                            <div className="relative">
                                <input type="text" value={searchTerm} onChange={e => setSearchTerm(e.target.value)}
                                    placeholder="ğŸ” ×—×¤×© ××•×¦×¨ ×œ×”×•×¡×¤×”..." 
                                    className="w-full px-4 py-3 pl-12 border-2 border-gray-300 dark:border-gray-600 rounded-xl dark:bg-gray-700 dark:text-white focus:border-indigo-500 dark:focus:border-indigo-400 transition-colors text-lg" />
                                {searchTerm && (
                                    <button onClick={() => setSearchTerm('')} 
                                        className="absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 text-2xl hover:scale-110 transition-transform">
                                        âœ•
                                    </button>
                                )}
                            </div>
                        </div>

                        {searchTerm && (
                            <div className="bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 mb-6">
                                <div className="flex justify-between items-center mb-4">
                                    <h2 className="text-xl font-bold dark:text-white">ğŸ” ×ª×•×¦××•×ª ×—×™×¤×•×©</h2>
                                    <button onClick={() => setSearchTerm('')} className="text-sm text-indigo-600 dark:text-indigo-400 hover:underline">× ×§×” ×—×™×¤×•×© âœ•</button>
                                </div>
                                <div className="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3">
                                    {Object.entries(PRODUCTS).flatMap(([category, products]) => 
                                        products
                                            .filter(product => product.includes(searchTerm))
                                            .map((product, idx) => (
                                                <button key={`${category}-${idx}`} onClick={() => { addProduct(product); setSelectedCategory(category); }}
                                                    className="relative bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-900/30 dark:to-emerald-900/30 p-4 rounded-xl font-medium text-sm border-2 border-green-200 dark:border-green-700 hover:shadow-lg hover:scale-105 transition-all dark:text-white group">
                                                    <div className="text-3xl mb-2 group-hover:scale-110 transition-transform">{CATEGORIES[category]?.icon}</div>
                                                    <div className="font-bold mb-1">{product}</div>
                                                    <div className="text-xs text-gray-500 dark:text-gray-400 bg-white dark:bg-gray-800 px-2 py-1 rounded-full">
                                                        {CATEGORIES[category]?.name}
                                                    </div>
                                                    <div className="absolute top-2 right-2 bg-green-500 text-white text-xl rounded-full w-8 h-8 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity shadow-lg">
                                                        +
                                                    </div>
                                                </button>
                                            ))
                                    )}
                                </div>
                                {Object.entries(PRODUCTS).flatMap(([_, products]) => products.filter(p => p.includes(searchTerm))).length === 0 && (
                                    <div className="text-center py-8">
                                        <div className="text-6xl mb-4">ğŸ”</div>
                                        <p className="text-gray-500 dark:text-gray-400 text-lg">×œ× × ××¦××• ××•×¦×¨×™× ×”×ª×•×××™× "<span className="font-bold">{searchTerm}</span>"</p>
                                        <p className="text-sm text-gray-400 dark:text-gray-500 mt-2">× ×¡×” ×—×™×¤×•×© ××—×¨ ××• ×‘×—×¨ ×§×˜×’×•×¨×™×”</p>
                                    </div>
                                )}
                            </div>
                        )}

                        {!selectedCategory && !searchTerm ? (
                            <div className="bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 mb-6">
                                <h2 className="text-2xl font-bold text-center mb-2 dark:text-white">ğŸ·ï¸ ×‘×—×¨ ×§×˜×’×•×¨×™×”</h2>
                                <p className="text-center text-gray-500 dark:text-gray-400 text-sm mb-6">××• ×”×©×ª××© ×‘×—×™×¤×•×© ×œ××¢×œ×” ×œ××¦×™××” ××”×™×¨×”</p>
                                <div className="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4">
                                    {Object.entries(CATEGORIES).map(([key, cat]) => {
                                        const count = items.filter(item => item.category === key && !item.purchased).length;
                                        return (
                                            <button 
                                                key={key} 
                                                onClick={() => setSelectedCategory(key)}
                                                className="relative bg-gradient-to-br from-indigo-50 via-blue-50 to-purple-50 dark:from-indigo-900/30 dark:via-blue-900/30 dark:to-purple-900/30 p-6 rounded-2xl border-2 border-indigo-200 dark:border-indigo-700 hover:shadow-xl hover:scale-105 transition-all duration-300 group"
                                            >
                                                <div className="text-5xl mb-3 group-hover:scale-125 group-hover:rotate-12 transition-all duration-300">{cat.icon}</div>
                                                <div className="text-sm font-bold dark:text-white">{cat.name}</div>
                                                {count > 0 && (
                                                    <div className="absolute top-2 left-2 bg-gradient-to-r from-red-500 to-pink-500 text-white text-xs font-bold rounded-full w-7 h-7 flex items-center justify-center shadow-lg animate-pulse">
                                                        {count}
                                                    </div>
                                                )}
                                            </button>
                                        );
                                    })}
                                </div>
                            </div>
                        ) : selectedCategory && !searchTerm && (
                            <div className="bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 mb-6">
                                <div className="flex justify-between items-center mb-6">
                                    <button onClick={() => setSelectedCategory(null)}
                                        className="text-indigo-600 dark:text-indigo-400 font-semibold hover:underline hover:scale-105 transition-transform">â† ×—×–×•×¨ ×œ×§×˜×’×•×¨×™×•×ª</button>
                                    <h2 className="text-2xl font-bold flex items-center gap-2 dark:text-white">
                                        <span className="text-4xl">{CATEGORIES[selectedCategory].icon}</span>
                                        {CATEGORIES[selectedCategory].name}
                                    </h2>
                                    <div className="w-32"></div>
                                </div>
                                
                                <div className="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3">
                                    {PRODUCTS[selectedCategory]?.map((product, idx) => (
                                        <button key={idx} onClick={() => addProduct(product)}
                                            className="relative bg-gradient-to-br from-green-50 via-emerald-50 to-teal-50 dark:from-green-900/30 dark:via-emerald-900/30 dark:to-teal-900/30 p-4 rounded-xl font-medium text-sm border-2 border-green-200 dark:border-green-700 hover:shadow-lg hover:scale-105 transition-all duration-300 dark:text-white group overflow-hidden">
                                            <div className="absolute inset-0 bg-gradient-to-r from-green-400/0 via-green-400/20 to-green-400/0 transform -translate-x-full group-hover:translate-x-full transition-transform duration-700"></div>
                                            <div className="relative">
                                                <div className="text-3xl mb-2 group-hover:scale-110 transition-transform">â•</div>
                                                <div className="font-bold">{product}</div>
                                            </div>
                                        </button>
                                    ))}
                                </div>
                            </div>
                        )}

                        {filteredItems.length > 0 && (
                            <div id="shopping-list-section" className="bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 mb-6">
                                <h2 className="text-2xl font-bold mb-4 dark:text-white flex items-center gap-2">
                                    ğŸ“ ×”×¨×©×™××” ×©×œ× ×• ({filteredItems.length})
                                </h2>
                                {Object.entries(groupedItems).map(([category, categoryItems]) => (
                                    <div key={category} className="mb-6">
                                        <h3 className="text-lg font-bold text-indigo-700 dark:text-indigo-400 mb-3 pb-2 border-b-2 border-indigo-200 dark:border-indigo-700 flex items-center gap-2">
                                            <span className="text-2xl">{CATEGORIES[category]?.icon}</span>
                                            {CATEGORIES[category]?.name} ({categoryItems.length})
                                        </h3>
                                        {categoryItems.map(item => (
                                            <div key={item.id} className={`flex items-center gap-3 p-3 rounded-lg mb-2 transition-all ${item.purchased ? 'bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 border-2 border-green-200 dark:border-green-700' : 'bg-gray-50 dark:bg-gray-700 border-2 border-gray-200 dark:border-gray-600'}`}>
                                                <button onClick={() => togglePurchased(item.id, item.purchased)}
                                                    className={`w-6 h-6 rounded-full border-2 flex items-center justify-center flex-shrink-0 transition-all ${item.purchased ? 'bg-green-500 border-green-500 scale-110' : 'border-gray-300 dark:border-gray-500 hover:border-green-400'}`}>
                                                    {item.purchased && <span className="text-white text-xs">âœ“</span>}
                                                </button>
                                                <div className="flex-1 min-w-0">
                                                    <span className={`font-medium ${item.purchased ? 'text-gray-500 dark:text-gray-400 line-through' : 'text-gray-800 dark:text-white'}`}>
                                                        {item.name}
                                                    </span>
                                                    {item.addedBy && (
                                                        <span className={`text-xs px-2 py-0.5 rounded-full border ml-2 ${item.addedByColor}`}>
                                                            {item.addedBy}
                                                        </span>
                                                    )}
                                                </div>
                                                <div className="flex items-center gap-2 flex-shrink-0">
                                                    <button onClick={() => updateQuantity(item.id, item.quantity - 1)}
                                                        className="w-8 h-8 bg-gray-200 dark:bg-gray-600 rounded-lg font-bold hover:bg-gray-300 dark:hover:bg-gray-500 transition-colors">-</button>
                                                    <span className="w-12 text-center font-bold text-indigo-600 dark:text-indigo-400">{item.quantity}</span>
                                                    <button onClick={() => updateQuantity(item.id, item.quantity + 1)}
                                                        className="w-8 h-8 bg-indigo-100 dark:bg-indigo-900 rounded-lg font-bold hover:bg-indigo-200 dark:hover:bg-indigo-800 transition-colors">+</button>
                                                </div>
                                                <button onClick={() => setShowDeleteConfirm(item.id)}
                                                    className="w-8 h-8 bg-red-100 dark:bg-red-900 rounded-lg text-red-600 dark:text-red-400 hover:bg-red-200 dark:hover:bg-red-800 flex-shrink-0 transition-colors">ğŸ—‘</button>
                                            </div>
                                        ))}
                                    </div>
                                ))}
                            </div>
                        )}

                        {filteredItems.length === 0 && !searchTerm && (
                            <div className="bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-12 text-center">
                                <div className="text-6xl mb-4">ğŸ›’</div>
                                <p className="text-xl text-gray-600 dark:text-gray-400 font-bold">×”×¨×©×™××” ×¨×™×§×”</p>
                                <p className="text-sm text-gray-500 dark:text-gray-500 mt-2">×”×ª×—×œ ×œ×”×•×¡×™×£ ××•×¦×¨×™× ××”×§×˜×’×•×¨×™×•×ª ××• ×“×¨×š ×”×—×™×¤×•×©</p>
                            </div>
                        )}
                    </div>
                </div>
            );
        }

        ReactDOM.render(<ShoppingList />, document.getElementById('root'));
    </script>
</body>
</html>
